<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resources/config.js"></script>
<script type="text/javascript" src="resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/logsem/clutch">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler</h1>

<div class="code">
</div>

<div class="doc">
<a id="lab37"></a><h1 class="section">Examples related to rejection samplers with a bounded number of attempts</h1>

</div>
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch.eris</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="clutch.eris.eris.html#"><span class="id" title="library">eris</span></a> <a class="idref" href="clutch.eris.error_rules.html#"><span class="id" title="library">error_rules</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch.eris</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#"><span class="id" title="library">examples.approximate_samplers.approx_sampler_lib</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coquelicot</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coquelicot.saclay.inria.fr/html//Coquelicot.Series.html#"><span class="id" title="library">Series</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.micromega.Lra.html#"><span class="id" title="library">Lra</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="spec" class="idref" href="#spec"><span class="id" title="section">spec</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="erisGS0:2" class="idref" href="#erisGS0:2"><span class="id" title="binder">!</span></a><a id="erisGS0:2" class="idref" href="#erisGS0:2"><span class="id" title="binder">erisGS</span></a> <a id="0101b9beac487b383a5ba2a8f6922788" class="idref" href="#0101b9beac487b383a5ba2a8f6922788"><span class="id" title="binder"><span id="erisGS0:2" class="id">Œ£</span></span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Spec&nbsp;for&nbsp;samplers&nbsp;which&nbsp;need&nbsp;to&nbsp;amplify&nbsp;some&nbsp;number&nbsp;of&nbsp;times,&nbsp;and&nbsp;then&nbsp;spend.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;In&nbsp;particular,&nbsp;this&nbsp;is&nbsp;a&nbsp;spec&nbsp;for&nbsp;bounded&nbsp;samplers.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="bounded_sampling_scheme_spec" class="idref" href="#bounded_sampling_scheme_spec"><span class="id" title="definition">bounded_sampling_scheme_spec</span></a> (<a id="sampler:3" class="idref" href="#sampler:3"><span class="id" title="binder">sampler</span></a> <a id="checker:4" class="idref" href="#checker:4"><span class="id" title="binder">checker</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) <a id="7056ad417b691e0d6aa98ee58f4dc43a" class="idref" href="#7056ad417b691e0d6aa98ee58f4dc43a"><span class="id" title="binder">ùúÄ</span></a><a id="7056ad417b691e0d6aa98ee58f4dc43a" class="idref" href="#7056ad417b691e0d6aa98ee58f4dc43a"><span class="id" title="binder">factor</span></a> <a id="f6f6765e60a4b997c01ca816ab6e3c28" class="idref" href="#f6f6765e60a4b997c01ca816ab6e3c28"><span class="id" title="binder">ùúÄ</span></a><a id="f6f6765e60a4b997c01ca816ab6e3c28" class="idref" href="#f6f6765e60a4b997c01ca816ab6e3c28"><span class="id" title="binder">final</span></a> <a id="E:7" class="idref" href="#E:7"><span class="id" title="binder">E</span></a> <a id="621ac7ecc7e225ecb7be181c122b0070" class="idref" href="#621ac7ecc7e225ecb7be181c122b0070"><span class="id" title="binder">Œò</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#fd691a1eb8e2e5d8720093e5536d6f6f"><span class="id" title="variable">Œ£</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">‚àÄ</span></a> <a id="c71081c2fce1d31e9df8c06de9ed1802" class="idref" href="#c71081c2fce1d31e9df8c06de9ed1802"><span class="id" title="binder">ùúÄ</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">[[{</span></a> <a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">‚ÜØ</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#c71081c2fce1d31e9df8c06de9ed1802"><span class="id" title="variable">ùúÄ</span></a> <a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">}</span></a><a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">]]</span></a><br/>
            ((<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#sampler:3"><span class="id" title="variable">sampler</span></a>) <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>)%<span class="id" title="var">E</span> <a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#E:7"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">[[{</span></a> <a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">(</span></a><a id="v:10" class="idref" href="#v:10"><span class="id" title="binder">v</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a><a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">),</span></a> <a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">RET</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v:10"><span class="id" title="variable">v</span></a><a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#df8727fb8673700193f111b03d29db4e"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">WP</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">(</span></a>(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#checker:4"><span class="id" title="variable">checker</span></a>) <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v:10"><span class="id" title="variable">v</span></a><a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#E:7"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">[{</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">Œª</span></a> <a id="v':11" class="idref" href="#v':11"><span class="id" title="binder">v'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">‚åú</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v':11"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">‚åù</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">‚àó</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#621ac7ecc7e225ecb7be181c122b0070"><span class="id" title="variable">Œò</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v:10"><span class="id" title="variable">v</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">}]</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#df8727fb8673700193f111b03d29db4e"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#df8727fb8673700193f111b03d29db4e"><span class="id" title="notation">‚à®</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#df8727fb8673700193f111b03d29db4e"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">‚àÉ</span></a> <a id="318a3fb050b868ea827fe9f4fe7f32e5" class="idref" href="#318a3fb050b868ea827fe9f4fe7f32e5"><span class="id" title="binder">ùúÄ'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">‚ÜØ</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#318a3fb050b868ea827fe9f4fe7f32e5"><span class="id" title="variable">ùúÄ'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">‚àó</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">‚åú</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#c71081c2fce1d31e9df8c06de9ed1802"><span class="id" title="variable">ùúÄ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#318a3fb050b868ea827fe9f4fe7f32e5"><span class="id" title="variable">ùúÄ'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#7056ad417b691e0d6aa98ee58f4dc43a"><span class="id" title="variable">ùúÄ</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#7056ad417b691e0d6aa98ee58f4dc43a"><span class="id" title="variable">factor</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">‚åù</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">‚àó</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">WP</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">(</span></a>(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#checker:4"><span class="id" title="variable">checker</span></a>) <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v:10"><span class="id" title="variable">v</span></a><a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#E:7"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">[{</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">Œª</span></a> <a id="v':13" class="idref" href="#v':13"><span class="id" title="binder">v'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">‚åú</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v':13"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">‚åù</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#df8727fb8673700193f111b03d29db4e"><span class="id" title="notation">‚à®</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#df8727fb8673700193f111b03d29db4e"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">‚åú</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v':13"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">‚åù</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">‚àó</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#621ac7ecc7e225ecb7be181c122b0070"><span class="id" title="variable">Œò</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v:10"><span class="id" title="variable">v</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#df8727fb8673700193f111b03d29db4e"><span class="id" title="notation">)</span></a><a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">}]</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#df8727fb8673700193f111b03d29db4e"><span class="id" title="notation">)</span></a><a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">)}]]</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">‚àó</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">‚àÄ</span></a> <a id="v:14" class="idref" href="#v:14"><span class="id" title="binder">v</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">[[{</span></a> <a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">‚ÜØ</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#f6f6765e60a4b997c01ca816ab6e3c28"><span class="id" title="variable">ùúÄ</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#f6f6765e60a4b997c01ca816ab6e3c28"><span class="id" title="variable">final</span></a> <a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">}</span></a><a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">]]</span></a><br/>
            <a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">(</span></a>(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#sampler:3"><span class="id" title="variable">sampler</span></a>) <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v:14"><span class="id" title="variable">v</span></a><a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#E:7"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">[[{</span></a> <a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">(</span></a><a id="v':15" class="idref" href="#v':15"><span class="id" title="binder">v'</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a><a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">),</span></a> <a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">RET</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v':15"><span class="id" title="variable">v'</span></a><a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">WP</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">(</span></a>(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#checker:4"><span class="id" title="variable">checker</span></a>) <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v':15"><span class="id" title="variable">v'</span></a><a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#E:7"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">[{</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">Œª</span></a> <a id="v'':16" class="idref" href="#v'':16"><span class="id" title="binder">v''</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">‚åú</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v'':16"><span class="id" title="variable">v''</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">‚åù</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">‚àó</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#621ac7ecc7e225ecb7be181c122b0070"><span class="id" title="variable">Œò</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v':15"><span class="id" title="variable">v'</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">}]</span></a><a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">)}]]</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">I</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Easier&nbsp;to&nbsp;explain&nbsp;spec.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;is&nbsp;allowed&nbsp;to&nbsp;wait&nbsp;arbitrarily&nbsp;long&nbsp;before&nbsp;spending,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;thus&nbsp;can&nbsp;wait&nbsp;to&nbsp;spend&nbsp;credit&nbsp;‚ÜØ1.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="sampling_scheme_spec" class="idref" href="#sampling_scheme_spec"><span class="id" title="definition">sampling_scheme_spec</span></a> (<a id="sampler:17" class="idref" href="#sampler:17"><span class="id" title="binder">sampler</span></a> <a id="checker:18" class="idref" href="#checker:18"><span class="id" title="binder">checker</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) <a id="e2763dc1155a10c49e8b8bde41b82b52" class="idref" href="#e2763dc1155a10c49e8b8bde41b82b52"><span class="id" title="binder">Œµfactor</span></a> <a id="E:20" class="idref" href="#E:20"><span class="id" title="binder">E</span></a> <a id="2398acea8a252acbee7a60f96035387c" class="idref" href="#2398acea8a252acbee7a60f96035387c"><span class="id" title="binder">Œò</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#fd691a1eb8e2e5d8720093e5536d6f6f"><span class="id" title="variable">Œ£</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">‚àÄ</span></a> <a id="1c5437534e3176ae6f9e5a3b533b5b63" class="idref" href="#1c5437534e3176ae6f9e5a3b533b5b63"><span class="id" title="binder">Œµ</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">[[{</span></a> <a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">‚ÜØ</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#1c5437534e3176ae6f9e5a3b533b5b63"><span class="id" title="variable">Œµ</span></a> <a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">}</span></a><a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">]]</span></a><br/>
            ((<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#sampler:17"><span class="id" title="variable">sampler</span></a>) <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>)%<span class="id" title="var">E</span> <a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#E:20"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">[[{</span></a> <a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">(</span></a><a id="v:23" class="idref" href="#v:23"><span class="id" title="binder">v</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a><a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">),</span></a> <a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">RET</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v:23"><span class="id" title="variable">v</span></a><a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#df8727fb8673700193f111b03d29db4e"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">WP</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">(</span></a>(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#checker:18"><span class="id" title="variable">checker</span></a>) <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v:23"><span class="id" title="variable">v</span></a><a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#E:20"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">[{</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">Œª</span></a> <a id="v':24" class="idref" href="#v':24"><span class="id" title="binder">v'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">‚åú</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v':24"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">‚åù</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">‚àó</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#2398acea8a252acbee7a60f96035387c"><span class="id" title="variable">Œò</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v:23"><span class="id" title="variable">v</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">}]</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#df8727fb8673700193f111b03d29db4e"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#df8727fb8673700193f111b03d29db4e"><span class="id" title="notation">‚à®</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#df8727fb8673700193f111b03d29db4e"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">‚àÉ</span></a> <a id="74a1db0c00ffeee952520ec2843cfe75" class="idref" href="#74a1db0c00ffeee952520ec2843cfe75"><span class="id" title="binder">Œµ'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">‚ÜØ</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#74a1db0c00ffeee952520ec2843cfe75"><span class="id" title="variable">Œµ'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">‚àó</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">‚åú</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#1c5437534e3176ae6f9e5a3b533b5b63"><span class="id" title="variable">Œµ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#74a1db0c00ffeee952520ec2843cfe75"><span class="id" title="variable">Œµ'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#e2763dc1155a10c49e8b8bde41b82b52"><span class="id" title="variable">Œµfactor</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">‚åù</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">‚àó</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">WP</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">(</span></a>(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#checker:18"><span class="id" title="variable">checker</span></a>) <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v:23"><span class="id" title="variable">v</span></a><a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#E:20"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">[{</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">Œª</span></a> <a id="v':26" class="idref" href="#v':26"><span class="id" title="binder">v'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">‚åú</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v':26"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">‚åù</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#df8727fb8673700193f111b03d29db4e"><span class="id" title="notation">‚à®</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#df8727fb8673700193f111b03d29db4e"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">‚åú</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v':26"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">‚åù</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">‚àó</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#2398acea8a252acbee7a60f96035387c"><span class="id" title="variable">Œò</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v:23"><span class="id" title="variable">v</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#df8727fb8673700193f111b03d29db4e"><span class="id" title="notation">)</span></a><a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">}]</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#df8727fb8673700193f111b03d29db4e"><span class="id" title="notation">)</span></a><a class="idref" href="clutch.bi.weakestpre.html#2c01878e67c9d94e25512093dc6f07be"><span class="id" title="notation">)}]]</span></a>)%<span class="id" title="var">I</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="unbounded_scheme_implies_bounded" class="idref" href="#unbounded_scheme_implies_bounded"><span class="id" title="definition">unbounded_scheme_implies_bounded</span></a> <a id="sampler:27" class="idref" href="#sampler:27"><span class="id" title="binder">sampler</span></a> <a id="checker:28" class="idref" href="#checker:28"><span class="id" title="binder">checker</span></a> (<a id="c795158b6f68ed6008477a14bb30db68" class="idref" href="#c795158b6f68ed6008477a14bb30db68"><span class="id" title="binder">Œµfactor</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#nonnegreal"><span class="id" title="record">nonnegreal</span></a>) <a id="E:30" class="idref" href="#E:30"><span class="id" title="binder">E</span></a> <a id="af645202ccb1b683bc0a7d8c3dbb2884" class="idref" href="#af645202ccb1b683bc0a7d8c3dbb2884"><span class="id" title="binder">Œò</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">‚ä¢</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#sampling_scheme_spec"><span class="id" title="definition">sampling_scheme_spec</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#sampler:27"><span class="id" title="variable">sampler</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#checker:28"><span class="id" title="variable">checker</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#c795158b6f68ed6008477a14bb30db68"><span class="id" title="variable">Œµfactor</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#E:30"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#af645202ccb1b683bc0a7d8c3dbb2884"><span class="id" title="variable">Œò</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-‚àó</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#bounded_sampling_scheme_spec"><span class="id" title="definition">bounded_sampling_scheme_spec</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#sampler:27"><span class="id" title="variable">sampler</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#checker:28"><span class="id" title="variable">checker</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#c795158b6f68ed6008477a14bb30db68"><span class="id" title="variable">Œµfactor</span></a> <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_one"><span class="id" title="definition">nnreal_one</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#E:30"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#af645202ccb1b683bc0a7d8c3dbb2884"><span class="id" title="variable">Œò</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "?".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span>; <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (? ?) "!&gt; ?".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExFalso</span>; <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.error_credits.html#ec_spend"><span class="id" title="lemma">ec_spend</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#spec"><span class="id" title="section">spec</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="safety" class="idref" href="#safety"><span class="id" title="section">safety</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="erisGS0:33" class="idref" href="#erisGS0:33"><span class="id" title="binder">!</span></a><a id="erisGS0:33" class="idref" href="#erisGS0:33"><span class="id" title="binder">erisGS</span></a> <a id="1beca3efe5883c5b6c82a78600a11ca9" class="idref" href="#1beca3efe5883c5b6c82a78600a11ca9"><span class="id" title="binder"><span id="erisGS0:33" class="id">Œ£</span></span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;safety&nbsp;for&nbsp;higher-order&nbsp;bounded&nbsp;rejection&nbsp;samplers&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ho_bounded_approx_safe" class="idref" href="#ho_bounded_approx_safe"><span class="id" title="lemma">ho_bounded_approx_safe</span></a> (<a id="sampler:34" class="idref" href="#sampler:34"><span class="id" title="binder">sampler</span></a> <a id="checker:35" class="idref" href="#checker:35"><span class="id" title="binder">checker</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) (<a id="r:36" class="idref" href="#r:36"><span class="id" title="binder">r</span></a> <a id="d500ffeb9e1a4b94a2dc103935632e76" class="idref" href="#d500ffeb9e1a4b94a2dc103935632e76"><span class="id" title="binder">Œµfinal</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#nonnegreal"><span class="id" title="record">nonnegreal</span></a>) (<a id="depth:38" class="idref" href="#depth:38"><span class="id" title="binder">depth</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="E:39" class="idref" href="#E:39"><span class="id" title="binder">E</span></a> <a id="bd4a67519899d63983390d8d402afaff" class="idref" href="#bd4a67519899d63983390d8d402afaff"><span class="id" title="binder">Œò</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a>0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#r:36"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> 1<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a>0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#d500ffeb9e1a4b94a2dc103935632e76"><span class="id" title="variable">Œµfinal</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> 1<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#bounded_sampling_scheme_spec"><span class="id" title="definition">bounded_sampling_scheme_spec</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#sampler:34"><span class="id" title="variable">sampler</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#checker:35"><span class="id" title="variable">checker</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#r:36"><span class="id" title="variable">r</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#d500ffeb9e1a4b94a2dc103935632e76"><span class="id" title="variable">Œµfinal</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#E:39"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#bd4a67519899d63983390d8d402afaff"><span class="id" title="variable">Œò</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-‚àó</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">‚ÜØ</span></a> <a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#generic_geometric_error"><span class="id" title="definition">generic_geometric_error</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#r:36"><span class="id" title="variable">r</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#d500ffeb9e1a4b94a2dc103935632e76"><span class="id" title="variable">Œµfinal</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#depth:38"><span class="id" title="variable">depth</span></a><a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-‚àó</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">WP</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#gen_bounded_rejection_sampler"><span class="id" title="definition">gen_bounded_rejection_sampler</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#depth:38"><span class="id" title="variable">depth</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#sampler:34"><span class="id" title="variable">sampler</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#checker:35"><span class="id" title="variable">checker</span></a><a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#E:39"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">[{</span></a> <span class="id" title="keyword">fun</span> <a id="v:41" class="idref" href="#v:41"><span class="id" title="binder">v</span></a> =&gt; <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#bd4a67519899d63983390d8d402afaff"><span class="id" title="variable">Œò</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v:41"><span class="id" title="variable">v</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">}]</span></a>)%<span class="id" title="var">I</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;initial&nbsp;setup&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#sampling_scheme_spec"><span class="id" title="definition">sampling_scheme_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> ([<span class="id" title="var">Hr_pos</span> <span class="id" title="var">Hr</span>] [<span class="id" title="var">HŒµfinal_pos</span> <span class="id" title="var">HŒµfinal</span>]) "(#Hamplify&amp;#Haccept) Hcr".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#gen_bounded_rejection_sampler"><span class="id" title="definition">gen_bounded_rejection_sampler</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 9 <span class="id" title="var">wp_pure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> <span class="id" title="var">depth</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">depth'</span> <span class="id" title="var">Hdepth'</span>] "IH".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">wp_pures</span>; <span class="id" title="var">wp_bind</span> (<span class="id" title="var">sampler</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>)%<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Haccept" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[Hcr]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.error_credits.html#ec_weaken"><span class="id" title="lemma">ec_weaken</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hcr"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#generic_geometric_error"><span class="id" title="definition">generic_geometric_error</span></a> /=; <span class="id" title="var">lra</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">next_sample</span>) "Hcheck_accept".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>; <span class="id" title="var">wp_bind</span> (<span class="id" title="var">checker</span> <span class="id" title="var">next_sample</span>)%<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.total_weakestpre.html#tgl_wp_wand"><span class="id" title="lemma">tgl_wp_wand</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hcheck_accept"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "(#-&gt; &amp; ?)"; <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>; <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>; <span class="id" title="var">last</span> (<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_false"><span class="id" title="lemma">bool_decide_eq_false</span></a>; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>; <span class="id" title="var">wp_bind</span> (<span class="id" title="var">sampler</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>)%<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"Hamplify" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#generic_geometric_error"><span class="id" title="definition">generic_geometric_error</span></a> <span class="id" title="var">r</span> <span class="id" title="var">Œµfinal</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">depth'</span>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "Hcr"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">next_sample</span>) "[Hcheck_accept|[%Œµ'(Hcr&amp;%HŒµ'&amp;Hcheck_reject)]]"; <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">wp_bind</span> (<span class="id" title="var">checker</span> <span class="id" title="var">next_sample</span>)%<span class="id" title="var">V</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.total_weakestpre.html#tgl_wp_wand"><span class="id" title="lemma">tgl_wp_wand</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hcheck_accept"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "(#-&gt; &amp; ?)"; <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>; <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">wp_bind</span> (<span class="id" title="var">checker</span> <span class="id" title="var">next_sample</span>)%<span class="id" title="var">V</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.total_weakestpre.html#tgl_wp_wand"><span class="id" title="lemma">tgl_wp_wand</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hcheck_reject"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "Hresult".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSpecialize</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"IH" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[Hcr]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.error_credits.html#ec_spend_le_irrel"><span class="id" title="lemma">ec_spend_le_irrel</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hcr"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#generic_geometric_error"><span class="id" title="definition">generic_geometric_error</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_le_reg_r"><span class="id" title="lemma">Rmult_le_reg_r</span></a> <span class="id" title="var">r</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#generic_geometric_error"><span class="id" title="definition">generic_geometric_error</span></a> /=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" title="lemma">Rmult_comm</span></a> <span class="id" title="var">r</span> <span class="id" title="var">_</span>) -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" title="lemma">Rmult_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HŒµ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iDestruct</span> "Hresult" <span class="id" title="keyword">as</span> "[-&gt; | (-&gt; &amp; ?)]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">do</span> 2 <span class="id" title="var">wp_pure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iClear</span> "#".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">depth'</span>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1<a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">depth'</span><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a>; [| <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">f_equal</span>; <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "IH". }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">wp_pures</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;safety&nbsp;for&nbsp;higher-order&nbsp;unbounded&nbsp;rejection&nbsp;samplers&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ho_ubdd_approx_safe" class="idref" href="#ho_ubdd_approx_safe"><span class="id" title="lemma">ho_ubdd_approx_safe</span></a> (<a id="sampler:42" class="idref" href="#sampler:42"><span class="id" title="binder">sampler</span></a> <a id="checker:43" class="idref" href="#checker:43"><span class="id" title="binder">checker</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) (<a id="r:44" class="idref" href="#r:44"><span class="id" title="binder">r</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#nonnegreal"><span class="id" title="record">nonnegreal</span></a>) (<a id="depth:45" class="idref" href="#depth:45"><span class="id" title="binder">depth</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="E:46" class="idref" href="#E:46"><span class="id" title="binder">E</span></a> <a id="2ce81d995bf0c38f985c207cce3807c0" class="idref" href="#2ce81d995bf0c38f985c207cce3807c0"><span class="id" title="binder">Œò</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a>0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#r:44"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> 1<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#sampling_scheme_spec"><span class="id" title="definition">sampling_scheme_spec</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#sampler:42"><span class="id" title="variable">sampler</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#checker:43"><span class="id" title="variable">checker</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#r:44"><span class="id" title="variable">r</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#E:46"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#2ce81d995bf0c38f985c207cce3807c0"><span class="id" title="variable">Œò</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-‚àó</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">‚ÜØ</span></a> <a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#generic_geometric_error"><span class="id" title="definition">generic_geometric_error</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#r:44"><span class="id" title="variable">r</span></a> <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_one"><span class="id" title="definition">nnreal_one</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#depth:45"><span class="id" title="variable">depth</span></a><a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-‚àó</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">WP</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#gen_rejection_sampler"><span class="id" title="definition">gen_rejection_sampler</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#sampler:42"><span class="id" title="variable">sampler</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#checker:43"><span class="id" title="variable">checker</span></a><a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#E:46"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">[{</span></a> <span class="id" title="keyword">fun</span> <a id="v:48" class="idref" href="#v:48"><span class="id" title="binder">v</span></a> =&gt; <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#2ce81d995bf0c38f985c207cce3807c0"><span class="id" title="variable">Œò</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v:48"><span class="id" title="variable">v</span></a> <a class="idref" href="clutch.bi.weakestpre.html#af3e5fae19739665a91d9c2915a77ce8"><span class="id" title="notation">}]</span></a>)%<span class="id" title="var">I</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#sampling_scheme_spec"><span class="id" title="definition">sampling_scheme_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> ([<span class="id" title="var">Hr_pos</span> <span class="id" title="var">Hr</span>]) "#Hamplify Hcr".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#gen_rejection_sampler"><span class="id" title="definition">gen_rejection_sampler</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 7 <span class="id" title="var">wp_pure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> <span class="id" title="var">depth</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">depth'</span> <span class="id" title="var">Hdepth'</span>] "IH".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">wp_pures</span>; <span class="id" title="var">wp_bind</span> (<span class="id" title="var">sampler</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>)%<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExFalso</span>; <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.error_credits.html#ec_spend"><span class="id" title="lemma">ec_spend</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#generic_geometric_error"><span class="id" title="definition">generic_geometric_error</span></a> /=; <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>; <span class="id" title="var">wp_bind</span> (<span class="id" title="var">sampler</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>)%<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"Hamplify" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#generic_geometric_error"><span class="id" title="definition">generic_geometric_error</span></a> <span class="id" title="var">r</span> <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_one"><span class="id" title="definition">nnreal_one</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">depth'</span>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "Hcr"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">next_sample</span>) "[Hcheck_accept|[%Œµ'(Hcr&amp;%HŒµ'&amp;Hcheck_reject)]]"; <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">wp_bind</span> (<span class="id" title="var">checker</span> <span class="id" title="var">next_sample</span>)%<span class="id" title="var">V</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.total_weakestpre.html#tgl_wp_wand"><span class="id" title="lemma">tgl_wp_wand</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hcheck_accept"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "(#-&gt; &amp; ?)"; <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>; <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">wp_bind</span> (<span class="id" title="var">checker</span> <span class="id" title="var">next_sample</span>)%<span class="id" title="var">V</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.total_weakestpre.html#tgl_wp_wand"><span class="id" title="lemma">tgl_wp_wand</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hcheck_reject"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "Hresult".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSpecialize</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"IH" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[Hcr]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.error_credits.html#ec_spend_le_irrel"><span class="id" title="lemma">ec_spend_le_irrel</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hcr"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#generic_geometric_error"><span class="id" title="definition">generic_geometric_error</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_le_reg_r"><span class="id" title="lemma">Rmult_le_reg_r</span></a> <span class="id" title="var">r</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#generic_geometric_error"><span class="id" title="definition">generic_geometric_error</span></a> /=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" title="lemma">Rmult_comm</span></a> <span class="id" title="var">r</span> <span class="id" title="var">_</span>) -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" title="lemma">Rmult_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HŒµ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iDestruct</span> "Hresult" <span class="id" title="keyword">as</span> "[-&gt; | (-&gt; &amp; ?)]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">wp_pure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iClear</span> "#".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">depth'</span>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1<a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">depth'</span><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a>; [| <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">f_equal</span>; <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "IH". }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">wp_pures</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Limiting argument: any amount of credit suffices to show the unbounded sampler is safe 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ho_ubdd_safe" class="idref" href="#ho_ubdd_safe"><span class="id" title="lemma">ho_ubdd_safe</span></a> (<a id="sampler:49" class="idref" href="#sampler:49"><span class="id" title="binder">sampler</span></a> <a id="checker:50" class="idref" href="#checker:50"><span class="id" title="binder">checker</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) (<a id="r:51" class="idref" href="#r:51"><span class="id" title="binder">r</span></a> <a id="10b735209b466b907e41ce2d93741b3d" class="idref" href="#10b735209b466b907e41ce2d93741b3d"><span class="id" title="binder">Œµ</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#nonnegreal"><span class="id" title="record">nonnegreal</span></a>) <a id="E:53" class="idref" href="#E:53"><span class="id" title="binder">E</span></a> <a id="c455d6948a3007a65ef9289b4613004d" class="idref" href="#c455d6948a3007a65ef9289b4613004d"><span class="id" title="binder">Œò</span></a> <a class="idref" href="clutch.prob_lang.wp_tactics.html#wptac_mapsto"><span class="id" title="method">:</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a>0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#r:51"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> 1<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#10b735209b466b907e41ce2d93741b3d"><span class="id" title="variable">Œµ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">‚ä¢</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#sampling_scheme_spec"><span class="id" title="definition">sampling_scheme_spec</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#sampler:49"><span class="id" title="variable">sampler</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#checker:50"><span class="id" title="variable">checker</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#r:51"><span class="id" title="variable">r</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#E:53"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#c455d6948a3007a65ef9289b4613004d"><span class="id" title="variable">Œò</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-‚àó</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">‚ÜØ</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#10b735209b466b907e41ce2d93741b3d"><span class="id" title="variable">Œµ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-‚àó</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#4465c01284a6dbd7c946837789ab53bf"><span class="id" title="notation">WP</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#gen_rejection_sampler"><span class="id" title="definition">gen_rejection_sampler</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#sampler:49"><span class="id" title="variable">sampler</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#checker:50"><span class="id" title="variable">checker</span></a> <a class="idref" href="clutch.bi.weakestpre.html#4465c01284a6dbd7c946837789ab53bf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#E:53"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.bi.weakestpre.html#4465c01284a6dbd7c946837789ab53bf"><span class="id" title="notation">[{</span></a> <a id="v:55" class="idref" href="#v:55"><span class="id" title="binder">v</span></a><a class="idref" href="clutch.bi.weakestpre.html#4465c01284a6dbd7c946837789ab53bf"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#c455d6948a3007a65ef9289b4613004d"><span class="id" title="variable">Œò</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v:55"><span class="id" title="variable">v</span></a> <a class="idref" href="clutch.bi.weakestpre.html#4465c01284a6dbd7c946837789ab53bf"><span class="id" title="notation">}]</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> ([? <span class="id" title="var">Hr</span>] <span class="id" title="var">HŒµ</span>) "#Hspec Hcr".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#generic_geometric_error"><span class="id" title="definition">generic_geometric_error</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#error_limit'"><span class="id" title="lemma">error_limit'</span></a> <span class="id" title="var">r</span> <span class="id" title="var">Hr</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#mkposreal"><span class="id" title="constructor">mkposreal</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#nonneg"><span class="id" title="projection">nonneg</span></a> <span class="id" title="var">Œµ</span>) <span class="id" title="var">HŒµ</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">d</span> <span class="id" title="var">Hlim</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#ho_ubdd_approx_safe"><span class="id" title="lemma">ho_ubdd_approx_safe</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; [<span class="id" title="tactic">eauto</span>| <span class="id" title="var">iApply</span> "Hspec" |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.error_credits.html#ec_spend_le_irrel"><span class="id" title="lemma">ec_spend_le_irrel</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hcr"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#generic_geometric_error"><span class="id" title="definition">generic_geometric_error</span></a> /= <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_1_l"><span class="id" title="lemma">Rmult_1_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rlt_le"><span class="id" title="lemma">Rlt_le</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlim</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#safety"><span class="id" title="section">safety</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="higherorder_rand" class="idref" href="#higherorder_rand"><span class="id" title="section">higherorder_rand</span></a>.<br/>
</div>

<div class="doc">
Instantiation of the higher-order spec for a basic rejection sampler 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="erisGS0:57" class="idref" href="#erisGS0:57"><span class="id" title="binder">!</span></a><a id="erisGS0:57" class="idref" href="#erisGS0:57"><span class="id" title="binder">erisGS</span></a> <a id="34c60bfd25671d67d270c0af76783542" class="idref" href="#34c60bfd25671d67d270c0af76783542"><span class="id" title="binder"><span id="erisGS0:57" class="id">Œ£</span></span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="bd06ca2f4777895e3ff7420314de86b1" class="idref" href="#bd06ca2f4777895e3ff7420314de86b1"><span class="id" title="definition">rand_Œµ2</span></a> (<a id="n':58" class="idref" href="#n':58"><span class="id" title="binder">n'</span></a> <a id="m':59" class="idref" href="#m':59"><span class="id" title="binder">m'</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="983c5c4850aaf658d56c15dd3eec9e1b" class="idref" href="#983c5c4850aaf658d56c15dd3eec9e1b"><span class="id" title="binder">Œµ1</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#nonnegreal"><span class="id" title="record">nonnegreal</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#m':59"><span class="id" title="variable">m'</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#nonnegreal"><span class="id" title="record">nonnegreal</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <a id="z:61" class="idref" href="#z:61"><span class="id" title="binder">z</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#z:61"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#n':58"><span class="id" title="variable">n'</span></a>)%<span class="id" title="var">nat</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_zero"><span class="id" title="definition">nnreal_zero</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prelude.NNRbar.html#nnreal_div"><span class="id" title="definition">nnreal_div</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#983c5c4850aaf658d56c15dd3eec9e1b"><span class="id" title="variable">Œµ1</span></a> (<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#err_factor"><span class="id" title="definition">err_factor</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#n':58"><span class="id" title="variable">n'</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#m':59"><span class="id" title="variable">m'</span></a>))<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="sample_err_mean_higherorder" class="idref" href="#sample_err_mean_higherorder"><span class="id" title="lemma">sample_err_mean_higherorder</span></a> <a id="n':62" class="idref" href="#n':62"><span class="id" title="binder">n'</span></a> <a id="m':63" class="idref" href="#m':63"><span class="id" title="binder">m'</span></a> (<a id="Hnm:64" class="idref" href="#Hnm:64"><span class="id" title="binder">Hnm</span></a> : (<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#n':62"><span class="id" title="variable">n'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#m':63"><span class="id" title="variable">m'</span></a>)%<span class="id" title="var">nat</span>) <a id="22a56aa538c1331d8fa264f67e208710" class="idref" href="#22a56aa538c1331d8fa264f67e208710"><span class="id" title="binder">ùúÄ</span></a><a id="22a56aa538c1331d8fa264f67e208710" class="idref" href="#22a56aa538c1331d8fa264f67e208710"><span class="id" title="binder">‚ÇÅ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.countable_sum.html#SeriesC"><span class="id" title="definition">SeriesC</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">Œª</span></a> <a id="n:66" class="idref" href="#n:66"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#m':63"><span class="id" title="variable">m'</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#m':63"><span class="id" title="variable">m'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#bd06ca2f4777895e3ff7420314de86b1"><span class="id" title="definition">rand_Œµ2</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#n':62"><span class="id" title="variable">n'</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#m':63"><span class="id" title="variable">m'</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#22a56aa538c1331d8fa264f67e208710"><span class="id" title="variable">ùúÄ</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#22a56aa538c1331d8fa264f67e208710"><span class="id" title="variable">‚ÇÅ</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#n:66"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#22a56aa538c1331d8fa264f67e208710"><span class="id" title="variable">ùúÄ</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#22a56aa538c1331d8fa264f67e208710"><span class="id" title="variable">‚ÇÅ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#bdd_cf_sampling_error"><span class="id" title="definition">bdd_cf_sampling_error</span></a> <a class="idref" href="clutch.prob.countable_sum.html#SeriesC_scal_l"><span class="id" title="lemma">SeriesC_scal_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_eq_reg_l"><span class="id" title="lemma">Rmult_eq_reg_l</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">m'</span>)); <span class="id" title="var">last</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#not_0_INR"><span class="id" title="lemma">not_0_INR</span></a>; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" title="lemma">Rmult_assoc</span></a> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" title="lemma">Rmult_assoc</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" title="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" title="lemma">Rmult_assoc</span></a> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rinv_r_sym"><span class="id" title="lemma">Rinv_r_sym</span></a>; <span class="id" title="var">last</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#not_0_INR"><span class="id" title="lemma">not_0_INR</span></a>; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_1_l"><span class="id" title="lemma">Rmult_1_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#bd06ca2f4777895e3ff7420314de86b1"><span class="id" title="definition">rand_Œµ2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#reindex_fin_series"><span class="id" title="lemma">reindex_fin_series</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#err_factor"><span class="id" title="definition">err_factor</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rinv_mult"><span class="id" title="lemma">Rinv_mult</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rinv_inv"><span class="id" title="lemma">Rinv_inv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" title="lemma">Rmult_assoc</span></a> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" title="lemma">Rmult_assoc</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" title="lemma">Rmult_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_eq_compat_l"><span class="id" title="lemma">Rmult_eq_compat_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" title="lemma">Rmult_comm</span></a> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" title="lemma">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#minus_INR"><span class="id" title="lemma">minus_INR</span></a>; [|<span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#Nat.sub_succ"><span class="id" title="lemma">Nat.sub_succ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rinv_l"><span class="id" title="lemma">Rinv_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_1_l"><span class="id" title="lemma">Rmult_1_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#not_0_INR"><span class="id" title="lemma">not_0_INR</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="rand_sampling_scheme_goal" class="idref" href="#rand_sampling_scheme_goal"><span class="id" title="definition">rand_sampling_scheme_goal</span></a> (<a id="n':67" class="idref" href="#n':67"><span class="id" title="binder">n'</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="v:68" class="idref" href="#v:68"><span class="id" title="binder">v</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#f76036d5160d04185167959198c43e6c"><span class="id" title="variable">Œ£</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">‚àÉ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">(</span></a><a id="n:69" class="idref" href="#n:69"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">),</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">‚åú</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v:68"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#n:69"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> (<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#n:69"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#n':67"><span class="id" title="variable">n'</span></a>)%<span class="id" title="var">nat</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">‚åù</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="rand_sampling_scheme_spec" class="idref" href="#rand_sampling_scheme_spec"><span class="id" title="lemma">rand_sampling_scheme_spec</span></a> (<a id="n':70" class="idref" href="#n':70"><span class="id" title="binder">n'</span></a> <a id="m':71" class="idref" href="#m':71"><span class="id" title="binder">m'</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="Hnm:72" class="idref" href="#Hnm:72"><span class="id" title="binder">Hnm</span></a> : (<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#n':70"><span class="id" title="variable">n'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#m':71"><span class="id" title="variable">m'</span></a>)%<span class="id" title="var">nat</span>) <a id="E:73" class="idref" href="#E:73"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">‚ä¢</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#sampling_scheme_spec"><span class="id" title="definition">sampling_scheme_spec</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">Œª</span></a><a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">:</span></a> "_"<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#m':71"><span class="id" title="variable">m'</span></a>)%<span class="id" title="var">V</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">Œª</span></a><a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">:</span></a> "sample"<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">,</span></a> "sample" <a class="idref" href="clutch.prob_lang.notation.html#959e055f1ab3ff54c36dde10824af025"><span class="id" title="notation">‚â§</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#n':70"><span class="id" title="variable">n'</span></a>)%<span class="id" title="var">V</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#err_factor"><span class="id" title="definition">err_factor</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#n':70"><span class="id" title="variable">n'</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#m':71"><span class="id" title="variable">m'</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#E:73"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#rand_sampling_scheme_goal"><span class="id" title="definition">rand_sampling_scheme_goal</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#n':70"><span class="id" title="variable">n'</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#sampling_scheme_spec"><span class="id" title="definition">sampling_scheme_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iStartProof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Œµ</span> <span class="id" title="var">Œ¶</span>) "!&gt; Hcr HŒ¶"; <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.error_rules.html#twp_couple_rand_adv_comp1"><span class="id" title="lemma">twp_couple_rand_adv_comp1</span></a> <span class="id" title="var">m'</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Œµ</span> (<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#bd06ca2f4777895e3ff7420314de86b1"><span class="id" title="definition">rand_Œµ2</span></a> <span class="id" title="var">n'</span> <span class="id" title="var">m'</span> <span class="id" title="var">Œµ</span>) <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hcr"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#sample_err_mean_higherorder"><span class="id" title="lemma">sample_err_mean_higherorder</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">s</span>) "Hcr".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HŒ¶".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" title="definition">le_gt_dec</span></a> <span class="id" title="var">s</span> <span class="id" title="var">n'</span>) <span class="id" title="keyword">as</span> [|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hdec</span>; [<span class="id" title="var">iLeft</span> | <span class="id" title="var">iRight</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;the&nbsp;sample&nbsp;is&nbsp;inbounds,&nbsp;the&nbsp;checker&nbsp;should&nbsp;accept&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>; <span class="id" title="var">iModIntro</span>; <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_true"><span class="id" title="abbreviation">bool_decide_true</span></a>; <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eexists</span> <span class="id" title="var">_</span>. <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">f_equal</span>|<span class="id" title="var">done</span>]. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;the&nbsp;sample&nbsp;is&nbsp;out&nbsp;of&nbsp;bounds&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iSplitL</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;credit&nbsp;is&nbsp;amplified&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#bd06ca2f4777895e3ff7420314de86b1"><span class="id" title="definition">rand_Œµ2</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_false_2"><span class="id" title="lemma">bool_decide_eq_false_2</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_div"><span class="id" title="definition">nnreal_div</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" title="lemma">Rmult_assoc</span></a> /<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_inv"><span class="id" title="definition">nnreal_inv</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rinv_l"><span class="id" title="lemma">Rinv_l</span></a>; [<span class="id" title="var">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_integral_contrapositive"><span class="id" title="lemma">Rmult_integral_contrapositive</span></a>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rgt_not_eq"><span class="id" title="lemma">Rgt_not_eq</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rlt_gt"><span class="id" title="lemma">Rlt_gt</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#lt_0_INR"><span class="id" title="lemma">lt_0_INR</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rinv_neq_0_compat"><span class="id" title="lemma">Rinv_neq_0_compat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rgt_not_eq"><span class="id" title="lemma">Rgt_not_eq</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rlt_gt"><span class="id" title="lemma">Rlt_gt</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#lt_0_INR"><span class="id" title="lemma">lt_0_INR</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;sampler&nbsp;rejects&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>; <span class="id" title="var">iModIntro</span>; <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_false"><span class="id" title="abbreviation">bool_decide_false</span></a>; <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.id"><span class="id" title="lemma">Nat2Z.id</span></a>; <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#TCEq_refl"><span class="id" title="constructor">TCEq_refl</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#higherorder_rand"><span class="id" title="section">higherorder_rand</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="higherorder_flip2" class="idref" href="#higherorder_flip2"><span class="id" title="section">higherorder_flip2</span></a>.<br/>
</div>

<div class="doc">
Instantiation of the higher-order spec for a pair of coin flips 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="erisGS0:75" class="idref" href="#erisGS0:75"><span class="id" title="binder">!</span></a><a id="erisGS0:75" class="idref" href="#erisGS0:75"><span class="id" title="binder">erisGS</span></a> <a id="0bb1b226b53b6455e93ad6a4d211d8ec" class="idref" href="#0bb1b226b53b6455e93ad6a4d211d8ec"><span class="id" title="binder"><span id="erisGS0:75" class="id">Œ£</span></span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="2278647454722c4031fbd4c8f462e5d8" class="idref" href="#2278647454722c4031fbd4c8f462e5d8"><span class="id" title="definition">Œµ2_flip2</span></a> (<a id="e7ccc64f647f3c06e9b3c46171c036c3" class="idref" href="#e7ccc64f647f3c06e9b3c46171c036c3"><span class="id" title="binder">Œµ1</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#nonnegreal"><span class="id" title="record">nonnegreal</span></a>) (<a id="v:77" class="idref" href="#v:77"><span class="id" title="binder">v</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> 1%<span class="id" title="var">nat</span>)) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#nonnegreal"><span class="id" title="record">nonnegreal</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#fin_to_bool"><span class="id" title="definition">fin_to_bool</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v:77"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_zero"><span class="id" title="definition">nnreal_zero</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> (<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_nat"><span class="id" title="definition">nnreal_nat</span></a>(2%<span class="id" title="var">nat</span>) <a class="idref" href="clutch.prelude.NNRbar.html#1bc6a42bff0f67d6034bb210662be20d"><span class="id" title="notation">*</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#e7ccc64f647f3c06e9b3c46171c036c3"><span class="id" title="variable">Œµ1</span></a>)%<span class="id" title="var">NNR</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="flip_is_1" class="idref" href="#flip_is_1"><span class="id" title="definition">flip_is_1</span></a>  (<a id="v:78" class="idref" href="#v:78"><span class="id" title="binder">v</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>): <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v:78"><span class="id" title="variable">v</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitInt"><span class="id" title="constructor">LitInt</span></a> 1%<span class="id" title="var">Z</span>) =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="1f6a89dce79bea743cb2c25873bd393e" class="idref" href="#1f6a89dce79bea743cb2c25873bd393e"><span class="id" title="definition">Œµ2_flip1</span></a> (<a id="489b4b995e3a24ed0d6ed054ee402b8e" class="idref" href="#489b4b995e3a24ed0d6ed054ee402b8e"><span class="id" title="binder">Œµ1</span></a> <a id="5b4c426a35f3d227fd15017052969e57" class="idref" href="#5b4c426a35f3d227fd15017052969e57"><span class="id" title="binder">Œµh</span></a> <a id="54204b45bab7570af7ad1c86bca15756" class="idref" href="#54204b45bab7570af7ad1c86bca15756"><span class="id" title="binder">Œµt</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#nonnegreal"><span class="id" title="record">nonnegreal</span></a>) (<a id="v:83" class="idref" href="#v:83"><span class="id" title="binder">v</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> 1%<span class="id" title="var">nat</span>)) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#nonnegreal"><span class="id" title="record">nonnegreal</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#fin_to_bool"><span class="id" title="definition">fin_to_bool</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v:83"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#5b4c426a35f3d227fd15017052969e57"><span class="id" title="variable">Œµh</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#54204b45bab7570af7ad1c86bca15756"><span class="id" title="variable">Œµt</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="scale_flip" class="idref" href="#scale_flip"><span class="id" title="definition">scale_flip</span></a> (<a id="a8679e39a1410de803554cc3e1f2ca22" class="idref" href="#a8679e39a1410de803554cc3e1f2ca22"><span class="id" title="binder">Œµ1</span></a> <a id="b743caf2811954910812524f5ffdb3c7" class="idref" href="#b743caf2811954910812524f5ffdb3c7"><span class="id" title="binder">Œµh</span></a> <a id="e445cf84025d84b221e6442c3187689b" class="idref" href="#e445cf84025d84b221e6442c3187689b"><span class="id" title="binder">Œµt</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#nonnegreal"><span class="id" title="record">nonnegreal</span></a>) : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#nonnegreal"><span class="id" title="record">nonnegreal</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= (<span class="id" title="keyword">fun</span> <a id="z:87" class="idref" href="#z:87"><span class="id" title="binder">z</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#flip_is_1"><span class="id" title="definition">flip_is_1</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#z:87"><span class="id" title="variable">z</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#b743caf2811954910812524f5ffdb3c7"><span class="id" title="variable">Œµh</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#e445cf84025d84b221e6442c3187689b"><span class="id" title="variable">Œµt</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="flip_amplification" class="idref" href="#flip_amplification"><span class="id" title="lemma">flip_amplification</span></a> (<a id="5ec6f5d1583b6acd8a617dd64ac1f213" class="idref" href="#5ec6f5d1583b6acd8a617dd64ac1f213"><span class="id" title="binder">Œµ1</span></a> <a id="636fc5b40ebc359ceeb304282f7f31ba" class="idref" href="#636fc5b40ebc359ceeb304282f7f31ba"><span class="id" title="binder">Œµh</span></a> <a id="866ca8639e01e5f7450e56548fec930a" class="idref" href="#866ca8639e01e5f7450e56548fec930a"><span class="id" title="binder">Œµt</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#nonnegreal"><span class="id" title="record">nonnegreal</span></a>) (<a id="Hmean:91" class="idref" href="#Hmean:91"><span class="id" title="binder">Hmean</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#636fc5b40ebc359ceeb304282f7f31ba"><span class="id" title="variable">Œµh</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#866ca8639e01e5f7450e56548fec930a"><span class="id" title="variable">Œµt</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#5ec6f5d1583b6acd8a617dd64ac1f213"><span class="id" title="variable">Œµ1</span></a> ) <a id="E:92" class="idref" href="#E:92"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#b968ba0b7dbb42bafef5465073eece7c"><span class="id" title="notation">[[{</span></a> <a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">‚ÜØ</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#5ec6f5d1583b6acd8a617dd64ac1f213"><span class="id" title="variable">Œµ1</span></a> <a class="idref" href="clutch.bi.weakestpre.html#b968ba0b7dbb42bafef5465073eece7c"><span class="id" title="notation">}</span></a><a class="idref" href="clutch.bi.weakestpre.html#b968ba0b7dbb42bafef5465073eece7c"><span class="id" title="notation">]]</span></a><br/>
      <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1 <a class="idref" href="clutch.bi.weakestpre.html#b968ba0b7dbb42bafef5465073eece7c"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#E:92"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#b968ba0b7dbb42bafef5465073eece7c"><span class="id" title="notation">[[{</span></a> <a id="v:93" class="idref" href="#v:93"><span class="id" title="binder">v</span></a><a class="idref" href="clutch.bi.weakestpre.html#b968ba0b7dbb42bafef5465073eece7c"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.bi.weakestpre.html#b968ba0b7dbb42bafef5465073eece7c"><span class="id" title="notation">RET</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v:93"><span class="id" title="variable">v</span></a><a class="idref" href="clutch.bi.weakestpre.html#b968ba0b7dbb42bafef5465073eece7c"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">‚åú</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v:93"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0%<span class="id" title="var">nat</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v:93"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 1%<span class="id" title="var">nat</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">‚åù</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">‚àó</span></a> <a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">‚ÜØ</span></a> <a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#scale_flip"><span class="id" title="definition">scale_flip</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#5ec6f5d1583b6acd8a617dd64ac1f213"><span class="id" title="variable">Œµ1</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#636fc5b40ebc359ceeb304282f7f31ba"><span class="id" title="variable">Œµh</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#866ca8639e01e5f7450e56548fec930a"><span class="id" title="variable">Œµt</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v:93"><span class="id" title="variable">v</span></a><a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.bi.weakestpre.html#b968ba0b7dbb42bafef5465073eece7c"><span class="id" title="notation">}]]</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Œ¶</span>) "Hcr HŒ¶".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.error_rules.html#twp_couple_rand_adv_comp1"><span class="id" title="lemma">twp_couple_rand_adv_comp1</span></a> 1%<span class="id" title="var">nat</span>  <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Œµ1</span> (<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#1f6a89dce79bea743cb2c25873bd393e"><span class="id" title="definition">Œµ2_flip1</span></a> <span class="id" title="var">Œµ1</span> <span class="id" title="var">Œµh</span> <span class="id" title="var">Œµt</span>) <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hcr"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;series&nbsp;mean&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.countable_sum.html#SeriesC_finite_foldr"><span class="id" title="lemma">SeriesC_finite_foldr</span></a> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#enum"><span class="id" title="method">enum</span></a> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#fin_finite"><span class="id" title="instance">fin_finite</span></a> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#fin_enum"><span class="id" title="definition">fin_enum</span></a> /<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#1f6a89dce79bea743cb2c25873bd393e"><span class="id" title="definition">Œµ2_flip1</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_0_r"><span class="id" title="lemma">Rplus_0_r</span></a> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" title="lemma">Rmult_plus_distr_l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rplus_comm"><span class="id" title="lemma">Rplus_comm</span></a> <span class="id" title="var">Hmean</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;continutation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">n</span>) "Hcr".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#bc9fd2481486dc1ddc28ccbc3ddae226"><span class="id" title="notation">(</span></a>"HŒ¶" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#bc9fd2481486dc1ddc28ccbc3ddae226"><span class="id" title="notation">$!</span></a> <span class="id" title="var">_</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#bc9fd2481486dc1ddc28ccbc3ddae226"><span class="id" title="notation">)</span></a>; <span class="id" title="var">iSplitR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_fin</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">first</span> (<span class="id" title="tactic">left</span>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>; <span class="id" title="var">inv_fin</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">first</span> (<span class="id" title="tactic">right</span>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">k</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Vectors.Fin.html#case0"><span class="id" title="definition">Fin.case0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.error_credits.html#ec_spend_irrel"><span class="id" title="lemma">ec_spend_irrel</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hcr"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#1f6a89dce79bea743cb2c25873bd393e"><span class="id" title="definition">Œµ2_flip1</span></a> /<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#scale_flip"><span class="id" title="definition">scale_flip</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_fin</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#1f6a89dce79bea743cb2c25873bd393e"><span class="id" title="definition">Œµ2_flip1</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span>; <span class="id" title="var">inv_fin</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#1f6a89dce79bea743cb2c25873bd393e"><span class="id" title="definition">Œµ2_flip1</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Vectors.Fin.html#case0"><span class="id" title="definition">Fin.case0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#TCEq_refl"><span class="id" title="constructor">TCEq_refl</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="flip2_goal" class="idref" href="#flip2_goal"><span class="id" title="definition">flip2_goal</span></a> (<a id="v:94" class="idref" href="#v:94"><span class="id" title="binder">v</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#dabb7d2054ec47c871b7ec497451ef93"><span class="id" title="variable">Œ£</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">‚åú</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#v:94"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)</span></a>%<span class="id" title="var">V</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">‚åù</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="flip2_sampling_scheme_spec" class="idref" href="#flip2_sampling_scheme_spec"><span class="id" title="lemma">flip2_sampling_scheme_spec</span></a> <a id="E:95" class="idref" href="#E:95"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">‚ä¢</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#sampling_scheme_spec"><span class="id" title="definition">sampling_scheme_spec</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">Œª</span></a><a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">:</span></a> "_"<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Pair"><span class="id" title="constructor">Pair</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1) (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">Œª</span></a><a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">:</span></a> "sample"<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#268bceb185e8402e5a254d7b9bacc674"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Fst"><span class="id" title="constructor">Fst</span></a> "sample"<a class="idref" href="clutch.prob_lang.notation.html#268bceb185e8402e5a254d7b9bacc674"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#268bceb185e8402e5a254d7b9bacc674"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#268bceb185e8402e5a254d7b9bacc674"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Snd"><span class="id" title="constructor">Snd</span></a> "sample"<a class="idref" href="clutch.prob_lang.notation.html#268bceb185e8402e5a254d7b9bacc674"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#268bceb185e8402e5a254d7b9bacc674"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a><a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_div"><span class="id" title="definition">nnreal_div</span></a> (<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_nat"><span class="id" title="definition">nnreal_nat</span></a> 3%<span class="id" title="var">nat</span>) (<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_nat"><span class="id" title="definition">nnreal_nat</span></a> 4%<span class="id" title="var">nat</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#E:95"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#flip2_goal"><span class="id" title="definition">flip2_goal</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#sampling_scheme_spec"><span class="id" title="definition">sampling_scheme_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iStartProof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (ùúÄ <span class="id" title="var">Œ¶</span>) "!&gt; Hcr HŒ¶"; <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#flip_amplification"><span class="id" title="lemma">flip_amplification</span></a> ùúÄ<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_mult"><span class="id" title="definition">nnreal_mult</span></a> ùúÄ (<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_div"><span class="id" title="definition">nnreal_div</span></a> (<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_nat"><span class="id" title="definition">nnreal_nat</span></a> 2) (<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_nat"><span class="id" title="definition">nnreal_nat</span></a> 3)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_mult"><span class="id" title="definition">nnreal_mult</span></a> ùúÄ (<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_div"><span class="id" title="definition">nnreal_div</span></a> (<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_nat"><span class="id" title="definition">nnreal_nat</span></a> 4) (<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_nat"><span class="id" title="definition">nnreal_nat</span></a> 3)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hcr"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; [<span class="id" title="tactic">simpl</span>; <span class="id" title="var">lra</span>| ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">v</span>) "(%Hv&amp;Hcr)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [-&gt; | -&gt;].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;first&nbsp;flip&nbsp;was&nbsp;zero,&nbsp;check&nbsp;is&nbsp;going&nbsp;to&nbsp;false&nbsp;and&nbsp;the&nbsp;second&nbsp;flip&nbsp;doesn't&nbsp;matter.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_bind</span> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">E</span>; <span class="id" title="var">iApply</span> <a class="idref" href="clutch.eris.total_primitive_laws.html#twp_rand"><span class="id" title="lemma">twp_rand</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">v'</span>) "_"; <span class="id" title="var">wp_pures</span>; <span class="id" title="var">iModIntro</span>; <span class="id" title="var">iApply</span> "HŒ¶".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iRight</span>; <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "Hcr"; [<span class="id" title="var">iFrame</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;credit&nbsp;accounting&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;step&nbsp;the&nbsp;checker&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>; <span class="id" title="var">case_bool_decide</span>; <span class="id" title="var">wp_pures</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;first&nbsp;flip&nbsp;was&nbsp;1,&nbsp;we&nbsp;only&nbsp;have&nbsp;2/3&nbsp;error&nbsp;so&nbsp;we&nbsp;need&nbsp;to&nbsp;amplify&nbsp;up&nbsp;to&nbsp;4/3<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;case&nbsp;that&nbsp;the&nbsp;second&nbsp;flip&nbsp;is&nbsp;not&nbsp;1&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#scale_flip"><span class="id" title="definition">scale_flip</span></a> ùúÄ <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> (ùúÄ <a class="idref" href="clutch.prelude.NNRbar.html#1bc6a42bff0f67d6034bb210662be20d"><span class="id" title="notation">*</span></a> <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_div"><span class="id" title="definition">nnreal_div</span></a> (<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_nat"><span class="id" title="definition">nnreal_nat</span></a> 2) (<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_nat"><span class="id" title="definition">nnreal_nat</span></a> 3))%<span class="id" title="var">NNR</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#scale_flip"><span class="id" title="definition">scale_flip</span></a> /<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#flip_is_1"><span class="id" title="definition">flip_is_1</span></a> /=. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_ext"><span class="id" title="lemma">nnreal_ext</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (ùúÄ <a class="idref" href="clutch.prelude.NNRbar.html#1bc6a42bff0f67d6034bb210662be20d"><span class="id" title="notation">*</span></a> <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_div"><span class="id" title="definition">nnreal_div</span></a> (<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_nat"><span class="id" title="definition">nnreal_nat</span></a> 2) (<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_nat"><span class="id" title="definition">nnreal_nat</span></a> 3))%<span class="id" title="var">NNR</span> <span class="id" title="keyword">as</span> ùúÄ'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_bind</span> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1 )%<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#flip_amplification"><span class="id" title="lemma">flip_amplification</span></a> ùúÄ' <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_zero"><span class="id" title="definition">nnreal_zero</span></a> (<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_mult"><span class="id" title="definition">nnreal_mult</span></a> ùúÄ' (<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_nat"><span class="id" title="definition">nnreal_nat</span></a> 2)) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hcr"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>. <span class="id" title="var">lra</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">v</span>) "(%Hv&amp;Hcr)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [-&gt; | -&gt;].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;second&nbsp;flip&nbsp;was&nbsp;zero&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>; <span class="id" title="var">iModIntro</span>; <span class="id" title="var">iApply</span> "HŒ¶".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iRight</span>; <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "Hcr"; [<span class="id" title="var">iFrame</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="comment">(*&nbsp;credit&nbsp;accounting&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>ùúÄ' /=; <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="comment">(*&nbsp;step&nbsp;the&nbsp;checker&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;both&nbsp;flips&nbsp;are&nbsp;1,&nbsp;checker&nbsp;should&nbsp;accept&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>; <span class="id" title="var">iModIntro</span>; <span class="id" title="var">iApply</span> "HŒ¶".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iLeft</span>; <span class="id" title="var">wp_pures</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_higherorder_rejection_sampler.html#higherorder_flip2"><span class="id" title="section">higherorder_flip2</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/coq-community/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
