<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resources/config.js"></script>
<script type="text/javascript" src="resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/logsem/clutch">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">clutch.prob_lang.metatheory</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Reals.html#"><span class="id" title="library">Reals</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.micromega.Psatz.html#"><span class="id" title="library">Psatz</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.functions.html#"><span class="id" title="library">functions</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#"><span class="id" title="library">gmap</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.stringmap.html#"><span class="id" title="library">stringmap</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_sets.html#"><span class="id" title="library">fin_sets</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch.prelude</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#"><span class="id" title="library">stdpp_ext</span></a> <a class="idref" href="clutch.prelude.NNRbar.html#"><span class="id" title="library">NNRbar</span></a> <a class="idref" href="clutch.prelude.fin.html#"><span class="id" title="library">fin</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch.prob</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="clutch.prob.distribution.html#"><span class="id" title="library">distribution</span></a> <a class="idref" href="clutch.prob.couplings.html#"><span class="id" title="library">couplings</span></a> <a class="idref" href="clutch.prob.couplings_app.html#"><span class="id" title="library">couplings_app</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch.common</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="clutch.common.ectx_language.html#"><span class="id" title="library">ectx_language</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch.prob_lang</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="clutch.prob_lang.locations.html#"><span class="id" title="library">locations</span></a> <a class="idref" href="clutch.prob_lang.tactics.html#"><span class="id" title="library">tactics</span></a> <a class="idref" href="clutch.prob_lang.notation.html#"><span class="id" title="library">notation</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch.prob_lang</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="clutch.prob_lang.lang.html#"><span class="id" title="library">lang</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch.prob</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="clutch.prob.distribution.html#"><span class="id" title="library">distribution</span></a> <a class="idref" href="clutch.prob.couplings.html#"><span class="id" title="library">couplings</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.prelude</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.prelude.options.html#"><span class="id" title="library">options</span></a>.<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Default</span> <span class="id" title="keyword">Proof</span> <span class="id" title="var">Using</span> "Type*".<br/>
<span class="comment">(*&nbsp;This&nbsp;file&nbsp;contains&nbsp;some&nbsp;metatheory&nbsp;about&nbsp;the&nbsp;<span class="inlinecode"><span class="id" title="var">prob_lang</span></span>&nbsp;language&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Adding&nbsp;a&nbsp;binder&nbsp;to&nbsp;a&nbsp;set&nbsp;of&nbsp;identifiers.&nbsp;*)</span><br/>
<span class="id" title="keyword">Local Definition</span> <a id="set_binder_insert" class="idref" href="#set_binder_insert"><span class="id" title="definition">set_binder_insert</span></a> (<a id="x:1" class="idref" href="#x:1"><span class="id" title="binder">x</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#binder"><span class="id" title="inductive">binder</span></a>) (<a id="X:2" class="idref" href="#X:2"><span class="id" title="binder">X</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.stringmap.html#stringset"><span class="id" title="abbreviation">stringset</span></a>) : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.stringmap.html#stringset"><span class="id" title="abbreviation">stringset</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="clutch.prob_lang.metatheory.html#x:1"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#BAnon"><span class="id" title="constructor">BAnon</span></a> =&gt; <a class="idref" href="clutch.prob_lang.metatheory.html#X:2"><span class="id" title="variable">X</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#BNamed"><span class="id" title="constructor">BNamed</span></a> <span class="id" title="var">f</span> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a><span class="id" title="var">f</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#X:2"><span class="id" title="variable">X</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Check&nbsp;if&nbsp;expression&nbsp;<span class="inlinecode"><span class="id" title="var">e</span></span>&nbsp;is&nbsp;closed&nbsp;w.r.t.&nbsp;the&nbsp;set&nbsp;<span class="inlinecode"><span class="id" title="var">X</span></span>&nbsp;of&nbsp;variable&nbsp;names,<br/>
&nbsp;&nbsp;&nbsp;and&nbsp;that&nbsp;all&nbsp;the&nbsp;values&nbsp;in&nbsp;<span class="inlinecode"><span class="id" title="var">e</span></span>&nbsp;are&nbsp;closed&nbsp;*)</span><br/>
<span class="id" title="keyword">Fixpoint</span> <a id="is_closed_expr" class="idref" href="#is_closed_expr"><span class="id" title="definition">is_closed_expr</span></a> (<a id="X:4" class="idref" href="#X:4"><span class="id" title="binder">X</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.stringmap.html#stringset"><span class="id" title="abbreviation">stringset</span></a>) (<a id="e:5" class="idref" href="#e:5"><span class="id" title="binder">e</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.expr"><span class="id" title="inductive">expr</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="clutch.prob_lang.metatheory.html#e:5"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <span class="id" title="var">v</span> =&gt; <a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_val:8"><span class="id" title="definition">is_closed_val</span></a> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Var"><span class="id" title="constructor">Var</span></a> <span class="id" title="var">x</span> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<span class="id" title="var">x</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#X:4"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Rec"><span class="id" title="constructor">Rec</span></a> <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> =&gt; <a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_expr:7"><span class="id" title="definition">is_closed_expr</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#set_binder_insert"><span class="id" title="definition">set_binder_insert</span></a> <span class="id" title="var">f</span> (<a class="idref" href="clutch.prob_lang.metatheory.html#set_binder_insert"><span class="id" title="definition">set_binder_insert</span></a> <span class="id" title="var">x</span> <a class="idref" href="clutch.prob_lang.metatheory.html#X:4"><span class="id" title="variable">X</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#e:5"><span class="id" title="variable">e</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.UnOp"><span class="id" title="constructor">UnOp</span></a> <span class="id" title="var">_</span> <span class="id" title="var">e</span> | <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Fst"><span class="id" title="constructor">Fst</span></a> <span class="id" title="var">e</span> | <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Snd"><span class="id" title="constructor">Snd</span></a> <span class="id" title="var">e</span> | <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.InjL"><span class="id" title="constructor">InjL</span></a> <span class="id" title="var">e</span> | <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.InjR"><span class="id" title="constructor">InjR</span></a> <span class="id" title="var">e</span> | <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Load"><span class="id" title="constructor">Load</span></a> <span class="id" title="var">e</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_expr:7"><span class="id" title="definition">is_closed_expr</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#X:4"><span class="id" title="variable">X</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:5"><span class="id" title="variable">e</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.App"><span class="id" title="constructor">App</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> | <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.BinOp"><span class="id" title="constructor">BinOp</span></a> <span class="id" title="var">_</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> | <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Pair"><span class="id" title="constructor">Pair</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> | <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.AllocN"><span class="id" title="constructor">AllocN</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> | <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Store"><span class="id" title="constructor">Store</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> | <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Rand"><span class="id" title="constructor">Rand</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_expr:7"><span class="id" title="definition">is_closed_expr</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#X:4"><span class="id" title="variable">X</span></a> <span class="id" title="var">e1</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_expr:7"><span class="id" title="definition">is_closed_expr</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#X:4"><span class="id" title="variable">X</span></a> <span class="id" title="var">e2</span><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.If"><span class="id" title="constructor">If</span></a> <span class="id" title="var">e0</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> | <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Case"><span class="id" title="constructor">Case</span></a> <span class="id" title="var">e0</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_expr:7"><span class="id" title="definition">is_closed_expr</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#X:4"><span class="id" title="variable">X</span></a> <span class="id" title="var">e0</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_expr:7"><span class="id" title="definition">is_closed_expr</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#X:4"><span class="id" title="variable">X</span></a> <span class="id" title="var">e1</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_expr:7"><span class="id" title="definition">is_closed_expr</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#X:4"><span class="id" title="variable">X</span></a> <span class="id" title="var">e2</span><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.AllocTape"><span class="id" title="constructor">AllocTape</span></a> <span class="id" title="var">e</span> =&gt; <a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_expr:7"><span class="id" title="definition">is_closed_expr</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#X:4"><span class="id" title="variable">X</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:5"><span class="id" title="variable">e</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Tick"><span class="id" title="constructor">Tick</span></a> <span class="id" title="var">e</span> =&gt; <a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_expr:7"><span class="id" title="definition">is_closed_expr</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#X:4"><span class="id" title="variable">X</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:5"><span class="id" title="variable">e</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
<span class="id" title="keyword">with</span> <a id="is_closed_val" class="idref" href="#is_closed_val"><span class="id" title="definition">is_closed_val</span></a> (<a id="v:6" class="idref" href="#v:6"><span class="id" title="binder">v</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="clutch.prob_lang.metatheory.html#v:6"><span class="id" title="variable">v</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.RecV"><span class="id" title="constructor">RecV</span></a> <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> =&gt; <a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_expr:7"><span class="id" title="definition">is_closed_expr</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#set_binder_insert"><span class="id" title="definition">set_binder_insert</span></a> <span class="id" title="var">f</span> (<a class="idref" href="clutch.prob_lang.metatheory.html#set_binder_insert"><span class="id" title="definition">set_binder_insert</span></a> <span class="id" title="var">x</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a>)) <span class="id" title="var">e</span><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.PairV"><span class="id" title="constructor">PairV</span></a> <span class="id" title="var">v1</span> <span class="id" title="var">v2</span> =&gt; <a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_val:8"><span class="id" title="definition">is_closed_val</span></a> <span class="id" title="var">v1</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_val:8"><span class="id" title="definition">is_closed_val</span></a> <span class="id" title="var">v2</span><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.InjLV"><span class="id" title="constructor">InjLV</span></a> <span class="id" title="var">v</span> | <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.InjRV"><span class="id" title="constructor">InjRV</span></a> <span class="id" title="var">v</span> =&gt; <a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_val:8"><span class="id" title="definition">is_closed_val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:6"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Parallel substitution 
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a id="subst_map" class="idref" href="#subst_map"><span class="id" title="definition">subst_map</span></a> (<a id="vs:11" class="idref" href="#vs:11"><span class="id" title="binder">vs</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gmap"><span class="id" title="record">gmap</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) (<a id="e:12" class="idref" href="#e:12"><span class="id" title="binder">e</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.expr"><span class="id" title="inductive">expr</span></a>)  : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.expr"><span class="id" title="inductive">expr</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="clutch.prob_lang.metatheory.html#e:12"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="clutch.prob_lang.metatheory.html#e:12"><span class="id" title="variable">e</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Var"><span class="id" title="constructor">Var</span></a> <span class="id" title="var">y</span> =&gt; <span class="id" title="keyword">if</span> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">y</span> <span class="id" title="keyword">is</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v</span> <span class="id" title="keyword">then</span> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <span class="id" title="var">v</span> <span class="id" title="keyword">else</span> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Var"><span class="id" title="constructor">Var</span></a> <span class="id" title="var">y</span><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Rec"><span class="id" title="constructor">Rec</span></a> <span class="id" title="var">f</span> <span class="id" title="var">y</span> <span class="id" title="var">e</span> =&gt; <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Rec"><span class="id" title="constructor">Rec</span></a> <span class="id" title="var">f</span> <span class="id" title="var">y</span> (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#binder_delete"><span class="id" title="definition">binder_delete</span></a> <span class="id" title="var">y</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#binder_delete"><span class="id" title="definition">binder_delete</span></a> <span class="id" title="var">f</span> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#e:12"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.App"><span class="id" title="constructor">App</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> =&gt; <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.App"><span class="id" title="constructor">App</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <span class="id" title="var">e1</span>) (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.UnOp"><span class="id" title="constructor">UnOp</span></a> <span class="id" title="var">op</span> <span class="id" title="var">e</span> =&gt; <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.UnOp"><span class="id" title="constructor">UnOp</span></a> <span class="id" title="var">op</span> (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:12"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.BinOp"><span class="id" title="constructor">BinOp</span></a> <span class="id" title="var">op</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> =&gt; <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.BinOp"><span class="id" title="constructor">BinOp</span></a> <span class="id" title="var">op</span> (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <span class="id" title="var">e1</span>) (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.If"><span class="id" title="constructor">If</span></a> <span class="id" title="var">e0</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> =&gt; <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.If"><span class="id" title="constructor">If</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <span class="id" title="var">e0</span>) (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <span class="id" title="var">e1</span>) (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Pair"><span class="id" title="constructor">Pair</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> =&gt; <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Pair"><span class="id" title="constructor">Pair</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <span class="id" title="var">e1</span>) (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Fst"><span class="id" title="constructor">Fst</span></a> <span class="id" title="var">e</span> =&gt; <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Fst"><span class="id" title="constructor">Fst</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:12"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Snd"><span class="id" title="constructor">Snd</span></a> <span class="id" title="var">e</span> =&gt; <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Snd"><span class="id" title="constructor">Snd</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:12"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.InjL"><span class="id" title="constructor">InjL</span></a> <span class="id" title="var">e</span> =&gt; <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.InjL"><span class="id" title="constructor">InjL</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:12"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.InjR"><span class="id" title="constructor">InjR</span></a> <span class="id" title="var">e</span> =&gt; <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.InjR"><span class="id" title="constructor">InjR</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:12"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Case"><span class="id" title="constructor">Case</span></a> <span class="id" title="var">e0</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> =&gt; <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Case"><span class="id" title="constructor">Case</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <span class="id" title="var">e0</span>) (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <span class="id" title="var">e1</span>) (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.AllocN"><span class="id" title="constructor">AllocN</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> =&gt; <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.AllocN"><span class="id" title="constructor">AllocN</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <span class="id" title="var">e1</span>) (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Load"><span class="id" title="constructor">Load</span></a> <span class="id" title="var">e</span> =&gt; <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Load"><span class="id" title="constructor">Load</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:12"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Store"><span class="id" title="constructor">Store</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> =&gt; <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Store"><span class="id" title="constructor">Store</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <span class="id" title="var">e1</span>) (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.AllocTape"><span class="id" title="constructor">AllocTape</span></a> <span class="id" title="var">e</span> =&gt; <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.AllocTape"><span class="id" title="constructor">AllocTape</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:12"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Rand"><span class="id" title="constructor">Rand</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> =&gt; <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Rand"><span class="id" title="constructor">Rand</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <span class="id" title="var">e1</span>) (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Tick"><span class="id" title="constructor">Tick</span></a> <span class="id" title="var">e</span> =&gt; <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Tick"><span class="id" title="constructor">Tick</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map:13"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:11"><span class="id" title="variable">vs</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:12"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Properties&nbsp;*)</span><br/>
<span class="id" title="keyword">Local Instance</span> <a id="set_unfold_elem_of_insert_binder" class="idref" href="#set_unfold_elem_of_insert_binder"><span class="id" title="instance">set_unfold_elem_of_insert_binder</span></a> <a id="x:15" class="idref" href="#x:15"><span class="id" title="binder">x</span></a> <a id="y:16" class="idref" href="#y:16"><span class="id" title="binder">y</span></a> <a id="X:17" class="idref" href="#X:17"><span class="id" title="binder">X</span></a> <a id="Q:18" class="idref" href="#Q:18"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#SetUnfoldElemOf"><span class="id" title="class">SetUnfoldElemOf</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#y:16"><span class="id" title="variable">y</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#X:17"><span class="id" title="variable">X</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#Q:18"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#SetUnfoldElemOf"><span class="id" title="class">SetUnfoldElemOf</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#y:16"><span class="id" title="variable">y</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#set_binder_insert"><span class="id" title="definition">set_binder_insert</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:15"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#X:17"><span class="id" title="variable">X</span></a>) (<a class="idref" href="clutch.prob_lang.metatheory.html#Q:18"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">∨</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#BNamed"><span class="id" title="constructor">BNamed</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#y:16"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:15"><span class="id" title="variable">x</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">destruct</span> 1; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="var">set_solver</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_closed_weaken" class="idref" href="#is_closed_weaken"><span class="id" title="lemma">is_closed_weaken</span></a> <a id="X:19" class="idref" href="#X:19"><span class="id" title="binder">X</span></a> <a id="Y:20" class="idref" href="#Y:20"><span class="id" title="binder">Y</span></a> <a id="e:21" class="idref" href="#e:21"><span class="id" title="binder">e</span></a> : <a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_expr"><span class="id" title="definition">is_closed_expr</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#X:19"><span class="id" title="variable">X</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:21"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#X:19"><span class="id" title="variable">X</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#Y:20"><span class="id" title="variable">Y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_expr"><span class="id" title="definition">is_closed_expr</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#Y:20"><span class="id" title="variable">Y</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:21"><span class="id" title="variable">e</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">revert</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>; <span class="id" title="var">naive_solver</span> (<span class="id" title="tactic">eauto</span>; <span class="id" title="var">set_solver</span>). <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_closed_weaken_empty" class="idref" href="#is_closed_weaken_empty"><span class="id" title="lemma">is_closed_weaken_empty</span></a> <a id="X:22" class="idref" href="#X:22"><span class="id" title="binder">X</span></a> <a id="e:23" class="idref" href="#e:23"><span class="id" title="binder">e</span></a> : <a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_expr"><span class="id" title="definition">is_closed_expr</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:23"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_expr"><span class="id" title="definition">is_closed_expr</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#X:22"><span class="id" title="variable">X</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:23"><span class="id" title="variable">e</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_weaken"><span class="id" title="lemma">is_closed_weaken</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a>, <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#empty_subseteq"><span class="id" title="lemma">empty_subseteq</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_closed_subst" class="idref" href="#is_closed_subst"><span class="id" title="lemma">is_closed_subst</span></a> <a id="X:24" class="idref" href="#X:24"><span class="id" title="binder">X</span></a> <a id="e:25" class="idref" href="#e:25"><span class="id" title="binder">e</span></a> <a id="y:26" class="idref" href="#y:26"><span class="id" title="binder">y</span></a> <a id="v:27" class="idref" href="#v:27"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_val"><span class="id" title="definition">is_closed_val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:27"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_expr"><span class="id" title="definition">is_closed_expr</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#y:26"><span class="id" title="variable">y</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#X:24"><span class="id" title="variable">X</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#e:25"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_expr"><span class="id" title="definition">is_closed_expr</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#X:24"><span class="id" title="variable">X</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#y:26"><span class="id" title="variable">y</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:27"><span class="id" title="variable">v</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:25"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hv</span>. <span class="id" title="var">revert</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>=&gt; <span class="id" title="var">X</span> /= ?; <span class="id" title="var">destruct_and</span>?; <span class="id" title="var">split_and</span>?; <span class="id" title="var">simplify_option_eq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬(</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">)</span></a> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#not_and_l"><span class="id" title="lemma">not_and_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [?%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#dec_stable"><span class="id" title="lemma">dec_stable</span></a>|?%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#dec_stable"><span class="id" title="lemma">dec_stable</span></a>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_weaken"><span class="id" title="lemma">is_closed_weaken</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">set_solver</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_closed_subst'" class="idref" href="#is_closed_subst'"><span class="id" title="lemma">is_closed_subst'</span></a> <a id="X:28" class="idref" href="#X:28"><span class="id" title="binder">X</span></a> <a id="e:29" class="idref" href="#e:29"><span class="id" title="binder">e</span></a> <a id="x:30" class="idref" href="#x:30"><span class="id" title="binder">x</span></a> <a id="v:31" class="idref" href="#v:31"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_val"><span class="id" title="definition">is_closed_val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:31"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_expr"><span class="id" title="definition">is_closed_expr</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#set_binder_insert"><span class="id" title="definition">set_binder_insert</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:30"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#X:28"><span class="id" title="variable">X</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#e:29"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_expr"><span class="id" title="definition">is_closed_expr</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#X:28"><span class="id" title="variable">X</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst'"><span class="id" title="definition">subst'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:30"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:31"><span class="id" title="variable">v</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:29"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_subst"><span class="id" title="lemma">is_closed_subst</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_is_closed" class="idref" href="#subst_is_closed"><span class="id" title="lemma">subst_is_closed</span></a> <a id="X:32" class="idref" href="#X:32"><span class="id" title="binder">X</span></a> <a id="e:33" class="idref" href="#e:33"><span class="id" title="binder">e</span></a> <a id="x:34" class="idref" href="#x:34"><span class="id" title="binder">x</span></a> <a id="es:35" class="idref" href="#es:35"><span class="id" title="binder">es</span></a> : <a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_expr"><span class="id" title="definition">is_closed_expr</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#X:32"><span class="id" title="variable">X</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:33"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:34"><span class="id" title="variable">x</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#X:32"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:34"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#es:35"><span class="id" title="variable">es</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:33"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:33"><span class="id" title="variable">e</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>=&gt; <span class="id" title="var">X</span> /=;<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_spec"><span class="id" title="lemma">bool_decide_spec</span></a> ?<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#andb_True"><span class="id" title="lemma">andb_True</span></a>=&gt; ??;<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">case_decide</span>; <span class="id" title="var">simplify_eq</span>/=; <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">set_solver</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_is_closed_empty" class="idref" href="#subst_is_closed_empty"><span class="id" title="lemma">subst_is_closed_empty</span></a> <a id="e:36" class="idref" href="#e:36"><span class="id" title="binder">e</span></a> <a id="x:37" class="idref" href="#x:37"><span class="id" title="binder">x</span></a> <a id="v:38" class="idref" href="#v:38"><span class="id" title="binder">v</span></a> : <a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_expr"><span class="id" title="definition">is_closed_expr</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:36"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:37"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:38"><span class="id" title="variable">v</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:36"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:36"><span class="id" title="variable">e</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob_lang.metatheory.html#subst_is_closed"><span class="id" title="lemma">subst_is_closed</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a>:<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.stringmap.html#stringset"><span class="id" title="abbreviation">stringset</span></a>); <span class="id" title="var">set_solver</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_subst" class="idref" href="#subst_subst"><span class="id" title="lemma">subst_subst</span></a> <a id="e:39" class="idref" href="#e:39"><span class="id" title="binder">e</span></a> <a id="x:40" class="idref" href="#x:40"><span class="id" title="binder">x</span></a> <a id="v:41" class="idref" href="#v:41"><span class="id" title="binder">v</span></a> <a id="v':42" class="idref" href="#v':42"><span class="id" title="binder">v'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:40"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:41"><span class="id" title="variable">v</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:40"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v':42"><span class="id" title="variable">v'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:39"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:40"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v':42"><span class="id" title="variable">v'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:39"><span class="id" title="variable">e</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_option_eq</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="clutch.prob_lang.metatheory.html#subst_is_closed_empty"><span class="id" title="lemma">subst_is_closed_empty</span></a> <span class="id" title="keyword">with</span> <span class="id" title="tactic">f_equal</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_subst'" class="idref" href="#subst_subst'"><span class="id" title="lemma">subst_subst'</span></a> <a id="e:43" class="idref" href="#e:43"><span class="id" title="binder">e</span></a> <a id="x:44" class="idref" href="#x:44"><span class="id" title="binder">x</span></a> <a id="v:45" class="idref" href="#v:45"><span class="id" title="binder">v</span></a> <a id="v':46" class="idref" href="#v':46"><span class="id" title="binder">v'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst'"><span class="id" title="definition">subst'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:44"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:45"><span class="id" title="variable">v</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst'"><span class="id" title="definition">subst'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:44"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v':46"><span class="id" title="variable">v'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:43"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst'"><span class="id" title="definition">subst'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:44"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v':46"><span class="id" title="variable">v'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:43"><span class="id" title="variable">e</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="clutch.prob_lang.metatheory.html#subst_subst"><span class="id" title="lemma">subst_subst</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_subst_ne" class="idref" href="#subst_subst_ne"><span class="id" title="lemma">subst_subst_ne</span></a> <a id="e:47" class="idref" href="#e:47"><span class="id" title="binder">e</span></a> <a id="x:48" class="idref" href="#x:48"><span class="id" title="binder">x</span></a> <a id="y:49" class="idref" href="#y:49"><span class="id" title="binder">y</span></a> <a id="v:50" class="idref" href="#v:50"><span class="id" title="binder">v</span></a> <a id="v':51" class="idref" href="#v':51"><span class="id" title="binder">v'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#x:48"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#y:49"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:48"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:50"><span class="id" title="variable">v</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#y:49"><span class="id" title="variable">y</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v':51"><span class="id" title="variable">v'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:47"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#y:49"><span class="id" title="variable">y</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v':51"><span class="id" title="variable">v'</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:48"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:50"><span class="id" title="variable">v</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:47"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_option_eq</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a>, <a class="idref" href="clutch.prob_lang.metatheory.html#subst_is_closed_empty"><span class="id" title="lemma">subst_is_closed_empty</span></a> <span class="id" title="keyword">with</span> <span class="id" title="tactic">f_equal</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_subst_ne'" class="idref" href="#subst_subst_ne'"><span class="id" title="lemma">subst_subst_ne'</span></a> <a id="e:52" class="idref" href="#e:52"><span class="id" title="binder">e</span></a> <a id="x:53" class="idref" href="#x:53"><span class="id" title="binder">x</span></a> <a id="y:54" class="idref" href="#y:54"><span class="id" title="binder">y</span></a> <a id="v:55" class="idref" href="#v:55"><span class="id" title="binder">v</span></a> <a id="v':56" class="idref" href="#v':56"><span class="id" title="binder">v'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#x:53"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#y:54"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst'"><span class="id" title="definition">subst'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:53"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:55"><span class="id" title="variable">v</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst'"><span class="id" title="definition">subst'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#y:54"><span class="id" title="variable">y</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v':56"><span class="id" title="variable">v'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:52"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst'"><span class="id" title="definition">subst'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#y:54"><span class="id" title="variable">y</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v':56"><span class="id" title="variable">v'</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst'"><span class="id" title="definition">subst'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:53"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:55"><span class="id" title="variable">v</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:52"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>, <span class="id" title="var">y</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="clutch.prob_lang.metatheory.html#subst_subst_ne"><span class="id" title="lemma">subst_subst_ne</span></a> <span class="id" title="keyword">with</span> <span class="id" title="tactic">congruence</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_rec'" class="idref" href="#subst_rec'"><span class="id" title="lemma">subst_rec'</span></a> <a id="f:57" class="idref" href="#f:57"><span class="id" title="binder">f</span></a> <a id="y:58" class="idref" href="#y:58"><span class="id" title="binder">y</span></a> <a id="e:59" class="idref" href="#e:59"><span class="id" title="binder">e</span></a> <a id="x:60" class="idref" href="#x:60"><span class="id" title="binder">x</span></a> <a id="v:61" class="idref" href="#v:61"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#x:60"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#f:57"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">∨</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:60"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#y:58"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">∨</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:60"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#BAnon"><span class="id" title="constructor">BAnon</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst'"><span class="id" title="definition">subst'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:60"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:61"><span class="id" title="variable">v</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Rec"><span class="id" title="constructor">Rec</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#f:57"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#y:58"><span class="id" title="variable">y</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:59"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Rec"><span class="id" title="constructor">Rec</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#f:57"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#y:58"><span class="id" title="variable">y</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:59"><span class="id" title="variable">e</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="var">simplify_option_eq</span>; <span class="id" title="var">naive_solver</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_rec_ne'" class="idref" href="#subst_rec_ne'"><span class="id" title="lemma">subst_rec_ne'</span></a> <a id="f:62" class="idref" href="#f:62"><span class="id" title="binder">f</span></a> <a id="y:63" class="idref" href="#y:63"><span class="id" title="binder">y</span></a> <a id="e:64" class="idref" href="#e:64"><span class="id" title="binder">e</span></a> <a id="x:65" class="idref" href="#x:65"><span class="id" title="binder">x</span></a> <a id="v:66" class="idref" href="#v:66"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#x:65"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#f:62"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">∨</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#f:62"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#BAnon"><span class="id" title="constructor">BAnon</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#x:65"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#y:63"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">∨</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#y:63"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#BAnon"><span class="id" title="constructor">BAnon</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst'"><span class="id" title="definition">subst'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:65"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:66"><span class="id" title="variable">v</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Rec"><span class="id" title="constructor">Rec</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#f:62"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#y:63"><span class="id" title="variable">y</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:64"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Rec"><span class="id" title="constructor">Rec</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#f:62"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#y:63"><span class="id" title="variable">y</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst'"><span class="id" title="definition">subst'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:65"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:66"><span class="id" title="variable">v</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:64"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="var">simplify_option_eq</span>; <span class="id" title="var">naive_solver</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="bin_op_eval_closed" class="idref" href="#bin_op_eval_closed"><span class="id" title="lemma">bin_op_eval_closed</span></a> <a id="op:67" class="idref" href="#op:67"><span class="id" title="binder">op</span></a> <a id="v1:68" class="idref" href="#v1:68"><span class="id" title="binder">v1</span></a> <a id="v2:69" class="idref" href="#v2:69"><span class="id" title="binder">v2</span></a> <a id="v':70" class="idref" href="#v':70"><span class="id" title="binder">v'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_val"><span class="id" title="definition">is_closed_val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v1:68"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_val"><span class="id" title="definition">is_closed_val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v2:69"><span class="id" title="variable">v2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.bin_op_eval"><span class="id" title="definition">bin_op_eval</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#op:67"><span class="id" title="variable">op</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v1:68"><span class="id" title="variable">v1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v2:69"><span class="id" title="variable">v2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v':70"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_val"><span class="id" title="definition">is_closed_val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v':70"><span class="id" title="variable">v'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.bin_op_eval"><span class="id" title="definition">bin_op_eval</span></a> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.bin_op_eval_bool"><span class="id" title="definition">bin_op_eval_bool</span></a> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.bin_op_eval_int"><span class="id" title="definition">bin_op_eval_int</span></a> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.bin_op_eval_loc"><span class="id" title="definition">bin_op_eval_loc</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">case_match</span>; <span class="id" title="tactic">by</span> <span class="id" title="var">naive_solver</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="heap_closed_alloc" class="idref" href="#heap_closed_alloc"><span class="id" title="lemma">heap_closed_alloc</span></a> <a id="afad42119ba6a7e5f24c10a4d6fd157f" class="idref" href="#afad42119ba6a7e5f24c10a4d6fd157f"><span class="id" title="binder">σ</span></a> <a id="l:72" class="idref" href="#l:72"><span class="id" title="binder">l</span></a> <a id="n:73" class="idref" href="#n:73"><span class="id" title="binder">n</span></a> <a id="w:74" class="idref" href="#w:74"><span class="id" title="binder">w</span></a> :<br/>
&nbsp;&nbsp;(0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#n:73"><span class="id" title="variable">n</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_val"><span class="id" title="definition">is_closed_val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#w:74"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_Forall"><span class="id" title="definition">map_Forall</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">_</span> <a id="v:75" class="idref" href="#v:75"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_val"><span class="id" title="definition">is_closed_val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:75"><span class="id" title="variable">v</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.heap"><span class="id" title="projection">heap</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#afad42119ba6a7e5f24c10a4d6fd157f"><span class="id" title="variable">σ</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="i:76" class="idref" href="#i:76"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> (0 <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#4ba61b06dfba8efe2fde3e31f9b023d3"><span class="id" title="notation">≤</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#i:76"><span class="id" title="variable">i</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#i:76"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#n:73"><span class="id" title="variable">n</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.heap"><span class="id" title="projection">heap</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#afad42119ba6a7e5f24c10a4d6fd157f"><span class="id" title="variable">σ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#l:72"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.prob_lang.locations.html#bc1cab6cf9386d7d54258da29afab04c"><span class="id" title="notation">+ₗ</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#i:76"><span class="id" title="variable">i</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_Forall"><span class="id" title="definition">map_Forall</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">_</span> <a id="v:77" class="idref" href="#v:77"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_val"><span class="id" title="definition">is_closed_val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:77"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.heap_array"><span class="id" title="definition">heap_array</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#l:72"><span class="id" title="variable">l</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#replicate"><span class="id" title="definition">replicate</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#n:73"><span class="id" title="variable">n</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#w:74"><span class="id" title="variable">w</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.heap"><span class="id" title="projection">heap</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#afad42119ba6a7e5f24c10a4d6fd157f"><span class="id" title="variable">σ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hn</span> <span class="id" title="var">Hw</span> <span class="id" title="var">H</span>σ <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_Forall_ind"><span class="id" title="lemma">map_Forall_ind</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="k:78" class="idref" href="#k:78"><span class="id" title="binder"><span id="k:80" class="id">k</span></span></a> <a id="v:79" class="idref" href="#v:79"><span class="id" title="binder"><span id="v:81" class="id">v</span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.heap_array"><span class="id" title="definition">heap_array</span></a> <span class="id" title="var">l</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#replicate"><span class="id" title="definition">replicate</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <span class="id" title="var">n</span>) <span class="id" title="var">w</span>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.heap"><span class="id" title="projection">heap</span></a> σ<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#k:78"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:79"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">)</span></a>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_Forall_empty"><span class="id" title="lemma">map_Forall_empty</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> <span class="id" title="var">i</span> <span class="id" title="var">x</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hix</span> <span class="id" title="var">Hkwm</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_Forall_insert_2"><span class="id" title="lemma">map_Forall_insert_2</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_union_Some"><span class="id" title="lemma">lookup_union_Some</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hix</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.heap_array_map_disjoint"><span class="id" title="lemma">heap_array_map_disjoint</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#replicate_length"><span class="id" title="lemma">replicate_length</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Z2Nat.id"><span class="id" title="lemma">Z2Nat.id</span></a>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hix</span> <span class="id" title="keyword">as</span> [(?&amp;?&amp;?&amp;[-&gt; <span class="id" title="var">Hlt</span>%<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#inj_lt"><span class="id" title="definition">inj_lt</span></a>]%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#lookup_replicate_1"><span class="id" title="lemma">lookup_replicate_1</span></a>)%<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.heap_array_lookup"><span class="id" title="lemma">heap_array_lookup</span></a>|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">j</span> <span class="id" title="var">Hj</span>]%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#elem_of_map_to_list"><span class="id" title="lemma">elem_of_map_to_list</span></a>%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_lookup_1"><span class="id" title="lemma">elem_of_list_lookup_1</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">simplify_eq</span>/=. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Z2Nat.id"><span class="id" title="lemma">Z2Nat.id</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlt</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_Forall_to_list"><span class="id" title="lemma">map_Forall_to_list</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>σ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#Forall_lookup"><span class="id" title="lemma">Forall_lookup</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>σ; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_Forall_to_list"><span class="id" title="lemma">map_Forall_to_list</span></a>, <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [? ?]; <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#elem_of_map_to_list"><span class="id" title="lemma">elem_of_map_to_list</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_map_empty" class="idref" href="#subst_map_empty"><span class="id" title="lemma">subst_map_empty</span></a> <a id="e:82" class="idref" href="#e:82"><span class="id" title="binder">e</span></a> : <a class="idref" href="clutch.prob_lang.metatheory.html#subst_map"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:82"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:82"><span class="id" title="variable">e</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:83" class="idref" href="#x:83"><span class="id" title="binder"><span id="x:84" class="id">x</span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#binder_delete"><span class="id" title="definition">binder_delete</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:83"><span class="id" title="variable">x</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a>:<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gmap"><span class="id" title="record">gmap</span></a> <span class="id" title="var">_</span> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hdel</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> [|<span class="id" title="var">x</span>]; <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /= ?<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#delete_empty"><span class="id" title="lemma">delete_empty</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">rewrite</span> ?<span class="id" title="var">Hdel</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">f_equal</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_map_insert" class="idref" href="#subst_map_insert"><span class="id" title="lemma">subst_map_insert</span></a> <a id="x:85" class="idref" href="#x:85"><span class="id" title="binder">x</span></a> <a id="v:86" class="idref" href="#v:86"><span class="id" title="binder">v</span></a> <a id="vs:87" class="idref" href="#vs:87"><span class="id" title="binder">vs</span></a> <a id="e:88" class="idref" href="#e:88"><span class="id" title="binder">e</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map"><span class="id" title="definition">subst_map</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#x:85"><span class="id" title="variable">x</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#v:86"><span class="id" title="variable">v</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">vs</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#e:88"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:85"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:86"><span class="id" title="variable">v</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map"><span class="id" title="definition">subst_map</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#delete"><span class="id" title="definition">delete</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:85"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:87"><span class="id" title="variable">vs</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#e:88"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">vs</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>=&gt; <span class="id" title="var">vs</span>; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a>?<span class="id" title="var">x</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><span class="id" title="var">_</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">_</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> ?<span class="id" title="var">y</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">y</span>)); <span class="id" title="var">simplify_map_eq</span>=&gt; //<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">case</span> (<span class="id" title="var">vs</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">_</span>); <span class="id" title="var">simplify_option_eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> [[??]|[&lt;-%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#dec_stable"><span class="id" title="lemma">dec_stable</span></a>|[&lt;-%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#dec_stable"><span class="id" title="lemma">dec_stable</span></a> ?]]%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#not_and_l_alt"><span class="id" title="lemma">not_and_l_alt</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#binder_delete_insert"><span class="id" title="lemma">binder_delete_insert</span></a> // !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#binder_delete_delete"><span class="id" title="lemma">binder_delete_delete</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /= <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#delete_insert_delete"><span class="id" title="lemma">delete_insert_delete</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#delete_idemp"><span class="id" title="lemma">delete_idemp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /= <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#binder_delete_insert"><span class="id" title="lemma">binder_delete_insert</span></a> // <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#delete_insert_delete"><span class="id" title="lemma">delete_insert_delete</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#binder_delete_delete"><span class="id" title="lemma">binder_delete_delete</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#delete_idemp"><span class="id" title="lemma">delete_idemp</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_map_singleton" class="idref" href="#subst_map_singleton"><span class="id" title="lemma">subst_map_singleton</span></a> <a id="x:89" class="idref" href="#x:89"><span class="id" title="binder">x</span></a> <a id="v:90" class="idref" href="#v:90"><span class="id" title="binder">v</span></a> <a id="e:91" class="idref" href="#e:91"><span class="id" title="binder">e</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">{[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#x:89"><span class="id" title="variable">x</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#v:90"><span class="id" title="variable">v</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">]}</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:91"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:89"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:90"><span class="id" title="variable">v</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:91"><span class="id" title="variable">e</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob_lang.metatheory.html#subst_map_insert"><span class="id" title="lemma">subst_map_insert</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#delete_empty"><span class="id" title="lemma">delete_empty</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#subst_map_empty"><span class="id" title="lemma">subst_map_empty</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_map_binder_insert" class="idref" href="#subst_map_binder_insert"><span class="id" title="lemma">subst_map_binder_insert</span></a> <a id="b:92" class="idref" href="#b:92"><span class="id" title="binder">b</span></a> <a id="v:93" class="idref" href="#v:93"><span class="id" title="binder">v</span></a> <a id="vs:94" class="idref" href="#vs:94"><span class="id" title="binder">vs</span></a> <a id="e:95" class="idref" href="#e:95"><span class="id" title="binder">e</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map"><span class="id" title="definition">subst_map</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#binder_insert"><span class="id" title="definition">binder_insert</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b:92"><span class="id" title="variable">b</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:93"><span class="id" title="variable">v</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:94"><span class="id" title="variable">vs</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#e:95"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst'"><span class="id" title="definition">subst'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b:92"><span class="id" title="variable">b</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:93"><span class="id" title="variable">v</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map"><span class="id" title="definition">subst_map</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#binder_delete"><span class="id" title="definition">binder_delete</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b:92"><span class="id" title="variable">b</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:94"><span class="id" title="variable">vs</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#e:95"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">rewrite</span> ?<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map_insert"><span class="id" title="lemma">subst_map_insert</span></a> //. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_map_binder_insert_empty" class="idref" href="#subst_map_binder_insert_empty"><span class="id" title="lemma">subst_map_binder_insert_empty</span></a> <a id="b:96" class="idref" href="#b:96"><span class="id" title="binder">b</span></a> <a id="v:97" class="idref" href="#v:97"><span class="id" title="binder">v</span></a> <a id="e:98" class="idref" href="#e:98"><span class="id" title="binder">e</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map"><span class="id" title="definition">subst_map</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#binder_insert"><span class="id" title="definition">binder_insert</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b:96"><span class="id" title="variable">b</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:97"><span class="id" title="variable">v</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#e:98"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst'"><span class="id" title="definition">subst'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b:96"><span class="id" title="variable">b</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:97"><span class="id" title="variable">v</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:98"><span class="id" title="variable">e</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob_lang.metatheory.html#subst_map_binder_insert"><span class="id" title="lemma">subst_map_binder_insert</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#binder_delete_empty"><span class="id" title="lemma">binder_delete_empty</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#subst_map_empty"><span class="id" title="lemma">subst_map_empty</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_map_binder_insert_2" class="idref" href="#subst_map_binder_insert_2"><span class="id" title="lemma">subst_map_binder_insert_2</span></a> <a id="b1:99" class="idref" href="#b1:99"><span class="id" title="binder">b1</span></a> <a id="v1:100" class="idref" href="#v1:100"><span class="id" title="binder">v1</span></a> <a id="b2:101" class="idref" href="#b2:101"><span class="id" title="binder">b2</span></a> <a id="v2:102" class="idref" href="#v2:102"><span class="id" title="binder">v2</span></a> <a id="vs:103" class="idref" href="#vs:103"><span class="id" title="binder">vs</span></a> <a id="e:104" class="idref" href="#e:104"><span class="id" title="binder">e</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map"><span class="id" title="definition">subst_map</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#binder_insert"><span class="id" title="definition">binder_insert</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b1:99"><span class="id" title="variable">b1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v1:100"><span class="id" title="variable">v1</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#binder_insert"><span class="id" title="definition">binder_insert</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b2:101"><span class="id" title="variable">b2</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v2:102"><span class="id" title="variable">v2</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:103"><span class="id" title="variable">vs</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#e:104"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst'"><span class="id" title="definition">subst'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b2:101"><span class="id" title="variable">b2</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v2:102"><span class="id" title="variable">v2</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst'"><span class="id" title="definition">subst'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b1:99"><span class="id" title="variable">b1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v1:100"><span class="id" title="variable">v1</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map"><span class="id" title="definition">subst_map</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#binder_delete"><span class="id" title="definition">binder_delete</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b2:101"><span class="id" title="variable">b2</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#binder_delete"><span class="id" title="definition">binder_delete</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b1:99"><span class="id" title="variable">b1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:103"><span class="id" title="variable">vs</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#e:104"><span class="id" title="variable">e</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b1</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">s1</span>], <span class="id" title="var">b2</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">s2</span>]=&gt; /=; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="clutch.prob_lang.metatheory.html#subst_map_insert"><span class="id" title="lemma">subst_map_insert</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob_lang.metatheory.html#subst_map_insert"><span class="id" title="lemma">subst_map_insert</span></a>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">s1</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">s2</span>)) <span class="id" title="keyword">as</span> [-&gt;|].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#delete_idemp"><span class="id" title="lemma">delete_idemp</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#subst_subst"><span class="id" title="lemma">subst_subst</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#delete_insert_delete"><span class="id" title="lemma">delete_insert_delete</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#delete_insert_ne"><span class="id" title="lemma">delete_insert_ne</span></a> // <a class="idref" href="clutch.prob_lang.metatheory.html#subst_map_insert"><span class="id" title="lemma">subst_map_insert</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#subst_subst_ne"><span class="id" title="lemma">subst_subst_ne</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_map_binder_insert_2_empty" class="idref" href="#subst_map_binder_insert_2_empty"><span class="id" title="lemma">subst_map_binder_insert_2_empty</span></a> <a id="b1:105" class="idref" href="#b1:105"><span class="id" title="binder">b1</span></a> <a id="v1:106" class="idref" href="#v1:106"><span class="id" title="binder">v1</span></a> <a id="b2:107" class="idref" href="#b2:107"><span class="id" title="binder">b2</span></a> <a id="v2:108" class="idref" href="#v2:108"><span class="id" title="binder">v2</span></a> <a id="e:109" class="idref" href="#e:109"><span class="id" title="binder">e</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map"><span class="id" title="definition">subst_map</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#binder_insert"><span class="id" title="definition">binder_insert</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b1:105"><span class="id" title="variable">b1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v1:106"><span class="id" title="variable">v1</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#binder_insert"><span class="id" title="definition">binder_insert</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b2:107"><span class="id" title="variable">b2</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v2:108"><span class="id" title="variable">v2</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#e:109"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst'"><span class="id" title="definition">subst'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b2:107"><span class="id" title="variable">b2</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v2:108"><span class="id" title="variable">v2</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst'"><span class="id" title="definition">subst'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b1:105"><span class="id" title="variable">b1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v1:106"><span class="id" title="variable">v1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:109"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob_lang.metatheory.html#subst_map_binder_insert_2"><span class="id" title="lemma">subst_map_binder_insert_2</span></a> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#binder_delete_empty"><span class="id" title="lemma">binder_delete_empty</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#subst_map_empty"><span class="id" title="lemma">subst_map_empty</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_map_is_closed" class="idref" href="#subst_map_is_closed"><span class="id" title="lemma">subst_map_is_closed</span></a> <a id="X:110" class="idref" href="#X:110"><span class="id" title="binder">X</span></a> <a id="e:111" class="idref" href="#e:111"><span class="id" title="binder">e</span></a> <a id="vs:112" class="idref" href="#vs:112"><span class="id" title="binder">vs</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_expr"><span class="id" title="definition">is_closed_expr</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#X:110"><span class="id" title="variable">X</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:111"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:113" class="idref" href="#x:113"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:113"><span class="id" title="variable">x</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#X:110"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:112"><span class="id" title="variable">vs</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:113"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#subst_map"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:112"><span class="id" title="variable">vs</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:111"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:111"><span class="id" title="variable">e</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">X</span> <span class="id" title="var">vs</span>. <span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:114" class="idref" href="#x:114"><span class="id" title="binder"><span id="x:120" class="id">x</span></span></a> <a id="x1:115" class="idref" href="#x1:115"><span class="id" title="binder"><span id="x1:121" class="id">x1</span></span></a> <a id="x2:116" class="idref" href="#x2:116"><span class="id" title="binder"><span id="x2:122" class="id">x2</span></span></a> <a id="X:117" class="idref" href="#X:117"><span class="id" title="binder"><span id="X:123" class="id">X</span></span></a> (<a id="vs:118" class="idref" href="#vs:118"><span class="id" title="binder"><span id="vs:124" class="id">vs</span></span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gmap"><span class="id" title="record">gmap</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:119" class="idref" href="#x:119"><span class="id" title="binder"><span id="x:125" class="id">x</span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:119"><span class="id" title="variable">x</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#X:117"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:118"><span class="id" title="variable">vs</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:119"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#x:114"><span class="id" title="variable">x</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#set_binder_insert"><span class="id" title="definition">set_binder_insert</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x2:116"><span class="id" title="variable">x2</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#set_binder_insert"><span class="id" title="definition">set_binder_insert</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x1:115"><span class="id" title="variable">x1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#X:117"><span class="id" title="variable">X</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#binder_delete"><span class="id" title="definition">binder_delete</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x1:115"><span class="id" title="variable">x1</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#binder_delete"><span class="id" title="definition">binder_delete</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x2:116"><span class="id" title="variable">x2</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:118"><span class="id" title="variable">vs</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:114"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">x1</span> <span class="id" title="var">x2</span> <span class="id" title="var">X</span> <span class="id" title="var">vs</span> ??. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#lookup_binder_delete_None"><span class="id" title="lemma">lookup_binder_delete_None</span></a>. <span class="id" title="var">set_solver</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>=&gt; <span class="id" title="var">X</span> <span class="id" title="var">vs</span> /= ? <span class="id" title="var">HX</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">case_match</span>; <span class="id" title="var">naive_solver</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">f_equal</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_map_is_closed_empty" class="idref" href="#subst_map_is_closed_empty"><span class="id" title="lemma">subst_map_is_closed_empty</span></a> <a id="e:126" class="idref" href="#e:126"><span class="id" title="binder">e</span></a> <a id="vs:127" class="idref" href="#vs:127"><span class="id" title="binder">vs</span></a> : <a class="idref" href="clutch.prob_lang.metatheory.html#is_closed_expr"><span class="id" title="definition">is_closed_expr</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:126"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#subst_map"><span class="id" title="definition">subst_map</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#vs:127"><span class="id" title="variable">vs</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:126"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:126"><span class="id" title="variable">e</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob_lang.metatheory.html#subst_map_is_closed"><span class="id" title="lemma">subst_map_is_closed</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.stringmap.html#stringset"><span class="id" title="abbreviation">stringset</span></a>); <span class="id" title="var">set_solver</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">R</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab79"></a><h1 class="section">rand(N) ~ rand(N) coupling</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="Rcoupl_rand_rand" class="idref" href="#Rcoupl_rand_rand"><span class="id" title="lemma">Rcoupl_rand_rand</span></a> <a id="N:128" class="idref" href="#N:128"><span class="id" title="binder">N</span></a> <a id="f:129" class="idref" href="#f:129"><span class="id" title="binder">f</span></a> `{<a id="H:130" class="idref" href="#H:130"><span class="id" title="binder">Bij</span></a> <a id="H:130" class="idref" href="#H:130"><span class="id" title="binder">(</span></a><a id="H:130" class="idref" href="#H:130"><span class="id" title="binder">fin</span></a> <a id="H:130" class="idref" href="#H:130"><span class="id" title="binder">(</span></a><a id="H:130" class="idref" href="#H:130"><span class="id" title="binder">S</span></a> <a id="H:130" class="idref" href="#H:130"><span class="id" title="binder">N</span></a><a id="H:130" class="idref" href="#H:130"><span class="id" title="binder">))</span></a> <a id="H:130" class="idref" href="#H:130"><span class="id" title="binder">(</span></a><a id="H:130" class="idref" href="#H:130"><span class="id" title="binder">fin</span></a> <a id="H:130" class="idref" href="#H:130"><span class="id" title="binder">(</span></a><a id="H:130" class="idref" href="#H:130"><span class="id" title="binder">S</span></a> <a id="H:130" class="idref" href="#H:130"><span class="id" title="binder">N</span></a><a id="H:130" class="idref" href="#H:130"><span class="id" title="binder">))</span></a> <a id="H:130" class="idref" href="#H:130"><span class="id" title="binder">f</span></a>} <a id="z:131" class="idref" href="#z:131"><span class="id" title="binder">z</span></a> <a id="066bd0bd651837ae7bbbf765c4d6c7d3" class="idref" href="#066bd0bd651837ae7bbbf765c4d6c7d3"><span class="id" title="binder">σ1</span></a> <a id="18406925e28c8e4ca74b40c76bc64127" class="idref" href="#18406925e28c8e4ca74b40c76bc64127"><span class="id" title="binder">σ1'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:128"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:131"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:131"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#066bd0bd651837ae7bbbf765c4d6c7d3"><span class="id" title="variable">σ1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:131"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#18406925e28c8e4ca74b40c76bc64127"><span class="id" title="variable">σ1'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="d1e17b802380306c01f47d0b08ebe2b9" class="idref" href="#d1e17b802380306c01f47d0b08ebe2b9"><span class="id" title="binder">ρ2</span></a> <a id="eafa812a97e271ccae78bf745bd16a17" class="idref" href="#eafa812a97e271ccae78bf745bd16a17"><span class="id" title="binder">ρ2'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a id="n:136" class="idref" href="#n:136"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:128"><span class="id" title="variable">N</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#d1e17b802380306c01f47d0b08ebe2b9"><span class="id" title="variable">ρ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:136"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#066bd0bd651837ae7bbbf765c4d6c7d3"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#eafa812a97e271ccae78bf745bd16a17"><span class="id" title="variable">ρ2'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#f:129"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#n:136"><span class="id" title="variable">n</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#18406925e28c8e4ca74b40c76bc64127"><span class="id" title="variable">σ1'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hz</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.common.ectx_language.html#head_prim_step_eq"><span class="id" title="lemma">head_prim_step_eq</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.common.ectx_language.html#head_prim_step_eq"><span class="id" title="lemma">head_prim_step_eq</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a> -<span class="id" title="var">Hz</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dbind"><span class="id" title="lemma">Rcoupl_dbind</span></a>; [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dunif"><span class="id" title="lemma">Rcoupl_dunif</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> ? -&gt;.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dret"><span class="id" title="lemma">Rcoupl_dret</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab80"></a><h1 class="section">rand(N, α1) ~ rand(N, α2) coupling, "wrong" N</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="Rcoupl_rand_lbl_rand_lbl_wrong" class="idref" href="#Rcoupl_rand_lbl_rand_lbl_wrong"><span class="id" title="lemma">Rcoupl_rand_lbl_rand_lbl_wrong</span></a> <a id="N:137" class="idref" href="#N:137"><span class="id" title="binder">N</span></a> <a id="M:138" class="idref" href="#M:138"><span class="id" title="binder">M</span></a> <a id="f:139" class="idref" href="#f:139"><span class="id" title="binder">f</span></a> `{<a id="H:140" class="idref" href="#H:140"><span class="id" title="binder">Bij</span></a> <a id="H:140" class="idref" href="#H:140"><span class="id" title="binder">(</span></a><a id="H:140" class="idref" href="#H:140"><span class="id" title="binder">fin</span></a> <a id="H:140" class="idref" href="#H:140"><span class="id" title="binder">(</span></a><a id="H:140" class="idref" href="#H:140"><span class="id" title="binder">S</span></a> <a id="H:140" class="idref" href="#H:140"><span class="id" title="binder">N</span></a><a id="H:140" class="idref" href="#H:140"><span class="id" title="binder">))</span></a> <a id="H:140" class="idref" href="#H:140"><span class="id" title="binder">(</span></a><a id="H:140" class="idref" href="#H:140"><span class="id" title="binder">fin</span></a> <a id="H:140" class="idref" href="#H:140"><span class="id" title="binder">(</span></a><a id="H:140" class="idref" href="#H:140"><span class="id" title="binder">S</span></a> <a id="H:140" class="idref" href="#H:140"><span class="id" title="binder">N</span></a><a id="H:140" class="idref" href="#H:140"><span class="id" title="binder">))</span></a> <a id="H:140" class="idref" href="#H:140"><span class="id" title="binder">f</span></a>} <a id="baea140ae72d629f21cb30663a8251f0" class="idref" href="#baea140ae72d629f21cb30663a8251f0"><span class="id" title="binder">α1</span></a> <a id="fa25123cd6024d4789448fb83a4105af" class="idref" href="#fa25123cd6024d4789448fb83a4105af"><span class="id" title="binder">α2</span></a> <a id="z:143" class="idref" href="#z:143"><span class="id" title="binder">z</span></a> <a id="110ceb04f0d94037971805e42bd63679" class="idref" href="#110ceb04f0d94037971805e42bd63679"><span class="id" title="binder">σ1</span></a> <a id="b1668652fa0d756907c065a3fd5c1fa0" class="idref" href="#b1668652fa0d756907c065a3fd5c1fa0"><span class="id" title="binder">σ2</span></a> <a id="xs:146" class="idref" href="#xs:146"><span class="id" title="binder">xs</span></a> <a id="ys:147" class="idref" href="#ys:147"><span class="id" title="binder">ys</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#110ceb04f0d94037971805e42bd63679"><span class="id" title="variable">σ1</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#baea140ae72d629f21cb30663a8251f0"><span class="id" title="variable">α1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#M:138"><span class="id" title="variable">M</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#xs:146"><span class="id" title="variable">xs</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#b1668652fa0d756907c065a3fd5c1fa0"><span class="id" title="variable">σ2</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#fa25123cd6024d4789448fb83a4105af"><span class="id" title="variable">α2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#M:138"><span class="id" title="variable">M</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ys:147"><span class="id" title="variable">ys</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:137"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:138"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:137"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:143"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">rand</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#baea140ae72d629f21cb30663a8251f0"><span class="id" title="variable">α1</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:143"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#110ceb04f0d94037971805e42bd63679"><span class="id" title="variable">σ1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">rand</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#fa25123cd6024d4789448fb83a4105af"><span class="id" title="variable">α2</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:143"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#b1668652fa0d756907c065a3fd5c1fa0"><span class="id" title="variable">σ2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="1b1a2f0c573060c706ad4e182fe1481c" class="idref" href="#1b1a2f0c573060c706ad4e182fe1481c"><span class="id" title="binder">ρ2</span></a> <a id="12a4a3fe86228a1de4fcbfba0f2b63ed" class="idref" href="#12a4a3fe86228a1de4fcbfba0f2b63ed"><span class="id" title="binder">ρ2'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a id="n:150" class="idref" href="#n:150"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:137"><span class="id" title="variable">N</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#1b1a2f0c573060c706ad4e182fe1481c"><span class="id" title="variable">ρ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:150"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#110ceb04f0d94037971805e42bd63679"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#12a4a3fe86228a1de4fcbfba0f2b63ed"><span class="id" title="variable">ρ2'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#f:139"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#n:150"><span class="id" title="variable">n</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b1668652fa0d756907c065a3fd5c1fa0"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>σ1 <span class="id" title="var">H</span>σ2 <span class="id" title="var">Hneq</span> <span class="id" title="var">Hz</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="clutch.common.ectx_language.html#head_prim_step_eq"><span class="id" title="lemma">head_prim_step_eq</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a> -<span class="id" title="var">Hz</span> <span class="id" title="var">H</span>σ1 <span class="id" title="var">H</span>σ2.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_false_2"><span class="id" title="lemma">bool_decide_eq_false_2</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dbind"><span class="id" title="lemma">Rcoupl_dbind</span></a>; [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dunif"><span class="id" title="lemma">Rcoupl_dunif</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> ? -&gt;.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dret"><span class="id" title="lemma">Rcoupl_dret</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab81"></a><h1 class="section">rand(N,α) ~ rand(N) coupling, "wrong" N</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="Rcoupl_rand_lbl_rand_wrong" class="idref" href="#Rcoupl_rand_lbl_rand_wrong"><span class="id" title="lemma">Rcoupl_rand_lbl_rand_wrong</span></a> <a id="N:151" class="idref" href="#N:151"><span class="id" title="binder">N</span></a> <a id="M:152" class="idref" href="#M:152"><span class="id" title="binder">M</span></a> <a id="f:153" class="idref" href="#f:153"><span class="id" title="binder">f</span></a> `{<a id="H:154" class="idref" href="#H:154"><span class="id" title="binder">Bij</span></a> <a id="H:154" class="idref" href="#H:154"><span class="id" title="binder">(</span></a><a id="H:154" class="idref" href="#H:154"><span class="id" title="binder">fin</span></a> <a id="H:154" class="idref" href="#H:154"><span class="id" title="binder">(</span></a><a id="H:154" class="idref" href="#H:154"><span class="id" title="binder">S</span></a> <a id="H:154" class="idref" href="#H:154"><span class="id" title="binder">N</span></a><a id="H:154" class="idref" href="#H:154"><span class="id" title="binder">))</span></a> <a id="H:154" class="idref" href="#H:154"><span class="id" title="binder">(</span></a><a id="H:154" class="idref" href="#H:154"><span class="id" title="binder">fin</span></a> <a id="H:154" class="idref" href="#H:154"><span class="id" title="binder">(</span></a><a id="H:154" class="idref" href="#H:154"><span class="id" title="binder">S</span></a> <a id="H:154" class="idref" href="#H:154"><span class="id" title="binder">N</span></a><a id="H:154" class="idref" href="#H:154"><span class="id" title="binder">))</span></a> <a id="H:154" class="idref" href="#H:154"><span class="id" title="binder">f</span></a>} <a id="e9428cb25b2116007f013d63e9678129" class="idref" href="#e9428cb25b2116007f013d63e9678129"><span class="id" title="binder">α1</span></a> <a id="z:156" class="idref" href="#z:156"><span class="id" title="binder">z</span></a> <a id="ee22155ea7f6f6973b4c3ac596d89c68" class="idref" href="#ee22155ea7f6f6973b4c3ac596d89c68"><span class="id" title="binder">σ1</span></a> <a id="1a4df40d83cf2584b10117061eab567e" class="idref" href="#1a4df40d83cf2584b10117061eab567e"><span class="id" title="binder">σ2</span></a> <a id="xs:159" class="idref" href="#xs:159"><span class="id" title="binder">xs</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#ee22155ea7f6f6973b4c3ac596d89c68"><span class="id" title="variable">σ1</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e9428cb25b2116007f013d63e9678129"><span class="id" title="variable">α1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#M:152"><span class="id" title="variable">M</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#xs:159"><span class="id" title="variable">xs</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:151"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:152"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:151"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:156"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">rand</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#e9428cb25b2116007f013d63e9678129"><span class="id" title="variable">α1</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:156"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#ee22155ea7f6f6973b4c3ac596d89c68"><span class="id" title="variable">σ1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:156"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#1a4df40d83cf2584b10117061eab567e"><span class="id" title="variable">σ2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="9e32691151468d2ed1fa1bb9230e2af9" class="idref" href="#9e32691151468d2ed1fa1bb9230e2af9"><span class="id" title="binder">ρ2</span></a> <a id="ce169d707c39cf5858d2eeaff9c3c1b4" class="idref" href="#ce169d707c39cf5858d2eeaff9c3c1b4"><span class="id" title="binder">ρ2'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a id="n:162" class="idref" href="#n:162"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:151"><span class="id" title="variable">N</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#9e32691151468d2ed1fa1bb9230e2af9"><span class="id" title="variable">ρ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:162"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ee22155ea7f6f6973b4c3ac596d89c68"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ce169d707c39cf5858d2eeaff9c3c1b4"><span class="id" title="variable">ρ2'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#f:153"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#n:162"><span class="id" title="variable">n</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#1a4df40d83cf2584b10117061eab567e"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>σ1 <span class="id" title="var">Hneq</span> <span class="id" title="var">Hz</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="clutch.common.ectx_language.html#head_prim_step_eq"><span class="id" title="lemma">head_prim_step_eq</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a> -<span class="id" title="var">Hz</span> <span class="id" title="var">H</span>σ1.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_false_2"><span class="id" title="lemma">bool_decide_eq_false_2</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dbind"><span class="id" title="lemma">Rcoupl_dbind</span></a>; [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dunif"><span class="id" title="lemma">Rcoupl_dunif</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> ? -&gt;.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dret"><span class="id" title="lemma">Rcoupl_dret</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab82"></a><h1 class="section">rand(N) ~ rand(N, α) coupling, "wrong" N</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="Rcoupl_rand_rand_lbl_wrong" class="idref" href="#Rcoupl_rand_rand_lbl_wrong"><span class="id" title="lemma">Rcoupl_rand_rand_lbl_wrong</span></a> <a id="N:163" class="idref" href="#N:163"><span class="id" title="binder">N</span></a> <a id="M:164" class="idref" href="#M:164"><span class="id" title="binder">M</span></a> <a id="f:165" class="idref" href="#f:165"><span class="id" title="binder">f</span></a> `{<a id="H:166" class="idref" href="#H:166"><span class="id" title="binder">Bij</span></a> <a id="H:166" class="idref" href="#H:166"><span class="id" title="binder">(</span></a><a id="H:166" class="idref" href="#H:166"><span class="id" title="binder">fin</span></a> <a id="H:166" class="idref" href="#H:166"><span class="id" title="binder">(</span></a><a id="H:166" class="idref" href="#H:166"><span class="id" title="binder">S</span></a> <a id="H:166" class="idref" href="#H:166"><span class="id" title="binder">N</span></a><a id="H:166" class="idref" href="#H:166"><span class="id" title="binder">))</span></a> <a id="H:166" class="idref" href="#H:166"><span class="id" title="binder">(</span></a><a id="H:166" class="idref" href="#H:166"><span class="id" title="binder">fin</span></a> <a id="H:166" class="idref" href="#H:166"><span class="id" title="binder">(</span></a><a id="H:166" class="idref" href="#H:166"><span class="id" title="binder">S</span></a> <a id="H:166" class="idref" href="#H:166"><span class="id" title="binder">N</span></a><a id="H:166" class="idref" href="#H:166"><span class="id" title="binder">))</span></a> <a id="H:166" class="idref" href="#H:166"><span class="id" title="binder">f</span></a>} <a id="ac6ee6a1695d8fe777dd0568cf4c9ecd" class="idref" href="#ac6ee6a1695d8fe777dd0568cf4c9ecd"><span class="id" title="binder">α2</span></a> <a id="z:168" class="idref" href="#z:168"><span class="id" title="binder">z</span></a> <a id="96985fd16846ac9b73f0855f3c5d3389" class="idref" href="#96985fd16846ac9b73f0855f3c5d3389"><span class="id" title="binder">σ1</span></a> <a id="d7b9fa2e36f1f194439aeaac4a3d3a70" class="idref" href="#d7b9fa2e36f1f194439aeaac4a3d3a70"><span class="id" title="binder">σ2</span></a> <a id="ys:171" class="idref" href="#ys:171"><span class="id" title="binder">ys</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#d7b9fa2e36f1f194439aeaac4a3d3a70"><span class="id" title="variable">σ2</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ac6ee6a1695d8fe777dd0568cf4c9ecd"><span class="id" title="variable">α2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#M:164"><span class="id" title="variable">M</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ys:171"><span class="id" title="variable">ys</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:163"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:164"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:163"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:168"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:168"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#96985fd16846ac9b73f0855f3c5d3389"><span class="id" title="variable">σ1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">rand</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#ac6ee6a1695d8fe777dd0568cf4c9ecd"><span class="id" title="variable">α2</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:168"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#d7b9fa2e36f1f194439aeaac4a3d3a70"><span class="id" title="variable">σ2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="66a0c11051f72b74d47685439eda73e1" class="idref" href="#66a0c11051f72b74d47685439eda73e1"><span class="id" title="binder">ρ2</span></a> <a id="c3559b3fb5dcbab975aaad412bd95742" class="idref" href="#c3559b3fb5dcbab975aaad412bd95742"><span class="id" title="binder">ρ2'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a id="n:174" class="idref" href="#n:174"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:163"><span class="id" title="variable">N</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#66a0c11051f72b74d47685439eda73e1"><span class="id" title="variable">ρ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:174"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#96985fd16846ac9b73f0855f3c5d3389"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#c3559b3fb5dcbab975aaad412bd95742"><span class="id" title="variable">ρ2'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#f:165"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#n:174"><span class="id" title="variable">n</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#d7b9fa2e36f1f194439aeaac4a3d3a70"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>σ2 <span class="id" title="var">Hneq</span> <span class="id" title="var">Hz</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="clutch.common.ectx_language.html#head_prim_step_eq"><span class="id" title="lemma">head_prim_step_eq</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a> -<span class="id" title="var">Hz</span> <span class="id" title="var">H</span>σ2.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_false_2"><span class="id" title="lemma">bool_decide_eq_false_2</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dbind"><span class="id" title="lemma">Rcoupl_dbind</span></a>; [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dunif"><span class="id" title="lemma">Rcoupl_dunif</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> ? -&gt;.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dret"><span class="id" title="lemma">Rcoupl_dret</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab83"></a><h1 class="section">state_step(α, N) ~ state_step(α', N) coupling</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="Rcoupl_state_state" class="idref" href="#Rcoupl_state_state"><span class="id" title="lemma">Rcoupl_state_state</span></a> <a id="N:175" class="idref" href="#N:175"><span class="id" title="binder">N</span></a> <a id="f:176" class="idref" href="#f:176"><span class="id" title="binder">f</span></a> `{<a id="H:177" class="idref" href="#H:177"><span class="id" title="binder">Bij</span></a> <a id="H:177" class="idref" href="#H:177"><span class="id" title="binder">(</span></a><a id="H:177" class="idref" href="#H:177"><span class="id" title="binder">fin</span></a> <a id="H:177" class="idref" href="#H:177"><span class="id" title="binder">(</span></a><a id="H:177" class="idref" href="#H:177"><span class="id" title="binder">S</span></a> <a id="H:177" class="idref" href="#H:177"><span class="id" title="binder">N</span></a><a id="H:177" class="idref" href="#H:177"><span class="id" title="binder">))</span></a> <a id="H:177" class="idref" href="#H:177"><span class="id" title="binder">(</span></a><a id="H:177" class="idref" href="#H:177"><span class="id" title="binder">fin</span></a> <a id="H:177" class="idref" href="#H:177"><span class="id" title="binder">(</span></a><a id="H:177" class="idref" href="#H:177"><span class="id" title="binder">S</span></a> <a id="H:177" class="idref" href="#H:177"><span class="id" title="binder">N</span></a><a id="H:177" class="idref" href="#H:177"><span class="id" title="binder">))</span></a> <a id="H:177" class="idref" href="#H:177"><span class="id" title="binder">f</span></a>} <a id="d954af6c2706c3aa2357c97750f1d9b8" class="idref" href="#d954af6c2706c3aa2357c97750f1d9b8"><span class="id" title="binder">σ1</span></a> <a id="0936df009b1cabd9365f8d86a0cdcb32" class="idref" href="#0936df009b1cabd9365f8d86a0cdcb32"><span class="id" title="binder">σ2</span></a> <a id="6e9cc5f2c8bb5c2f6d103563b87f4cdd" class="idref" href="#6e9cc5f2c8bb5c2f6d103563b87f4cdd"><span class="id" title="binder">α1</span></a> <a id="ebda8d68d345e1381ebd931dcbda07be" class="idref" href="#ebda8d68d345e1381ebd931dcbda07be"><span class="id" title="binder">α2</span></a> <a id="xs:182" class="idref" href="#xs:182"><span class="id" title="binder">xs</span></a> <a id="ys:183" class="idref" href="#ys:183"><span class="id" title="binder">ys</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#d954af6c2706c3aa2357c97750f1d9b8"><span class="id" title="variable">σ1</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#6e9cc5f2c8bb5c2f6d103563b87f4cdd"><span class="id" title="variable">α1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:175"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#xs:182"><span class="id" title="variable">xs</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#0936df009b1cabd9365f8d86a0cdcb32"><span class="id" title="variable">σ2</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ebda8d68d345e1381ebd931dcbda07be"><span class="id" title="variable">α2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:175"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ys:183"><span class="id" title="variable">ys</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#d954af6c2706c3aa2357c97750f1d9b8"><span class="id" title="variable">σ1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#6e9cc5f2c8bb5c2f6d103563b87f4cdd"><span class="id" title="variable">α1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#0936df009b1cabd9365f8d86a0cdcb32"><span class="id" title="variable">σ2</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ebda8d68d345e1381ebd931dcbda07be"><span class="id" title="variable">α2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="81f37c6df0fe75c2ec03ec91212d8a71" class="idref" href="#81f37c6df0fe75c2ec03ec91212d8a71"><span class="id" title="binder">σ1'</span></a> <a id="20a2fcd0fcbab83428543a9f4e206a3d" class="idref" href="#20a2fcd0fcbab83428543a9f4e206a3d"><span class="id" title="binder">σ2'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a id="n:186" class="idref" href="#n:186"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:175"><span class="id" title="variable">N</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#81f37c6df0fe75c2ec03ec91212d8a71"><span class="id" title="variable">σ1'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#6e9cc5f2c8bb5c2f6d103563b87f4cdd"><span class="id" title="variable">α1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:175"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#xs:182"><span class="id" title="variable">xs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:186"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#d954af6c2706c3aa2357c97750f1d9b8"><span class="id" title="variable">σ1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#20a2fcd0fcbab83428543a9f4e206a3d"><span class="id" title="variable">σ2'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#ebda8d68d345e1381ebd931dcbda07be"><span class="id" title="variable">α2</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:175"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ys:183"><span class="id" title="variable">ys</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#f:176"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#n:186"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#0936df009b1cabd9365f8d86a0cdcb32"><span class="id" title="variable">σ2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hα1</span> <span class="id" title="var">Hα2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 (<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_true_2"><span class="id" title="lemma">bool_decide_eq_true_2</span></a>; [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom_2"><span class="id" title="lemma">elem_of_dom_2</span></a>]).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_total_correct"><span class="id" title="lemma">lookup_total_correct</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hα1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_total_correct"><span class="id" title="lemma">lookup_total_correct</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hα2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dbind"><span class="id" title="lemma">Rcoupl_dbind</span></a>; [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dunif"><span class="id" title="lemma">Rcoupl_dunif</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> ? -&gt;.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dret"><span class="id" title="lemma">Rcoupl_dret</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab84"></a><h1 class="section">Generalized state_step(α) ~ state_step(α') coupling</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="Rcoupl_state_step_gen" class="idref" href="#Rcoupl_state_step_gen"><span class="id" title="lemma">Rcoupl_state_step_gen</span></a> (<a id="m1:187" class="idref" href="#m1:187"><span class="id" title="binder">m1</span></a> <a id="m2:188" class="idref" href="#m2:188"><span class="id" title="binder">m2</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="R:189" class="idref" href="#R:189"><span class="id" title="binder">R</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#m1:187"><span class="id" title="variable">m1</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#m2:188"><span class="id" title="variable">m2</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) <a id="e4973ce9b79dc953458b01fec7c4bdb3" class="idref" href="#e4973ce9b79dc953458b01fec7c4bdb3"><span class="id" title="binder">σ1</span></a> <a id="b3c3e90245846ad67aa4a1aebff4c7eb" class="idref" href="#b3c3e90245846ad67aa4a1aebff4c7eb"><span class="id" title="binder">σ2</span></a> <a id="86771b3b5abc905797ab53b9eef671cf" class="idref" href="#86771b3b5abc905797ab53b9eef671cf"><span class="id" title="binder">α1</span></a> <a id="b15d41b232c40f29571e8eca3c7a4f50" class="idref" href="#b15d41b232c40f29571e8eca3c7a4f50"><span class="id" title="binder">α2</span></a> <a id="xs:194" class="idref" href="#xs:194"><span class="id" title="binder">xs</span></a> <a id="ys:195" class="idref" href="#ys:195"><span class="id" title="binder">ys</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#e4973ce9b79dc953458b01fec7c4bdb3"><span class="id" title="variable">σ1</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#86771b3b5abc905797ab53b9eef671cf"><span class="id" title="variable">α1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#m1:187"><span class="id" title="variable">m1</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#xs:194"><span class="id" title="variable">xs</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#b3c3e90245846ad67aa4a1aebff4c7eb"><span class="id" title="variable">σ2</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b15d41b232c40f29571e8eca3c7a4f50"><span class="id" title="variable">α2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#m2:188"><span class="id" title="variable">m2</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ys:195"><span class="id" title="variable">ys</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a> (<a class="idref" href="clutch.prob.distribution.html#dunif"><span class="id" title="definition">dunif</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#m1:187"><span class="id" title="variable">m1</span></a>)) (<a class="idref" href="clutch.prob.distribution.html#dunif"><span class="id" title="definition">dunif</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#m2:188"><span class="id" title="variable">m2</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#R:189"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e4973ce9b79dc953458b01fec7c4bdb3"><span class="id" title="variable">σ1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#86771b3b5abc905797ab53b9eef671cf"><span class="id" title="variable">α1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b3c3e90245846ad67aa4a1aebff4c7eb"><span class="id" title="variable">σ2</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b15d41b232c40f29571e8eca3c7a4f50"><span class="id" title="variable">α2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="0c53256addf37e2e17795f75e782180a" class="idref" href="#0c53256addf37e2e17795f75e782180a"><span class="id" title="binder">σ1'</span></a> <a id="f0dbd27d821820b171d51a87d7a5ff8e" class="idref" href="#f0dbd27d821820b171d51a87d7a5ff8e"><span class="id" title="binder">σ2'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a id="n1:198" class="idref" href="#n1:198"><span class="id" title="binder">n1</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#m1:187"><span class="id" title="variable">m1</span></a>)) (<a id="n2:199" class="idref" href="#n2:199"><span class="id" title="binder">n2</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#m2:188"><span class="id" title="variable">m2</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#R:189"><span class="id" title="variable">R</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#n1:198"><span class="id" title="variable">n1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#n2:199"><span class="id" title="variable">n2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#0c53256addf37e2e17795f75e782180a"><span class="id" title="variable">σ1'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#86771b3b5abc905797ab53b9eef671cf"><span class="id" title="variable">α1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#m1:187"><span class="id" title="variable">m1</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#xs:194"><span class="id" title="variable">xs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n1:198"><span class="id" title="variable">n1</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e4973ce9b79dc953458b01fec7c4bdb3"><span class="id" title="variable">σ1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#f0dbd27d821820b171d51a87d7a5ff8e"><span class="id" title="variable">σ2'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#b15d41b232c40f29571e8eca3c7a4f50"><span class="id" title="variable">α2</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#m2:188"><span class="id" title="variable">m2</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ys:195"><span class="id" title="variable">ys</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n2:199"><span class="id" title="variable">n2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b3c3e90245846ad67aa4a1aebff4c7eb"><span class="id" title="variable">σ2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hα1</span> <span class="id" title="var">Hα2</span> <span class="id" title="var">Hcoupl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_pos_R"><span class="id" title="lemma">Rcoupl_pos_R</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcoupl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom_2"><span class="id" title="lemma">elem_of_dom_2</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hα1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hdom1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom_2"><span class="id" title="lemma">elem_of_dom_2</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hα2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hdom2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_true_2"><span class="id" title="lemma">bool_decide_eq_true_2</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_true_2"><span class="id" title="lemma">bool_decide_eq_true_2</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_total_correct"><span class="id" title="lemma">lookup_total_correct</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hα1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_total_correct"><span class="id" title="lemma">lookup_total_correct</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hα2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dbind"><span class="id" title="lemma">Rcoupl_dbind</span></a>; [ | <span class="id" title="tactic">apply</span> <span class="id" title="var">Hcoupl</span> ]; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> (<span class="id" title="var">Hab</span> &amp; <span class="id" title="var">HposA</span> &amp; <span class="id" title="var">HposB</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#pmf"><span class="id" title="projection">pmf</span></a>/<a class="idref" href="clutch.prob.distribution.html#dunif"><span class="id" title="definition">dunif</span></a>/= <span class="id" title="tactic">in</span> <span class="id" title="var">HposA</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#pmf"><span class="id" title="projection">pmf</span></a>/<a class="idref" href="clutch.prob.distribution.html#dunif"><span class="id" title="definition">dunif</span></a>/= <span class="id" title="tactic">in</span> <span class="id" title="var">HposB</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dret"><span class="id" title="lemma">Rcoupl_dret</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab85"></a><h1 class="section">rand(unit, N) ~ state_step(α', N) coupling</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="Rcoupl_rand_state" class="idref" href="#Rcoupl_rand_state"><span class="id" title="lemma">Rcoupl_rand_state</span></a> <a id="N:200" class="idref" href="#N:200"><span class="id" title="binder">N</span></a> <a id="f:201" class="idref" href="#f:201"><span class="id" title="binder">f</span></a> `{<a id="H:202" class="idref" href="#H:202"><span class="id" title="binder">Bij</span></a> <a id="H:202" class="idref" href="#H:202"><span class="id" title="binder">(</span></a><a id="H:202" class="idref" href="#H:202"><span class="id" title="binder">fin</span></a> <a id="H:202" class="idref" href="#H:202"><span class="id" title="binder">(</span></a><a id="H:202" class="idref" href="#H:202"><span class="id" title="binder">S</span></a> <a id="H:202" class="idref" href="#H:202"><span class="id" title="binder">N</span></a><a id="H:202" class="idref" href="#H:202"><span class="id" title="binder">))</span></a> <a id="H:202" class="idref" href="#H:202"><span class="id" title="binder">(</span></a><a id="H:202" class="idref" href="#H:202"><span class="id" title="binder">fin</span></a> <a id="H:202" class="idref" href="#H:202"><span class="id" title="binder">(</span></a><a id="H:202" class="idref" href="#H:202"><span class="id" title="binder">S</span></a> <a id="H:202" class="idref" href="#H:202"><span class="id" title="binder">N</span></a><a id="H:202" class="idref" href="#H:202"><span class="id" title="binder">))</span></a> <a id="H:202" class="idref" href="#H:202"><span class="id" title="binder">f</span></a>} <a id="z:203" class="idref" href="#z:203"><span class="id" title="binder">z</span></a> <a id="bdb57b13059e4eeaaeca34d805ea8419" class="idref" href="#bdb57b13059e4eeaaeca34d805ea8419"><span class="id" title="binder">σ1</span></a> <a id="f8d226826284cfa110f700451cd743f5" class="idref" href="#f8d226826284cfa110f700451cd743f5"><span class="id" title="binder">σ1'</span></a> <a id="548ef7bf436ffed2d73192d3a95ef5e5" class="idref" href="#548ef7bf436ffed2d73192d3a95ef5e5"><span class="id" title="binder">α'</span></a> <a id="xs:207" class="idref" href="#xs:207"><span class="id" title="binder">xs</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:200"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:203"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#f8d226826284cfa110f700451cd743f5"><span class="id" title="variable">σ1'</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#548ef7bf436ffed2d73192d3a95ef5e5"><span class="id" title="variable">α'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:200"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#xs:207"><span class="id" title="variable">xs</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:203"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#bdb57b13059e4eeaaeca34d805ea8419"><span class="id" title="variable">σ1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#f8d226826284cfa110f700451cd743f5"><span class="id" title="variable">σ1'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#548ef7bf436ffed2d73192d3a95ef5e5"><span class="id" title="variable">α'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="44fd003b1cecb77b1f9ead773a763c4a" class="idref" href="#44fd003b1cecb77b1f9ead773a763c4a"><span class="id" title="binder">ρ2</span></a> <a id="abbd3bd98d1600cb07abd106dd495faf" class="idref" href="#abbd3bd98d1600cb07abd106dd495faf"><span class="id" title="binder">σ2'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a id="n:210" class="idref" href="#n:210"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:200"><span class="id" title="variable">N</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#44fd003b1cecb77b1f9ead773a763c4a"><span class="id" title="variable">ρ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:210"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bdb57b13059e4eeaaeca34d805ea8419"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#abbd3bd98d1600cb07abd106dd495faf"><span class="id" title="variable">σ2'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#548ef7bf436ffed2d73192d3a95ef5e5"><span class="id" title="variable">α'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:200"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#xs:207"><span class="id" title="variable">xs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#f:201"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#n:210"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#f8d226826284cfa110f700451cd743f5"><span class="id" title="variable">σ1'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hz</span> <span class="id" title="var">Hα'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.common.ectx_language.html#head_prim_step_eq"><span class="id" title="lemma">head_prim_step_eq</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_true_2"><span class="id" title="lemma">bool_decide_eq_true_2</span></a>; [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom_2"><span class="id" title="lemma">elem_of_dom_2</span></a>] .<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hz</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_total_correct"><span class="id" title="lemma">lookup_total_correct</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hα'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dbind"><span class="id" title="lemma">Rcoupl_dbind</span></a>; [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dunif"><span class="id" title="lemma">Rcoupl_dunif</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> ? -&gt;.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dret"><span class="id" title="lemma">Rcoupl_dret</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab86"></a><h1 class="section">state_step(α, N) ~ rand(unit, N) coupling</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="Rcoupl_state_rand" class="idref" href="#Rcoupl_state_rand"><span class="id" title="lemma">Rcoupl_state_rand</span></a> <a id="N:211" class="idref" href="#N:211"><span class="id" title="binder">N</span></a> <a id="f:212" class="idref" href="#f:212"><span class="id" title="binder">f</span></a> `{<a id="H:213" class="idref" href="#H:213"><span class="id" title="binder">Bij</span></a> <a id="H:213" class="idref" href="#H:213"><span class="id" title="binder">(</span></a><a id="H:213" class="idref" href="#H:213"><span class="id" title="binder">fin</span></a> <a id="H:213" class="idref" href="#H:213"><span class="id" title="binder">(</span></a><a id="H:213" class="idref" href="#H:213"><span class="id" title="binder">S</span></a> <a id="H:213" class="idref" href="#H:213"><span class="id" title="binder">N</span></a><a id="H:213" class="idref" href="#H:213"><span class="id" title="binder">))</span></a> <a id="H:213" class="idref" href="#H:213"><span class="id" title="binder">(</span></a><a id="H:213" class="idref" href="#H:213"><span class="id" title="binder">fin</span></a> <a id="H:213" class="idref" href="#H:213"><span class="id" title="binder">(</span></a><a id="H:213" class="idref" href="#H:213"><span class="id" title="binder">S</span></a> <a id="H:213" class="idref" href="#H:213"><span class="id" title="binder">N</span></a><a id="H:213" class="idref" href="#H:213"><span class="id" title="binder">))</span></a> <a id="H:213" class="idref" href="#H:213"><span class="id" title="binder">f</span></a>} <a id="z:214" class="idref" href="#z:214"><span class="id" title="binder">z</span></a> <a id="a4cfe2c295a249046e8618736438e672" class="idref" href="#a4cfe2c295a249046e8618736438e672"><span class="id" title="binder">σ1</span></a> <a id="4038e63a0dacf1ea13735b989c4a7949" class="idref" href="#4038e63a0dacf1ea13735b989c4a7949"><span class="id" title="binder">σ1'</span></a> <a id="8d9d8c88f341fa9c23817e43d086c96f" class="idref" href="#8d9d8c88f341fa9c23817e43d086c96f"><span class="id" title="binder">α</span></a> <a id="xs:218" class="idref" href="#xs:218"><span class="id" title="binder">xs</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:211"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:214"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#a4cfe2c295a249046e8618736438e672"><span class="id" title="variable">σ1</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#8d9d8c88f341fa9c23817e43d086c96f"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:211"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#xs:218"><span class="id" title="variable">xs</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#a4cfe2c295a249046e8618736438e672"><span class="id" title="variable">σ1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#8d9d8c88f341fa9c23817e43d086c96f"><span class="id" title="variable">α</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:214"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#4038e63a0dacf1ea13735b989c4a7949"><span class="id" title="variable">σ1'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="e8d6a9eff0b17afa76be112b09079cc5" class="idref" href="#e8d6a9eff0b17afa76be112b09079cc5"><span class="id" title="binder">σ2</span></a> <a id="95089a6f1ac388702a67fba99769611a" class="idref" href="#95089a6f1ac388702a67fba99769611a"><span class="id" title="binder">ρ2'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a id="n:221" class="idref" href="#n:221"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:211"><span class="id" title="variable">N</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#e8d6a9eff0b17afa76be112b09079cc5"><span class="id" title="variable">σ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#8d9d8c88f341fa9c23817e43d086c96f"><span class="id" title="variable">α</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:211"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#xs:218"><span class="id" title="variable">xs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:221"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#a4cfe2c295a249046e8618736438e672"><span class="id" title="variable">σ1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#95089a6f1ac388702a67fba99769611a"><span class="id" title="variable">ρ2'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#f:212"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#n:221"><span class="id" title="variable">n</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#4038e63a0dacf1ea13735b989c4a7949"><span class="id" title="variable">σ1'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hz</span> <span class="id" title="var">Hα</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.common.ectx_language.html#head_prim_step_eq"><span class="id" title="lemma">head_prim_step_eq</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_true_2"><span class="id" title="lemma">bool_decide_eq_true_2</span></a>; [ |<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom_2"><span class="id" title="lemma">elem_of_dom_2</span></a>] .<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hz</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_total_correct"><span class="id" title="lemma">lookup_total_correct</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hα</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dbind"><span class="id" title="lemma">Rcoupl_dbind</span></a>; [ |<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dunif"><span class="id" title="lemma">Rcoupl_dunif</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> ? -&gt;.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dret"><span class="id" title="lemma">Rcoupl_dret</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Rcoupl_rand_r" class="idref" href="#Rcoupl_rand_r"><span class="id" title="lemma">Rcoupl_rand_r</span></a> `{<a id="H:224" class="idref" href="#H:224"><span class="id" title="binder">Countable</span></a> <a id="A:222" class="idref" href="#A:222"><span class="id" title="binder"><span id="H:224" class="id">A</span></span></a>} <a id="N:225" class="idref" href="#N:225"><span class="id" title="binder">N</span></a> <a id="z:226" class="idref" href="#z:226"><span class="id" title="binder">z</span></a> (<a id="a:227" class="idref" href="#a:227"><span class="id" title="binder">a</span></a> : <a class="idref" href="clutch.prob_lang.metatheory.html#A:222"><span class="id" title="variable">A</span></a>) <a id="90398fe8b940e761ce210e214d4698df" class="idref" href="#90398fe8b940e761ce210e214d4698df"><span class="id" title="binder">σ1'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:225"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:226"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dret"><span class="id" title="definition">dret</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#a:227"><span class="id" title="variable">a</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:226"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#90398fe8b940e761ce210e214d4698df"><span class="id" title="variable">σ1'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a':229" class="idref" href="#a':229"><span class="id" title="binder">a'</span></a> <a id="27615ca4defe51dc5b8b2d2feeabf478" class="idref" href="#27615ca4defe51dc5b8b2d2feeabf478"><span class="id" title="binder">ρ2'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a id="n:231" class="idref" href="#n:231"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:225"><span class="id" title="variable">N</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">),</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#a':229"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#a:227"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#27615ca4defe51dc5b8b2d2feeabf478"><span class="id" title="variable">ρ2'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:231"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#90398fe8b940e761ce210e214d4698df"><span class="id" title="variable">σ1'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ?.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="clutch.common.ectx_language.html#head_reducible"><span class="id" title="class">head_reducible</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><span class="id" title="var">z</span>) σ1') <span class="id" title="keyword">as</span> <span class="id" title="var">hr</span> <span class="id" title="tactic">by</span> <span class="id" title="var">solve_red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.common.ectx_language.html#head_prim_step_eq"><span class="id" title="lemma">head_prim_step_eq</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_mono"><span class="id" title="lemma">Rcoupl_mono</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_pos_R"><span class="id" title="lemma">Rcoupl_pos_R</span></a>, <a class="idref" href="clutch.prob.couplings.html#Rcoupl_trivial"><span class="id" title="lemma">Rcoupl_trivial</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span> : <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="clutch.prob.distribution.html#dret_mass"><span class="id" title="lemma">dret_mass</span></a>, <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step_mass"><span class="id" title="lemma">head_step_mass</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> ? [] (<span class="id" title="var">_</span> &amp; <span class="id" title="var">hh</span>%<a class="idref" href="clutch.prob.distribution.html#dret_pos"><span class="id" title="lemma">dret_pos</span></a> &amp; ?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_head_step</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab87"></a><h1 class="section">e1 ~ rand(α', N) coupling for α' ↪ₛ (N, <font size=-2>&#9744;</font>)</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="Rcoupl_rand_empty_r" class="idref" href="#Rcoupl_rand_empty_r"><span class="id" title="lemma">Rcoupl_rand_empty_r</span></a> `{<a id="H:234" class="idref" href="#H:234"><span class="id" title="binder">Countable</span></a> <a id="A:232" class="idref" href="#A:232"><span class="id" title="binder"><span id="H:234" class="id">A</span></span></a>} <a id="N:235" class="idref" href="#N:235"><span class="id" title="binder">N</span></a> <a id="z:236" class="idref" href="#z:236"><span class="id" title="binder">z</span></a> (<a id="a:237" class="idref" href="#a:237"><span class="id" title="binder">a</span></a> : <a class="idref" href="clutch.prob_lang.metatheory.html#A:232"><span class="id" title="variable">A</span></a>) <a id="c804b62c95faddf99d3f7039d90496b9" class="idref" href="#c804b62c95faddf99d3f7039d90496b9"><span class="id" title="binder">σ1'</span></a> <a id="b24bdc96bd1f79f858e16409962bc4cb" class="idref" href="#b24bdc96bd1f79f858e16409962bc4cb"><span class="id" title="binder">α'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:235"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:236"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#c804b62c95faddf99d3f7039d90496b9"><span class="id" title="variable">σ1'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b24bdc96bd1f79f858e16409962bc4cb"><span class="id" title="variable">α'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:235"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dret"><span class="id" title="definition">dret</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#a:237"><span class="id" title="variable">a</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">rand</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#b24bdc96bd1f79f858e16409962bc4cb"><span class="id" title="variable">α'</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:236"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#c804b62c95faddf99d3f7039d90496b9"><span class="id" title="variable">σ1'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a':240" class="idref" href="#a':240"><span class="id" title="binder">a'</span></a> <a id="56f5865eadef81c9903cbe1ea6934930" class="idref" href="#56f5865eadef81c9903cbe1ea6934930"><span class="id" title="binder">ρ2'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a id="n:242" class="idref" href="#n:242"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:235"><span class="id" title="variable">N</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">),</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#a':240"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#a:237"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#56f5865eadef81c9903cbe1ea6934930"><span class="id" title="variable">ρ2'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:242"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#c804b62c95faddf99d3f7039d90496b9"><span class="id" title="variable">σ1'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ??.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="clutch.common.ectx_language.html#head_reducible"><span class="id" title="class">head_reducible</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">rand</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><span class="id" title="var">α'</span><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><span class="id" title="var">z</span>) σ1') <span class="id" title="keyword">as</span> <span class="id" title="var">hr</span> <span class="id" title="tactic">by</span> <span class="id" title="var">solve_red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.common.ectx_language.html#head_prim_step_eq"><span class="id" title="lemma">head_prim_step_eq</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_mono"><span class="id" title="lemma">Rcoupl_mono</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_pos_R"><span class="id" title="lemma">Rcoupl_pos_R</span></a>, <a class="idref" href="clutch.prob.couplings.html#Rcoupl_trivial"><span class="id" title="lemma">Rcoupl_trivial</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span> : <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="clutch.prob.distribution.html#dret_mass"><span class="id" title="lemma">dret_mass</span></a>, <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step_mass"><span class="id" title="lemma">head_step_mass</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> ? [] (<span class="id" title="var">_</span> &amp; <span class="id" title="var">hh</span>%<a class="idref" href="clutch.prob.distribution.html#dret_pos"><span class="id" title="lemma">dret_pos</span></a> &amp; ?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_head_step</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Rcoupl_rand_wrong_r" class="idref" href="#Rcoupl_rand_wrong_r"><span class="id" title="lemma">Rcoupl_rand_wrong_r</span></a> `{<a id="H:245" class="idref" href="#H:245"><span class="id" title="binder">Countable</span></a> <a id="A:243" class="idref" href="#A:243"><span class="id" title="binder"><span id="H:245" class="id">A</span></span></a>} <a id="N:246" class="idref" href="#N:246"><span class="id" title="binder">N</span></a> <a id="M:247" class="idref" href="#M:247"><span class="id" title="binder">M</span></a> <a id="z:248" class="idref" href="#z:248"><span class="id" title="binder">z</span></a> (<a id="a:249" class="idref" href="#a:249"><span class="id" title="binder">a</span></a> : <a class="idref" href="clutch.prob_lang.metatheory.html#A:243"><span class="id" title="variable">A</span></a>) <a id="ns:250" class="idref" href="#ns:250"><span class="id" title="binder">ns</span></a> <a id="84db5557722300ae35d14e3a8ffc2c15" class="idref" href="#84db5557722300ae35d14e3a8ffc2c15"><span class="id" title="binder">σ1'</span></a> <a id="e4046b4ea27fd141815fdbae1f07db28" class="idref" href="#e4046b4ea27fd141815fdbae1f07db28"><span class="id" title="binder">α'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:246"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:248"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:246"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:247"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#84db5557722300ae35d14e3a8ffc2c15"><span class="id" title="variable">σ1'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e4046b4ea27fd141815fdbae1f07db28"><span class="id" title="variable">α'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#M:247"><span class="id" title="variable">M</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ns:250"><span class="id" title="variable">ns</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dret"><span class="id" title="definition">dret</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#a:249"><span class="id" title="variable">a</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">rand</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#e4046b4ea27fd141815fdbae1f07db28"><span class="id" title="variable">α'</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:248"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#84db5557722300ae35d14e3a8ffc2c15"><span class="id" title="variable">σ1'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a':253" class="idref" href="#a':253"><span class="id" title="binder">a'</span></a> <a id="9246a643b375283e63d7a1ffc48f7bef" class="idref" href="#9246a643b375283e63d7a1ffc48f7bef"><span class="id" title="binder">ρ2'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a id="n:255" class="idref" href="#n:255"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:246"><span class="id" title="variable">N</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">),</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#a':253"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#a:249"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#9246a643b375283e63d7a1ffc48f7bef"><span class="id" title="variable">ρ2'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:255"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#84db5557722300ae35d14e3a8ffc2c15"><span class="id" title="variable">σ1'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ???.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="clutch.common.ectx_language.html#head_reducible"><span class="id" title="class">head_reducible</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">rand</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><span class="id" title="var">α'</span><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><span class="id" title="var">z</span>) σ1') <span class="id" title="keyword">as</span> <span class="id" title="var">hr</span> <span class="id" title="tactic">by</span> <span class="id" title="var">solve_red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.common.ectx_language.html#head_prim_step_eq"><span class="id" title="lemma">head_prim_step_eq</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_mono"><span class="id" title="lemma">Rcoupl_mono</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_pos_R"><span class="id" title="lemma">Rcoupl_pos_R</span></a>, <a class="idref" href="clutch.prob.couplings.html#Rcoupl_trivial"><span class="id" title="lemma">Rcoupl_trivial</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span> : <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="clutch.prob.distribution.html#dret_mass"><span class="id" title="lemma">dret_mass</span></a>, <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step_mass"><span class="id" title="lemma">head_step_mass</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> ? [] (<span class="id" title="var">_</span> &amp; <span class="id" title="var">hh</span>%<a class="idref" href="clutch.prob.distribution.html#dret_pos"><span class="id" title="lemma">dret_pos</span></a> &amp; ?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_head_step</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="S_INR_le_compat" class="idref" href="#S_INR_le_compat"><span class="id" title="lemma">S_INR_le_compat</span></a> (<a id="N:256" class="idref" href="#N:256"><span class="id" title="binder">N</span></a> <a id="M:257" class="idref" href="#M:257"><span class="id" title="binder">M</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :<br/>
&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.metatheory.html#N:256"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:257"><span class="id" title="variable">M</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;(0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#655439258f20e6256090528bc533ae29"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:256"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#655439258f20e6256090528bc533ae29"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:257"><span class="id" title="variable">M</span></a>)%<span class="id" title="var">R</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#S_INR"><span class="id" title="lemma">S_INR</span></a>; <span class="id" title="var">lra</span> ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#S_INR"><span class="id" title="lemma">S_INR</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_le_lt_0_compat"><span class="id" title="lemma">Rplus_le_lt_0_compat</span></a>; [ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#pos_INR"><span class="id" title="lemma">pos_INR</span></a> | <span class="id" title="var">lra</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab88"></a><h1 class="section">Approximate rand(N) ~ rand(M) coupling, N &lt;= M</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="ARcoupl_rand_rand" class="idref" href="#ARcoupl_rand_rand"><span class="id" title="lemma">ARcoupl_rand_rand</span></a> (<a id="N:258" class="idref" href="#N:258"><span class="id" title="binder">N</span></a> <a id="M:259" class="idref" href="#M:259"><span class="id" title="binder">M</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="z:260" class="idref" href="#z:260"><span class="id" title="binder">z</span></a> <a id="w:261" class="idref" href="#w:261"><span class="id" title="binder">w</span></a> <a id="5ad1e9c598bcef2144741e1dcd35f912" class="idref" href="#5ad1e9c598bcef2144741e1dcd35f912"><span class="id" title="binder">σ1</span></a> <a id="5e58643ffb5196f00cb2379c76e93b34" class="idref" href="#5e58643ffb5196f00cb2379c76e93b34"><span class="id" title="binder">σ1'</span></a> (<a id="4d2d95d32eaa2b37aa2c169808104887" class="idref" href="#4d2d95d32eaa2b37aa2c169808104887"><span class="id" title="binder">ε</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#nonnegreal"><span class="id" title="record">nonnegreal</span></a>) :<br/>
&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.metatheory.html#N:258"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:259"><span class="id" title="variable">M</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:259"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:258"><span class="id" title="variable">N</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:259"><span class="id" title="variable">M</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#4d2d95d32eaa2b37aa2c169808104887"><span class="id" title="variable">ε</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:258"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:260"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#M:259"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#w:261"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings_app.html#ARcoupl"><span class="id" title="definition">ARcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:260"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#5ad1e9c598bcef2144741e1dcd35f912"><span class="id" title="variable">σ1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#w:261"><span class="id" title="variable">w</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#5e58643ffb5196f00cb2379c76e93b34"><span class="id" title="variable">σ1'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a6d3c0574f423db12af30b98c9099394" class="idref" href="#a6d3c0574f423db12af30b98c9099394"><span class="id" title="binder">ρ2</span></a> <a id="72e3db46236ffe04f50ffc202457c0d0" class="idref" href="#72e3db46236ffe04f50ffc202457c0d0"><span class="id" title="binder">ρ2'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a id="n:267" class="idref" href="#n:267"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:258"><span class="id" title="variable">N</span></a>)) (<a id="m:268" class="idref" href="#m:268"><span class="id" title="binder">m</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:259"><span class="id" title="variable">M</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat"><span class="id" title="definition">fin_to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#n:267"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#m:268"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#a6d3c0574f423db12af30b98c9099394"><span class="id" title="variable">ρ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:267"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#5ad1e9c598bcef2144741e1dcd35f912"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#72e3db46236ffe04f50ffc202457c0d0"><span class="id" title="variable">ρ2'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#m:268"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#5e58643ffb5196f00cb2379c76e93b34"><span class="id" title="variable">σ1'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#4d2d95d32eaa2b37aa2c169808104887"><span class="id" title="variable">ε</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">NMpos</span> <span class="id" title="var">NMε</span> <span class="id" title="var">Hz</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="clutch.common.ectx_language.html#head_prim_step_eq"><span class="id" title="lemma">head_prim_step_eq</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a> -<span class="id" title="var">Hz</span> -<span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">ε</span> <span class="id" title="keyword">with</span> (<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_plus"><span class="id" title="definition">nnreal_plus</span></a> <span class="id" title="var">ε</span> <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_zero"><span class="id" title="definition">nnreal_zero</span></a>); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_ext"><span class="id" title="lemma">nnreal_ext</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lra</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_dbind"><span class="id" title="lemma">ARcoupl_dbind</span></a>.<br/>
&nbsp;&nbsp;1,2: <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#cond_nonneg"><span class="id" title="projection">cond_nonneg</span></a>.<br/>
&nbsp;&nbsp;2 : {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">NMε</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_dunif_leq"><span class="id" title="lemma">ARcoupl_dunif_leq</span></a>, <a class="idref" href="clutch.prob_lang.metatheory.html#S_INR_le_compat"><span class="id" title="lemma">S_INR_le_compat</span></a>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">Hnm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_dret"><span class="id" title="lemma">ARcoupl_dret</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">n</span> . <span class="id" title="tactic">exists</span> <span class="id" title="var">m</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hnm</span> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab89"></a><h1 class="section">Approximate rand(N) ~ rand(M) coupling, N &lt;= M, along an injection</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="ARcoupl_rand_rand_inj" class="idref" href="#ARcoupl_rand_rand_inj"><span class="id" title="lemma">ARcoupl_rand_rand_inj</span></a> (<a id="N:269" class="idref" href="#N:269"><span class="id" title="binder">N</span></a> <a id="M:270" class="idref" href="#M:270"><span class="id" title="binder">M</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="f:271" class="idref" href="#f:271"><span class="id" title="binder">f</span></a> `{<a id="H:272" class="idref" href="#H:272"><span class="id" title="binder">Inj</span></a> <a id="H:272" class="idref" href="#H:272"><span class="id" title="binder">(</span></a><a id="H:272" class="idref" href="#H:272"><span class="id" title="binder">fin</span></a> <a id="H:272" class="idref" href="#H:272"><span class="id" title="binder">(</span></a><a id="H:272" class="idref" href="#H:272"><span class="id" title="binder">S</span></a> <a id="H:272" class="idref" href="#H:272"><span class="id" title="binder">N</span></a><a id="H:272" class="idref" href="#H:272"><span class="id" title="binder">))</span></a> <a id="H:272" class="idref" href="#H:272"><span class="id" title="binder">(</span></a><a id="H:272" class="idref" href="#H:272"><span class="id" title="binder">fin</span></a> <a id="H:272" class="idref" href="#H:272"><span class="id" title="binder">(</span></a><a id="H:272" class="idref" href="#H:272"><span class="id" title="binder">S</span></a> <a id="H:272" class="idref" href="#H:272"><span class="id" title="binder">M</span></a><a id="H:272" class="idref" href="#H:272"><span class="id" title="binder">))</span></a> <a id="H:272" class="idref" href="#H:272"><span class="id" title="binder">(=)</span></a> <a id="H:272" class="idref" href="#H:272"><span class="id" title="binder">(=)</span></a> <a id="H:272" class="idref" href="#H:272"><span class="id" title="binder">f</span></a>} <a id="z:273" class="idref" href="#z:273"><span class="id" title="binder">z</span></a> <a id="w:274" class="idref" href="#w:274"><span class="id" title="binder">w</span></a> <a id="677020b6f6d8bd377fb2efb26d4afbcc" class="idref" href="#677020b6f6d8bd377fb2efb26d4afbcc"><span class="id" title="binder">σ1</span></a> <a id="480d3eb446621677e6830ed745019fcb" class="idref" href="#480d3eb446621677e6830ed745019fcb"><span class="id" title="binder">σ1'</span></a> (<a id="332faf5791babd1ed21c4b89f26b8053" class="idref" href="#332faf5791babd1ed21c4b89f26b8053"><span class="id" title="binder">ε</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#nonnegreal"><span class="id" title="record">nonnegreal</span></a>) :<br/>
&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.metatheory.html#N:269"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:270"><span class="id" title="variable">M</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:270"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:269"><span class="id" title="variable">N</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:270"><span class="id" title="variable">M</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#332faf5791babd1ed21c4b89f26b8053"><span class="id" title="variable">ε</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:269"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:273"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#M:270"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#w:274"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings_app.html#ARcoupl"><span class="id" title="definition">ARcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:273"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#677020b6f6d8bd377fb2efb26d4afbcc"><span class="id" title="variable">σ1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#w:274"><span class="id" title="variable">w</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#480d3eb446621677e6830ed745019fcb"><span class="id" title="variable">σ1'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="b684731bc58c7a10b5f39d65679c4e98" class="idref" href="#b684731bc58c7a10b5f39d65679c4e98"><span class="id" title="binder">ρ2</span></a> <a id="85d56f642c60368530fd84e9f75db2a1" class="idref" href="#85d56f642c60368530fd84e9f75db2a1"><span class="id" title="binder">ρ2'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a id="n:280" class="idref" href="#n:280"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:269"><span class="id" title="variable">N</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#b684731bc58c7a10b5f39d65679c4e98"><span class="id" title="variable">ρ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:280"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#677020b6f6d8bd377fb2efb26d4afbcc"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#85d56f642c60368530fd84e9f75db2a1"><span class="id" title="variable">ρ2'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#f:271"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#n:280"><span class="id" title="variable">n</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#480d3eb446621677e6830ed745019fcb"><span class="id" title="variable">σ1'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#332faf5791babd1ed21c4b89f26b8053"><span class="id" title="variable">ε</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">NMpos</span> <span class="id" title="var">NMε</span> <span class="id" title="var">Hz</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="clutch.common.ectx_language.html#head_prim_step_eq"><span class="id" title="lemma">head_prim_step_eq</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a> -<span class="id" title="var">Hz</span> -<span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">ε</span> <span class="id" title="keyword">with</span> (<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_plus"><span class="id" title="definition">nnreal_plus</span></a> <span class="id" title="var">ε</span> <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_zero"><span class="id" title="definition">nnreal_zero</span></a>); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_ext"><span class="id" title="lemma">nnreal_ext</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lra</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_dbind"><span class="id" title="lemma">ARcoupl_dbind</span></a>.<br/>
&nbsp;&nbsp;1,2: <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#cond_nonneg"><span class="id" title="projection">cond_nonneg</span></a>.<br/>
&nbsp;&nbsp;2 : {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">NMε</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_dunif_leq_inj"><span class="id" title="lemma">ARcoupl_dunif_leq_inj</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob_lang.metatheory.html#S_INR_le_compat"><span class="id" title="lemma">S_INR_le_compat</span></a>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">Hnm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_dret"><span class="id" title="lemma">ARcoupl_dret</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">n</span> .<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hnm</span> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab90"></a><h1 class="section">Approximate rand(N) ~ rand(M) coupling, M &lt;= N</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="ARcoupl_rand_rand_rev" class="idref" href="#ARcoupl_rand_rand_rev"><span class="id" title="lemma">ARcoupl_rand_rand_rev</span></a> (<a id="N:281" class="idref" href="#N:281"><span class="id" title="binder">N</span></a> <a id="M:282" class="idref" href="#M:282"><span class="id" title="binder">M</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="z:283" class="idref" href="#z:283"><span class="id" title="binder">z</span></a> <a id="w:284" class="idref" href="#w:284"><span class="id" title="binder">w</span></a> <a id="df600a78b9b8b2c1a143cd8b0b098f2a" class="idref" href="#df600a78b9b8b2c1a143cd8b0b098f2a"><span class="id" title="binder">σ1</span></a> <a id="79854125e35d5ac76e9669809f09c97e" class="idref" href="#79854125e35d5ac76e9669809f09c97e"><span class="id" title="binder">σ1'</span></a> (<a id="acc08881a2b281cdb6a06de290312785" class="idref" href="#acc08881a2b281cdb6a06de290312785"><span class="id" title="binder">ε</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#nonnegreal"><span class="id" title="record">nonnegreal</span></a>) :<br/>
&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.metatheory.html#M:282"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:281"><span class="id" title="variable">N</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:281"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:282"><span class="id" title="variable">M</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:281"><span class="id" title="variable">N</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#acc08881a2b281cdb6a06de290312785"><span class="id" title="variable">ε</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:281"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:283"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#M:282"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#w:284"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings_app.html#ARcoupl"><span class="id" title="definition">ARcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:283"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#df600a78b9b8b2c1a143cd8b0b098f2a"><span class="id" title="variable">σ1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#w:284"><span class="id" title="variable">w</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#79854125e35d5ac76e9669809f09c97e"><span class="id" title="variable">σ1'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a6b7ea134ef788acfd8f8debfdfd93b5" class="idref" href="#a6b7ea134ef788acfd8f8debfdfd93b5"><span class="id" title="binder">ρ2</span></a> <a id="ac477f8d13302b5ee1b274453a798e45" class="idref" href="#ac477f8d13302b5ee1b274453a798e45"><span class="id" title="binder">ρ2'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a id="n:290" class="idref" href="#n:290"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:281"><span class="id" title="variable">N</span></a>)) (<a id="m:291" class="idref" href="#m:291"><span class="id" title="binder">m</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:282"><span class="id" title="variable">M</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat"><span class="id" title="definition">fin_to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#n:290"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#m:291"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#a6b7ea134ef788acfd8f8debfdfd93b5"><span class="id" title="variable">ρ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:290"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#df600a78b9b8b2c1a143cd8b0b098f2a"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ac477f8d13302b5ee1b274453a798e45"><span class="id" title="variable">ρ2'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#m:291"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#79854125e35d5ac76e9669809f09c97e"><span class="id" title="variable">σ1'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#acc08881a2b281cdb6a06de290312785"><span class="id" title="variable">ε</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">NMpos</span> <span class="id" title="var">NMε</span> <span class="id" title="var">Hz</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="clutch.common.ectx_language.html#head_prim_step_eq"><span class="id" title="lemma">head_prim_step_eq</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a> -<span class="id" title="var">Hz</span> -<span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">ε</span> <span class="id" title="keyword">with</span> (<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_plus"><span class="id" title="definition">nnreal_plus</span></a> <span class="id" title="var">ε</span> <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_zero"><span class="id" title="definition">nnreal_zero</span></a>); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_ext"><span class="id" title="lemma">nnreal_ext</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lra</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_dbind"><span class="id" title="lemma">ARcoupl_dbind</span></a>.<br/>
&nbsp;&nbsp;1,2: <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#cond_nonneg"><span class="id" title="projection">cond_nonneg</span></a>.<br/>
&nbsp;&nbsp;2 : {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">NMε</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_dunif_leq_rev"><span class="id" title="lemma">ARcoupl_dunif_leq_rev</span></a>, <a class="idref" href="clutch.prob_lang.metatheory.html#S_INR_le_compat"><span class="id" title="lemma">S_INR_le_compat</span></a>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">Hnm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_dret"><span class="id" title="lemma">ARcoupl_dret</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">n</span> . <span class="id" title="tactic">exists</span> <span class="id" title="var">m</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hnm</span> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab91"></a><h1 class="section">Approximate rand(N) ~ rand(M) coupling, M &lt;= N, along an injection</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="ARcoupl_rand_rand_rev_inj" class="idref" href="#ARcoupl_rand_rand_rev_inj"><span class="id" title="lemma">ARcoupl_rand_rand_rev_inj</span></a> (<a id="N:292" class="idref" href="#N:292"><span class="id" title="binder">N</span></a> <a id="M:293" class="idref" href="#M:293"><span class="id" title="binder">M</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="f:294" class="idref" href="#f:294"><span class="id" title="binder">f</span></a> `{<a id="H:295" class="idref" href="#H:295"><span class="id" title="binder">Inj</span></a> <a id="H:295" class="idref" href="#H:295"><span class="id" title="binder">(</span></a><a id="H:295" class="idref" href="#H:295"><span class="id" title="binder">fin</span></a> <a id="H:295" class="idref" href="#H:295"><span class="id" title="binder">(</span></a><a id="H:295" class="idref" href="#H:295"><span class="id" title="binder">S</span></a> <a id="H:295" class="idref" href="#H:295"><span class="id" title="binder">M</span></a><a id="H:295" class="idref" href="#H:295"><span class="id" title="binder">))</span></a> <a id="H:295" class="idref" href="#H:295"><span class="id" title="binder">(</span></a><a id="H:295" class="idref" href="#H:295"><span class="id" title="binder">fin</span></a> <a id="H:295" class="idref" href="#H:295"><span class="id" title="binder">(</span></a><a id="H:295" class="idref" href="#H:295"><span class="id" title="binder">S</span></a> <a id="H:295" class="idref" href="#H:295"><span class="id" title="binder">N</span></a><a id="H:295" class="idref" href="#H:295"><span class="id" title="binder">))</span></a> <a id="H:295" class="idref" href="#H:295"><span class="id" title="binder">(=)</span></a> <a id="H:295" class="idref" href="#H:295"><span class="id" title="binder">(=)</span></a> <a id="H:295" class="idref" href="#H:295"><span class="id" title="binder">f</span></a>} <a id="z:296" class="idref" href="#z:296"><span class="id" title="binder">z</span></a> <a id="w:297" class="idref" href="#w:297"><span class="id" title="binder">w</span></a> <a id="a83aa8b17a690b2557c879bec5156450" class="idref" href="#a83aa8b17a690b2557c879bec5156450"><span class="id" title="binder">σ1</span></a> <a id="cc5057c36fbfb29fb208c347d16a5057" class="idref" href="#cc5057c36fbfb29fb208c347d16a5057"><span class="id" title="binder">σ1'</span></a> (<a id="828dabd824a2109b3d09181d290e3a48" class="idref" href="#828dabd824a2109b3d09181d290e3a48"><span class="id" title="binder">ε</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#nonnegreal"><span class="id" title="record">nonnegreal</span></a>) :<br/>
&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.metatheory.html#M:293"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:292"><span class="id" title="variable">N</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:292"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:293"><span class="id" title="variable">M</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:292"><span class="id" title="variable">N</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#828dabd824a2109b3d09181d290e3a48"><span class="id" title="variable">ε</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:292"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:296"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#M:293"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#w:297"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings_app.html#ARcoupl"><span class="id" title="definition">ARcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:296"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#a83aa8b17a690b2557c879bec5156450"><span class="id" title="variable">σ1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#w:297"><span class="id" title="variable">w</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#cc5057c36fbfb29fb208c347d16a5057"><span class="id" title="variable">σ1'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="ec521e98be9fd92f0a41fbb86f0bfa70" class="idref" href="#ec521e98be9fd92f0a41fbb86f0bfa70"><span class="id" title="binder">ρ2</span></a> <a id="0f7477f37bb902808a655498c86254f4" class="idref" href="#0f7477f37bb902808a655498c86254f4"><span class="id" title="binder">ρ2'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a id="m:303" class="idref" href="#m:303"><span class="id" title="binder">m</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:293"><span class="id" title="variable">M</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#ec521e98be9fd92f0a41fbb86f0bfa70"><span class="id" title="variable">ρ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#f:294"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#m:303"><span class="id" title="variable">m</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#a83aa8b17a690b2557c879bec5156450"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#0f7477f37bb902808a655498c86254f4"><span class="id" title="variable">ρ2'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#m:303"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#cc5057c36fbfb29fb208c347d16a5057"><span class="id" title="variable">σ1'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#828dabd824a2109b3d09181d290e3a48"><span class="id" title="variable">ε</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">NMpos</span> <span class="id" title="var">NMε</span> <span class="id" title="var">Hz</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="clutch.common.ectx_language.html#head_prim_step_eq"><span class="id" title="lemma">head_prim_step_eq</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a> -<span class="id" title="var">Hz</span> -<span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">ε</span> <span class="id" title="keyword">with</span> (<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_plus"><span class="id" title="definition">nnreal_plus</span></a> <span class="id" title="var">ε</span> <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_zero"><span class="id" title="definition">nnreal_zero</span></a>); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_ext"><span class="id" title="lemma">nnreal_ext</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lra</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_dbind"><span class="id" title="lemma">ARcoupl_dbind</span></a>.<br/>
&nbsp;&nbsp;1,2: <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#cond_nonneg"><span class="id" title="projection">cond_nonneg</span></a>.<br/>
&nbsp;&nbsp;2 : {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">NMε</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_dunif_leq_rev_inj"><span class="id" title="lemma">ARcoupl_dunif_leq_rev_inj</span></a>, <a class="idref" href="clutch.prob_lang.metatheory.html#S_INR_le_compat"><span class="id" title="lemma">S_INR_le_compat</span></a>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">Hnm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_dret"><span class="id" title="lemma">ARcoupl_dret</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">m</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hnm</span> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab92"></a><h1 class="section">Approximate state_step(α, N) ~ state_step(α', N) coupling</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="ARcoupl_state_state" class="idref" href="#ARcoupl_state_state"><span class="id" title="lemma">ARcoupl_state_state</span></a> (<a id="N:304" class="idref" href="#N:304"><span class="id" title="binder">N</span></a> <a id="M:305" class="idref" href="#M:305"><span class="id" title="binder">M</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="26b7307288ccc8f97d3a7df5f2ae3916" class="idref" href="#26b7307288ccc8f97d3a7df5f2ae3916"><span class="id" title="binder">σ1</span></a> <a id="2e9ca2ebd2f3b81b09a20d6e3ec777d5" class="idref" href="#2e9ca2ebd2f3b81b09a20d6e3ec777d5"><span class="id" title="binder">σ2</span></a> <a id="1c26115946301a7bf915751b5c0e8259" class="idref" href="#1c26115946301a7bf915751b5c0e8259"><span class="id" title="binder">α1</span></a> <a id="1eab962c29f5b1614c352c925a05cbba" class="idref" href="#1eab962c29f5b1614c352c925a05cbba"><span class="id" title="binder">α2</span></a> <a id="xs:310" class="idref" href="#xs:310"><span class="id" title="binder">xs</span></a> <a id="ys:311" class="idref" href="#ys:311"><span class="id" title="binder">ys</span></a> (<a id="043dbc9f38596a20c032806d1f1795c7" class="idref" href="#043dbc9f38596a20c032806d1f1795c7"><span class="id" title="binder">ε</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#nonnegreal"><span class="id" title="record">nonnegreal</span></a>) :<br/>
&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.metatheory.html#N:304"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:305"><span class="id" title="variable">M</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:305"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:304"><span class="id" title="variable">N</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:305"><span class="id" title="variable">M</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#043dbc9f38596a20c032806d1f1795c7"><span class="id" title="variable">ε</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#26b7307288ccc8f97d3a7df5f2ae3916"><span class="id" title="variable">σ1</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#1c26115946301a7bf915751b5c0e8259"><span class="id" title="variable">α1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:304"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#xs:310"><span class="id" title="variable">xs</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#2e9ca2ebd2f3b81b09a20d6e3ec777d5"><span class="id" title="variable">σ2</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#1eab962c29f5b1614c352c925a05cbba"><span class="id" title="variable">α2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#M:305"><span class="id" title="variable">M</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ys:311"><span class="id" title="variable">ys</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings_app.html#ARcoupl"><span class="id" title="definition">ARcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#26b7307288ccc8f97d3a7df5f2ae3916"><span class="id" title="variable">σ1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#1c26115946301a7bf915751b5c0e8259"><span class="id" title="variable">α1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#2e9ca2ebd2f3b81b09a20d6e3ec777d5"><span class="id" title="variable">σ2</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#1eab962c29f5b1614c352c925a05cbba"><span class="id" title="variable">α2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="2be8ffba98a45d2de4725ff885bad02e" class="idref" href="#2be8ffba98a45d2de4725ff885bad02e"><span class="id" title="binder">σ1'</span></a> <a id="11087a7e22e28aa2e8c30b20c734b606" class="idref" href="#11087a7e22e28aa2e8c30b20c734b606"><span class="id" title="binder">σ2'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a id="n:315" class="idref" href="#n:315"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:304"><span class="id" title="variable">N</span></a>)) (<a id="m:316" class="idref" href="#m:316"><span class="id" title="binder">m</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:305"><span class="id" title="variable">M</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat"><span class="id" title="definition">fin_to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#n:315"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#m:316"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#2be8ffba98a45d2de4725ff885bad02e"><span class="id" title="variable">σ1'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#1c26115946301a7bf915751b5c0e8259"><span class="id" title="variable">α1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:304"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#xs:310"><span class="id" title="variable">xs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:315"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#26b7307288ccc8f97d3a7df5f2ae3916"><span class="id" title="variable">σ1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#11087a7e22e28aa2e8c30b20c734b606"><span class="id" title="variable">σ2'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#1eab962c29f5b1614c352c925a05cbba"><span class="id" title="variable">α2</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#M:305"><span class="id" title="variable">M</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ys:311"><span class="id" title="variable">ys</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#m:316"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#2e9ca2ebd2f3b81b09a20d6e3ec777d5"><span class="id" title="variable">σ2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#043dbc9f38596a20c032806d1f1795c7"><span class="id" title="variable">ε</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">NMpos</span> <span class="id" title="var">NMε</span> <span class="id" title="var">Hα1</span> <span class="id" title="var">Hα2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 (<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_true_2"><span class="id" title="lemma">bool_decide_eq_true_2</span></a>; [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom_2"><span class="id" title="lemma">elem_of_dom_2</span></a>]).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_total_correct"><span class="id" title="lemma">lookup_total_correct</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hα1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_total_correct"><span class="id" title="lemma">lookup_total_correct</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hα2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">ε</span> <span class="id" title="keyword">with</span> (<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_plus"><span class="id" title="definition">nnreal_plus</span></a> <span class="id" title="var">ε</span> <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_zero"><span class="id" title="definition">nnreal_zero</span></a>); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_ext"><span class="id" title="lemma">nnreal_ext</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lra</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_dbind"><span class="id" title="lemma">ARcoupl_dbind</span></a>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">exact</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="n:317" class="idref" href="#n:317"><span class="id" title="binder"><span id="n:319" class="id">n</span></span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">N</span>)) (<a id="m:318" class="idref" href="#m:318"><span class="id" title="binder"><span id="m:320" class="id">m</span></span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">M</span>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat"><span class="id" title="definition">fin_to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#n:317"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#m:318"><span class="id" title="variable">m</span></a>). }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">ε</span> ; <span class="id" title="var">done</span>. } { <span class="id" title="tactic">simpl</span> ; <span class="id" title="var">lra</span>. }<br/>
&nbsp;&nbsp;2: { <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">NMε</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_dunif_leq"><span class="id" title="lemma">ARcoupl_dunif_leq</span></a>, <a class="idref" href="clutch.prob_lang.metatheory.html#S_INR_le_compat"><span class="id" title="lemma">S_INR_le_compat</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">nm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_dret"><span class="id" title="lemma">ARcoupl_dret</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">nm</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ARcoupl_state_state_rev" class="idref" href="#ARcoupl_state_state_rev"><span class="id" title="lemma">ARcoupl_state_state_rev</span></a> (<a id="N:321" class="idref" href="#N:321"><span class="id" title="binder">N</span></a> <a id="M:322" class="idref" href="#M:322"><span class="id" title="binder">M</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="94a807c76cfe9523223e2f5655f85331" class="idref" href="#94a807c76cfe9523223e2f5655f85331"><span class="id" title="binder">σ1</span></a> <a id="b98df3c99e5528a4fcd291b8b11f765f" class="idref" href="#b98df3c99e5528a4fcd291b8b11f765f"><span class="id" title="binder">σ2</span></a> <a id="9df11d04b70808fc9f7dd37f186c4cf2" class="idref" href="#9df11d04b70808fc9f7dd37f186c4cf2"><span class="id" title="binder">α1</span></a> <a id="358122bd59a706ad6a2a36f983767fa1" class="idref" href="#358122bd59a706ad6a2a36f983767fa1"><span class="id" title="binder">α2</span></a> <a id="xs:327" class="idref" href="#xs:327"><span class="id" title="binder">xs</span></a> <a id="ys:328" class="idref" href="#ys:328"><span class="id" title="binder">ys</span></a> (<a id="1feb420dc769e93f08aae7e3fffc6177" class="idref" href="#1feb420dc769e93f08aae7e3fffc6177"><span class="id" title="binder">ε</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#nonnegreal"><span class="id" title="record">nonnegreal</span></a>) :<br/>
&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.metatheory.html#M:322"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:321"><span class="id" title="variable">N</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:321"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:322"><span class="id" title="variable">M</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:321"><span class="id" title="variable">N</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#1feb420dc769e93f08aae7e3fffc6177"><span class="id" title="variable">ε</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#94a807c76cfe9523223e2f5655f85331"><span class="id" title="variable">σ1</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#9df11d04b70808fc9f7dd37f186c4cf2"><span class="id" title="variable">α1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:321"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#xs:327"><span class="id" title="variable">xs</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#b98df3c99e5528a4fcd291b8b11f765f"><span class="id" title="variable">σ2</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#358122bd59a706ad6a2a36f983767fa1"><span class="id" title="variable">α2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#M:322"><span class="id" title="variable">M</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ys:328"><span class="id" title="variable">ys</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings_app.html#ARcoupl"><span class="id" title="definition">ARcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#94a807c76cfe9523223e2f5655f85331"><span class="id" title="variable">σ1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#9df11d04b70808fc9f7dd37f186c4cf2"><span class="id" title="variable">α1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b98df3c99e5528a4fcd291b8b11f765f"><span class="id" title="variable">σ2</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#358122bd59a706ad6a2a36f983767fa1"><span class="id" title="variable">α2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="22c84a6d18af99741228af507ec6a9b4" class="idref" href="#22c84a6d18af99741228af507ec6a9b4"><span class="id" title="binder">σ1'</span></a> <a id="3f8f748bcff55421f28764009897ba6b" class="idref" href="#3f8f748bcff55421f28764009897ba6b"><span class="id" title="binder">σ2'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a id="n:332" class="idref" href="#n:332"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:321"><span class="id" title="variable">N</span></a>)) (<a id="m:333" class="idref" href="#m:333"><span class="id" title="binder">m</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:322"><span class="id" title="variable">M</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat"><span class="id" title="definition">fin_to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#n:332"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#m:333"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#22c84a6d18af99741228af507ec6a9b4"><span class="id" title="variable">σ1'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#9df11d04b70808fc9f7dd37f186c4cf2"><span class="id" title="variable">α1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:321"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#xs:327"><span class="id" title="variable">xs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:332"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#94a807c76cfe9523223e2f5655f85331"><span class="id" title="variable">σ1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#3f8f748bcff55421f28764009897ba6b"><span class="id" title="variable">σ2'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#358122bd59a706ad6a2a36f983767fa1"><span class="id" title="variable">α2</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#M:322"><span class="id" title="variable">M</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ys:328"><span class="id" title="variable">ys</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#m:333"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b98df3c99e5528a4fcd291b8b11f765f"><span class="id" title="variable">σ2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#1feb420dc769e93f08aae7e3fffc6177"><span class="id" title="variable">ε</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">NMpos</span> <span class="id" title="var">NMε</span> <span class="id" title="var">Hα1</span> <span class="id" title="var">Hα2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 (<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_true_2"><span class="id" title="lemma">bool_decide_eq_true_2</span></a>; [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom_2"><span class="id" title="lemma">elem_of_dom_2</span></a>]).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_total_correct"><span class="id" title="lemma">lookup_total_correct</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hα1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_total_correct"><span class="id" title="lemma">lookup_total_correct</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hα2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">ε</span> <span class="id" title="keyword">with</span> (<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_plus"><span class="id" title="definition">nnreal_plus</span></a> <span class="id" title="var">ε</span> <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_zero"><span class="id" title="definition">nnreal_zero</span></a>); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_ext"><span class="id" title="lemma">nnreal_ext</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lra</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_dbind"><span class="id" title="lemma">ARcoupl_dbind</span></a>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">exact</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="n:334" class="idref" href="#n:334"><span class="id" title="binder"><span id="n:336" class="id">n</span></span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">N</span>)) (<a id="m:335" class="idref" href="#m:335"><span class="id" title="binder"><span id="m:337" class="id">m</span></span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">M</span>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat"><span class="id" title="definition">fin_to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#n:334"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#m:335"><span class="id" title="variable">m</span></a>). }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">ε</span> ; <span class="id" title="var">done</span>. } { <span class="id" title="tactic">simpl</span> ; <span class="id" title="var">lra</span>. }<br/>
&nbsp;&nbsp;2: { <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">NMε</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_dunif_leq_rev"><span class="id" title="lemma">ARcoupl_dunif_leq_rev</span></a>, <a class="idref" href="clutch.prob_lang.metatheory.html#S_INR_le_compat"><span class="id" title="lemma">S_INR_le_compat</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">nm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_dret"><span class="id" title="lemma">ARcoupl_dret</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">nm</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ARcoupl_rand_r" class="idref" href="#ARcoupl_rand_r"><span class="id" title="lemma">ARcoupl_rand_r</span></a> `{<a id="H:340" class="idref" href="#H:340"><span class="id" title="binder">Countable</span></a> <a id="A:338" class="idref" href="#A:338"><span class="id" title="binder"><span id="H:340" class="id">A</span></span></a>} (<a id="a:341" class="idref" href="#a:341"><span class="id" title="binder">a</span></a> : <a class="idref" href="clutch.prob_lang.metatheory.html#A:338"><span class="id" title="variable">A</span></a>) <a id="N:342" class="idref" href="#N:342"><span class="id" title="binder">N</span></a> <a id="z:343" class="idref" href="#z:343"><span class="id" title="binder">z</span></a> <a id="7236940c3a8d121bbd7090ee2db90053" class="idref" href="#7236940c3a8d121bbd7090ee2db90053"><span class="id" title="binder">σ1'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:342"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:343"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings_app.html#ARcoupl"><span class="id" title="definition">ARcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dret"><span class="id" title="definition">dret</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#a:341"><span class="id" title="variable">a</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:343"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#7236940c3a8d121bbd7090ee2db90053"><span class="id" title="variable">σ1'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a':345" class="idref" href="#a':345"><span class="id" title="binder">a'</span></a> <a id="cceb2d47210cef60cae2443dd1fa1dc9" class="idref" href="#cceb2d47210cef60cae2443dd1fa1dc9"><span class="id" title="binder">ρ2'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a id="n:347" class="idref" href="#n:347"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:342"><span class="id" title="variable">N</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">),</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#a':345"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#a:341"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#cceb2d47210cef60cae2443dd1fa1dc9"><span class="id" title="variable">ρ2'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:347"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#7236940c3a8d121bbd7090ee2db90053"><span class="id" title="variable">σ1'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) (<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_zero"><span class="id" title="definition">nnreal_zero</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ?.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_exact"><span class="id" title="lemma">ARcoupl_exact</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob_lang.metatheory.html#Rcoupl_rand_r"><span class="id" title="lemma">Rcoupl_rand_r</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ARcoupl_rand_empty_r" class="idref" href="#ARcoupl_rand_empty_r"><span class="id" title="lemma">ARcoupl_rand_empty_r</span></a> `{<a id="H:350" class="idref" href="#H:350"><span class="id" title="binder">Countable</span></a> <a id="A:348" class="idref" href="#A:348"><span class="id" title="binder"><span id="H:350" class="id">A</span></span></a>} <a id="N:351" class="idref" href="#N:351"><span class="id" title="binder">N</span></a> <a id="z:352" class="idref" href="#z:352"><span class="id" title="binder">z</span></a> (<a id="a:353" class="idref" href="#a:353"><span class="id" title="binder">a</span></a> : <a class="idref" href="clutch.prob_lang.metatheory.html#A:348"><span class="id" title="variable">A</span></a>) <a id="7dafd19632c3b1145c3234fcf3c1efbf" class="idref" href="#7dafd19632c3b1145c3234fcf3c1efbf"><span class="id" title="binder">σ1'</span></a> <a id="6f683ea5b8cb819789725ccb9194858a" class="idref" href="#6f683ea5b8cb819789725ccb9194858a"><span class="id" title="binder">α'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:351"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:352"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#7dafd19632c3b1145c3234fcf3c1efbf"><span class="id" title="variable">σ1'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#6f683ea5b8cb819789725ccb9194858a"><span class="id" title="variable">α'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:351"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings_app.html#ARcoupl"><span class="id" title="definition">ARcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dret"><span class="id" title="definition">dret</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#a:353"><span class="id" title="variable">a</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">rand</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#6f683ea5b8cb819789725ccb9194858a"><span class="id" title="variable">α'</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:352"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#7dafd19632c3b1145c3234fcf3c1efbf"><span class="id" title="variable">σ1'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a':356" class="idref" href="#a':356"><span class="id" title="binder">a'</span></a> <a id="14ecdc8866a0ab9361be524920ed1753" class="idref" href="#14ecdc8866a0ab9361be524920ed1753"><span class="id" title="binder">ρ2'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a id="n:358" class="idref" href="#n:358"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:351"><span class="id" title="variable">N</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">),</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#a':356"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#a:353"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#14ecdc8866a0ab9361be524920ed1753"><span class="id" title="variable">ρ2'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:358"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#7dafd19632c3b1145c3234fcf3c1efbf"><span class="id" title="variable">σ1'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) (<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_zero"><span class="id" title="definition">nnreal_zero</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ??.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_exact"><span class="id" title="lemma">ARcoupl_exact</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob_lang.metatheory.html#Rcoupl_rand_empty_r"><span class="id" title="lemma">Rcoupl_rand_empty_r</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ARcoupl_rand_wrong_r" class="idref" href="#ARcoupl_rand_wrong_r"><span class="id" title="lemma">ARcoupl_rand_wrong_r</span></a> `{<a id="H:361" class="idref" href="#H:361"><span class="id" title="binder">Countable</span></a> <a id="A:359" class="idref" href="#A:359"><span class="id" title="binder"><span id="H:361" class="id">A</span></span></a>} <a id="N:362" class="idref" href="#N:362"><span class="id" title="binder">N</span></a> <a id="M:363" class="idref" href="#M:363"><span class="id" title="binder">M</span></a> <a id="z:364" class="idref" href="#z:364"><span class="id" title="binder">z</span></a> <a id="ns:365" class="idref" href="#ns:365"><span class="id" title="binder">ns</span></a> (<a id="a:366" class="idref" href="#a:366"><span class="id" title="binder">a</span></a> : <a class="idref" href="clutch.prob_lang.metatheory.html#A:359"><span class="id" title="variable">A</span></a>) <a id="d199098459a7437e8adc561395b88da6" class="idref" href="#d199098459a7437e8adc561395b88da6"><span class="id" title="binder">σ1'</span></a> <a id="771150706c2d4bd46241470a97574c7c" class="idref" href="#771150706c2d4bd46241470a97574c7c"><span class="id" title="binder">α'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:362"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:364"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:362"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:363"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#d199098459a7437e8adc561395b88da6"><span class="id" title="variable">σ1'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#771150706c2d4bd46241470a97574c7c"><span class="id" title="variable">α'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#M:363"><span class="id" title="variable">M</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ns:365"><span class="id" title="variable">ns</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings_app.html#ARcoupl"><span class="id" title="definition">ARcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dret"><span class="id" title="definition">dret</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#a:366"><span class="id" title="variable">a</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">rand</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#771150706c2d4bd46241470a97574c7c"><span class="id" title="variable">α'</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:364"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#d199098459a7437e8adc561395b88da6"><span class="id" title="variable">σ1'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a':369" class="idref" href="#a':369"><span class="id" title="binder">a'</span></a> <a id="507ecd99024c1db2fe40c868c919c323" class="idref" href="#507ecd99024c1db2fe40c868c919c323"><span class="id" title="binder">ρ2'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a id="n:371" class="idref" href="#n:371"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:362"><span class="id" title="variable">N</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">),</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#a':369"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#a:366"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#507ecd99024c1db2fe40c868c919c323"><span class="id" title="variable">ρ2'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:371"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#d199098459a7437e8adc561395b88da6"><span class="id" title="variable">σ1'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) (<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_zero"><span class="id" title="definition">nnreal_zero</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ???.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_exact"><span class="id" title="lemma">ARcoupl_exact</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.metatheory.html#Rcoupl_rand_wrong_r"><span class="id" title="lemma">Rcoupl_rand_wrong_r</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wp_couple_rand_no_coll_l" class="idref" href="#wp_couple_rand_no_coll_l"><span class="id" title="lemma">wp_couple_rand_no_coll_l</span></a> <a id="N:372" class="idref" href="#N:372"><span class="id" title="binder">N</span></a> <a id="z:373" class="idref" href="#z:373"><span class="id" title="binder">z</span></a> (<a id="55f19d0ae5816e4b8773bf88ab380efc" class="idref" href="#55f19d0ae5816e4b8773bf88ab380efc"><span class="id" title="binder">σ</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state"><span class="id" title="record">state</span></a>) (<a id="d49e01e5dd5b5ce2049dbf072a02d709" class="idref" href="#d49e01e5dd5b5ce2049dbf072a02d709"><span class="id" title="binder">ρₛ1</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#cfg"><span class="id" title="definition">cfg</span></a>) (<a id="x:376" class="idref" href="#x:376"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Vectors.Fin.html#t"><span class="id" title="inductive">Fin.t</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:372"><span class="id" title="variable">N</span></a>)) (<a id="bbd680841b0f2eccfc830076784429dc" class="idref" href="#bbd680841b0f2eccfc830076784429dc"><span class="id" title="binder">ε</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#nonnegreal"><span class="id" title="record">nonnegreal</span></a>) :<br/>
&nbsp;&nbsp;(0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:372"><span class="id" title="variable">N</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:372"><span class="id" title="variable">N</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bbd680841b0f2eccfc830076784429dc"><span class="id" title="variable">ε</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:372"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:373"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings_app.html#ARcoupl"><span class="id" title="definition">ARcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:373"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#55f19d0ae5816e4b8773bf88ab380efc"><span class="id" title="variable">σ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dret"><span class="id" title="definition">dret</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#d49e01e5dd5b5ce2049dbf072a02d709"><span class="id" title="variable">ρₛ1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="e53cab0446afc09e6e3746f92bb03563" class="idref" href="#e53cab0446afc09e6e3746f92bb03563"><span class="id" title="binder">ρ</span></a> <a id="08197bb61a76f6cec04eac32431bbc45" class="idref" href="#08197bb61a76f6cec04eac32431bbc45"><span class="id" title="binder">ρₛ2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="n:380" class="idref" href="#n:380"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:372"><span class="id" title="variable">N</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#e53cab0446afc09e6e3746f92bb03563"><span class="id" title="variable">ρ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:380"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#55f19d0ae5816e4b8773bf88ab380efc"><span class="id" title="variable">σ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:380"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:376"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#08197bb61a76f6cec04eac32431bbc45"><span class="id" title="variable">ρₛ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#d49e01e5dd5b5ce2049dbf072a02d709"><span class="id" title="variable">ρₛ1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#bbd680841b0f2eccfc830076784429dc"><span class="id" title="variable">ε</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Npos</span> <span class="id" title="var">Nε</span> <span class="id" title="var">Nz</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.common.ectx_language.html#head_prim_step_eq"><span class="id" title="lemma">head_prim_step_eq</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Nz</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="clutch.prob.distribution.html#dmap_dret"><span class="id" title="lemma">dmap_dret</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="x:381" class="idref" href="#x:381"><span class="id" title="binder"><span id="x:382" class="id"><span id="x:383" class="id">x</span></span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:381"><span class="id" title="variable">x</span></a>) <span class="id" title="var">_</span>) /<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">ε</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">ε</span> <a class="idref" href="clutch.prelude.NNRbar.html#30265c7ac6ae445cb8137ba151c23ede"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_zero"><span class="id" title="definition">nnreal_zero</span></a>)%<span class="id" title="var">NNR</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_ext"><span class="id" title="lemma">nnreal_ext</span></a> ; <span class="id" title="tactic">simpl</span> ; <span class="id" title="var">lra</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_dbind"><span class="id" title="lemma">ARcoupl_dbind</span></a> ; [<span class="id" title="tactic">destruct</span> <span class="id" title="var">ε</span> ; <span class="id" title="var">done</span> | <span class="id" title="tactic">simpl</span> ; <span class="id" title="var">lra</span> |..].<br/>
&nbsp;&nbsp;2: <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Nε</span> ; <span class="id" title="tactic">apply</span> (<a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_dunif_no_coll_l"><span class="id" title="lemma">ARcoupl_dunif_no_coll_l</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span> <span class="id" title="var">Npos</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; <span class="id" title="var">n</span> ? [<span class="id" title="var">xn</span> -&gt;]. <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_dret"><span class="id" title="lemma">ARcoupl_dret</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wp_couple_rand_no_coll_r" class="idref" href="#wp_couple_rand_no_coll_r"><span class="id" title="lemma">wp_couple_rand_no_coll_r</span></a> <a id="N:384" class="idref" href="#N:384"><span class="id" title="binder">N</span></a> <a id="z:385" class="idref" href="#z:385"><span class="id" title="binder">z</span></a> (<a id="7538564ba760dc9ebde8283ca3941377" class="idref" href="#7538564ba760dc9ebde8283ca3941377"><span class="id" title="binder">σₛ</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state"><span class="id" title="record">state</span></a>) (<a id="6039d12fe78f01623c90b9464c29c52c" class="idref" href="#6039d12fe78f01623c90b9464c29c52c"><span class="id" title="binder">ρ1</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#cfg"><span class="id" title="definition">cfg</span></a>) (<a id="x:388" class="idref" href="#x:388"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Vectors.Fin.html#t"><span class="id" title="inductive">Fin.t</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:384"><span class="id" title="variable">N</span></a>)) (<a id="7c6d40027c71a6b9fc0f033545681e30" class="idref" href="#7c6d40027c71a6b9fc0f033545681e30"><span class="id" title="binder">ε</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#nonnegreal"><span class="id" title="record">nonnegreal</span></a>) :<br/>
&nbsp;&nbsp;(0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:384"><span class="id" title="variable">N</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:384"><span class="id" title="variable">N</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#7c6d40027c71a6b9fc0f033545681e30"><span class="id" title="variable">ε</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:384"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:385"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings_app.html#ARcoupl"><span class="id" title="definition">ARcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dret"><span class="id" title="definition">dret</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#6039d12fe78f01623c90b9464c29c52c"><span class="id" title="variable">ρ1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:385"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#7538564ba760dc9ebde8283ca3941377"><span class="id" title="variable">σₛ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="3284dffa7415b960b4f6d7e507696a6d" class="idref" href="#3284dffa7415b960b4f6d7e507696a6d"><span class="id" title="binder">ρ2</span></a> <a id="d672c41dce4cce442376934a519baaff" class="idref" href="#d672c41dce4cce442376934a519baaff"><span class="id" title="binder">ρₛ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="n:392" class="idref" href="#n:392"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:384"><span class="id" title="variable">N</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#3284dffa7415b960b4f6d7e507696a6d"><span class="id" title="variable">ρ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#6039d12fe78f01623c90b9464c29c52c"><span class="id" title="variable">ρ1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#d672c41dce4cce442376934a519baaff"><span class="id" title="variable">ρₛ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:392"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#7538564ba760dc9ebde8283ca3941377"><span class="id" title="variable">σₛ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:392"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:388"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#7c6d40027c71a6b9fc0f033545681e30"><span class="id" title="variable">ε</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Npos</span> <span class="id" title="var">Nε</span> <span class="id" title="var">Nz</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.common.ectx_language.html#head_prim_step_eq"><span class="id" title="lemma">head_prim_step_eq</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Nz</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="clutch.prob.distribution.html#dmap_dret"><span class="id" title="lemma">dmap_dret</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="x:393" class="idref" href="#x:393"><span class="id" title="binder"><span id="x:394" class="id"><span id="x:395" class="id">x</span></span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:393"><span class="id" title="variable">x</span></a>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">ε</span> <span class="id" title="keyword">with</span> (<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_plus"><span class="id" title="definition">nnreal_plus</span></a> <span class="id" title="var">ε</span> <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_zero"><span class="id" title="definition">nnreal_zero</span></a>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_ext"><span class="id" title="lemma">nnreal_ext</span></a> ; <span class="id" title="tactic">simpl</span> ; <span class="id" title="var">lra</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_dbind"><span class="id" title="lemma">ARcoupl_dbind</span></a> ; [<span class="id" title="tactic">destruct</span> <span class="id" title="var">ε</span> ; <span class="id" title="var">done</span> | <span class="id" title="tactic">simpl</span> ; <span class="id" title="var">lra</span> |..].<br/>
&nbsp;&nbsp;2: <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Nε</span> ; <span class="id" title="tactic">apply</span> (<a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_dunif_no_coll_r"><span class="id" title="lemma">ARcoupl_dunif_no_coll_r</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span> <span class="id" title="var">Npos</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; ? <span class="id" title="var">n</span> [-&gt; <span class="id" title="var">xn</span>]. <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings_app.html#ARcoupl_dret"><span class="id" title="lemma">ARcoupl_dret</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>

<div class="doc">
<a id="lab93"></a><h1 class="section">state_step ~ fair_coin</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="state_step_fair_coin_coupl" class="idref" href="#state_step_fair_coin_coupl"><span class="id" title="lemma">state_step_fair_coin_coupl</span></a> <a id="50f9ff778a45eb6562a540e0bc59f1e8" class="idref" href="#50f9ff778a45eb6562a540e0bc59f1e8"><span class="id" title="binder">σ</span></a> <a id="754cb0c9c74bc231db71c467271b099d" class="idref" href="#754cb0c9c74bc231db71c467271b099d"><span class="id" title="binder">α</span></a> <a id="bs:398" class="idref" href="#bs:398"><span class="id" title="binder">bs</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#50f9ff778a45eb6562a540e0bc59f1e8"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#754cb0c9c74bc231db71c467271b099d"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bs:398"><span class="id" title="variable">bs</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tape"><span class="id" title="definition">tape</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#50f9ff778a45eb6562a540e0bc59f1e8"><span class="id" title="variable">σ</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#754cb0c9c74bc231db71c467271b099d"><span class="id" title="variable">α</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.distribution.html#fair_coin"><span class="id" title="definition">fair_coin</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="1d7c080c8af37430a199675c3967410d" class="idref" href="#1d7c080c8af37430a199675c3967410d"><span class="id" title="binder">σ'</span></a> <a id="b:400" class="idref" href="#b:400"><span class="id" title="binder">b</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#1d7c080c8af37430a199675c3967410d"><span class="id" title="variable">σ'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#754cb0c9c74bc231db71c467271b099d"><span class="id" title="variable">α</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bs:398"><span class="id" title="variable">bs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#bool_to_fin"><span class="id" title="definition">bool_to_fin</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b:400"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#50f9ff778a45eb6562a540e0bc59f1e8"><span class="id" title="variable">σ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hα</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="b:401" class="idref" href="#b:401"><span class="id" title="binder"><span id="b:402" class="id">b</span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">bs</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#bool_to_fin"><span class="id" title="definition">bool_to_fin</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b:401"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tape"><span class="id" title="definition">tape</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a>) σ<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b:401"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="clutch.prob.distribution.html#fair_coin"><span class="id" title="definition">fair_coin</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#lmarg"><span class="id" title="definition">lmarg</span></a> <a class="idref" href="clutch.prob.distribution.html#dmap_comp"><span class="id" title="lemma">dmap_comp</span></a> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_true_2"><span class="id" title="lemma">bool_decide_eq_true_2</span></a>; [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom_2"><span class="id" title="lemma">elem_of_dom_2</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_total_alt"><span class="id" title="lemma">lookup_total_alt</span></a> <span class="id" title="var">Hα</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.distribution.html#distr_ext"><span class="id" title="lemma">distr_ext</span></a>=&gt; σ'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a> /= /<a class="idref" href="clutch.prob.distribution.html#pmf"><span class="id" title="projection">pmf</span></a> /= /<a class="idref" href="clutch.prob.distribution.html#dbind_pmf"><span class="id" title="definition">dbind_pmf</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.countable_sum.html#SeriesC_bool"><span class="id" title="lemma">SeriesC_bool</span></a> <a class="idref" href="clutch.prob.countable_sum.html#SeriesC_fin2"><span class="id" title="lemma">SeriesC_fin2</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {1 3 5 7}/<a class="idref" href="clutch.prob.distribution.html#pmf"><span class="id" title="projection">pmf</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">bs</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a>1%<span class="id" title="var">fin</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> σ <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> σ')); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> {1 2}<a class="idref" href="clutch.prob.distribution.html#dret_1_1"><span class="id" title="lemma">dret_1_1</span></a> // <a class="idref" href="clutch.prob.distribution.html#dret_0"><span class="id" title="lemma">dret_0</span></a>; [<span class="id" title="var">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [= <span class="id" title="var">H</span>%(<a class="idref" href="clutch.prelude.stdpp_ext.html#insert_inv"><span class="id" title="lemma">insert_inv</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> σ))]. <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">bs</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a>0%<span class="id" title="var">fin</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> σ <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> σ')); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> {1 2}<a class="idref" href="clutch.prob.distribution.html#dret_0"><span class="id" title="lemma">dret_0</span></a> // <a class="idref" href="clutch.prob.distribution.html#dret_1_1"><span class="id" title="lemma">dret_1_1</span></a> //. <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> !<a class="idref" href="clutch.prob.distribution.html#dret_0"><span class="id" title="lemma">dret_0</span></a> //. <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#rmarg"><span class="id" title="definition">rmarg</span></a> <a class="idref" href="clutch.prob.distribution.html#dmap_comp"><span class="id" title="lemma">dmap_comp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="b:403" class="idref" href="#b:403"><span class="id" title="binder"><span id="b:404" class="id">b</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">Datatypes.id</span></a>) <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.distribution.html#dmap_id"><span class="id" title="lemma">dmap_id</span></a> //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> [σ' <span class="id" title="var">b</span>] (<span class="id" title="var">b'</span> &amp; [=-&gt; -&gt;] &amp; ?)%<a class="idref" href="clutch.prob.distribution.html#dmap_pos"><span class="id" title="lemma">dmap_pos</span></a>=&gt;/=.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab94"></a><h1 class="section">state_step ≫= state_step ~ dprod fair_coin fair_coin</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="state_steps_fair_coins_coupl" class="idref" href="#state_steps_fair_coins_coupl"><span class="id" title="lemma">state_steps_fair_coins_coupl</span></a> (<a id="45b5ee228b040ee4d1e170588678f1aa" class="idref" href="#45b5ee228b040ee4d1e170588678f1aa"><span class="id" title="binder">σ</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state"><span class="id" title="record">state</span></a>) (<a id="d43ee13834d620b752253cd14dfbe63b" class="idref" href="#d43ee13834d620b752253cd14dfbe63b"><span class="id" title="binder">α1</span></a> <a id="caf15c2e31991627769c447bb717e1eb" class="idref" href="#caf15c2e31991627769c447bb717e1eb"><span class="id" title="binder">α2</span></a> : <a class="idref" href="clutch.prob_lang.locations.html#loc"><span class="id" title="record">loc</span></a>) (<a id="bs1:408" class="idref" href="#bs1:408"><span class="id" title="binder">bs1</span></a> <a id="bs2:409" class="idref" href="#bs2:409"><span class="id" title="binder">bs2</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> 2)):<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#d43ee13834d620b752253cd14dfbe63b"><span class="id" title="variable">α1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#caf15c2e31991627769c447bb717e1eb"><span class="id" title="variable">α2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#45b5ee228b040ee4d1e170588678f1aa"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#d43ee13834d620b752253cd14dfbe63b"><span class="id" title="variable">α1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bs1:408"><span class="id" title="variable">bs1</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tape"><span class="id" title="definition">tape</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#45b5ee228b040ee4d1e170588678f1aa"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#caf15c2e31991627769c447bb717e1eb"><span class="id" title="variable">α2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bs2:409"><span class="id" title="variable">bs2</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tape"><span class="id" title="definition">tape</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#45b5ee228b040ee4d1e170588678f1aa"><span class="id" title="variable">σ</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#d43ee13834d620b752253cd14dfbe63b"><span class="id" title="variable">α1</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="6afacc76870d25545a0a23a93b51261b" class="idref" href="#6afacc76870d25545a0a23a93b51261b"><span class="id" title="binder">σ'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#6afacc76870d25545a0a23a93b51261b"><span class="id" title="variable">σ'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#caf15c2e31991627769c447bb717e1eb"><span class="id" title="variable">α2</span></a><a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dprod"><span class="id" title="definition">dprod</span></a> <a class="idref" href="clutch.prob.distribution.html#fair_coin"><span class="id" title="definition">fair_coin</span></a> <a class="idref" href="clutch.prob.distribution.html#fair_coin"><span class="id" title="definition">fair_coin</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="6f0142cadcee88125b17501f1895df3b" class="idref" href="#6f0142cadcee88125b17501f1895df3b"><span class="id" title="binder">σ'</span></a> '<a id="pat:413" class="idref" href="#pat:413"><span class="id" title="binder">(</span></a><a id="b1:412" class="idref" href="#b1:412"><span class="id" title="binder"><span id="pat:413" class="id">b1</span></span></a><a id="pat:413" class="idref" href="#pat:413"><span class="id" title="binder">,</span></a> <a id="b2:411" class="idref" href="#b2:411"><span class="id" title="binder"><span id="pat:413" class="id">b2</span></span></a><a id="pat:413" class="idref" href="#pat:413"><span class="id" title="binder">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#6f0142cadcee88125b17501f1895df3b"><span class="id" title="variable">σ'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#d43ee13834d620b752253cd14dfbe63b"><span class="id" title="variable">α1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bs1:408"><span class="id" title="variable">bs1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#bool_to_fin"><span class="id" title="definition">bool_to_fin</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b1:412"><span class="id" title="variable">b1</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#caf15c2e31991627769c447bb717e1eb"><span class="id" title="variable">α2</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bs2:409"><span class="id" title="variable">bs2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#bool_to_fin"><span class="id" title="definition">bool_to_fin</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b2:411"><span class="id" title="variable">b2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#45b5ee228b040ee4d1e170588678f1aa"><span class="id" title="variable">σ</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hneq</span> <span class="id" title="var">Hα1</span> <span class="id" title="var">Hα2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#dprod"><span class="id" title="definition">dprod</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="clutch.prob.distribution.html#dret_id_right"><span class="id" title="lemma">dret_id_right</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <span class="id" title="var">_</span>)) -<a class="idref" href="clutch.prob.distribution.html#dbind_assoc"><span class="id" title="lemma">dbind_assoc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dbind"><span class="id" title="lemma">Rcoupl_dbind</span></a>; [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.metatheory.html#state_step_fair_coin_coupl"><span class="id" title="lemma">state_step_fair_coin_coupl</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> σ' <span class="id" title="var">b1</span> -&gt;.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dbind"><span class="id" title="lemma">Rcoupl_dbind</span></a>; [|<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.metatheory.html#state_step_fair_coin_coupl"><span class="id" title="lemma">state_step_fair_coin_coupl</span></a>]; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert_ne"><span class="id" title="lemma">lookup_insert_ne</span></a> //. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> σ' <span class="id" title="var">b2</span> -&gt;.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dret"><span class="id" title="lemma">Rcoupl_dret</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#insert_commute"><span class="id" title="lemma">insert_commute</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Rcoupl_state_1_3" class="idref" href="#Rcoupl_state_1_3"><span class="id" title="lemma">Rcoupl_state_1_3</span></a> <a id="381b936970567b7a195c61a8dfc05127" class="idref" href="#381b936970567b7a195c61a8dfc05127"><span class="id" title="binder">σ</span></a> <a id="4c0679b0f2a7a451f33cb960b6716c5c" class="idref" href="#4c0679b0f2a7a451f33cb960b6716c5c"><span class="id" title="binder">σₛ</span></a> <a id="bfbcb2f0ccf074770acc3e1acab732ad" class="idref" href="#bfbcb2f0ccf074770acc3e1acab732ad"><span class="id" title="binder">α1</span></a> <a id="9e4075361b5b73516d71c8ce326214a6" class="idref" href="#9e4075361b5b73516d71c8ce326214a6"><span class="id" title="binder">α2</span></a> <a id="167c364aee1b9b87913602a36f10ab5f" class="idref" href="#167c364aee1b9b87913602a36f10ab5f"><span class="id" title="binder">α</span></a><a id="167c364aee1b9b87913602a36f10ab5f" class="idref" href="#167c364aee1b9b87913602a36f10ab5f"><span class="id" title="binder">ₛ</span></a> (<a id="xs:420" class="idref" href="#xs:420"><span class="id" title="binder">xs</span></a> <a id="ys:421" class="idref" href="#ys:421"><span class="id" title="binder">ys</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a>(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (2))) (<a id="zs:422" class="idref" href="#zs:422"><span class="id" title="binder">zs</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a>(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (4))):<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#bfbcb2f0ccf074770acc3e1acab732ad"><span class="id" title="variable">α1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#9e4075361b5b73516d71c8ce326214a6"><span class="id" title="variable">α2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#381b936970567b7a195c61a8dfc05127"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bfbcb2f0ccf074770acc3e1acab732ad"><span class="id" title="variable">α1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#xs:420"><span class="id" title="variable">xs</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#381b936970567b7a195c61a8dfc05127"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#9e4075361b5b73516d71c8ce326214a6"><span class="id" title="variable">α2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ys:421"><span class="id" title="variable">ys</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#4c0679b0f2a7a451f33cb960b6716c5c"><span class="id" title="variable">σₛ</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#167c364aee1b9b87913602a36f10ab5f"><span class="id" title="variable">α</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#167c364aee1b9b87913602a36f10ab5f"><span class="id" title="variable">ₛ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>3%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#zs:422"><span class="id" title="variable">zs</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#381b936970567b7a195c61a8dfc05127"><span class="id" title="variable">σ</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bfbcb2f0ccf074770acc3e1acab732ad"><span class="id" title="variable">α1</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="19d68bf6e001b897bd7081706e92cd9e" class="idref" href="#19d68bf6e001b897bd7081706e92cd9e"><span class="id" title="binder">σ1'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#19d68bf6e001b897bd7081706e92cd9e"><span class="id" title="variable">σ1'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#9e4075361b5b73516d71c8ce326214a6"><span class="id" title="variable">α2</span></a><a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#4c0679b0f2a7a451f33cb960b6716c5c"><span class="id" title="variable">σₛ</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#167c364aee1b9b87913602a36f10ab5f"><span class="id" title="variable">α</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#167c364aee1b9b87913602a36f10ab5f"><span class="id" title="variable">ₛ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="d1b62ca7cc0530f3d1e62b72492c2cda" class="idref" href="#d1b62ca7cc0530f3d1e62b72492c2cda"><span class="id" title="binder">σ1'</span></a> <a id="1da13b5e694aa469bb00661b7baac42c" class="idref" href="#1da13b5e694aa469bb00661b7baac42c"><span class="id" title="binder">σ2'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a id="x:425" class="idref" href="#x:425"><span class="id" title="binder">x</span></a> <a id="y:426" class="idref" href="#y:426"><span class="id" title="binder">y</span></a>:<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> 2) (<a id="z:427" class="idref" href="#z:427"><span class="id" title="binder">z</span></a>:<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> 4<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#d1b62ca7cc0530f3d1e62b72492c2cda"><span class="id" title="variable">σ1'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#9e4075361b5b73516d71c8ce326214a6"><span class="id" title="variable">α2</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ys:421"><span class="id" title="variable">ys</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#y:426"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#bfbcb2f0ccf074770acc3e1acab732ad"><span class="id" title="variable">α1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#xs:420"><span class="id" title="variable">xs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#x:425"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#381b936970567b7a195c61a8dfc05127"><span class="id" title="variable">σ</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#1da13b5e694aa469bb00661b7baac42c"><span class="id" title="variable">σ2'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#167c364aee1b9b87913602a36f10ab5f"><span class="id" title="variable">α</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#167c364aee1b9b87913602a36f10ab5f"><span class="id" title="variable">ₛ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>3%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#zs:422"><span class="id" title="variable">zs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:427"><span class="id" title="variable">z</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#4c0679b0f2a7a451f33cb960b6716c5c"><span class="id" title="variable">σₛ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat"><span class="id" title="definition">fin_to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:425"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat"><span class="id" title="definition">fin_to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#y:426"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat"><span class="id" title="definition">fin_to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:427"><span class="id" title="variable">z</span></a>)%<span class="id" title="var">nat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hneq</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 (<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_true_2"><span class="id" title="lemma">bool_decide_eq_true_2</span></a>; [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom_2"><span class="id" title="lemma">elem_of_dom_2</span></a>]).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_total_correct"><span class="id" title="lemma">lookup_total_correct</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_total_correct"><span class="id" title="lemma">lookup_total_correct</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H3</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> (<a class="idref" href="clutch.prob.distribution.html#dbind_eq"><span class="id" title="lemma">dbind_eq</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="0a449d32fb88e950184131093830de59" class="idref" href="#0a449d32fb88e950184131093830de59"><span class="id" title="binder"><span id="3943267390edb633ebd39bd8b8602c8e" class="id"><span id="4477ada7ee924e01fe079e41a9fb181b" class="id"><span id="0bcf5102a1cc502320e0e40b693304d5" class="id"><span id="c7dba9ce643bc1c9c077c7cce93e99dc" class="id">σ</span></span></span></span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="n:430" class="idref" href="#n:430"><span class="id" title="binder"><span id="n:432" class="id"><span id="n:434" class="id"><span id="n:436" class="id"><span id="n:438" class="id">n</span></span></span></span></span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> 2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α2</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">ys</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:430"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#0a449d32fb88e950184131093830de59"><span class="id" title="variable">σ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dunifP"><span class="id" title="definition">dunifP</span></a> 1))); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [??] <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.distribution.html#dmap_pos"><span class="id" title="lemma">dmap_pos</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (?&amp;-&gt;&amp;<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_true_2"><span class="id" title="lemma">bool_decide_eq_true_2</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom_2"><span class="id" title="lemma">elem_of_dom_2</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a>/=<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert_ne"><span class="id" title="lemma">lookup_insert_ne</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_total_insert_ne"><span class="id" title="lemma">lookup_total_insert_ne</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_total_correct"><span class="id" title="lemma">lookup_total_correct</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> (<span class="id" title="var">witness</span>:=<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="n:439" class="idref" href="#n:439"><span class="id" title="binder"><span id="n:440" class="id">n</span></span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> 4<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a> <span class="id" title="keyword">match</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat"><span class="id" title="definition">fin_to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#n:439"><span class="id" title="variable">n</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0%<span class="id" title="var">nat</span> =&gt;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α2</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">ys</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a>0%<span class="id" title="var">fin</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α1</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">xs</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a>0%<span class="id" title="var">fin</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> σ)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 1%<span class="id" title="var">nat</span> =&gt;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α2</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">ys</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a>1%<span class="id" title="var">fin</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α1</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">xs</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a>0%<span class="id" title="var">fin</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> σ)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 2%<span class="id" title="var">nat</span> =&gt;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α2</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">ys</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a>0%<span class="id" title="var">fin</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α1</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">xs</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a>1%<span class="id" title="var">fin</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> σ)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 3%<span class="id" title="var">nat</span> =&gt; <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α2</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">ys</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a>1%<span class="id" title="var">fin</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α1</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">xs</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a>1%<span class="id" title="var">fin</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> σ)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; σ<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α</span>ₛ<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>3%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">zs</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:439"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> σₛ<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)(<a class="idref" href="clutch.prob.distribution.html#dunifP"><span class="id" title="definition">dunifP</span></a> 3)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">witness</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> [??].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">witness</span> <a class="idref" href="clutch.prob.distribution.html#dmap_pos"><span class="id" title="lemma">dmap_pos</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [?[??]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="var">inv_fin</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">x</span>); <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">simplify_eq</span> =&gt; <span class="id" title="var">_</span>; <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">witness</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#lmarg"><span class="id" title="definition">lmarg</span></a> <a class="idref" href="clutch.prob.distribution.html#dmap_comp"><span class="id" title="lemma">dmap_comp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="clutch.prob.distribution.html#dmap_eq"><span class="id" title="lemma">dmap_eq</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">intros</span> ??. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.distribution.html#distr_ext"><span class="id" title="lemma">distr_ext</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span>.<br/>
</div>

<div class="doc">
prove left marginal of witness is correct 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {1}/<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a>{1}/<a class="idref" href="clutch.prob.distribution.html#dbind"><span class="id" title="definition">dbind</span></a>/<a class="idref" href="clutch.prob.distribution.html#dbind_pmf"><span class="id" title="definition">dbind_pmf</span></a>{1}/<a class="idref" href="clutch.prob.distribution.html#pmf"><span class="id" title="projection">pmf</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etrans</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </div>

<div class="doc">
simplify the RHS 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a>/<a class="idref" href="clutch.prob.distribution.html#dbind"><span class="id" title="definition">dbind</span></a>/<a class="idref" href="clutch.prob.distribution.html#dbind_pmf"><span class="id" title="definition">dbind_pmf</span></a>/<a class="idref" href="clutch.prob.distribution.html#pmf"><span class="id" title="projection">pmf</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> (<a class="idref" href="clutch.prob.countable_sum.html#SeriesC_ext"><span class="id" title="lemma">SeriesC_ext</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:441" class="idref" href="#a:441"><span class="id" title="binder"><span id="a:444" class="id"><span id="a:447" class="id"><span id="a:450" class="id">a</span></span></span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#a:441"><span class="id" title="variable">a</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α1</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">xs</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a>0%<span class="id" title="var">fin</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> σ<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α1</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">xs</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a>1%<span class="id" title="var">fin</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> σ<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.countable_sum.html#SeriesC"><span class="id" title="definition">SeriesC</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a0:442" class="idref" href="#a0:442"><span class="id" title="binder"><span id="a0:445" class="id"><span id="a0:448" class="id"><span id="a0:451" class="id">a0</span></span></span></span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> 2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a"><span class="id" title="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a"><span class="id" title="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="clutch.prob.distribution.html#dret_pmf"><span class="id" title="definition">dret_pmf</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α1</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">xs</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#a0:442"><span class="id" title="variable">a0</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> σ) <a class="idref" href="clutch.prob_lang.metatheory.html#a:441"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.countable_sum.html#SeriesC"><span class="id" title="definition">SeriesC</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a0:443" class="idref" href="#a0:443"><span class="id" title="binder"><span id="a0:446" class="id"><span id="a0:449" class="id"><span id="a0:452" class="id">a0</span></span></span></span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> 2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a"><span class="id" title="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a"><span class="id" title="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="clutch.prob.distribution.html#dret_pmf"><span class="id" title="definition">dret_pmf</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α2</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">ys</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#a0:443"><span class="id" title="variable">a0</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#a:441"><span class="id" title="variable">a</span></a>) <span class="id" title="var">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> 0)); <span class="id" title="tactic">first</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.countable_sum.html#SeriesC_list"><span class="id" title="lemma">SeriesC_list</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<a class="idref" href="clutch.prob.countable_sum.html#SeriesC_finite_foldr"><span class="id" title="lemma">SeriesC_finite_foldr</span></a>/<a class="idref" href="clutch.prob.distribution.html#dret_pmf"><span class="id" title="definition">dret_pmf</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="var">last</span> (<span class="id" title="var">set_unfold</span>; <span class="id" title="var">naive_solver</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_singleton"><span class="id" title="lemma">elem_of_list_singleton</span></a>. <span class="id" title="tactic">move</span> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes_same'"><span class="id" title="lemma">state_upd_tapes_same'</span></a>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [??].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_eq_0_compat_r"><span class="id" title="lemma">Rmult_eq_0_compat_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_unfold</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.countable_sum.html#SeriesC_finite_foldr"><span class="id" title="lemma">SeriesC_finite_foldr</span></a>/<a class="idref" href="clutch.prob.distribution.html#dret_pmf"><span class="id" title="definition">dret_pmf</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">case_bool_decide</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lra</span>; <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes_same'"><span class="id" title="lemma">state_upd_tapes_same'</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">K1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes_neq'"><span class="id" title="lemma">state_upd_tapes_neq'</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">K2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_false_2"><span class="id" title="lemma">bool_decide_eq_false_2</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α1</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">xs</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a>0%<span class="id" title="var">fin</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> σ <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α1</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">xs</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a>1%<span class="id" title="var">fin</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> σ)); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">K2</span>. <span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_false_2"><span class="id" title="lemma">bool_decide_eq_false_2</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α1</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">xs</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a>1%<span class="id" title="var">fin</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> σ <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α1</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">xs</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a>0%<span class="id" title="var">fin</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> σ)); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">K2</span>. <span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_true_2"><span class="id" title="lemma">bool_decide_eq_true_2</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α1</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">xs</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a>1%<span class="id" title="var">fin</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> σ <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α1</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">xs</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a>1%<span class="id" title="var">fin</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> σ)); <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_0_r"><span class="id" title="lemma">Rmult_0_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.countable_sum.html#SeriesC_finite_foldr"><span class="id" title="lemma">SeriesC_finite_foldr</span></a>/<a class="idref" href="clutch.prob.distribution.html#dunifP"><span class="id" title="definition">dunifP</span></a> /<a class="idref" href="clutch.prob.distribution.html#dunif"><span class="id" title="definition">dunif</span></a>/<a class="idref" href="clutch.prob.distribution.html#pmf"><span class="id" title="projection">pmf</span></a> /=/<a class="idref" href="clutch.prob.distribution.html#dret_pmf"><span class="id" title="definition">dret_pmf</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_false_2"><span class="id" title="lemma">bool_decide_eq_false_2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">K</span>. <span class="id" title="var">simplify_eq</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_eq_iff"><span class="id" title="lemma">map_eq_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">K</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">K</span> <span class="id" title="var">α2</span>). <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert"><span class="id" title="lemma">lookup_insert</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">K</span>. <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">K</span>. <span class="id" title="var">simplify_eq</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_eq_iff"><span class="id" title="lemma">map_eq_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">K</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">K</span> <span class="id" title="var">α1</span>). <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert_ne"><span class="id" title="lemma">lookup_insert_ne</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">K</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert_ne"><span class="id" title="lemma">lookup_insert_ne</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">_</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><span class="id" title="var">_</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">_</span></a> )) <span class="id" title="tactic">in</span> <span class="id" title="var">K</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert"><span class="id" title="lemma">lookup_insert</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">K</span>. <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">K</span>. <span class="id" title="var">simplify_eq</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_eq_iff"><span class="id" title="lemma">map_eq_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">K</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">K</span> <span class="id" title="var">α2</span>). <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert"><span class="id" title="lemma">lookup_insert</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">K</span>. <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_false_2"><span class="id" title="lemma">bool_decide_eq_false_2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">K</span>. <span class="id" title="var">simplify_eq</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_eq_iff"><span class="id" title="lemma">map_eq_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">K</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">K</span> <span class="id" title="var">α1</span>). <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert_ne"><span class="id" title="lemma">lookup_insert_ne</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">K</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert_ne"><span class="id" title="lemma">lookup_insert_ne</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">_</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><span class="id" title="var">_</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">_</span></a> )) <span class="id" title="tactic">in</span> <span class="id" title="var">K</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert"><span class="id" title="lemma">lookup_insert</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">K</span>. <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">K</span>. <span class="id" title="var">simplify_eq</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_eq_iff"><span class="id" title="lemma">map_eq_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">K</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">K</span> <span class="id" title="var">α2</span>). <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert"><span class="id" title="lemma">lookup_insert</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">K</span>. <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_false_2"><span class="id" title="lemma">bool_decide_eq_false_2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">K</span>. <span class="id" title="var">simplify_eq</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_eq_iff"><span class="id" title="lemma">map_eq_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">K</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">K</span> <span class="id" title="var">α2</span>). <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert"><span class="id" title="lemma">lookup_insert</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">K</span>. <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#rmarg"><span class="id" title="definition">rmarg</span></a> <a class="idref" href="clutch.prob.distribution.html#dmap_comp"><span class="id" title="lemma">dmap_comp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Rcoupl_fragmented_rand_rand_inj" class="idref" href="#Rcoupl_fragmented_rand_rand_inj"><span class="id" title="lemma">Rcoupl_fragmented_rand_rand_inj</span></a> (<a id="N:453" class="idref" href="#N:453"><span class="id" title="binder">N</span></a> <a id="M:454" class="idref" href="#M:454"><span class="id" title="binder">M</span></a>: <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="f:455" class="idref" href="#f:455"><span class="id" title="binder">f</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:454"><span class="id" title="variable">M</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:453"><span class="id" title="variable">N</span></a>)) (<a id="Hinj:456" class="idref" href="#Hinj:456"><span class="id" title="binder">Hinj</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#Inj"><span class="id" title="class">Inj</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#924fd3758233021bbb7af913c6a625ce"><span class="id" title="notation">(=)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#924fd3758233021bbb7af913c6a625ce"><span class="id" title="notation">(=)</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#f:455"><span class="id" title="variable">f</span></a>) <a id="486f5b941d3c1169341788789412167b" class="idref" href="#486f5b941d3c1169341788789412167b"><span class="id" title="binder">σ</span></a> <a id="ca2d71e10bb3c80b5d925ae09814a48f" class="idref" href="#ca2d71e10bb3c80b5d925ae09814a48f"><span class="id" title="binder">σₛ</span></a> <a id="ms:459" class="idref" href="#ms:459"><span class="id" title="binder">ms</span></a> <a id="ns:460" class="idref" href="#ns:460"><span class="id" title="binder">ns</span></a> <a id="3ff01d1d214719e9a0e397f9c4cb0d98" class="idref" href="#3ff01d1d214719e9a0e397f9c4cb0d98"><span class="id" title="binder">α</span></a> <a id="0cd88b4792ac31cbae8789f61550c689" class="idref" href="#0cd88b4792ac31cbae8789f61550c689"><span class="id" title="binder">α</span></a><a id="0cd88b4792ac31cbae8789f61550c689" class="idref" href="#0cd88b4792ac31cbae8789f61550c689"><span class="id" title="binder">ₛ</span></a>:<br/>
&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.metatheory.html#M:454"><span class="id" title="variable">M</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:453"><span class="id" title="variable">N</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#486f5b941d3c1169341788789412167b"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#3ff01d1d214719e9a0e397f9c4cb0d98"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:453"><span class="id" title="variable">N</span></a>%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ns:460"><span class="id" title="variable">ns</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#ca2d71e10bb3c80b5d925ae09814a48f"><span class="id" title="variable">σₛ</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#0cd88b4792ac31cbae8789f61550c689"><span class="id" title="variable">α</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#0cd88b4792ac31cbae8789f61550c689"><span class="id" title="variable">ₛ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#M:454"><span class="id" title="variable">M</span></a>%<span class="id" title="var">nat</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ms:459"><span class="id" title="variable">ms</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#486f5b941d3c1169341788789412167b"><span class="id" title="variable">σ</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#3ff01d1d214719e9a0e397f9c4cb0d98"><span class="id" title="variable">α</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dunifP"><span class="id" title="definition">dunifP</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:453"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="x:468" class="idref" href="#x:468"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="m:469" class="idref" href="#m:469"><span class="id" title="binder">m</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#f:455"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#m:469"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:468"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ca2d71e10bb3c80b5d925ae09814a48f"><span class="id" title="variable">σₛ</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#0cd88b4792ac31cbae8789f61550c689"><span class="id" title="variable">α</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#0cd88b4792ac31cbae8789f61550c689"><span class="id" title="variable">ₛ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="clutch.prob.distribution.html#dret"><span class="id" title="definition">dret</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ca2d71e10bb3c80b5d925ae09814a48f"><span class="id" title="variable">σₛ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="1d1ca56abfc83d8c56a91df79ad9a2ce" class="idref" href="#1d1ca56abfc83d8c56a91df79ad9a2ce"><span class="id" title="binder">σ1'</span></a> <a id="08c22ceab6ad5add1ed7cad3d6be64f6" class="idref" href="#08c22ceab6ad5add1ed7cad3d6be64f6"><span class="id" title="binder">σ2'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a id="n:465" class="idref" href="#n:465"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:453"><span class="id" title="variable">N</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="m:466" class="idref" href="#m:466"><span class="id" title="binder">m</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#f:455"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#m:466"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#n:465"><span class="id" title="variable">n</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a id="m:467" class="idref" href="#m:467"><span class="id" title="binder">m</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:454"><span class="id" title="variable">M</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#1d1ca56abfc83d8c56a91df79ad9a2ce"><span class="id" title="variable">σ1'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#3ff01d1d214719e9a0e397f9c4cb0d98"><span class="id" title="variable">α</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:453"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ns:460"><span class="id" title="variable">ns</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:465"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#486f5b941d3c1169341788789412167b"><span class="id" title="variable">σ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#08c22ceab6ad5add1ed7cad3d6be64f6"><span class="id" title="variable">σ2'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#0cd88b4792ac31cbae8789f61550c689"><span class="id" title="variable">α</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#0cd88b4792ac31cbae8789f61550c689"><span class="id" title="variable">ₛ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#M:454"><span class="id" title="variable">M</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ms:459"><span class="id" title="variable">ms</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#m:467"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ca2d71e10bb3c80b5d925ae09814a48f"><span class="id" title="variable">σₛ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#f:455"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#m:467"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#n:465"><span class="id" title="variable">n</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#1d1ca56abfc83d8c56a91df79ad9a2ce"><span class="id" title="variable">σ1'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#3ff01d1d214719e9a0e397f9c4cb0d98"><span class="id" title="variable">α</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:453"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ns:460"><span class="id" title="variable">ns</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:465"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#486f5b941d3c1169341788789412167b"><span class="id" title="variable">σ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#08c22ceab6ad5add1ed7cad3d6be64f6"><span class="id" title="variable">σ2'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a>  <a class="idref" href="clutch.prob_lang.metatheory.html#ca2d71e10bb3c80b5d925ae09814a48f"><span class="id" title="variable">σₛ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hineq</span> <span class="id" title="var">H</span>σ <span class="id" title="var">H</span>σₛ. <span class="comment">(*&nbsp;rewrite&nbsp;&lt;-(dret_id_right&nbsp;(state_step&nbsp;_&nbsp;_)).&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (0)%<span class="id" title="var">NNR</span> <span class="id" title="keyword">with</span> (0<a class="idref" href="clutch.prelude.NNRbar.html#30265c7ac6ae445cb8137ba151c23ede"><span class="id" title="notation">+</span></a>0)%<span class="id" title="var">NNR</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prelude.NNRbar.html#nnreal_ext"><span class="id" title="lemma">nnreal_ext</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">lra</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> (<a class="idref" href="clutch.prob.distribution.html#distr_ext"><span class="id" title="lemma">distr_ext</span></a> (<a class="idref" href="clutch.prob.distribution.html#dunifP"><span class="id" title="definition">dunifP</span></a> <span class="id" title="var">_</span> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#MkDistr"><span class="id" title="constructor">MkDistr</span></a> (<a class="idref" href="clutch.prob.distribution.html#dunifP"><span class="id" title="definition">dunifP</span></a> <span class="id" title="var">N</span> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="x:470" class="idref" href="#x:470"><span class="id" title="binder"><span id="x:472" class="id"><span id="x:474" class="id"><span id="x:476" class="id">x</span></span></span></span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">N</span>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Logic.ClassicalEpsilon.html#excluded_middle_informative"><span class="id" title="lemma">ClassicalEpsilon.excluded_middle_informative</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="m:471" class="idref" href="#m:471"><span class="id" title="binder"><span id="m:473" class="id"><span id="m:475" class="id"><span id="m:477" class="id">m</span></span></span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <span class="id" title="var">f</span> <a class="idref" href="clutch.prob_lang.metatheory.html#m:471"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:470"><span class="id" title="variable">x</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#left"><span class="id" title="constructor">left</span></a> <span class="id" title="var">Hproof</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.distribution.html#dret"><span class="id" title="definition">dret</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α</span>ₛ<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><span class="id" title="var">M</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">ms</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prelude.classical.html#epsilon"><span class="id" title="definition">epsilon</span></a> <span class="id" title="var">Hproof</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> σₛ)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.distribution.html#dret"><span class="id" title="definition">dret</span></a> σₛ<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">)</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> σ'. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#pmf"><span class="id" title="projection">pmf</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#dbind_pmf"><span class="id" title="definition">dbind_pmf</span></a>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#dunifP"><span class="id" title="definition">dunifP</span></a>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="clutch.prob.distribution.html#dunif_pmf"><span class="id" title="lemma">dunif_pmf</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="clutch.prob.countable_sum.html#SeriesC_scal_l"><span class="id" title="lemma">SeriesC_scal_l</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_eq_compat_l"><span class="id" title="lemma">Rmult_eq_compat_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> (<a class="idref" href="clutch.prob.countable_sum.html#SeriesC_ext"><span class="id" title="lemma">SeriesC_ext</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="x:478" class="idref" href="#x:478"><span class="id" title="binder"><span id="x:481" class="id"><span id="x:484" class="id"><span id="x:487" class="id">x</span></span></span></span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">N</span>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="m:479" class="idref" href="#m:479"><span class="id" title="binder"><span id="m:482" class="id"><span id="m:485" class="id"><span id="m:488" class="id">m</span></span></span></span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">M</span>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <span class="id" title="var">f</span> <a class="idref" href="clutch.prob_lang.metatheory.html#m:479"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:478"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> σₛ <span class="id" title="var">α</span>ₛ σ' <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> 0<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="m:480" class="idref" href="#m:480"><span class="id" title="binder"><span id="m:483" class="id"><span id="m:486" class="id"><span id="m:489" class="id">m</span></span></span></span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">M</span>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <span class="id" title="var">f</span> <a class="idref" href="clutch.prob_lang.metatheory.html#m:480"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:478"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> 0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="clutch.prob.distribution.html#dret"><span class="id" title="definition">dret</span></a> σₛ σ'<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>. <span class="id" title="var">case_bool_decide</span>; <span class="id" title="var">lra</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">trans</span> (<a class="idref" href="clutch.prob.countable_sum.html#SeriesC"><span class="id" title="definition">SeriesC</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="x:490" class="idref" href="#x:490"><span class="id" title="binder"><span id="x:493" class="id">x</span></span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">N</span>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Logic.ClassicalEpsilon.html#excluded_middle_informative"><span class="id" title="lemma">ClassicalEpsilon.excluded_middle_informative</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="m:491" class="idref" href="#m:491"><span class="id" title="binder"><span id="m:494" class="id">m</span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <span class="id" title="var">f</span> <a class="idref" href="clutch.prob_lang.metatheory.html#m:491"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:490"><span class="id" title="variable">x</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#left"><span class="id" title="constructor">left</span></a> <span class="id" title="var">Hproof</span> =&gt; <a class="idref" href="clutch.prob.distribution.html#dret"><span class="id" title="definition">dret</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α</span>ₛ<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><span class="id" title="var">M</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">ms</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prelude.classical.html#epsilon"><span class="id" title="definition">epsilon</span></a> <span class="id" title="var">Hproof</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> σₛ) σ'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a> <span class="id" title="var">_</span> =&gt; 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Logic.ClassicalEpsilon.html#excluded_middle_informative"><span class="id" title="lemma">ClassicalEpsilon.excluded_middle_informative</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="m:492" class="idref" href="#m:492"><span class="id" title="binder"><span id="m:495" class="id">m</span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <span class="id" title="var">f</span> <a class="idref" href="clutch.prob_lang.metatheory.html#m:492"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:490"><span class="id" title="variable">x</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#left"><span class="id" title="constructor">left</span></a> <span class="id" title="var">Hproof</span> =&gt; 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="clutch.prob.distribution.html#dret"><span class="id" title="definition">dret</span></a> σₛ σ'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.countable_sum.html#SeriesC_ext"><span class="id" title="lemma">SeriesC_ext</span></a>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">case_match</span>; <span class="id" title="var">lra</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="clutch.prob.countable_sum.html#SeriesC_plus"><span class="id" title="lemma">SeriesC_plus</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.countable_sum.html#ex_seriesC_finite"><span class="id" title="lemma">ex_seriesC_finite</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etrans</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_eq_compat_l"><span class="id" title="lemma">Rplus_eq_compat_l</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_eq_compat_r"><span class="id" title="lemma">Rplus_eq_compat_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.countable_sum.html#SeriesC_ext"><span class="id" title="lemma">SeriesC_ext</span></a>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">case_bool_decide</span> <span class="id" title="keyword">as</span> <span class="id" title="var">H</span>; <span class="id" title="var">case_match</span>; <span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="clutch.prelude.classical.html#ExcludedMiddle"><span class="id" title="lemma">ExcludedMiddle</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="x:496" class="idref" href="#x:496"><span class="id" title="binder"><span id="x:497" class="id">x</span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> σ' <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><span class="id" title="var">α</span>ₛ<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><span class="id" title="var">M</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">ms</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#x:496"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> σₛ<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span>|<span class="id" title="var">H</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">n</span> -&gt;].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">trans</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_true_2"><span class="id" title="lemma">bool_decide_eq_true_2</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom"><span class="id" title="method">elem_of_dom</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>σₛ. <span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_total_correct"><span class="id" title="lemma">lookup_total_correct</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> σₛ) <span class="id" title="var">α</span>ₛ <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><span class="id" title="var">M</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">ms</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a>); <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a>/<a class="idref" href="clutch.prob.distribution.html#dbind"><span class="id" title="definition">dbind</span></a>/<a class="idref" href="clutch.prob.distribution.html#dbind_pmf"><span class="id" title="definition">dbind_pmf</span></a>{1}/<a class="idref" href="clutch.prob.distribution.html#pmf"><span class="id" title="projection">pmf</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#dunifP"><span class="id" title="definition">dunifP</span></a>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="clutch.prob.distribution.html#dunif_pmf"><span class="id" title="lemma">dunif_pmf</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="clutch.prob.countable_sum.html#SeriesC_scal_l"><span class="id" title="lemma">SeriesC_scal_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="clutch.prob.countable_sum.html#SeriesC_ext"><span class="id" title="lemma">SeriesC_ext</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="x:498" class="idref" href="#x:498"><span class="id" title="binder"><span id="x:500" class="id"><span id="x:502" class="id">x</span></span></span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">N</span>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="m:499" class="idref" href="#m:499"><span class="id" title="binder"><span id="m:501" class="id"><span id="m:503" class="id">m</span></span></span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">M</span>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <span class="id" title="var">f</span> <a class="idref" href="clutch.prob_lang.metatheory.html#m:499"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:498"><span class="id" title="variable">x</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a"><span class="id" title="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">M</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> 0)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">erewrite</span> (<a class="idref" href="clutch.prob.countable_sum.html#SeriesC_ext"><span class="id" title="lemma">SeriesC_ext</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="x:504" class="idref" href="#x:504"><span class="id" title="binder"><span id="x:505" class="id"><span id="x:506" class="id"><span id="x:507" class="id">x</span></span></span></span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">N</span>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a"><span class="id" title="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">M</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#x:504"><span class="id" title="variable">x</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a><span class="id" title="var">f</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">&lt;$&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#enum"><span class="id" title="method">enum</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">M</span>))) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> 1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> 0)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.countable_sum.html#SeriesC_scal_l"><span class="id" title="lemma">SeriesC_scal_l</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.countable_sum.html#SeriesC_list_1"><span class="id" title="lemma">SeriesC_list_1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#fmap_length"><span class="id" title="lemma">fmap_length</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prelude.fin.html#length_enum_fin"><span class="id" title="lemma">length_enum_fin</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rinv_l"><span class="id" title="lemma">Rinv_l</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> 0 <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> 0) <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; /<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#INR_eq"><span class="id" title="lemma">INR_eq</span></a>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#NoDup_fmap_2"><span class="id" title="lemma">NoDup_fmap_2</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#NoDup_enum"><span class="id" title="method">NoDup_enum</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span> <span class="id" title="keyword">as</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_true_2"><span class="id" title="lemma">bool_decide_eq_true_2</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [?&lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_fmap_1"><span class="id" title="lemma">elem_of_list_fmap_1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#elem_of_enum"><span class="id" title="method">elem_of_enum</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_false_2"><span class="id" title="lemma">bool_decide_eq_false_2</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_fmap_2"><span class="id" title="lemma">elem_of_list_fmap_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [?[-&gt;?]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> (<a class="idref" href="clutch.prob.countable_sum.html#SeriesC_ext"><span class="id" title="lemma">SeriesC_ext</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="x:508" class="idref" href="#x:508"><span class="id" title="binder"><span id="x:509" class="id"><span id="x:510" class="id"><span id="x:511" class="id">x</span></span></span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#x:508"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><span class="id" title="var">n</span>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> 1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> 0)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.countable_sum.html#SeriesC_singleton"><span class="id" title="lemma">SeriesC_singleton</span></a>. <span class="id" title="var">case_bool_decide</span> <span class="id" title="keyword">as</span> <span class="id" title="var">H1</span>; <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">intros</span> <span class="id" title="var">m</span>. <span class="id" title="var">case_bool_decide</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.distribution.html#dret_1"><span class="id" title="lemma">dret_1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.distribution.html#dret_0"><span class="id" title="lemma">dret_0</span></a>. <span class="id" title="tactic">intro</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes_same"><span class="id" title="lemma">state_upd_tapes_same</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="clutch.prob.countable_sum.html#SeriesC_ext"><span class="id" title="lemma">SeriesC_ext</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="x:512" class="idref" href="#x:512"><span class="id" title="binder"><span id="x:513" class="id"><span id="x:514" class="id">x</span></span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#x:512"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">f</span> <span class="id" title="var">n</span>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> 1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> 0)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.countable_sum.html#SeriesC_singleton"><span class="id" title="lemma">SeriesC_singleton</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_match</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Heqn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span> &lt;-] <span class="id" title="var">eqn</span>:<span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Heqn'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">Hinj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqn'</span> <span class="id" title="keyword">as</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.distribution.html#dret_1"><span class="id" title="lemma">dret_1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="clutch.prelude.classical.html#epsilon_correct"><span class="id" title="lemma">epsilon_correct</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="m:515" class="idref" href="#m:515"><span class="id" title="binder"><span id="m:516" class="id">m</span></span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">M</span>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="var">f</span> <a class="idref" href="clutch.prob_lang.metatheory.html#m:515"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">f</span> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hinj</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.distribution.html#dret_0"><span class="id" title="lemma">dret_0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes_same"><span class="id" title="lemma">state_upd_tapes_same</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">eq</span>. <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Heqn'</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="clutch.prelude.classical.html#epsilon_correct"><span class="id" title="lemma">epsilon_correct</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="m0:517" class="idref" href="#m0:517"><span class="id" title="binder"><span id="m0:518" class="id">m0</span></span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">M</span>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="var">f</span> <a class="idref" href="clutch.prob_lang.metatheory.html#m0:517"><span class="id" title="variable">m0</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">f</span> <span class="id" title="var">m</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_false_2"><span class="id" title="lemma">bool_decide_eq_false_2</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> -&gt;. <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">trans</span> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.countable_sum.html#SeriesC_0"><span class="id" title="lemma">SeriesC_0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">case_bool_decide</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_true_2"><span class="id" title="lemma">bool_decide_eq_true_2</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom"><span class="id" title="method">elem_of_dom</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>σₛ. <span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_total_correct"><span class="id" title="lemma">lookup_total_correct</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> σₛ) <span class="id" title="var">α</span>ₛ <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><span class="id" title="var">M</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">ms</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a>); <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a>/<a class="idref" href="clutch.prob.distribution.html#dbind"><span class="id" title="definition">dbind</span></a>/<a class="idref" href="clutch.prob.distribution.html#dbind_pmf"><span class="id" title="definition">dbind_pmf</span></a>{1}/<a class="idref" href="clutch.prob.distribution.html#pmf"><span class="id" title="projection">pmf</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#dunifP"><span class="id" title="definition">dunifP</span></a>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="clutch.prob.distribution.html#dunif_pmf"><span class="id" title="lemma">dunif_pmf</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.countable_sum.html#SeriesC_0"><span class="id" title="lemma">SeriesC_0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">m</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_eq_0_compat_l"><span class="id" title="lemma">Rmult_eq_0_compat_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.distribution.html#dret_0"><span class="id" title="lemma">dret_0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> -&gt;. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">m</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.countable_sum.html#SeriesC_0"><span class="id" title="lemma">SeriesC_0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">case_match</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.distribution.html#dret_0"><span class="id" title="lemma">dret_0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> -&gt;. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step_unfold"><span class="id" title="lemma">state_step_unfold</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dbind"><span class="id" title="lemma">Rcoupl_dbind</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_eq"><span class="id" title="lemma">Rcoupl_eq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ??-&gt;.<br/>
&nbsp;&nbsp;<span class="id" title="var">case_match</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Heqn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span> <span class="id" title="var">He</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="clutch.prelude.classical.html#epsilon"><span class="id" title="definition">epsilon</span></a> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">m</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="clutch.prelude.classical.html#epsilon_correct"><span class="id" title="lemma">epsilon_correct</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="m0:519" class="idref" href="#m0:519"><span class="id" title="binder"><span id="m0:520" class="id">m0</span></span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">M</span>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="var">f</span> <a class="idref" href="clutch.prob_lang.metatheory.html#m0:519"><span class="id" title="variable">m0</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">b</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hinj</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dret"><span class="id" title="lemma">Rcoupl_dret</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_true_2"><span class="id" title="lemma">bool_decide_eq_true_2</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dret"><span class="id" title="lemma">Rcoupl_dret</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_false_2"><span class="id" title="lemma">bool_decide_eq_false_2</span></a>; <span class="id" title="var">naive_solver</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Some useful lemmas to reason about language properties  
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a id="det_head_step_rel" class="idref" href="#det_head_step_rel"><span class="id" title="definition, inductive"><span id="det_head_step_rel_ind" class="id"><span id="det_head_step_rel_sind" class="id">det_head_step_rel</span></span></span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state"><span class="id" title="record">state</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state"><span class="id" title="record">state</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="RecDS" class="idref" href="#RecDS"><span class="id" title="constructor">RecDS</span></a> <a id="f:523" class="idref" href="#f:523"><span class="id" title="binder">f</span></a> <a id="x:524" class="idref" href="#x:524"><span class="id" title="binder">x</span></a> <a id="e:525" class="idref" href="#e:525"><span class="id" title="binder">e</span></a> <a id="f47ab7c3d4ac86b3c2d3b47d83a6b82e" class="idref" href="#f47ab7c3d4ac86b3c2d3b47d83a6b82e"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_rel:521"><span class="id" title="inductive">det_head_step_rel</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Rec"><span class="id" title="constructor">Rec</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#f:523"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:524"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:525"><span class="id" title="variable">e</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#f47ab7c3d4ac86b3c2d3b47d83a6b82e"><span class="id" title="variable">σ</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.RecV"><span class="id" title="constructor">RecV</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#f:523"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:524"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:525"><span class="id" title="variable">e</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#f47ab7c3d4ac86b3c2d3b47d83a6b82e"><span class="id" title="variable">σ</span></a><br/>
| <a id="PairDS" class="idref" href="#PairDS"><span class="id" title="constructor">PairDS</span></a> <a id="v1:527" class="idref" href="#v1:527"><span class="id" title="binder">v1</span></a> <a id="v2:528" class="idref" href="#v2:528"><span class="id" title="binder">v2</span></a> <a id="b0611de433f3733bf27dfd461583c382" class="idref" href="#b0611de433f3733bf27dfd461583c382"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_rel:521"><span class="id" title="inductive">det_head_step_rel</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Pair"><span class="id" title="constructor">Pair</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v1:527"><span class="id" title="variable">v1</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v2:528"><span class="id" title="variable">v2</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#b0611de433f3733bf27dfd461583c382"><span class="id" title="variable">σ</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.PairV"><span class="id" title="constructor">PairV</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v1:527"><span class="id" title="variable">v1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v2:528"><span class="id" title="variable">v2</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#b0611de433f3733bf27dfd461583c382"><span class="id" title="variable">σ</span></a><br/>
| <a id="InjLDS" class="idref" href="#InjLDS"><span class="id" title="constructor">InjLDS</span></a> <a id="v:530" class="idref" href="#v:530"><span class="id" title="binder">v</span></a> <a id="308f9cdd0dfd6829fae6e78871850dd8" class="idref" href="#308f9cdd0dfd6829fae6e78871850dd8"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_rel:521"><span class="id" title="inductive">det_head_step_rel</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.InjL"><span class="id" title="constructor">InjL</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:530"><span class="id" title="variable">v</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#308f9cdd0dfd6829fae6e78871850dd8"><span class="id" title="variable">σ</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.InjLV"><span class="id" title="constructor">InjLV</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:530"><span class="id" title="variable">v</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#308f9cdd0dfd6829fae6e78871850dd8"><span class="id" title="variable">σ</span></a><br/>
| <a id="InjRDS" class="idref" href="#InjRDS"><span class="id" title="constructor">InjRDS</span></a> <a id="v:532" class="idref" href="#v:532"><span class="id" title="binder">v</span></a> <a id="06fba062e6bfb51bbd4b5473b1d6bb8c" class="idref" href="#06fba062e6bfb51bbd4b5473b1d6bb8c"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_rel:521"><span class="id" title="inductive">det_head_step_rel</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.InjR"><span class="id" title="constructor">InjR</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:532"><span class="id" title="variable">v</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#06fba062e6bfb51bbd4b5473b1d6bb8c"><span class="id" title="variable">σ</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.InjRV"><span class="id" title="constructor">InjRV</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:532"><span class="id" title="variable">v</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#06fba062e6bfb51bbd4b5473b1d6bb8c"><span class="id" title="variable">σ</span></a><br/>
| <a id="BetaDS" class="idref" href="#BetaDS"><span class="id" title="constructor">BetaDS</span></a> <a id="f:534" class="idref" href="#f:534"><span class="id" title="binder">f</span></a> <a id="x:535" class="idref" href="#x:535"><span class="id" title="binder">x</span></a> <a id="e1:536" class="idref" href="#e1:536"><span class="id" title="binder">e1</span></a> <a id="v2:537" class="idref" href="#v2:537"><span class="id" title="binder">v2</span></a> <a id="e':538" class="idref" href="#e':538"><span class="id" title="binder">e'</span></a> <a id="1e5cb4a85f3260203e415533b1779b65" class="idref" href="#1e5cb4a85f3260203e415533b1779b65"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#e':538"><span class="id" title="variable">e'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst'"><span class="id" title="definition">subst'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:535"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v2:537"><span class="id" title="variable">v2</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.subst'"><span class="id" title="definition">subst'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#f:534"><span class="id" title="variable">f</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.RecV"><span class="id" title="constructor">RecV</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#f:534"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:535"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:536"><span class="id" title="variable">e1</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#e1:536"><span class="id" title="variable">e1</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_rel:521"><span class="id" title="inductive">det_head_step_rel</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.App"><span class="id" title="constructor">App</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.RecV"><span class="id" title="constructor">RecV</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#f:534"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:535"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:536"><span class="id" title="variable">e1</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v2:537"><span class="id" title="variable">v2</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#1e5cb4a85f3260203e415533b1779b65"><span class="id" title="variable">σ</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e':538"><span class="id" title="variable">e'</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#1e5cb4a85f3260203e415533b1779b65"><span class="id" title="variable">σ</span></a><br/>
| <a id="UnOpDS" class="idref" href="#UnOpDS"><span class="id" title="constructor">UnOpDS</span></a> <a id="op:540" class="idref" href="#op:540"><span class="id" title="binder">op</span></a> <a id="v:541" class="idref" href="#v:541"><span class="id" title="binder">v</span></a> <a id="v':542" class="idref" href="#v':542"><span class="id" title="binder">v'</span></a> <a id="1a141375ba6a487476e2a48590db70ed" class="idref" href="#1a141375ba6a487476e2a48590db70ed"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.un_op_eval"><span class="id" title="definition">un_op_eval</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#op:540"><span class="id" title="variable">op</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:541"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v':542"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_rel:521"><span class="id" title="inductive">det_head_step_rel</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.UnOp"><span class="id" title="constructor">UnOp</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#op:540"><span class="id" title="variable">op</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:541"><span class="id" title="variable">v</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#1a141375ba6a487476e2a48590db70ed"><span class="id" title="variable">σ</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v':542"><span class="id" title="variable">v'</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#1a141375ba6a487476e2a48590db70ed"><span class="id" title="variable">σ</span></a><br/>
| <a id="BinOpDS" class="idref" href="#BinOpDS"><span class="id" title="constructor">BinOpDS</span></a> <a id="op:544" class="idref" href="#op:544"><span class="id" title="binder">op</span></a> <a id="v1:545" class="idref" href="#v1:545"><span class="id" title="binder">v1</span></a> <a id="v2:546" class="idref" href="#v2:546"><span class="id" title="binder">v2</span></a> <a id="v':547" class="idref" href="#v':547"><span class="id" title="binder">v'</span></a> <a id="680c8d225b79093812d72ddbae820778" class="idref" href="#680c8d225b79093812d72ddbae820778"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.bin_op_eval"><span class="id" title="definition">bin_op_eval</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#op:544"><span class="id" title="variable">op</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v1:545"><span class="id" title="variable">v1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v2:546"><span class="id" title="variable">v2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v':547"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_rel:521"><span class="id" title="inductive">det_head_step_rel</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.BinOp"><span class="id" title="constructor">BinOp</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#op:544"><span class="id" title="variable">op</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v1:545"><span class="id" title="variable">v1</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v2:546"><span class="id" title="variable">v2</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#680c8d225b79093812d72ddbae820778"><span class="id" title="variable">σ</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v':547"><span class="id" title="variable">v'</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#680c8d225b79093812d72ddbae820778"><span class="id" title="variable">σ</span></a><br/>
| <a id="IfTrueDS" class="idref" href="#IfTrueDS"><span class="id" title="constructor">IfTrueDS</span></a> <a id="e1:549" class="idref" href="#e1:549"><span class="id" title="binder">e1</span></a> <a id="e2:550" class="idref" href="#e2:550"><span class="id" title="binder">e2</span></a> <a id="b4174da9276412891a417da8b55e4758" class="idref" href="#b4174da9276412891a417da8b55e4758"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_rel:521"><span class="id" title="inductive">det_head_step_rel</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.If"><span class="id" title="constructor">If</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitBool"><span class="id" title="constructor">LitBool</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#e1:549"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e2:550"><span class="id" title="variable">e2</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#b4174da9276412891a417da8b55e4758"><span class="id" title="variable">σ</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:549"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b4174da9276412891a417da8b55e4758"><span class="id" title="variable">σ</span></a><br/>
| <a id="IfFalseDS" class="idref" href="#IfFalseDS"><span class="id" title="constructor">IfFalseDS</span></a> <a id="e1:552" class="idref" href="#e1:552"><span class="id" title="binder">e1</span></a> <a id="e2:553" class="idref" href="#e2:553"><span class="id" title="binder">e2</span></a> <a id="4175c84ab0657565a1283be5ab59ddd6" class="idref" href="#4175c84ab0657565a1283be5ab59ddd6"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_rel:521"><span class="id" title="inductive">det_head_step_rel</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.If"><span class="id" title="constructor">If</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitBool"><span class="id" title="constructor">LitBool</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#e1:552"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e2:553"><span class="id" title="variable">e2</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#4175c84ab0657565a1283be5ab59ddd6"><span class="id" title="variable">σ</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e2:553"><span class="id" title="variable">e2</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#4175c84ab0657565a1283be5ab59ddd6"><span class="id" title="variable">σ</span></a><br/>
| <a id="FstDS" class="idref" href="#FstDS"><span class="id" title="constructor">FstDS</span></a> <a id="v1:555" class="idref" href="#v1:555"><span class="id" title="binder">v1</span></a> <a id="v2:556" class="idref" href="#v2:556"><span class="id" title="binder">v2</span></a> <a id="5fca6a8f909f3e413bd059f5792d26a6" class="idref" href="#5fca6a8f909f3e413bd059f5792d26a6"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_rel:521"><span class="id" title="inductive">det_head_step_rel</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Fst"><span class="id" title="constructor">Fst</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.PairV"><span class="id" title="constructor">PairV</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v1:555"><span class="id" title="variable">v1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v2:556"><span class="id" title="variable">v2</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#5fca6a8f909f3e413bd059f5792d26a6"><span class="id" title="variable">σ</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v1:555"><span class="id" title="variable">v1</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#5fca6a8f909f3e413bd059f5792d26a6"><span class="id" title="variable">σ</span></a><br/>
| <a id="SndDS" class="idref" href="#SndDS"><span class="id" title="constructor">SndDS</span></a> <a id="v1:558" class="idref" href="#v1:558"><span class="id" title="binder">v1</span></a> <a id="v2:559" class="idref" href="#v2:559"><span class="id" title="binder">v2</span></a> <a id="35aaaff9a876484398cff61b52118aa2" class="idref" href="#35aaaff9a876484398cff61b52118aa2"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_rel:521"><span class="id" title="inductive">det_head_step_rel</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Snd"><span class="id" title="constructor">Snd</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.PairV"><span class="id" title="constructor">PairV</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v1:558"><span class="id" title="variable">v1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v2:559"><span class="id" title="variable">v2</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#35aaaff9a876484398cff61b52118aa2"><span class="id" title="variable">σ</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v2:559"><span class="id" title="variable">v2</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#35aaaff9a876484398cff61b52118aa2"><span class="id" title="variable">σ</span></a><br/>
| <a id="CaseLDS" class="idref" href="#CaseLDS"><span class="id" title="constructor">CaseLDS</span></a> <a id="v:561" class="idref" href="#v:561"><span class="id" title="binder">v</span></a> <a id="e1:562" class="idref" href="#e1:562"><span class="id" title="binder">e1</span></a> <a id="e2:563" class="idref" href="#e2:563"><span class="id" title="binder">e2</span></a> <a id="4e8ddbd491a13865c37c9609c9a38629" class="idref" href="#4e8ddbd491a13865c37c9609c9a38629"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_rel:521"><span class="id" title="inductive">det_head_step_rel</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Case"><span class="id" title="constructor">Case</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.InjLV"><span class="id" title="constructor">InjLV</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:561"><span class="id" title="variable">v</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#e1:562"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e2:563"><span class="id" title="variable">e2</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#4e8ddbd491a13865c37c9609c9a38629"><span class="id" title="variable">σ</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.App"><span class="id" title="constructor">App</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:562"><span class="id" title="variable">e1</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:561"><span class="id" title="variable">v</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#4e8ddbd491a13865c37c9609c9a38629"><span class="id" title="variable">σ</span></a><br/>
| <a id="CaseRDS" class="idref" href="#CaseRDS"><span class="id" title="constructor">CaseRDS</span></a> <a id="v:565" class="idref" href="#v:565"><span class="id" title="binder">v</span></a> <a id="e1:566" class="idref" href="#e1:566"><span class="id" title="binder">e1</span></a> <a id="e2:567" class="idref" href="#e2:567"><span class="id" title="binder">e2</span></a> <a id="c3eb4cbb3efb0764ee720e8a8054e535" class="idref" href="#c3eb4cbb3efb0764ee720e8a8054e535"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_rel:521"><span class="id" title="inductive">det_head_step_rel</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Case"><span class="id" title="constructor">Case</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.InjRV"><span class="id" title="constructor">InjRV</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:565"><span class="id" title="variable">v</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#e1:566"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e2:567"><span class="id" title="variable">e2</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#c3eb4cbb3efb0764ee720e8a8054e535"><span class="id" title="variable">σ</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.App"><span class="id" title="constructor">App</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e2:567"><span class="id" title="variable">e2</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:565"><span class="id" title="variable">v</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#c3eb4cbb3efb0764ee720e8a8054e535"><span class="id" title="variable">σ</span></a><br/>
| <a id="AllocNDS" class="idref" href="#AllocNDS"><span class="id" title="constructor">AllocNDS</span></a> <a id="z:569" class="idref" href="#z:569"><span class="id" title="binder">z</span></a> <a id="N:570" class="idref" href="#N:570"><span class="id" title="binder">N</span></a> <a id="v:571" class="idref" href="#v:571"><span class="id" title="binder">v</span></a> <a id="dc948fa9aaa6d12aa6c07213c06af6d0" class="idref" href="#dc948fa9aaa6d12aa6c07213c06af6d0"><span class="id" title="binder">σ</span></a> <a id="l:573" class="idref" href="#l:573"><span class="id" title="binder">l</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#l:573"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.locations.html#fresh_loc"><span class="id" title="definition">fresh_loc</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#dc948fa9aaa6d12aa6c07213c06af6d0"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.heap"><span class="id" title="projection">heap</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:570"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:569"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;(0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:570"><span class="id" title="variable">N</span></a>)%<span class="id" title="var">nat</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_rel:521"><span class="id" title="inductive">det_head_step_rel</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.AllocN"><span class="id" title="constructor">AllocN</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitInt"><span class="id" title="constructor">LitInt</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:569"><span class="id" title="variable">z</span></a>))) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:571"><span class="id" title="variable">v</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#dc948fa9aaa6d12aa6c07213c06af6d0"><span class="id" title="variable">σ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitLoc"><span class="id" title="constructor">LitLoc</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#l:573"><span class="id" title="variable">l</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_heap_N"><span class="id" title="definition">state_upd_heap_N</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#l:573"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:570"><span class="id" title="variable">N</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:571"><span class="id" title="variable">v</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#dc948fa9aaa6d12aa6c07213c06af6d0"><span class="id" title="variable">σ</span></a>)<br/>
| <a id="LoadDS" class="idref" href="#LoadDS"><span class="id" title="constructor">LoadDS</span></a> <a id="l:574" class="idref" href="#l:574"><span class="id" title="binder">l</span></a> <a id="v:575" class="idref" href="#v:575"><span class="id" title="binder">v</span></a> <a id="0b8018cb7175c189d5b4c5a24b3435e7" class="idref" href="#0b8018cb7175c189d5b4c5a24b3435e7"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#0b8018cb7175c189d5b4c5a24b3435e7"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.heap"><span class="id" title="projection">heap</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#l:574"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:575"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_rel:521"><span class="id" title="inductive">det_head_step_rel</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Load"><span class="id" title="constructor">Load</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitLoc"><span class="id" title="constructor">LitLoc</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#l:574"><span class="id" title="variable">l</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#0b8018cb7175c189d5b4c5a24b3435e7"><span class="id" title="variable">σ</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:575"><span class="id" title="variable">v</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#0b8018cb7175c189d5b4c5a24b3435e7"><span class="id" title="variable">σ</span></a><br/>
| <a id="StoreDS" class="idref" href="#StoreDS"><span class="id" title="constructor">StoreDS</span></a> <a id="l:577" class="idref" href="#l:577"><span class="id" title="binder">l</span></a> <a id="v:578" class="idref" href="#v:578"><span class="id" title="binder">v</span></a> <a id="w:579" class="idref" href="#w:579"><span class="id" title="binder">w</span></a> <a id="352046e27545e74c11d6f71ba3d80d79" class="idref" href="#352046e27545e74c11d6f71ba3d80d79"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#352046e27545e74c11d6f71ba3d80d79"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.heap"><span class="id" title="projection">heap</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#l:577"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:578"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_rel:521"><span class="id" title="inductive">det_head_step_rel</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Store"><span class="id" title="constructor">Store</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitLoc"><span class="id" title="constructor">LitLoc</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#l:577"><span class="id" title="variable">l</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#w:579"><span class="id" title="variable">w</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#352046e27545e74c11d6f71ba3d80d79"><span class="id" title="variable">σ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitUnit"><span class="id" title="constructor">LitUnit</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_heap"><span class="id" title="definition">state_upd_heap</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#l:577"><span class="id" title="variable">l</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#w:579"><span class="id" title="variable">w</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#352046e27545e74c11d6f71ba3d80d79"><span class="id" title="variable">σ</span></a>)<br/>
| <a id="TickDS" class="idref" href="#TickDS"><span class="id" title="constructor">TickDS</span></a> <a id="z:581" class="idref" href="#z:581"><span class="id" title="binder">z</span></a> <a id="6b45580b2dafa68962e786d6d68a5da3" class="idref" href="#6b45580b2dafa68962e786d6d68a5da3"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_rel:521"><span class="id" title="inductive">det_head_step_rel</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Tick"><span class="id" title="constructor">Tick</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitInt"><span class="id" title="constructor">LitInt</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:581"><span class="id" title="variable">z</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#6b45580b2dafa68962e786d6d68a5da3"><span class="id" title="variable">σ</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitUnit"><span class="id" title="constructor">LitUnit</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#6b45580b2dafa68962e786d6d68a5da3"><span class="id" title="variable">σ</span></a>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="det_head_step_pred" class="idref" href="#det_head_step_pred"><span class="id" title="definition, inductive"><span id="det_head_step_pred_ind" class="id"><span id="det_head_step_pred_sind" class="id">det_head_step_pred</span></span></span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state"><span class="id" title="record">state</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="RecDSP" class="idref" href="#RecDSP"><span class="id" title="constructor">RecDSP</span></a> <a id="f:585" class="idref" href="#f:585"><span class="id" title="binder">f</span></a> <a id="x:586" class="idref" href="#x:586"><span class="id" title="binder">x</span></a> <a id="e:587" class="idref" href="#e:587"><span class="id" title="binder">e</span></a> <a id="9a5e0ef6eea911e5b6fa00e16456be86" class="idref" href="#9a5e0ef6eea911e5b6fa00e16456be86"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_pred:583"><span class="id" title="inductive">det_head_step_pred</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Rec"><span class="id" title="constructor">Rec</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#f:585"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:586"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:587"><span class="id" title="variable">e</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#9a5e0ef6eea911e5b6fa00e16456be86"><span class="id" title="variable">σ</span></a><br/>
| <a id="PairDSP" class="idref" href="#PairDSP"><span class="id" title="constructor">PairDSP</span></a> <a id="v1:589" class="idref" href="#v1:589"><span class="id" title="binder">v1</span></a> <a id="v2:590" class="idref" href="#v2:590"><span class="id" title="binder">v2</span></a> <a id="9ff9b11a62e074dc89e45bb9c40fd592" class="idref" href="#9ff9b11a62e074dc89e45bb9c40fd592"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_pred:583"><span class="id" title="inductive">det_head_step_pred</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Pair"><span class="id" title="constructor">Pair</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v1:589"><span class="id" title="variable">v1</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v2:590"><span class="id" title="variable">v2</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#9ff9b11a62e074dc89e45bb9c40fd592"><span class="id" title="variable">σ</span></a><br/>
| <a id="InjLDSP" class="idref" href="#InjLDSP"><span class="id" title="constructor">InjLDSP</span></a> <a id="v:592" class="idref" href="#v:592"><span class="id" title="binder">v</span></a> <a id="06209bc399450a104ede8eb5d045b8af" class="idref" href="#06209bc399450a104ede8eb5d045b8af"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_pred:583"><span class="id" title="inductive">det_head_step_pred</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.InjL"><span class="id" title="constructor">InjL</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:592"><span class="id" title="variable">v</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#06209bc399450a104ede8eb5d045b8af"><span class="id" title="variable">σ</span></a><br/>
| <a id="InjRDSP" class="idref" href="#InjRDSP"><span class="id" title="constructor">InjRDSP</span></a> <a id="v:594" class="idref" href="#v:594"><span class="id" title="binder">v</span></a> <a id="2a90979de69c0a93f62e52e2e34a2c70" class="idref" href="#2a90979de69c0a93f62e52e2e34a2c70"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_pred:583"><span class="id" title="inductive">det_head_step_pred</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.InjR"><span class="id" title="constructor">InjR</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:594"><span class="id" title="variable">v</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#2a90979de69c0a93f62e52e2e34a2c70"><span class="id" title="variable">σ</span></a><br/>
| <a id="BetaDSP" class="idref" href="#BetaDSP"><span class="id" title="constructor">BetaDSP</span></a> <a id="f:596" class="idref" href="#f:596"><span class="id" title="binder">f</span></a> <a id="x:597" class="idref" href="#x:597"><span class="id" title="binder">x</span></a> <a id="e1:598" class="idref" href="#e1:598"><span class="id" title="binder">e1</span></a> <a id="v2:599" class="idref" href="#v2:599"><span class="id" title="binder">v2</span></a> <a id="aeb500d89f106efffca7fab25b9bd208" class="idref" href="#aeb500d89f106efffca7fab25b9bd208"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_pred:583"><span class="id" title="inductive">det_head_step_pred</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.App"><span class="id" title="constructor">App</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.RecV"><span class="id" title="constructor">RecV</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#f:596"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#x:597"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:598"><span class="id" title="variable">e1</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v2:599"><span class="id" title="variable">v2</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#aeb500d89f106efffca7fab25b9bd208"><span class="id" title="variable">σ</span></a><br/>
| <a id="UnOpDSP" class="idref" href="#UnOpDSP"><span class="id" title="constructor">UnOpDSP</span></a> <a id="op:601" class="idref" href="#op:601"><span class="id" title="binder">op</span></a> <a id="v:602" class="idref" href="#v:602"><span class="id" title="binder">v</span></a> <a id="dc8f2fdbade22e525a9c7fd92243bcfe" class="idref" href="#dc8f2fdbade22e525a9c7fd92243bcfe"><span class="id" title="binder">σ</span></a> <a id="v':604" class="idref" href="#v':604"><span class="id" title="binder">v'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.un_op_eval"><span class="id" title="definition">un_op_eval</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#op:601"><span class="id" title="variable">op</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:602"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v':604"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_pred:583"><span class="id" title="inductive">det_head_step_pred</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.UnOp"><span class="id" title="constructor">UnOp</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#op:601"><span class="id" title="variable">op</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:602"><span class="id" title="variable">v</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#dc8f2fdbade22e525a9c7fd92243bcfe"><span class="id" title="variable">σ</span></a><br/>
| <a id="BinOpDSP" class="idref" href="#BinOpDSP"><span class="id" title="constructor">BinOpDSP</span></a> <a id="op:605" class="idref" href="#op:605"><span class="id" title="binder">op</span></a> <a id="v1:606" class="idref" href="#v1:606"><span class="id" title="binder">v1</span></a> <a id="v2:607" class="idref" href="#v2:607"><span class="id" title="binder">v2</span></a> <a id="a7701f297868ea8ea39ed508a30d4dd1" class="idref" href="#a7701f297868ea8ea39ed508a30d4dd1"><span class="id" title="binder">σ</span></a> <a id="v':609" class="idref" href="#v':609"><span class="id" title="binder">v'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.bin_op_eval"><span class="id" title="definition">bin_op_eval</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#op:605"><span class="id" title="variable">op</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v1:606"><span class="id" title="variable">v1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v2:607"><span class="id" title="variable">v2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v':609"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_pred:583"><span class="id" title="inductive">det_head_step_pred</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.BinOp"><span class="id" title="constructor">BinOp</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#op:605"><span class="id" title="variable">op</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v1:606"><span class="id" title="variable">v1</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v2:607"><span class="id" title="variable">v2</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#a7701f297868ea8ea39ed508a30d4dd1"><span class="id" title="variable">σ</span></a><br/>
| <a id="IfTrueDSP" class="idref" href="#IfTrueDSP"><span class="id" title="constructor">IfTrueDSP</span></a> <a id="e1:610" class="idref" href="#e1:610"><span class="id" title="binder">e1</span></a> <a id="e2:611" class="idref" href="#e2:611"><span class="id" title="binder">e2</span></a> <a id="c8cc0f84896f15967c18b009c2cf7e96" class="idref" href="#c8cc0f84896f15967c18b009c2cf7e96"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_pred:583"><span class="id" title="inductive">det_head_step_pred</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.If"><span class="id" title="constructor">If</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitBool"><span class="id" title="constructor">LitBool</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#e1:610"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e2:611"><span class="id" title="variable">e2</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#c8cc0f84896f15967c18b009c2cf7e96"><span class="id" title="variable">σ</span></a><br/>
| <a id="IfFalseDSP" class="idref" href="#IfFalseDSP"><span class="id" title="constructor">IfFalseDSP</span></a> <a id="e1:613" class="idref" href="#e1:613"><span class="id" title="binder">e1</span></a> <a id="e2:614" class="idref" href="#e2:614"><span class="id" title="binder">e2</span></a> <a id="08372a071dbd9497cd7e2c49d25fd220" class="idref" href="#08372a071dbd9497cd7e2c49d25fd220"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_pred:583"><span class="id" title="inductive">det_head_step_pred</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.If"><span class="id" title="constructor">If</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitBool"><span class="id" title="constructor">LitBool</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#e1:613"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e2:614"><span class="id" title="variable">e2</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#08372a071dbd9497cd7e2c49d25fd220"><span class="id" title="variable">σ</span></a><br/>
| <a id="FstDSP" class="idref" href="#FstDSP"><span class="id" title="constructor">FstDSP</span></a> <a id="v1:616" class="idref" href="#v1:616"><span class="id" title="binder">v1</span></a> <a id="v2:617" class="idref" href="#v2:617"><span class="id" title="binder">v2</span></a> <a id="b767e8f74a9fcaf05e3b75f84dbb771b" class="idref" href="#b767e8f74a9fcaf05e3b75f84dbb771b"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_pred:583"><span class="id" title="inductive">det_head_step_pred</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Fst"><span class="id" title="constructor">Fst</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.PairV"><span class="id" title="constructor">PairV</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v1:616"><span class="id" title="variable">v1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v2:617"><span class="id" title="variable">v2</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#b767e8f74a9fcaf05e3b75f84dbb771b"><span class="id" title="variable">σ</span></a><br/>
| <a id="SndDSP" class="idref" href="#SndDSP"><span class="id" title="constructor">SndDSP</span></a> <a id="v1:619" class="idref" href="#v1:619"><span class="id" title="binder">v1</span></a> <a id="v2:620" class="idref" href="#v2:620"><span class="id" title="binder">v2</span></a> <a id="8ee02e67650b631878c1cf2e2de68a34" class="idref" href="#8ee02e67650b631878c1cf2e2de68a34"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_pred:583"><span class="id" title="inductive">det_head_step_pred</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Snd"><span class="id" title="constructor">Snd</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.PairV"><span class="id" title="constructor">PairV</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v1:619"><span class="id" title="variable">v1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v2:620"><span class="id" title="variable">v2</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#8ee02e67650b631878c1cf2e2de68a34"><span class="id" title="variable">σ</span></a><br/>
| <a id="CaseLDSP" class="idref" href="#CaseLDSP"><span class="id" title="constructor">CaseLDSP</span></a> <a id="v:622" class="idref" href="#v:622"><span class="id" title="binder">v</span></a> <a id="e1:623" class="idref" href="#e1:623"><span class="id" title="binder">e1</span></a> <a id="e2:624" class="idref" href="#e2:624"><span class="id" title="binder">e2</span></a> <a id="08ba0e30b3fb7c92348f5f6434023a40" class="idref" href="#08ba0e30b3fb7c92348f5f6434023a40"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_pred:583"><span class="id" title="inductive">det_head_step_pred</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Case"><span class="id" title="constructor">Case</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.InjLV"><span class="id" title="constructor">InjLV</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:622"><span class="id" title="variable">v</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#e1:623"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e2:624"><span class="id" title="variable">e2</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#08ba0e30b3fb7c92348f5f6434023a40"><span class="id" title="variable">σ</span></a><br/>
| <a id="CaseRDSP" class="idref" href="#CaseRDSP"><span class="id" title="constructor">CaseRDSP</span></a> <a id="v:626" class="idref" href="#v:626"><span class="id" title="binder">v</span></a> <a id="e1:627" class="idref" href="#e1:627"><span class="id" title="binder">e1</span></a> <a id="e2:628" class="idref" href="#e2:628"><span class="id" title="binder">e2</span></a> <a id="966e2ab0bc4c11371b30554056c4d882" class="idref" href="#966e2ab0bc4c11371b30554056c4d882"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_pred:583"><span class="id" title="inductive">det_head_step_pred</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Case"><span class="id" title="constructor">Case</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.InjRV"><span class="id" title="constructor">InjRV</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:626"><span class="id" title="variable">v</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#e1:627"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e2:628"><span class="id" title="variable">e2</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#966e2ab0bc4c11371b30554056c4d882"><span class="id" title="variable">σ</span></a><br/>
| <a id="AllocNDSP" class="idref" href="#AllocNDSP"><span class="id" title="constructor">AllocNDSP</span></a> <a id="z:630" class="idref" href="#z:630"><span class="id" title="binder">z</span></a> <a id="N:631" class="idref" href="#N:631"><span class="id" title="binder">N</span></a> <a id="v:632" class="idref" href="#v:632"><span class="id" title="binder">v</span></a> <a id="f8741e2b57c61561946f5933a1544d56" class="idref" href="#f8741e2b57c61561946f5933a1544d56"><span class="id" title="binder">σ</span></a> <a id="l:634" class="idref" href="#l:634"><span class="id" title="binder">l</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#l:634"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.locations.html#fresh_loc"><span class="id" title="definition">fresh_loc</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#f8741e2b57c61561946f5933a1544d56"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.heap"><span class="id" title="projection">heap</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:631"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:630"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;(0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#N:631"><span class="id" title="variable">N</span></a>)%<span class="id" title="var">nat</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_pred:583"><span class="id" title="inductive">det_head_step_pred</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.AllocN"><span class="id" title="constructor">AllocN</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitInt"><span class="id" title="constructor">LitInt</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:630"><span class="id" title="variable">z</span></a>))) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:632"><span class="id" title="variable">v</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#f8741e2b57c61561946f5933a1544d56"><span class="id" title="variable">σ</span></a><br/>
| <a id="LoadDSP" class="idref" href="#LoadDSP"><span class="id" title="constructor">LoadDSP</span></a> <a id="l:635" class="idref" href="#l:635"><span class="id" title="binder">l</span></a> <a id="v:636" class="idref" href="#v:636"><span class="id" title="binder">v</span></a> <a id="d1c55a03b0220adb184707a8ec58ec13" class="idref" href="#d1c55a03b0220adb184707a8ec58ec13"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#d1c55a03b0220adb184707a8ec58ec13"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.heap"><span class="id" title="projection">heap</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#l:635"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:636"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_pred:583"><span class="id" title="inductive">det_head_step_pred</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Load"><span class="id" title="constructor">Load</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitLoc"><span class="id" title="constructor">LitLoc</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#l:635"><span class="id" title="variable">l</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#d1c55a03b0220adb184707a8ec58ec13"><span class="id" title="variable">σ</span></a><br/>
| <a id="StoreDSP" class="idref" href="#StoreDSP"><span class="id" title="constructor">StoreDSP</span></a> <a id="l:638" class="idref" href="#l:638"><span class="id" title="binder">l</span></a> <a id="v:639" class="idref" href="#v:639"><span class="id" title="binder">v</span></a> <a id="w:640" class="idref" href="#w:640"><span class="id" title="binder">w</span></a> <a id="a2e25e42ddc3c841ca6815690c5165ea" class="idref" href="#a2e25e42ddc3c841ca6815690c5165ea"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#a2e25e42ddc3c841ca6815690c5165ea"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.heap"><span class="id" title="projection">heap</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#l:638"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:639"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_pred:583"><span class="id" title="inductive">det_head_step_pred</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Store"><span class="id" title="constructor">Store</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitLoc"><span class="id" title="constructor">LitLoc</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#l:638"><span class="id" title="variable">l</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#w:640"><span class="id" title="variable">w</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#a2e25e42ddc3c841ca6815690c5165ea"><span class="id" title="variable">σ</span></a><br/>
| <a id="TickDSP" class="idref" href="#TickDSP"><span class="id" title="constructor">TickDSP</span></a> <a id="z:642" class="idref" href="#z:642"><span class="id" title="binder">z</span></a> <a id="766c4c71078dab00cf7b1334d200936d" class="idref" href="#766c4c71078dab00cf7b1334d200936d"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_pred:583"><span class="id" title="inductive">det_head_step_pred</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Tick"><span class="id" title="constructor">Tick</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitInt"><span class="id" title="constructor">LitInt</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:642"><span class="id" title="variable">z</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#766c4c71078dab00cf7b1334d200936d"><span class="id" title="variable">σ</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_det_head_step" class="idref" href="#is_det_head_step"><span class="id" title="definition">is_det_head_step</span></a> (<a id="e1:644" class="idref" href="#e1:644"><span class="id" title="binder">e1</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.expr"><span class="id" title="inductive">expr</span></a>) (<a id="737fece2afe2745a7dd5eb441518f4e7" class="idref" href="#737fece2afe2745a7dd5eb441518f4e7"><span class="id" title="binder">σ1</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state"><span class="id" title="record">state</span></a>)  : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:644"><span class="id" title="variable">e1</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Rec"><span class="id" title="constructor">Rec</span></a> <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Pair"><span class="id" title="constructor">Pair</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <span class="id" title="var">v1</span>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <span class="id" title="var">v2</span>) =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.InjL"><span class="id" title="constructor">InjL</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <span class="id" title="var">v</span>) =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.InjR"><span class="id" title="constructor">InjR</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <span class="id" title="var">v</span>) =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.App"><span class="id" title="constructor">App</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.RecV"><span class="id" title="constructor">RecV</span></a> <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">e1</span>)) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <span class="id" title="var">v2</span>) =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.UnOp"><span class="id" title="constructor">UnOp</span></a> <span class="id" title="var">op</span> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <span class="id" title="var">v</span>)  =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a>(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#is_Some"><span class="id" title="definition">is_Some</span></a>(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.un_op_eval"><span class="id" title="definition">un_op_eval</span></a> <span class="id" title="var">op</span> <span class="id" title="var">v</span>))<br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.BinOp"><span class="id" title="constructor">BinOp</span></a> <span class="id" title="var">op</span> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <span class="id" title="var">v1</span>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <span class="id" title="var">v2</span>) =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#is_Some"><span class="id" title="definition">is_Some</span></a>(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.bin_op_eval"><span class="id" title="definition">bin_op_eval</span></a> <span class="id" title="var">op</span> <span class="id" title="var">v1</span> <span class="id" title="var">v2</span>))<br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.If"><span class="id" title="constructor">If</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitBool"><span class="id" title="constructor">LitBool</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>))) <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.If"><span class="id" title="constructor">If</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitBool"><span class="id" title="constructor">LitBool</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>))) <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Fst"><span class="id" title="constructor">Fst</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.PairV"><span class="id" title="constructor">PairV</span></a> <span class="id" title="var">v1</span> <span class="id" title="var">v2</span>)) =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Snd"><span class="id" title="constructor">Snd</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.PairV"><span class="id" title="constructor">PairV</span></a> <span class="id" title="var">v1</span> <span class="id" title="var">v2</span>)) =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Case"><span class="id" title="constructor">Case</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.InjLV"><span class="id" title="constructor">InjLV</span></a> <span class="id" title="var">v</span>)) <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Case"><span class="id" title="constructor">Case</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.InjRV"><span class="id" title="constructor">InjRV</span></a> <span class="id" title="var">v</span>)) <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.AllocN"><span class="id" title="constructor">AllocN</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitInt"><span class="id" title="constructor">LitInt</span></a> <span class="id" title="var">z</span>))) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <span class="id" title="var">v</span>) =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <span class="id" title="var">z</span>)%<span class="id" title="var">nat</span><br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Load"><span class="id" title="constructor">Load</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitLoc"><span class="id" title="constructor">LitLoc</span></a> <span class="id" title="var">l</span>)))  =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#is_Some"><span class="id" title="definition">is_Some</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#737fece2afe2745a7dd5eb441518f4e7"><span class="id" title="variable">σ1</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.heap"><span class="id" title="projection">heap</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">l</span>))<br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Store"><span class="id" title="constructor">Store</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitLoc"><span class="id" title="constructor">LitLoc</span></a> <span class="id" title="var">l</span>))) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <span class="id" title="var">w</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#is_Some"><span class="id" title="definition">is_Some</span></a> (<a class="idref" href="clutch.prob_lang.metatheory.html#737fece2afe2745a7dd5eb441518f4e7"><span class="id" title="variable">σ1</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.heap"><span class="id" title="projection">heap</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">l</span>))<br/>
&nbsp;&nbsp;| <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Tick"><span class="id" title="constructor">Tick</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitInt"><span class="id" title="constructor">LitInt</span></a> <span class="id" title="var">z</span>))) =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="det_step_eq_tapes" class="idref" href="#det_step_eq_tapes"><span class="id" title="lemma">det_step_eq_tapes</span></a> <a id="e1:647" class="idref" href="#e1:647"><span class="id" title="binder">e1</span></a> <a id="2dbaf5cfe4b7aa0cf97ebdaf768f902f" class="idref" href="#2dbaf5cfe4b7aa0cf97ebdaf768f902f"><span class="id" title="binder">σ1</span></a> <a id="e2:649" class="idref" href="#e2:649"><span class="id" title="binder">e2</span></a> <a id="019bebb3cf5e2e07510ca73d40f6995a" class="idref" href="#019bebb3cf5e2e07510ca73d40f6995a"><span class="id" title="binder">σ2</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_rel"><span class="id" title="inductive">det_head_step_rel</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:647"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#2dbaf5cfe4b7aa0cf97ebdaf768f902f"><span class="id" title="variable">σ1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e2:649"><span class="id" title="variable">e2</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#019bebb3cf5e2e07510ca73d40f6995a"><span class="id" title="variable">σ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#2dbaf5cfe4b7aa0cf97ebdaf768f902f"><span class="id" title="variable">σ1</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#019bebb3cf5e2e07510ca73d40f6995a"><span class="id" title="variable">σ2</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="prob_head_step_pred" class="idref" href="#prob_head_step_pred"><span class="id" title="definition, inductive"><span id="prob_head_step_pred_ind" class="id"><span id="prob_head_step_pred_sind" class="id">prob_head_step_pred</span></span></span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state"><span class="id" title="record">state</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="AllocTapePSP" class="idref" href="#AllocTapePSP"><span class="id" title="constructor">AllocTapePSP</span></a> <a id="3031653eea0feac6cc060eecb2ac1f08" class="idref" href="#3031653eea0feac6cc060eecb2ac1f08"><span class="id" title="binder">σ</span></a> <a id="N:654" class="idref" href="#N:654"><span class="id" title="binder">N</span></a> <a id="z:655" class="idref" href="#z:655"><span class="id" title="binder">z</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:654"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:655"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#prob_head_step_pred:651"><span class="id" title="inductive">prob_head_step_pred</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#alloc"><span class="id" title="abbreviation">alloc</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:655"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#3031653eea0feac6cc060eecb2ac1f08"><span class="id" title="variable">σ</span></a><br/>
| <a id="RandTapePSP" class="idref" href="#RandTapePSP"><span class="id" title="constructor">RandTapePSP</span></a> <a id="c7bb94c1403109c27bc9c1a8a26653ff" class="idref" href="#c7bb94c1403109c27bc9c1a8a26653ff"><span class="id" title="binder">α</span></a> <a id="377896877eb5d1d0988508d9aa864f65" class="idref" href="#377896877eb5d1d0988508d9aa864f65"><span class="id" title="binder">σ</span></a> <a id="N:658" class="idref" href="#N:658"><span class="id" title="binder">N</span></a> <a id="n:659" class="idref" href="#n:659"><span class="id" title="binder">n</span></a> <a id="ns:660" class="idref" href="#ns:660"><span class="id" title="binder">ns</span></a> <a id="z:661" class="idref" href="#z:661"><span class="id" title="binder">z</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:658"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:661"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#377896877eb5d1d0988508d9aa864f65"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#c7bb94c1403109c27bc9c1a8a26653ff"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:658"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#n:659"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ns:660"><span class="id" title="variable">ns</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tape"><span class="id" title="definition">tape</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#prob_head_step_pred:651"><span class="id" title="inductive">prob_head_step_pred</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">rand</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#c7bb94c1403109c27bc9c1a8a26653ff"><span class="id" title="variable">α</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:661"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#377896877eb5d1d0988508d9aa864f65"><span class="id" title="variable">σ</span></a><br/>
| <a id="RandEmptyPSP" class="idref" href="#RandEmptyPSP"><span class="id" title="constructor">RandEmptyPSP</span></a> <a id="N:662" class="idref" href="#N:662"><span class="id" title="binder">N</span></a> <a id="96662eaa642f5ab79970b9847939a22d" class="idref" href="#96662eaa642f5ab79970b9847939a22d"><span class="id" title="binder">α</span></a> <a id="5973f2c7a08a9770dd93620e35ee950c" class="idref" href="#5973f2c7a08a9770dd93620e35ee950c"><span class="id" title="binder">σ</span></a> <a id="z:665" class="idref" href="#z:665"><span class="id" title="binder">z</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:662"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:665"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#5973f2c7a08a9770dd93620e35ee950c"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#96662eaa642f5ab79970b9847939a22d"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:662"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tape"><span class="id" title="definition">tape</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#prob_head_step_pred:651"><span class="id" title="inductive">prob_head_step_pred</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">rand</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#96662eaa642f5ab79970b9847939a22d"><span class="id" title="variable">α</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:665"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#5973f2c7a08a9770dd93620e35ee950c"><span class="id" title="variable">σ</span></a><br/>
| <a id="RandTapeOtherPSP" class="idref" href="#RandTapeOtherPSP"><span class="id" title="constructor">RandTapeOtherPSP</span></a> <a id="N:666" class="idref" href="#N:666"><span class="id" title="binder">N</span></a> <a id="M:667" class="idref" href="#M:667"><span class="id" title="binder">M</span></a> <a id="f93c50e4a60d565d2e35cd7c46399ad3" class="idref" href="#f93c50e4a60d565d2e35cd7c46399ad3"><span class="id" title="binder">α</span></a> <a id="cf05d5175d022ffb7155ea70ee5fd9c8" class="idref" href="#cf05d5175d022ffb7155ea70ee5fd9c8"><span class="id" title="binder">σ</span></a> <a id="ns:670" class="idref" href="#ns:670"><span class="id" title="binder">ns</span></a> <a id="z:671" class="idref" href="#z:671"><span class="id" title="binder">z</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:666"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#M:667"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#M:667"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:671"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#cf05d5175d022ffb7155ea70ee5fd9c8"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#f93c50e4a60d565d2e35cd7c46399ad3"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:666"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ns:670"><span class="id" title="variable">ns</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tape"><span class="id" title="definition">tape</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#prob_head_step_pred:651"><span class="id" title="inductive">prob_head_step_pred</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">rand</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#f93c50e4a60d565d2e35cd7c46399ad3"><span class="id" title="variable">α</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:671"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#cf05d5175d022ffb7155ea70ee5fd9c8"><span class="id" title="variable">σ</span></a><br/>
| <a id="RandNoTapePSP" class="idref" href="#RandNoTapePSP"><span class="id" title="constructor">RandNoTapePSP</span></a> (<a id="N:672" class="idref" href="#N:672"><span class="id" title="binder">N</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="00fa692defefd71ae1f7b21d72583015" class="idref" href="#00fa692defefd71ae1f7b21d72583015"><span class="id" title="binder">σ</span></a> <a id="z:674" class="idref" href="#z:674"><span class="id" title="binder">z</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#N:672"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#z:674"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#prob_head_step_pred:651"><span class="id" title="inductive">prob_head_step_pred</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:674"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.metatheory.html#00fa692defefd71ae1f7b21d72583015"><span class="id" title="variable">σ</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="head_step_pred" class="idref" href="#head_step_pred"><span class="id" title="definition">head_step_pred</span></a> <a id="e1:675" class="idref" href="#e1:675"><span class="id" title="binder">e1</span></a> <a id="5ea2670a5dd577aa9229a965aade4713" class="idref" href="#5ea2670a5dd577aa9229a965aade4713"><span class="id" title="binder">σ1</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_pred"><span class="id" title="inductive">det_head_step_pred</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:675"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#5ea2670a5dd577aa9229a965aade4713"><span class="id" title="variable">σ1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">∨</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#prob_head_step_pred"><span class="id" title="inductive">prob_head_step_pred</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:675"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#5ea2670a5dd577aa9229a965aade4713"><span class="id" title="variable">σ1</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="det_step_is_unique" class="idref" href="#det_step_is_unique"><span class="id" title="lemma">det_step_is_unique</span></a> <a id="e1:677" class="idref" href="#e1:677"><span class="id" title="binder">e1</span></a> <a id="a61b8a52b2f6815a8881a4fb1c0979f1" class="idref" href="#a61b8a52b2f6815a8881a4fb1c0979f1"><span class="id" title="binder">σ1</span></a> <a id="e2:679" class="idref" href="#e2:679"><span class="id" title="binder">e2</span></a> <a id="e32cc6e8a36352fedc856b5354a6985a" class="idref" href="#e32cc6e8a36352fedc856b5354a6985a"><span class="id" title="binder">σ2</span></a> <a id="e3:681" class="idref" href="#e3:681"><span class="id" title="binder">e3</span></a> <a id="120d9aa1199b6e0315b3dd30a37e3b48" class="idref" href="#120d9aa1199b6e0315b3dd30a37e3b48"><span class="id" title="binder">σ3</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_rel"><span class="id" title="inductive">det_head_step_rel</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:677"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#a61b8a52b2f6815a8881a4fb1c0979f1"><span class="id" title="variable">σ1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e2:679"><span class="id" title="variable">e2</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e32cc6e8a36352fedc856b5354a6985a"><span class="id" title="variable">σ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_rel"><span class="id" title="inductive">det_head_step_rel</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:677"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#a61b8a52b2f6815a8881a4fb1c0979f1"><span class="id" title="variable">σ1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e3:681"><span class="id" title="variable">e3</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#120d9aa1199b6e0315b3dd30a37e3b48"><span class="id" title="variable">σ3</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#e2:679"><span class="id" title="variable">e2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e3:681"><span class="id" title="variable">e3</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e32cc6e8a36352fedc856b5354a6985a"><span class="id" title="variable">σ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#120d9aa1199b6e0315b3dd30a37e3b48"><span class="id" title="variable">σ3</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="det_step_pred_ex_rel" class="idref" href="#det_step_pred_ex_rel"><span class="id" title="lemma">det_step_pred_ex_rel</span></a> <a id="e1:683" class="idref" href="#e1:683"><span class="id" title="binder">e1</span></a> <a id="bda54f755a55be5cfbf946c2d6f8fe9a" class="idref" href="#bda54f755a55be5cfbf946c2d6f8fe9a"><span class="id" title="binder">σ1</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_pred"><span class="id" title="inductive">det_head_step_pred</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:683"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bda54f755a55be5cfbf946c2d6f8fe9a"><span class="id" title="variable">σ1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="e2:685" class="idref" href="#e2:685"><span class="id" title="binder">e2</span></a> <a id="2a06400812720ce7c7570d8897b3228d" class="idref" href="#2a06400812720ce7c7570d8897b3228d"><span class="id" title="binder">σ2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_rel"><span class="id" title="inductive">det_head_step_rel</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:683"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bda54f755a55be5cfbf946c2d6f8fe9a"><span class="id" title="variable">σ1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e2:685"><span class="id" title="variable">e2</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#2a06400812720ce7c7570d8897b3228d"><span class="id" title="variable">σ2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> (<span class="id" title="var">e2</span> &amp; (σ2 &amp; <span class="id" title="var">H</span>)); <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Local Ltac</span> <span class="id" title="var">solve_step_det</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#pmf"><span class="id" title="projection">pmf</span></a> /=;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_true_2"><span class="id" title="lemma">bool_decide_eq_true_2</span></a> // || <span class="id" title="var">case_match</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="var">lra</span> || <span class="id" title="var">lia</span> || <span class="id" title="var">done</span>).<br/>

<br/>
<span class="id" title="keyword">Local Ltac</span> <span class="id" title="var">inv_det_head_step</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H</span> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.to_val"><span class="id" title="definition">to_val</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_to_val"><span class="id" title="lemma">of_to_val</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H</span> : <a class="idref" href="clutch.prob_lang.metatheory.html#is_det_head_step"><span class="id" title="definition">is_det_head_step</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob_lang.metatheory.html#is_det_head_step"><span class="id" title="definition">is_det_head_step</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="var">case_match</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">simplify_eq</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#is_Some"><span class="id" title="definition">is_Some</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a>  <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_true"><span class="id" title="lemma">bool_decide_eq_true</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">destruct_and</span>?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">progress</span> <span class="id" title="var">simplify_map_eq</span>/=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_det_head_step_true" class="idref" href="#is_det_head_step_true"><span class="id" title="lemma">is_det_head_step_true</span></a> <a id="e1:687" class="idref" href="#e1:687"><span class="id" title="binder">e1</span></a> <a id="bd334254d20a4c7e1f6903f470b78e6b" class="idref" href="#bd334254d20a4c7e1f6903f470b78e6b"><span class="id" title="binder">σ1</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#is_det_head_step"><span class="id" title="definition">is_det_head_step</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:687"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bd334254d20a4c7e1f6903f470b78e6b"><span class="id" title="variable">σ1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">↔</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_pred"><span class="id" title="inductive">det_head_step_pred</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:687"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bd334254d20a4c7e1f6903f470b78e6b"><span class="id" title="variable">σ1</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">e1</span>; <span class="id" title="var">inv_det_head_step</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">solve_step_det</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="det_head_step_singleton" class="idref" href="#det_head_step_singleton"><span class="id" title="lemma">det_head_step_singleton</span></a> <a id="e1:689" class="idref" href="#e1:689"><span class="id" title="binder">e1</span></a> <a id="84925d46d188e38356ba5f2e41acc6e6" class="idref" href="#84925d46d188e38356ba5f2e41acc6e6"><span class="id" title="binder">σ1</span></a> <a id="e2:691" class="idref" href="#e2:691"><span class="id" title="binder">e2</span></a> <a id="1318210f08fa6478f445cdc9770e6467" class="idref" href="#1318210f08fa6478f445cdc9770e6467"><span class="id" title="binder">σ2</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_rel"><span class="id" title="inductive">det_head_step_rel</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:689"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#84925d46d188e38356ba5f2e41acc6e6"><span class="id" title="variable">σ1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e2:691"><span class="id" title="variable">e2</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#1318210f08fa6478f445cdc9770e6467"><span class="id" title="variable">σ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:689"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#84925d46d188e38356ba5f2e41acc6e6"><span class="id" title="variable">σ1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob.distribution.html#dret"><span class="id" title="definition">dret</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#e2:691"><span class="id" title="variable">e2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#1318210f08fa6478f445cdc9770e6467"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hdet</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.distribution.html#pmf_1_eq_dret"><span class="id" title="lemma">pmf_1_eq_dret</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hdet</span>; <span class="id" title="var">simplify_eq</span>/=; <span class="id" title="tactic">try</span> <span class="id" title="var">case_match</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_option_eq</span>; <span class="id" title="tactic">rewrite</span> ?<a class="idref" href="clutch.prob.distribution.html#dret_1_1"><span class="id" title="lemma">dret_1_1</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="val_not_head_step" class="idref" href="#val_not_head_step"><span class="id" title="lemma">val_not_head_step</span></a> <a id="e1:693" class="idref" href="#e1:693"><span class="id" title="binder">e1</span></a> <a id="916634053779ee884bb9b340e6881a39" class="idref" href="#916634053779ee884bb9b340e6881a39"><span class="id" title="binder">σ1</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#is_Some"><span class="id" title="definition">is_Some</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.to_val"><span class="id" title="definition">to_val</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:693"><span class="id" title="variable">e1</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#head_step_pred"><span class="id" title="definition">head_step_pred</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:693"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#916634053779ee884bb9b340e6881a39"><span class="id" title="variable">σ1</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [] [<span class="id" title="var">Hs</span> | <span class="id" title="var">Hs</span>]; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hs</span>; <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="head_step_pred_ex_rel" class="idref" href="#head_step_pred_ex_rel"><span class="id" title="lemma">head_step_pred_ex_rel</span></a> <a id="e1:695" class="idref" href="#e1:695"><span class="id" title="binder">e1</span></a> <a id="3f44c126394f3b5a200771457def63c7" class="idref" href="#3f44c126394f3b5a200771457def63c7"><span class="id" title="binder">σ1</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#head_step_pred"><span class="id" title="definition">head_step_pred</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:695"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#3f44c126394f3b5a200771457def63c7"><span class="id" title="variable">σ1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="e2:697" class="idref" href="#e2:697"><span class="id" title="binder">e2</span></a> <a id="06fab5a211a8a32218e82349d973e0fd" class="idref" href="#06fab5a211a8a32218e82349d973e0fd"><span class="id" title="binder">σ2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step_rel"><span class="id" title="inductive">head_step_rel</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:695"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#3f44c126394f3b5a200771457def63c7"><span class="id" title="variable">σ1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e2:697"><span class="id" title="variable">e2</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#06fab5a211a8a32218e82349d973e0fd"><span class="id" title="variable">σ2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">Hdet</span> | <span class="id" title="var">Hdet</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hdet</span>; <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">by</span> <span class="id" title="tactic">econstructor</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">all</span> : <span class="id" title="tactic">apply</span> 0%<span class="id" title="var">fin</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> (?&amp;?&amp; <span class="id" title="var">H</span>). <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">simplify_eq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">try</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">left</span>; <span class="id" title="tactic">econstructor</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">try</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">right</span>; <span class="id" title="tactic">econstructor</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.metatheory.html#RandTapeOtherPSP"><span class="id" title="constructor">RandTapeOtherPSP</span></a>; [|<span class="id" title="var">done</span>|<span class="id" title="var">done</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="not_head_step_pred_dzero" class="idref" href="#not_head_step_pred_dzero"><span class="id" title="lemma">not_head_step_pred_dzero</span></a> <a id="e1:699" class="idref" href="#e1:699"><span class="id" title="binder">e1</span></a> <a id="96f51042c4000a9450c8a2bb99a7b598" class="idref" href="#96f51042c4000a9450c8a2bb99a7b598"><span class="id" title="binder">σ1</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#head_step_pred"><span class="id" title="definition">head_step_pred</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:699"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#96f51042c4000a9450c8a2bb99a7b598"><span class="id" title="variable">σ1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">↔</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:699"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#96f51042c4000a9450c8a2bb99a7b598"><span class="id" title="variable">σ1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob.distribution.html#dzero"><span class="id" title="definition">dzero</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">Hnstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.distribution.html#dzero_ext"><span class="id" title="lemma">dzero_ext</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> (<span class="id" title="var">e2</span> &amp; σ2).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rlt_le_dec"><span class="id" title="lemma">Rlt_le_dec</span></a> 0 (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> <span class="id" title="var">e1</span> σ1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">e2</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> σ2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">H1</span>%<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rgt_lt"><span class="id" title="lemma">Rgt_lt</span></a> | <span class="id" title="var">H2</span>]; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="clutch.prob.distribution.html#pmf_pos"><span class="id" title="projection">pmf_pos</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> <span class="id" title="var">e1</span> σ1) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">e2</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> σ2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>; <span class="id" title="var">lra</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step_support_equiv_rel"><span class="id" title="lemma">head_step_support_equiv_rel</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="e2:701" class="idref" href="#e2:701"><span class="id" title="binder"><span id="e2:703" class="id">e2</span></span></a> <a id="d744aa882b4d74b67b490a12d626bd2f" class="idref" href="#d744aa882b4d74b67b490a12d626bd2f"><span class="id" title="binder"><span id="c8a5b7ae63c67ea7a4a8d6ea7e9ea781" class="id">σ2</span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step_rel"><span class="id" title="inductive">head_step_rel</span></a> <span class="id" title="var">e1</span> σ1 <a class="idref" href="clutch.prob_lang.metatheory.html#e2:701"><span class="id" title="variable">e2</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#d744aa882b4d74b67b490a12d626bd2f"><span class="id" title="variable">σ2</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hex</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob_lang.metatheory.html#head_step_pred_ex_rel"><span class="id" title="lemma">head_step_pred_ex_rel</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hex</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hhead</span> (<span class="id" title="var">e2</span> &amp; σ2 &amp; <span class="id" title="var">Hstep</span>)%<a class="idref" href="clutch.prob_lang.metatheory.html#head_step_pred_ex_rel"><span class="id" title="lemma">head_step_pred_ex_rel</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step_support_equiv_rel"><span class="id" title="lemma">head_step_support_equiv_rel</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> <span class="id" title="var">e1</span> σ1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">e2</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> σ2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0); [|<span class="id" title="var">lra</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hhead</span> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="det_or_prob_or_dzero" class="idref" href="#det_or_prob_or_dzero"><span class="id" title="lemma">det_or_prob_or_dzero</span></a> <a id="e1:705" class="idref" href="#e1:705"><span class="id" title="binder">e1</span></a> <a id="3391780bc4e4eadd464d0695d92aa43a" class="idref" href="#3391780bc4e4eadd464d0695d92aa43a"><span class="id" title="binder">σ1</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_pred"><span class="id" title="inductive">det_head_step_pred</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:705"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#3391780bc4e4eadd464d0695d92aa43a"><span class="id" title="variable">σ1</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">∨</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#prob_head_step_pred"><span class="id" title="inductive">prob_head_step_pred</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:705"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#3391780bc4e4eadd464d0695d92aa43a"><span class="id" title="variable">σ1</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">∨</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:705"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#3391780bc4e4eadd464d0695d92aa43a"><span class="id" title="variable">σ1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob.distribution.html#dzero"><span class="id" title="definition">dzero</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rlt_le_dec"><span class="id" title="lemma">Rlt_le_dec</span></a> 0 (<a class="idref" href="clutch.prob.countable_sum.html#SeriesC"><span class="id" title="definition">SeriesC</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> <span class="id" title="var">e1</span> σ1))) <span class="id" title="keyword">as</span> [<span class="id" title="var">H1</span>%<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rlt_gt"><span class="id" title="lemma">Rlt_gt</span></a> | [<span class="id" title="var">HZ</span> | <span class="id" title="var">HZ</span>]].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="clutch.prob.countable_sum.html#SeriesC_gtz_ex"><span class="id" title="lemma">SeriesC_gtz_ex</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> <span class="id" title="var">e1</span> σ1) (<a class="idref" href="clutch.prob.distribution.html#pmf_pos"><span class="id" title="projection">pmf_pos</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> <span class="id" title="var">e1</span> σ1)) <span class="id" title="var">H1</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">e2</span> σ2] <span class="id" title="var">H</span>ρ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step_support_equiv_rel"><span class="id" title="lemma">head_step_support_equiv_rel</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> σ1 σ2) <span class="id" title="keyword">as</span> [<span class="id" title="var">H3</span> <span class="id" title="var">H4</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H3</span> <span class="id" title="var">H</span>ρ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="clutch.prob_lang.metatheory.html#head_step_pred"><span class="id" title="definition">head_step_pred</span></a> <span class="id" title="var">e1</span> σ1) <span class="id" title="keyword">as</span> []; [|<span class="id" title="tactic">auto</span>|<span class="id" title="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob_lang.metatheory.html#head_step_pred_ex_rel"><span class="id" title="lemma">head_step_pred_ex_rel</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="clutch.prob.distribution.html#pmf_SeriesC_ge_0"><span class="id" title="lemma">pmf_SeriesC_ge_0</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> <span class="id" title="var">e1</span> σ1))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> ?%<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rle_not_lt"><span class="id" title="lemma">Rle_not_lt</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.distribution.html#SeriesC_zero_dzero"><span class="id" title="lemma">SeriesC_zero_dzero</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HZ</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="head_step_dzero_upd_tapes" class="idref" href="#head_step_dzero_upd_tapes"><span class="id" title="lemma">head_step_dzero_upd_tapes</span></a> <a id="d997d0d21322254f3884655c1dd9f823" class="idref" href="#d997d0d21322254f3884655c1dd9f823"><span class="id" title="binder">α</span></a> <a id="e:708" class="idref" href="#e:708"><span class="id" title="binder">e</span></a> <a id="50907173111813ddac2657b9e57994e7" class="idref" href="#50907173111813ddac2657b9e57994e7"><span class="id" title="binder">σ</span></a> <a id="N:710" class="idref" href="#N:710"><span class="id" title="binder">N</span></a> <a id="zs:711" class="idref" href="#zs:711"><span class="id" title="binder">zs</span></a> <a id="z:712" class="idref" href="#z:712"><span class="id" title="binder">z</span></a>  :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#d997d0d21322254f3884655c1dd9f823"><span class="id" title="variable">α</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#50907173111813ddac2657b9e57994e7"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:708"><span class="id" title="variable">e</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#50907173111813ddac2657b9e57994e7"><span class="id" title="variable">σ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob.distribution.html#dzero"><span class="id" title="definition">dzero</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e:708"><span class="id" title="variable">e</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#d997d0d21322254f3884655c1dd9f823"><span class="id" title="variable">α</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:710"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#zs:711"><span class="id" title="variable">zs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:712"><span class="id" title="variable">z</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tape"><span class="id" title="definition">tape</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#50907173111813ddac2657b9e57994e7"><span class="id" title="variable">σ</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob.distribution.html#dzero"><span class="id" title="definition">dzero</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hdom</span> <span class="id" title="var">Hz</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">case_match</span>; <span class="id" title="var">done</span> || <span class="id" title="var">inv_dzero</span>; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;<span class="inlinecode"><span class="id" title="var">simplify_map_eq</span></span>&nbsp;should&nbsp;solve&nbsp;this?&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">α</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">l1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#not_elem_of_dom_2"><span class="id" title="lemma">not_elem_of_dom_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert_ne"><span class="id" title="lemma">lookup_insert_ne</span></a> // <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H5</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">α</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">l1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#not_elem_of_dom_2"><span class="id" title="lemma">not_elem_of_dom_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert_ne"><span class="id" title="lemma">lookup_insert_ne</span></a> // <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H5</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">α</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">l1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#not_elem_of_dom_2"><span class="id" title="lemma">not_elem_of_dom_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert_ne"><span class="id" title="lemma">lookup_insert_ne</span></a> // <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H5</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="var">done</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="det_head_step_upd_tapes" class="idref" href="#det_head_step_upd_tapes"><span class="id" title="lemma">det_head_step_upd_tapes</span></a> <a id="N:713" class="idref" href="#N:713"><span class="id" title="binder">N</span></a> <a id="e1:714" class="idref" href="#e1:714"><span class="id" title="binder">e1</span></a> <a id="28272b50af0c87c716a3e4f5604713f4" class="idref" href="#28272b50af0c87c716a3e4f5604713f4"><span class="id" title="binder">σ1</span></a> <a id="e2:716" class="idref" href="#e2:716"><span class="id" title="binder">e2</span></a> <a id="88b3fc3b817863eba491d0cf6ca34f6b" class="idref" href="#88b3fc3b817863eba491d0cf6ca34f6b"><span class="id" title="binder">σ2</span></a> <a id="fe2cc6b5cc996cc0e1aa6f3006631e9f" class="idref" href="#fe2cc6b5cc996cc0e1aa6f3006631e9f"><span class="id" title="binder">α</span></a> <a id="z:719" class="idref" href="#z:719"><span class="id" title="binder">z</span></a> <a id="zs:720" class="idref" href="#zs:720"><span class="id" title="binder">zs</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_rel"><span class="id" title="inductive">det_head_step_rel</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e1:714"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#28272b50af0c87c716a3e4f5604713f4"><span class="id" title="variable">σ1</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#e2:716"><span class="id" title="variable">e2</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#88b3fc3b817863eba491d0cf6ca34f6b"><span class="id" title="variable">σ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#28272b50af0c87c716a3e4f5604713f4"><span class="id" title="variable">σ1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#fe2cc6b5cc996cc0e1aa6f3006631e9f"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:713"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#zs:720"><span class="id" title="variable">zs</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_rel"><span class="id" title="inductive">det_head_step_rel</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#e1:714"><span class="id" title="variable">e1</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#fe2cc6b5cc996cc0e1aa6f3006631e9f"><span class="id" title="variable">α</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:713"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#zs:720"><span class="id" title="variable">zs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:719"><span class="id" title="variable">z</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#28272b50af0c87c716a3e4f5604713f4"><span class="id" title="variable">σ1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#e2:716"><span class="id" title="variable">e2</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#fe2cc6b5cc996cc0e1aa6f3006631e9f"><span class="id" title="variable">α</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:713"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#zs:720"><span class="id" title="variable">zs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:719"><span class="id" title="variable">z</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#88b3fc3b817863eba491d0cf6ca34f6b"><span class="id" title="variable">σ2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">try</span> <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Unsolved&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes_heap"><span class="id" title="lemma">state_upd_tapes_heap</span></a>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="upd_tape_some" class="idref" href="#upd_tape_some"><span class="id" title="lemma">upd_tape_some</span></a> <a id="b775b9594782e000dd82456a049020d9" class="idref" href="#b775b9594782e000dd82456a049020d9"><span class="id" title="binder">σ</span></a> <a id="ca31dad1207f66121032d7200fd8a7a5" class="idref" href="#ca31dad1207f66121032d7200fd8a7a5"><span class="id" title="binder">α</span></a> <a id="N:723" class="idref" href="#N:723"><span class="id" title="binder">N</span></a> <a id="n:724" class="idref" href="#n:724"><span class="id" title="binder">n</span></a> <a id="ns:725" class="idref" href="#ns:725"><span class="id" title="binder">ns</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b775b9594782e000dd82456a049020d9"><span class="id" title="variable">σ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ca31dad1207f66121032d7200fd8a7a5"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:723"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ns:725"><span class="id" title="variable">ns</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#ca31dad1207f66121032d7200fd8a7a5"><span class="id" title="variable">α</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:723"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ns:725"><span class="id" title="variable">ns</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:724"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b775b9594782e000dd82456a049020d9"><span class="id" title="variable">σ</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ca31dad1207f66121032d7200fd8a7a5"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:723"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ns:725"><span class="id" title="variable">ns</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#n:724"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> /=. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert"><span class="id" title="lemma">lookup_insert</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="upd_tape_some_trivial" class="idref" href="#upd_tape_some_trivial"><span class="id" title="lemma">upd_tape_some_trivial</span></a> <a id="7ecd37e6aefd134d5191a11938336d8c" class="idref" href="#7ecd37e6aefd134d5191a11938336d8c"><span class="id" title="binder">σ</span></a> <a id="6321820a890bbee134570f394c185f1c" class="idref" href="#6321820a890bbee134570f394c185f1c"><span class="id" title="binder">α</span></a> <a id="bs:728" class="idref" href="#bs:728"><span class="id" title="binder">bs</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#7ecd37e6aefd134d5191a11938336d8c"><span class="id" title="variable">σ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#6321820a890bbee134570f394c185f1c"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bs:728"><span class="id" title="variable">bs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#6321820a890bbee134570f394c185f1c"><span class="id" title="variable">α</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#7ecd37e6aefd134d5191a11938336d8c"><span class="id" title="variable">σ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#5a6ec76419c81272088828e5026fff95"><span class="id" title="notation">!!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#6321820a890bbee134570f394c185f1c"><span class="id" title="variable">α</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#7ecd37e6aefd134d5191a11938336d8c"><span class="id" title="variable">σ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#7ecd37e6aefd134d5191a11938336d8c"><span class="id" title="variable">σ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> σ. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_total_correct"><span class="id" title="lemma">lookup_total_correct</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#insert_id"><span class="id" title="lemma">insert_id</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="upd_diff_tape_comm" class="idref" href="#upd_diff_tape_comm"><span class="id" title="lemma">upd_diff_tape_comm</span></a> <a id="2a42a40a948598909944c9de5bd78e15" class="idref" href="#2a42a40a948598909944c9de5bd78e15"><span class="id" title="binder">σ</span></a> <a id="80e657312db1095340cb230840164da0" class="idref" href="#80e657312db1095340cb230840164da0"><span class="id" title="binder">α</span></a> <a id="0cb9447beda58941556709858e53f8f7" class="idref" href="#0cb9447beda58941556709858e53f8f7"><span class="id" title="binder">β</span></a> <a id="bs:732" class="idref" href="#bs:732"><span class="id" title="binder">bs</span></a> <a id="bs':733" class="idref" href="#bs':733"><span class="id" title="binder">bs'</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#80e657312db1095340cb230840164da0"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#0cb9447beda58941556709858e53f8f7"><span class="id" title="variable">β</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#0cb9447beda58941556709858e53f8f7"><span class="id" title="variable">β</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bs:732"><span class="id" title="variable">bs</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#80e657312db1095340cb230840164da0"><span class="id" title="variable">α</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bs':733"><span class="id" title="variable">bs'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#2a42a40a948598909944c9de5bd78e15"><span class="id" title="variable">σ</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#80e657312db1095340cb230840164da0"><span class="id" title="variable">α</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bs':733"><span class="id" title="variable">bs'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#0cb9447beda58941556709858e53f8f7"><span class="id" title="variable">β</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bs:732"><span class="id" title="variable">bs</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#2a42a40a948598909944c9de5bd78e15"><span class="id" title="variable">σ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> /=. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#insert_commute"><span class="id" title="lemma">insert_commute</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="upd_diff_tape_tot" class="idref" href="#upd_diff_tape_tot"><span class="id" title="lemma">upd_diff_tape_tot</span></a> <a id="5c3510c3cae7bebee3dcd4f1be5209e3" class="idref" href="#5c3510c3cae7bebee3dcd4f1be5209e3"><span class="id" title="binder">σ</span></a> <a id="b61ac412552034d33c6578cdbfada7ef" class="idref" href="#b61ac412552034d33c6578cdbfada7ef"><span class="id" title="binder">α</span></a> <a id="b303dec413c293a979ceb58cba2546e0" class="idref" href="#b303dec413c293a979ceb58cba2546e0"><span class="id" title="binder">β</span></a> <a id="bs:737" class="idref" href="#bs:737"><span class="id" title="binder">bs</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#b61ac412552034d33c6578cdbfada7ef"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b303dec413c293a979ceb58cba2546e0"><span class="id" title="variable">β</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#5c3510c3cae7bebee3dcd4f1be5209e3"><span class="id" title="variable">σ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#5a6ec76419c81272088828e5026fff95"><span class="id" title="notation">!!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b61ac412552034d33c6578cdbfada7ef"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#b303dec413c293a979ceb58cba2546e0"><span class="id" title="variable">β</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#bs:737"><span class="id" title="variable">bs</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#5c3510c3cae7bebee3dcd4f1be5209e3"><span class="id" title="variable">σ</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#5a6ec76419c81272088828e5026fff95"><span class="id" title="notation">!!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#b61ac412552034d33c6578cdbfada7ef"><span class="id" title="variable">α</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">symmetry</span> ; <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_total_insert_ne"><span class="id" title="lemma">lookup_total_insert_ne</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="upd_tape_twice" class="idref" href="#upd_tape_twice"><span class="id" title="lemma">upd_tape_twice</span></a> <a id="2ccd489046fbec639b99d295a03ea415" class="idref" href="#2ccd489046fbec639b99d295a03ea415"><span class="id" title="binder">σ</span></a> <a id="c3887bdac91f2d4948d30f603cc2b39a" class="idref" href="#c3887bdac91f2d4948d30f603cc2b39a"><span class="id" title="binder">β</span></a> <a id="bs:740" class="idref" href="#bs:740"><span class="id" title="binder">bs</span></a> <a id="bs':741" class="idref" href="#bs':741"><span class="id" title="binder">bs'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#c3887bdac91f2d4948d30f603cc2b39a"><span class="id" title="variable">β</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bs:740"><span class="id" title="variable">bs</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#c3887bdac91f2d4948d30f603cc2b39a"><span class="id" title="variable">β</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bs':741"><span class="id" title="variable">bs'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#2ccd489046fbec639b99d295a03ea415"><span class="id" title="variable">σ</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#c3887bdac91f2d4948d30f603cc2b39a"><span class="id" title="variable">β</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bs:740"><span class="id" title="variable">bs</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#2ccd489046fbec639b99d295a03ea415"><span class="id" title="variable">σ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#insert_insert"><span class="id" title="lemma">insert_insert</span></a> //. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="fresh_loc_upd_some" class="idref" href="#fresh_loc_upd_some"><span class="id" title="lemma">fresh_loc_upd_some</span></a> <a id="23399d6ff51b684e75c93600664b420e" class="idref" href="#23399d6ff51b684e75c93600664b420e"><span class="id" title="binder">σ</span></a> <a id="f72a7b323af4c77ee9dfc0525c030191" class="idref" href="#f72a7b323af4c77ee9dfc0525c030191"><span class="id" title="binder">α</span></a> <a id="bs:744" class="idref" href="#bs:744"><span class="id" title="binder">bs</span></a> <a id="bs':745" class="idref" href="#bs':745"><span class="id" title="binder">bs'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#23399d6ff51b684e75c93600664b420e"><span class="id" title="variable">σ</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#f72a7b323af4c77ee9dfc0525c030191"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bs:744"><span class="id" title="variable">bs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.locations.html#fresh_loc"><span class="id" title="definition">fresh_loc</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#23399d6ff51b684e75c93600664b420e"><span class="id" title="variable">σ</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.locations.html#fresh_loc"><span class="id" title="definition">fresh_loc</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#f72a7b323af4c77ee9dfc0525c030191"><span class="id" title="variable">α</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bs':745"><span class="id" title="variable">bs'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">σ)</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hα</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob_lang.locations.html#fresh_loc_eq_dom"><span class="id" title="lemma">fresh_loc_eq_dom</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_insert_lookup_L"><span class="id" title="lemma">dom_insert_lookup_L</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="elem_fresh_ne" class="idref" href="#elem_fresh_ne"><span class="id" title="lemma">elem_fresh_ne</span></a> {<a id="V:746" class="idref" href="#V:746"><span class="id" title="binder">V</span></a>} (<a id="ls:747" class="idref" href="#ls:747"><span class="id" title="binder">ls</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gmap"><span class="id" title="record">gmap</span></a> <a class="idref" href="clutch.prob_lang.locations.html#loc"><span class="id" title="record">loc</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#V:746"><span class="id" title="variable">V</span></a>) <a id="k:748" class="idref" href="#k:748"><span class="id" title="binder">k</span></a> <a id="v:749" class="idref" href="#v:749"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#ls:747"><span class="id" title="variable">ls</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#k:748"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#v:749"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob_lang.locations.html#fresh_loc"><span class="id" title="definition">fresh_loc</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#ls:747"><span class="id" title="variable">ls</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#k:748"><span class="id" title="variable">k</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">assert</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#is_Some"><span class="id" title="definition">is_Some</span></a> (<span class="id" title="var">ls</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">k</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hk</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="clutch.prob_lang.locations.html#fresh_loc_is_fresh"><span class="id" title="lemma">fresh_loc_is_fresh</span></a> <span class="id" title="var">ls</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom"><span class="id" title="method">elem_of_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hk</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">set_solver</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="fresh_loc_upd_swap" class="idref" href="#fresh_loc_upd_swap"><span class="id" title="lemma">fresh_loc_upd_swap</span></a> <a id="6dd24caf4092483758fde6b22fcd23a4" class="idref" href="#6dd24caf4092483758fde6b22fcd23a4"><span class="id" title="binder">σ</span></a> <a id="06886258fe22aacbd1fa42d2afde72c8" class="idref" href="#06886258fe22aacbd1fa42d2afde72c8"><span class="id" title="binder">α</span></a> <a id="bs:752" class="idref" href="#bs:752"><span class="id" title="binder">bs</span></a> <a id="bs':753" class="idref" href="#bs':753"><span class="id" title="binder">bs'</span></a> <a id="bs'':754" class="idref" href="#bs'':754"><span class="id" title="binder">bs''</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#6dd24caf4092483758fde6b22fcd23a4"><span class="id" title="variable">σ</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#06886258fe22aacbd1fa42d2afde72c8"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bs:752"><span class="id" title="variable">bs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.locations.html#fresh_loc"><span class="id" title="definition">fresh_loc</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#6dd24caf4092483758fde6b22fcd23a4"><span class="id" title="variable">σ</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#bs':753"><span class="id" title="variable">bs'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#06886258fe22aacbd1fa42d2afde72c8"><span class="id" title="variable">α</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#bs'':754"><span class="id" title="variable">bs''</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#6dd24caf4092483758fde6b22fcd23a4"><span class="id" title="variable">σ</span></a>)<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#06886258fe22aacbd1fa42d2afde72c8"><span class="id" title="variable">α</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#bs'':754"><span class="id" title="variable">bs''</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.locations.html#fresh_loc"><span class="id" title="definition">fresh_loc</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#6dd24caf4092483758fde6b22fcd23a4"><span class="id" title="variable">σ</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#bs':753"><span class="id" title="variable">bs'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#6dd24caf4092483758fde6b22fcd23a4"><span class="id" title="variable">σ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob_lang.metatheory.html#elem_fresh_ne"><span class="id" title="lemma">elem_fresh_ne</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#insert_commute"><span class="id" title="lemma">insert_commute</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="fresh_loc_lookup" class="idref" href="#fresh_loc_lookup"><span class="id" title="lemma">fresh_loc_lookup</span></a> <a id="804b118879271baf542a9acc55b10321" class="idref" href="#804b118879271baf542a9acc55b10321"><span class="id" title="binder">σ</span></a> <a id="0330ab353bfe4f40921eb60b7fd07eef" class="idref" href="#0330ab353bfe4f40921eb60b7fd07eef"><span class="id" title="binder">α</span></a> <a id="bs:757" class="idref" href="#bs:757"><span class="id" title="binder">bs</span></a> <a id="bs':758" class="idref" href="#bs':758"><span class="id" title="binder">bs'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#804b118879271baf542a9acc55b10321"><span class="id" title="variable">σ</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#0330ab353bfe4f40921eb60b7fd07eef"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bs:757"><span class="id" title="variable">bs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="clutch.prob_lang.locations.html#fresh_loc"><span class="id" title="definition">fresh_loc</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#804b118879271baf542a9acc55b10321"><span class="id" title="variable">σ</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#bs':758"><span class="id" title="variable">bs'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#804b118879271baf542a9acc55b10321"><span class="id" title="variable">σ</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#0330ab353bfe4f40921eb60b7fd07eef"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#bs:757"><span class="id" title="variable">bs</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="clutch.prob_lang.metatheory.html#elem_fresh_ne"><span class="id" title="lemma">elem_fresh_ne</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert_ne"><span class="id" title="lemma">lookup_insert_ne</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="prim_step_empty_tape" class="idref" href="#prim_step_empty_tape"><span class="id" title="lemma">prim_step_empty_tape</span></a> <a id="176fd8fd3468a100f08478e5543d9c15" class="idref" href="#176fd8fd3468a100f08478e5543d9c15"><span class="id" title="binder">σ</span></a> <a id="d3a027c29d240faae07f254d48ced54b" class="idref" href="#d3a027c29d240faae07f254d48ced54b"><span class="id" title="binder">α</span></a> (<a id="z:761" class="idref" href="#z:761"><span class="id" title="binder">z</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) <a id="K:762" class="idref" href="#K:762"><span class="id" title="binder">K</span></a> <a id="N:763" class="idref" href="#N:763"><span class="id" title="binder">N</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#176fd8fd3468a100f08478e5543d9c15"><span class="id" title="variable">σ</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#d3a027c29d240faae07f254d48ced54b"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#N:763"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.common.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#K:762"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">rand</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#d3a027c29d240faae07f254d48ced54b"><span class="id" title="variable">α</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:761"><span class="id" title="variable">z</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#176fd8fd3468a100f08478e5543d9c15"><span class="id" title="variable">σ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.common.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> (<a class="idref" href="clutch.common.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#K:762"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.metatheory.html#z:761"><span class="id" title="variable">z</span></a>)) <a class="idref" href="clutch.prob_lang.metatheory.html#176fd8fd3468a100f08478e5543d9c15"><span class="id" title="variable">σ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="clutch.common.language.html#fill_dmap"><span class="id" title="method">fill_dmap</span></a>; [|<span class="id" title="var">done</span>|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.distribution.html#distr_ext"><span class="id" title="lemma">distr_ext</span></a>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">e</span> <span class="id" title="var">s</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> !<a class="idref" href="clutch.common.ectx_language.html#head_prim_step_eq"><span class="id" title="lemma">head_prim_step_eq</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
</div>

<div class="doc">
type classes dont work? 
</div>
<div class="code">
&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <span class="id" title="var">z</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><span class="id" title="var">N</span>)) <span class="id" title="keyword">as</span> [&lt;-|?] <span class="id" title="var">eqn</span>:<span class="id" title="var">Heqn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eexists</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> σ<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step_support_equiv_rel"><span class="id" title="lemma">head_step_support_equiv_rel</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.tactics.html#head_step_support_eq"><span class="id" title="lemma">head_step_support_eq</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_true_2"><span class="id" title="lemma">bool_decide_eq_true_2</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.distribution.html#dmap_unif_nonzero"><span class="id" title="lemma">dmap_unif_nonzero</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ???. <span class="id" title="var">simplify_eq</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rinv_pos"><span class="id" title="lemma">Rinv_pos</span></a>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="clutch.prelude.Reals_ext.html#pos_INR_S"><span class="id" title="lemma">pos_INR_S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <span class="id" title="var">z</span>). <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="var">case_bool_decide</span> <span class="id" title="keyword">as</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.distribution.html#dmap_unif_nonzero"><span class="id" title="lemma">dmap_unif_nonzero</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ???. <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rinv_pos"><span class="id" title="lemma">Rinv_pos</span></a>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="clutch.prelude.Reals_ext.html#pos_INR_S"><span class="id" title="lemma">pos_INR_S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <span class="id" title="var">z</span>). <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">eexists</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> σ<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step_support_equiv_rel"><span class="id" title="lemma">head_step_support_equiv_rel</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.tactics.html#head_step_support_eq"><span class="id" title="lemma">head_step_support_eq</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.distribution.html#dmap_unif_nonzero"><span class="id" title="lemma">dmap_unif_nonzero</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ???. <span class="id" title="var">simplify_eq</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rinv_pos"><span class="id" title="lemma">Rinv_pos</span></a>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="clutch.prelude.Reals_ext.html#pos_INR_S"><span class="id" title="lemma">pos_INR_S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <span class="id" title="var">z</span>). <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;} <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">exact</span> (0%<span class="id" title="var">fin</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/coq-community/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
