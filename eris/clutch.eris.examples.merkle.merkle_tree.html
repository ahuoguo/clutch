<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resources/config.js"></script>
<script type="text/javascript" src="resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/logsem/clutch">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">clutch.eris.examples.merkle.merkle_tree</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch.eris</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="clutch.eris.eris.html#"><span class="id" title="library">eris</span></a> <a class="idref" href="clutch.eris.lib.map.html#"><span class="id" title="library">lib.map</span></a> <a class="idref" href="clutch.eris.examples.hash.html#"><span class="id" title="library">hash</span></a> <a class="idref" href="clutch.eris.lib.list.html#"><span class="id" title="library">lib.list</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="http://coquelicot.saclay.inria.fr/html//Coquelicot.Hierarchy.html#"><span class="id" title="module">Hierarchy</span></a>.<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Default</span> <span class="id" title="keyword">Proof</span> <span class="id" title="var">Using</span> "Type*".<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">nat</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="merkle_tree" class="idref" href="#merkle_tree"><span class="id" title="section">merkle_tree</span></a>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;val_bit_size&nbsp;is&nbsp;a&nbsp;positive&nbsp;integer,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;referring&nbsp;to&nbsp;the&nbsp;bit&nbsp;size&nbsp;of&nbsp;the&nbsp;return&nbsp;value&nbsp;of&nbsp;the&nbsp;hash&nbsp;function<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Therefore&nbsp;all&nbsp;hashes&nbsp;are&nbsp;smaller&nbsp;than&nbsp;2&nbsp;^&nbsp;val_bit_size<br/>
&nbsp;&nbsp;&nbsp;&nbsp;val_bit_size_for_hash&nbsp;is&nbsp;one&nbsp;smaller&nbsp;than&nbsp;2^val_bit_size&nbsp;since&nbsp;the&nbsp;spec&nbsp;for&nbsp;hash<br/>
&nbsp;&nbsp;&nbsp;&nbsp;adds&nbsp;one&nbsp;to&nbsp;that&nbsp;value&nbsp;implicitly&nbsp;(to&nbsp;ensure&nbsp;positive&nbsp;codomain&nbsp;size)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Leaf&nbsp;bit&nbsp;size&nbsp;is&nbsp;fixed&nbsp;to&nbsp;be&nbsp;twice&nbsp;of&nbsp;val_bit_size.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;each&nbsp;branch,&nbsp;the&nbsp;concatentation&nbsp;of&nbsp;the&nbsp;left&nbsp;and&nbsp;right&nbsp;hash&nbsp;are&nbsp;provided&nbsp;as&nbsp;input.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;In&nbsp;other&nbsp;words,&nbsp;input&nbsp;bit&nbsp;size&nbsp;=&nbsp;2&nbsp;*&nbsp;2&nbsp;^&nbsp;val_bit_size&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;output&nbsp;bit&nbsp;size&nbsp;=&nbsp;2&nbsp;^&nbsp;val_bit_size<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="erisGS0:2" class="idref" href="#erisGS0:2"><span class="id" title="binder">!</span></a><a id="erisGS0:2" class="idref" href="#erisGS0:2"><span class="id" title="binder">erisGS</span></a> <a id="0101b9beac487b383a5ba2a8f6922788" class="idref" href="#0101b9beac487b383a5ba2a8f6922788"><span class="id" title="binder"><span id="erisGS0:2" class="id">Î£</span></span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variables</span> <a id="merkle_tree.height" class="idref" href="#merkle_tree.height"><span class="id" title="variable">height</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variables</span> <a id="merkle_tree.val_bit_size'" class="idref" href="#merkle_tree.val_bit_size'"><span class="id" title="variable">val_bit_size'</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variables</span> <a id="merkle_tree.max_hash_size" class="idref" href="#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a id="merkle_tree.max_hash_size_pos" class="idref" href="#merkle_tree.max_hash_size_pos"><span class="id" title="variable">max_hash_size_pos</span></a>: (0<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a>)%<span class="id" title="var">nat</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="val_bit_size" class="idref" href="#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.val_bit_size'"><span class="id" title="variable">val_bit_size'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="val_size_for_hash" class="idref" href="#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">(</span></a>2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">)-</span></a>1.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Variable&nbsp;(Hineq:&nbsp;(max_hash_size&nbsp;&lt;=&nbsp;val_size_for_hash)*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="leaf_bit_size" class="idref" href="#leaf_bit_size"><span class="id" title="definition">leaf_bit_size</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> := 2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Definition&nbsp;identifier&nbsp;:&nbsp;nat&nbsp;:=&nbsp;2^leaf_bit_size.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="num_of_leafs" class="idref" href="#num_of_leafs"><span class="id" title="definition">num_of_leafs</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> := 2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.height"><span class="id" title="variable">height</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="merkle_tree" class="idref" href="#merkle_tree"><span class="id" title="definition, inductive"><span id="merkle_tree_rect" class="id"><span id="merkle_tree_ind" class="id"><span id="merkle_tree_rec" class="id"><span id="merkle_tree_sind" class="id">merkle_tree</span></span></span></span></span></a> :=<br/>
&nbsp;&nbsp;| <a id="Leaf" class="idref" href="#Leaf"><span class="id" title="constructor">Leaf</span></a> (<a id="hash_value:9" class="idref" href="#hash_value:9"><span class="id" title="binder">hash_value</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="leaf_value:10" class="idref" href="#leaf_value:10"><span class="id" title="binder">leaf_value</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;| <a id="Branch" class="idref" href="#Branch"><span class="id" title="constructor">Branch</span></a> (<a id="hash_value:11" class="idref" href="#hash_value:11"><span class="id" title="binder">hash_value</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="t1:12" class="idref" href="#t1:12"><span class="id" title="binder">t1</span></a> <a id="t2:13" class="idref" href="#t2:13"><span class="id" title="binder">t2</span></a>:<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree:7"><span class="id" title="inductive">merkle_tree</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="root_hash_value" class="idref" href="#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> (<a id="t:14" class="idref" href="#t:14"><span class="id" title="binder">t</span></a>: <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree"><span class="id" title="inductive">merkle_tree</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#t:14"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">h</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">h</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#Branch"><span class="id" title="constructor">Branch</span></a> <span class="id" title="var">h</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">h</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="tree_valid" class="idref" href="#tree_valid"><span class="id" title="definition, inductive"><span id="tree_valid_ind" class="id"><span id="tree_valid_sind" class="id">tree_valid</span></span></span></a>: <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree"><span class="id" title="inductive">merkle_tree</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gmap"><span class="id" title="record">gmap</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;|<a id="tree_valid_lf" class="idref" href="#tree_valid_lf"><span class="id" title="constructor">tree_valid_lf</span></a> (<a id="h:18" class="idref" href="#h:18"><span class="id" title="binder">h</span></a> <a id="l:19" class="idref" href="#l:19"><span class="id" title="binder">l</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="m:20" class="idref" href="#m:20"><span class="id" title="binder">m</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:18"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> 2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#l:19"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> 2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#leaf_bit_size"><span class="id" title="definition">leaf_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:20"><span class="id" title="variable">m</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#l:19"><span class="id" title="variable">l</span></a>%<span class="id" title="var">nat</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:18"><span class="id" title="variable">h</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid:16"><span class="id" title="inductive">tree_valid</span></a> 0 (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#Leaf"><span class="id" title="constructor">Leaf</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:18"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#l:19"><span class="id" title="variable">l</span></a>) <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:20"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;|<a id="tree_valid_br" class="idref" href="#tree_valid_br"><span class="id" title="constructor">tree_valid_br</span></a> <a id="n:21" class="idref" href="#n:21"><span class="id" title="binder">n</span></a> (<a id="h:22" class="idref" href="#h:22"><span class="id" title="binder">h</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="l:23" class="idref" href="#l:23"><span class="id" title="binder">l</span></a> <a id="r:24" class="idref" href="#r:24"><span class="id" title="binder">r</span></a> <a id="m:25" class="idref" href="#m:25"><span class="id" title="binder">m</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid:16"><span class="id" title="inductive">tree_valid</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#n:21"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#l:23"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:25"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid:16"><span class="id" title="inductive">tree_valid</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#n:21"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#r:24"><span class="id" title="variable">r</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:25"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:22"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> 2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:25"><span class="id" title="variable">m</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a>(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#l:23"><span class="id" title="variable">l</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">)*</span></a>2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#r:24"><span class="id" title="variable">r</span></a>)%<span class="id" title="var">nat</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:22"><span class="id" title="variable">h</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid:16"><span class="id" title="inductive">tree_valid</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#n:21"><span class="id" title="variable">n</span></a>) (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#Branch"><span class="id" title="constructor">Branch</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:22"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#l:23"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#r:24"><span class="id" title="variable">r</span></a>) <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:25"><span class="id" title="variable">m</span></a>.<br/>

<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="tree_leaf_value_match" class="idref" href="#tree_leaf_value_match"><span class="id" title="definition, inductive"><span id="tree_leaf_value_match_ind" class="id"><span id="tree_leaf_value_match_sind" class="id">tree_leaf_value_match</span></span></span></a>: <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree"><span class="id" title="inductive">merkle_tree</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>:=<br/>
&nbsp;&nbsp;| <a id="tree_value_match_lf" class="idref" href="#tree_value_match_lf"><span class="id" title="constructor">tree_value_match_lf</span></a> <a id="h:28" class="idref" href="#h:28"><span class="id" title="binder">h</span></a> <a id="lf:29" class="idref" href="#lf:29"><span class="id" title="binder">lf</span></a>: <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_leaf_value_match:26"><span class="id" title="inductive">tree_leaf_value_match</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#Leaf"><span class="id" title="constructor">Leaf</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:28"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#lf:29"><span class="id" title="variable">lf</span></a>) <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#lf:29"><span class="id" title="variable">lf</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;| <a id="tree_leaf_value_match_left" class="idref" href="#tree_leaf_value_match_left"><span class="id" title="constructor">tree_leaf_value_match_left</span></a> <a id="h:30" class="idref" href="#h:30"><span class="id" title="binder">h</span></a> <a id="l:31" class="idref" href="#l:31"><span class="id" title="binder">l</span></a> <a id="r:32" class="idref" href="#r:32"><span class="id" title="binder">r</span></a> <a id="xs:33" class="idref" href="#xs:33"><span class="id" title="binder">xs</span></a> <a id="v:34" class="idref" href="#v:34"><span class="id" title="binder">v</span></a> <a id="rhash:35" class="idref" href="#rhash:35"><span class="id" title="binder">rhash</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_leaf_value_match:26"><span class="id" title="inductive">tree_leaf_value_match</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#l:31"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v:34"><span class="id" title="variable">v</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#xs:33"><span class="id" title="variable">xs</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_leaf_value_match:26"><span class="id" title="inductive">tree_leaf_value_match</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#Branch"><span class="id" title="constructor">Branch</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:30"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#l:31"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#r:32"><span class="id" title="variable">r</span></a>) <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v:34"><span class="id" title="variable">v</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#rhash:35"><span class="id" title="variable">rhash</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#xs:33"><span class="id" title="variable">xs</span></a>)<br/>
&nbsp;&nbsp;| <a id="tree_value_match_right" class="idref" href="#tree_value_match_right"><span class="id" title="constructor">tree_value_match_right</span></a> <a id="h:36" class="idref" href="#h:36"><span class="id" title="binder">h</span></a> <a id="l:37" class="idref" href="#l:37"><span class="id" title="binder">l</span></a> <a id="r:38" class="idref" href="#r:38"><span class="id" title="binder">r</span></a> <a id="xs:39" class="idref" href="#xs:39"><span class="id" title="binder">xs</span></a> <a id="v:40" class="idref" href="#v:40"><span class="id" title="binder">v</span></a> <a id="lhash:41" class="idref" href="#lhash:41"><span class="id" title="binder">lhash</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_leaf_value_match:26"><span class="id" title="inductive">tree_leaf_value_match</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#r:38"><span class="id" title="variable">r</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v:40"><span class="id" title="variable">v</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#xs:39"><span class="id" title="variable">xs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_leaf_value_match:26"><span class="id" title="inductive">tree_leaf_value_match</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#Branch"><span class="id" title="constructor">Branch</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:36"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#l:37"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#r:38"><span class="id" title="variable">r</span></a>) <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v:40"><span class="id" title="variable">v</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#lhash:41"><span class="id" title="variable">lhash</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#xs:39"><span class="id" title="variable">xs</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*This&nbsp;ensures&nbsp;all&nbsp;numbers&nbsp;in&nbsp;the&nbsp;proof&nbsp;are&nbsp;smaller&nbsp;than&nbsp;2^val_bit_size<br/>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;the&nbsp;numbers&nbsp;are&nbsp;larger&nbsp;or&nbsp;equal&nbsp;to&nbsp;2^val_bit_size<br/>
&nbsp;&nbsp;&nbsp;&nbsp;One&nbsp;knows&nbsp;immediately&nbsp;that&nbsp;the&nbsp;proof&nbsp;is&nbsp;invalid&nbsp;and&nbsp;should&nbsp;not&nbsp;be&nbsp;considered.<br/>
&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="possible_proof" class="idref" href="#possible_proof"><span class="id" title="definition, inductive"><span id="possible_proof_ind" class="id"><span id="possible_proof_sind" class="id">possible_proof</span></span></span></a>: <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree"><span class="id" title="inductive">merkle_tree</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>:=<br/>
&nbsp;&nbsp;| <a id="possible_proof_lf" class="idref" href="#possible_proof_lf"><span class="id" title="constructor">possible_proof_lf</span></a> <a id="h:44" class="idref" href="#h:44"><span class="id" title="binder">h</span></a> <a id="v:45" class="idref" href="#v:45"><span class="id" title="binder">v</span></a>: <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#possible_proof:42"><span class="id" title="inductive">possible_proof</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#Leaf"><span class="id" title="constructor">Leaf</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:44"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v:45"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <br/>
&nbsp;&nbsp;| <a id="possible_proof_br_left" class="idref" href="#possible_proof_br_left"><span class="id" title="constructor">possible_proof_br_left</span></a> <a id="h:46" class="idref" href="#h:46"><span class="id" title="binder">h</span></a> <a id="ltree:47" class="idref" href="#ltree:47"><span class="id" title="binder">ltree</span></a> <a id="rtree:48" class="idref" href="#rtree:48"><span class="id" title="binder">rtree</span></a> <a id="hash:49" class="idref" href="#hash:49"><span class="id" title="binder">hash</span></a> <a id="prooflist:50" class="idref" href="#prooflist:50"><span class="id" title="binder">prooflist</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#possible_proof:42"><span class="id" title="inductive">possible_proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#ltree:47"><span class="id" title="variable">ltree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#prooflist:50"><span class="id" title="variable">prooflist</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#hash:49"><span class="id" title="variable">hash</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> 2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#possible_proof:42"><span class="id" title="inductive">possible_proof</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#Branch"><span class="id" title="constructor">Branch</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:46"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#ltree:47"><span class="id" title="variable">ltree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#rtree:48"><span class="id" title="variable">rtree</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#hash:49"><span class="id" title="variable">hash</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#prooflist:50"><span class="id" title="variable">prooflist</span></a>)<br/>
&nbsp;&nbsp;| <a id="possible_proof_br_right" class="idref" href="#possible_proof_br_right"><span class="id" title="constructor">possible_proof_br_right</span></a> <a id="h:51" class="idref" href="#h:51"><span class="id" title="binder">h</span></a> <a id="ltree:52" class="idref" href="#ltree:52"><span class="id" title="binder">ltree</span></a> <a id="rtree:53" class="idref" href="#rtree:53"><span class="id" title="binder">rtree</span></a> <a id="hash:54" class="idref" href="#hash:54"><span class="id" title="binder">hash</span></a> <a id="prooflist:55" class="idref" href="#prooflist:55"><span class="id" title="binder">prooflist</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#possible_proof:42"><span class="id" title="inductive">possible_proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#rtree:53"><span class="id" title="variable">rtree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#prooflist:55"><span class="id" title="variable">prooflist</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#hash:54"><span class="id" title="variable">hash</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> 2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#possible_proof:42"><span class="id" title="inductive">possible_proof</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#Branch"><span class="id" title="constructor">Branch</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:51"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#ltree:52"><span class="id" title="variable">ltree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#rtree:53"><span class="id" title="variable">rtree</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#hash:54"><span class="id" title="variable">hash</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#prooflist:55"><span class="id" title="variable">prooflist</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="correct_proof" class="idref" href="#correct_proof"><span class="id" title="definition, inductive"><span id="correct_proof_ind" class="id"><span id="correct_proof_sind" class="id">correct_proof</span></span></span></a>: <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree"><span class="id" title="inductive">merkle_tree</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a id="correct_proof_lf" class="idref" href="#correct_proof_lf"><span class="id" title="constructor">correct_proof_lf</span></a> <a id="h:58" class="idref" href="#h:58"><span class="id" title="binder">h</span></a> <a id="l:59" class="idref" href="#l:59"><span class="id" title="binder">l</span></a>: <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#correct_proof:56"><span class="id" title="inductive">correct_proof</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#Leaf"><span class="id" title="constructor">Leaf</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:58"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#l:59"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;| <a id="correct_proof_left" class="idref" href="#correct_proof_left"><span class="id" title="constructor">correct_proof_left</span></a> <a id="ltree:60" class="idref" href="#ltree:60"><span class="id" title="binder">ltree</span></a> <a id="rtree:61" class="idref" href="#rtree:61"><span class="id" title="binder">rtree</span></a> <a id="h:62" class="idref" href="#h:62"><span class="id" title="binder">h</span></a> <a id="prooflist:63" class="idref" href="#prooflist:63"><span class="id" title="binder">prooflist</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#correct_proof:56"><span class="id" title="inductive">correct_proof</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#ltree:60"><span class="id" title="variable">ltree</span></a>) <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#prooflist:63"><span class="id" title="variable">prooflist</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#correct_proof:56"><span class="id" title="inductive">correct_proof</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#Branch"><span class="id" title="constructor">Branch</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:62"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#ltree:60"><span class="id" title="variable">ltree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#rtree:61"><span class="id" title="variable">rtree</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#rtree:61"><span class="id" title="variable">rtree</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#prooflist:63"><span class="id" title="variable">prooflist</span></a>)<br/>
&nbsp;&nbsp;| <a id="correct_proof_right" class="idref" href="#correct_proof_right"><span class="id" title="constructor">correct_proof_right</span></a> <a id="ltree:64" class="idref" href="#ltree:64"><span class="id" title="binder">ltree</span></a> <a id="rtree:65" class="idref" href="#rtree:65"><span class="id" title="binder">rtree</span></a> <a id="h:66" class="idref" href="#h:66"><span class="id" title="binder">h</span></a> <a id="prooflist:67" class="idref" href="#prooflist:67"><span class="id" title="binder">prooflist</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#correct_proof:56"><span class="id" title="inductive">correct_proof</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#rtree:65"><span class="id" title="variable">rtree</span></a>) <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#prooflist:67"><span class="id" title="variable">prooflist</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#correct_proof:56"><span class="id" title="inductive">correct_proof</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#Branch"><span class="id" title="constructor">Branch</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:66"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#ltree:64"><span class="id" title="variable">ltree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#rtree:65"><span class="id" title="variable">rtree</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#ltree:64"><span class="id" title="variable">ltree</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#prooflist:67"><span class="id" title="variable">prooflist</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="incorrect_proof" class="idref" href="#incorrect_proof"><span class="id" title="definition, inductive"><span id="incorrect_proof_ind" class="id"><span id="incorrect_proof_sind" class="id">incorrect_proof</span></span></span></a> : <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree"><span class="id" title="inductive">merkle_tree</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a id="incorrect_proof_base_left" class="idref" href="#incorrect_proof_base_left"><span class="id" title="constructor">incorrect_proof_base_left</span></a> <a id="ltree:70" class="idref" href="#ltree:70"><span class="id" title="binder">ltree</span></a> <a id="rtree:71" class="idref" href="#rtree:71"><span class="id" title="binder">rtree</span></a> <a id="h:72" class="idref" href="#h:72"><span class="id" title="binder">h</span></a> <a id="v:73" class="idref" href="#v:73"><span class="id" title="binder">v</span></a> <a id="prooflist:74" class="idref" href="#prooflist:74"><span class="id" title="binder">prooflist</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v:73"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">â </span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#rtree:71"><span class="id" title="variable">rtree</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#incorrect_proof:68"><span class="id" title="inductive">incorrect_proof</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#Branch"><span class="id" title="constructor">Branch</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:72"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#ltree:70"><span class="id" title="variable">ltree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#rtree:71"><span class="id" title="variable">rtree</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v:73"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#prooflist:74"><span class="id" title="variable">prooflist</span></a>)<br/>
&nbsp;&nbsp;| <a id="incorrect_proof_next_left" class="idref" href="#incorrect_proof_next_left"><span class="id" title="constructor">incorrect_proof_next_left</span></a> <a id="ltree:75" class="idref" href="#ltree:75"><span class="id" title="binder">ltree</span></a> <a id="rtree:76" class="idref" href="#rtree:76"><span class="id" title="binder">rtree</span></a> <a id="h:77" class="idref" href="#h:77"><span class="id" title="binder">h</span></a> <a id="prooflist:78" class="idref" href="#prooflist:78"><span class="id" title="binder">prooflist</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#incorrect_proof:68"><span class="id" title="inductive">incorrect_proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#ltree:75"><span class="id" title="variable">ltree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#prooflist:78"><span class="id" title="variable">prooflist</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#incorrect_proof:68"><span class="id" title="inductive">incorrect_proof</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#Branch"><span class="id" title="constructor">Branch</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:77"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#ltree:75"><span class="id" title="variable">ltree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#rtree:76"><span class="id" title="variable">rtree</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#rtree:76"><span class="id" title="variable">rtree</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#prooflist:78"><span class="id" title="variable">prooflist</span></a>)<br/>
&nbsp;&nbsp;| <a id="incorrect_proof_base_right" class="idref" href="#incorrect_proof_base_right"><span class="id" title="constructor">incorrect_proof_base_right</span></a> <a id="ltree:79" class="idref" href="#ltree:79"><span class="id" title="binder">ltree</span></a> <a id="rtree:80" class="idref" href="#rtree:80"><span class="id" title="binder">rtree</span></a> <a id="h:81" class="idref" href="#h:81"><span class="id" title="binder">h</span></a> <a id="v:82" class="idref" href="#v:82"><span class="id" title="binder">v</span></a> <a id="prooflist:83" class="idref" href="#prooflist:83"><span class="id" title="binder">prooflist</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v:82"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">â </span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#ltree:79"><span class="id" title="variable">ltree</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#incorrect_proof:68"><span class="id" title="inductive">incorrect_proof</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#Branch"><span class="id" title="constructor">Branch</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:81"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#ltree:79"><span class="id" title="variable">ltree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#rtree:80"><span class="id" title="variable">rtree</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v:82"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#prooflist:83"><span class="id" title="variable">prooflist</span></a>)<br/>
&nbsp;&nbsp;| <a id="incorrect_proof_next_right" class="idref" href="#incorrect_proof_next_right"><span class="id" title="constructor">incorrect_proof_next_right</span></a> <a id="ltree:84" class="idref" href="#ltree:84"><span class="id" title="binder">ltree</span></a> <a id="rtree:85" class="idref" href="#rtree:85"><span class="id" title="binder">rtree</span></a> <a id="h:86" class="idref" href="#h:86"><span class="id" title="binder">h</span></a> <a id="prooflist:87" class="idref" href="#prooflist:87"><span class="id" title="binder">prooflist</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#incorrect_proof:68"><span class="id" title="inductive">incorrect_proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#rtree:85"><span class="id" title="variable">rtree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#prooflist:87"><span class="id" title="variable">prooflist</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#incorrect_proof:68"><span class="id" title="inductive">incorrect_proof</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#Branch"><span class="id" title="constructor">Branch</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:86"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#ltree:84"><span class="id" title="variable">ltree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#rtree:85"><span class="id" title="variable">rtree</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#ltree:84"><span class="id" title="variable">ltree</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#prooflist:87"><span class="id" title="variable">prooflist</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="compute_hash_from_leaf" class="idref" href="#compute_hash_from_leaf"><span class="id" title="definition">compute_hash_from_leaf</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#b655cc6b0c09a3d45e15582d945b2696"><span class="id" title="notation">rec</span></a><a class="idref" href="clutch.prob_lang.notation.html#b655cc6b0c09a3d45e15582d945b2696"><span class="id" title="notation">:</span></a> "compute_hash_from_leaf" "lhmf" "lproof" "lleaf" <a class="idref" href="clutch.prob_lang.notation.html#b655cc6b0c09a3d45e15582d945b2696"><span class="id" title="notation">:=</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#61c6544ad8c6839d78e3128e501fa82d"><span class="id" title="notation">match</span></a><a class="idref" href="clutch.prob_lang.notation.html#61c6544ad8c6839d78e3128e501fa82d"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.eris.lib.list.html#list_head"><span class="id" title="definition">list_head</span></a> "lproof" <a class="idref" href="clutch.prob_lang.notation.html#61c6544ad8c6839d78e3128e501fa82d"><span class="id" title="notation">with</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#61c6544ad8c6839d78e3128e501fa82d"><span class="id" title="notation">|</span></a> <a class="idref" href="clutch.prob_lang.notation.html#61c6544ad8c6839d78e3128e501fa82d"><span class="id" title="notation">SOME</span></a> "head" <a class="idref" href="clutch.prob_lang.notation.html#61c6544ad8c6839d78e3128e501fa82d"><span class="id" title="notation">=&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "lproof'" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.eris.lib.list.html#list_tail"><span class="id" title="definition">list_tail</span></a> "lproof"  <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">(</span></a>"b"<a class="idref" href="clutch.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">,</span></a> "hash"<a class="idref" href="clutch.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">:=</span></a> "head" <a class="idref" href="clutch.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a><a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">:</span></a> "b"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> "lhmf"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.notation.html#da5221709ab13640970b110774ada169"><span class="id" title="notation">(</span></a>"compute_hash_from_leaf" "lhmf" "lproof'" "lleaf"<a class="idref" href="clutch.prob_lang.notation.html#da5221709ab13640970b110774ada169"><span class="id" title="notation">)*</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a>2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43"><span class="id" title="notation">^</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a><a class="idref" href="clutch.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"hash")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> "lhmf"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;("hash"<a class="idref" href="clutch.prob_lang.notation.html#da5221709ab13640970b110774ada169"><span class="id" title="notation">*</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a>2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43"><span class="id" title="notation">^</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a><a class="idref" href="clutch.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+(</span></a>"compute_hash_from_leaf" "lhmf" "lproof'" "lleaf"<a class="idref" href="clutch.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#61c6544ad8c6839d78e3128e501fa82d"><span class="id" title="notation">|</span></a> <a class="idref" href="clutch.prob_lang.notation.html#61c6544ad8c6839d78e3128e501fa82d"><span class="id" title="notation">NONE</span></a> <a class="idref" href="clutch.prob_lang.notation.html#61c6544ad8c6839d78e3128e501fa82d"><span class="id" title="notation">=&gt;</span></a> "lhmf" "lleaf"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#61c6544ad8c6839d78e3128e501fa82d"><span class="id" title="notation">end</span></a>.<br/>

<br/>
</div>

<div class="doc">
Lemmas 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="hash_bound_manipulation" class="idref" href="#hash_bound_manipulation"><span class="id" title="lemma">hash_bound_manipulation</span></a> <a id="finalhash:88" class="idref" href="#finalhash:88"><span class="id" title="binder">finalhash</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a>0 <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#c774e793dbcbf01728714195ba84726e"><span class="id" title="notation">â¤</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#finalhash:88"><span class="id" title="variable">finalhash</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#finalhash:88"><span class="id" title="variable">finalhash</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#c774e793dbcbf01728714195ba84726e"><span class="id" title="notation">â¤</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(0 <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#7425b9b794a139b7a7da28194f85b286"><span class="id" title="notation">â¤</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#finalhash:88"><span class="id" title="variable">finalhash</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#7425b9b794a139b7a7da28194f85b286"><span class="id" title="notation">&lt;</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a>)%<span class="id" title="var">Z</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> 2%<span class="id" title="var">Z</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> 2); <span class="id" title="var">last</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#Z2Nat.inj_pow"><span class="id" title="lemma">Z2Nat.inj_pow</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#inj_lt"><span class="id" title="definition">inj_lt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (0<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a>2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a>); <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tree_valid_superset" class="idref" href="#tree_valid_superset"><span class="id" title="lemma">tree_valid_superset</span></a> <a id="n:89" class="idref" href="#n:89"><span class="id" title="binder">n</span></a> <a id="m:90" class="idref" href="#m:90"><span class="id" title="binder">m</span></a> <a id="m':91" class="idref" href="#m':91"><span class="id" title="binder">m'</span></a> <a id="tree:92" class="idref" href="#tree:92"><span class="id" title="binder">tree</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid"><span class="id" title="inductive">tree_valid</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#n:89"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:92"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:90"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:90"><span class="id" title="variable">m</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">â</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m':91"><span class="id" title="variable">m'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid"><span class="id" title="inductive">tree_valid</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#n:89"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:92"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m':91"><span class="id" title="variable">m'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_weaken"><span class="id" title="lemma">lookup_weaken</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_weaken"><span class="id" title="lemma">lookup_weaken</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="coll_free_lemma" class="idref" href="#coll_free_lemma"><span class="id" title="lemma">coll_free_lemma</span></a> <a id="m:93" class="idref" href="#m:93"><span class="id" title="binder">m</span></a> <a id="v:94" class="idref" href="#v:94"><span class="id" title="binder">v</span></a> <a id="v':95" class="idref" href="#v':95"><span class="id" title="binder">v'</span></a> <a id="k:96" class="idref" href="#k:96"><span class="id" title="binder">k</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.hash.html#coll_free"><span class="id" title="definition">coll_free</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:93"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:93"><span class="id" title="variable">m</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v:94"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#k:96"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:93"><span class="id" title="variable">m</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v':95"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#k:96"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v:94"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v':95"><span class="id" title="variable">v'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span> ? ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">erewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_total_correct"><span class="id" title="lemma">lookup_total_correct</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="proof_correct_implies_not_incorrect" class="idref" href="#proof_correct_implies_not_incorrect"><span class="id" title="lemma">proof_correct_implies_not_incorrect</span></a> <a id="tree:97" class="idref" href="#tree:97"><span class="id" title="binder">tree</span></a> <a id="proof:98" class="idref" href="#proof:98"><span class="id" title="binder">proof</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#possible_proof"><span class="id" title="inductive">possible_proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:97"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:98"><span class="id" title="variable">proof</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#correct_proof"><span class="id" title="inductive">correct_proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:97"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:98"><span class="id" title="variable">proof</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#incorrect_proof"><span class="id" title="inductive">incorrect_proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:97"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:98"><span class="id" title="variable">proof</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#::type_scope:'False'"><span class="id" title="notation">False</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tree</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">proof</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H14</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H9</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.wp_tactics.html#wptac_mapsto"><span class="id" title="method">+</span></a> <a class="idref" href="clutch.prob_lang.wp_tactics.html#wptac_mapsto"><span class="id" title="method">inversion</span></a> <span class="id" title="var">H9</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H14</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHtree1</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H14</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H9</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H9</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H14</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHtree2</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="proof_not_correct_implies_incorrect" class="idref" href="#proof_not_correct_implies_incorrect"><span class="id" title="lemma">proof_not_correct_implies_incorrect</span></a> <a id="tree:99" class="idref" href="#tree:99"><span class="id" title="binder">tree</span></a> <a id="proof:100" class="idref" href="#proof:100"><span class="id" title="binder">proof</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#possible_proof"><span class="id" title="inductive">possible_proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:99"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:100"><span class="id" title="variable">proof</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">Â¬</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#correct_proof"><span class="id" title="inductive">correct_proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:99"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:100"><span class="id" title="variable">proof</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#incorrect_proof"><span class="id" title="inductive">incorrect_proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:99"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:100"><span class="id" title="variable">proof</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tree</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">proof</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a>(<span class="id" title="var">hash</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <span class="id" title="var">tree2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#incorrect_proof_next_left"><span class="id" title="constructor">incorrect_proof_next_left</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHtree1</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#incorrect_proof_base_left"><span class="id" title="constructor">incorrect_proof_base_left</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a>(<span class="id" title="var">hash</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <span class="id" title="var">tree1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#incorrect_proof_next_right"><span class="id" title="constructor">incorrect_proof_next_right</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHtree2</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#incorrect_proof_base_right"><span class="id" title="constructor">incorrect_proof_base_right</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="possible_proof_implies_exists_leaf" class="idref" href="#possible_proof_implies_exists_leaf"><span class="id" title="lemma">possible_proof_implies_exists_leaf</span></a> <a id="tree:101" class="idref" href="#tree:101"><span class="id" title="binder">tree</span></a> <a id="proof:102" class="idref" href="#proof:102"><span class="id" title="binder">proof</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#possible_proof"><span class="id" title="inductive">possible_proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:101"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:102"><span class="id" title="variable">proof</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">â</span></a> <a id="v:103" class="idref" href="#v:103"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_leaf_value_match"><span class="id" title="inductive">tree_leaf_value_match</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:101"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v:103"><span class="id" title="variable">v</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:102"><span class="id" title="variable">proof</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tree</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">proof</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eexists</span> <span class="id" title="var">_</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHtree1</span> <span class="id" title="var">_</span> <span class="id" title="var">H4</span>). <span class="id" title="tactic">eexists</span> <span class="id" title="var">_</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHtree2</span> <span class="id" title="var">_</span> <span class="id" title="var">H4</span>). <span class="id" title="tactic">eexists</span> <span class="id" title="var">_</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*This&nbsp;lemma&nbsp;is&nbsp;here&nbsp;to&nbsp;ensure&nbsp;that&nbsp;the&nbsp;return&nbsp;value&nbsp;lies&nbsp;within&nbsp;a&nbsp;bound&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;lemma&nbsp;is&nbsp;eventually&nbsp;used&nbsp;in&nbsp;the&nbsp;case&nbsp;where&nbsp;the&nbsp;proof&nbsp;is&nbsp;incorrect.<br/>
&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Lemma</span> <a id="wp_compute_hash_from_leaf_size" class="idref" href="#wp_compute_hash_from_leaf_size"><span class="id" title="lemma">wp_compute_hash_from_leaf_size</span></a> (<a id="n:104" class="idref" href="#n:104"><span class="id" title="binder">n</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="tree:105" class="idref" href="#tree:105"><span class="id" title="binder">tree</span></a>:<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree"><span class="id" title="inductive">merkle_tree</span></a>) (<a id="m:106" class="idref" href="#m:106"><span class="id" title="binder">m</span></a>:<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gmap"><span class="id" title="record">gmap</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="v:107" class="idref" href="#v:107"><span class="id" title="binder">v</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="proof:108" class="idref" href="#proof:108"><span class="id" title="binder">proof</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)) <a id="lproof:109" class="idref" href="#lproof:109"><span class="id" title="binder">lproof</span></a> <a id="f:110" class="idref" href="#f:110"><span class="id" title="binder">f</span></a> <a id="E:111" class="idref" href="#E:111"><span class="id" title="binder">E</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid"><span class="id" title="inductive">tree_valid</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#n:104"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:105"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:106"><span class="id" title="variable">m</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized"><span class="id" title="definition">coll_free_hashfun_amortized</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a>)%<span class="id" title="var">nat</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#f:110"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:106"><span class="id" title="variable">m</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.lib.list.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:108"><span class="id" title="variable">proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#lproof:109"><span class="id" title="variable">lproof</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#possible_proof"><span class="id" title="inductive">possible_proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:105"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:108"><span class="id" title="variable">proof</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#size"><span class="id" title="definition">size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:106"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#n:104"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">â¯</span></a> <a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prelude.NNRbar.html#nnreal_nat"><span class="id" title="definition">nnreal_nat</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#n:104"><span class="id" title="variable">n</span></a>) <a class="idref" href="clutch.prelude.NNRbar.html#1bc6a42bff0f67d6034bb210662be20d"><span class="id" title="notation">*</span></a> <a class="idref" href="clutch.eris.examples.hash.html#amortized_error"><span class="id" title="definition">amortized_error</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a>)%<span class="id" title="var">nat</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size_pos"><span class="id" title="variable">max_hash_size_pos</span></a><a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">)</span></a>%<span class="id" title="var">NNR</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#compute_hash_from_leaf"><span class="id" title="definition">compute_hash_from_leaf</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#f:110"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#lproof:109"><span class="id" title="variable">lproof</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v:107"><span class="id" title="variable">v</span></a>) <a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#E:111"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">(</span></a><a id="retv:112" class="idref" href="#retv:112"><span class="id" title="binder">retv</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">),</span></a> <a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">RET</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#retv:112"><span class="id" title="variable">retv</span></a><a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">â</span></a> <a id="m':113" class="idref" href="#m':113"><span class="id" title="binder">m'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:106"><span class="id" title="variable">m</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">â</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m':113"><span class="id" title="variable">m'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized"><span class="id" title="definition">coll_free_hashfun_amortized</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a>) <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#f:110"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m':113"><span class="id" title="variable">m'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#size"><span class="id" title="definition">size</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m':113"><span class="id" title="variable">m'</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#size"><span class="id" title="definition">size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:106"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#n:104"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a>(0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#retv:112"><span class="id" title="variable">retv</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211"><span class="id" title="notation">&lt;</span></a> 2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43"><span class="id" title="notation">^</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a>)%<span class="id" title="var">Z</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Î¦</span>) "(%Htvalid &amp; H &amp; %Hproof &amp; %Hposs &amp; %Hmsize &amp;Herr) HÎ¦".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> <span class="id" title="var">tree</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">hash</span> <span class="id" title="var">leaf</span>|<span class="id" title="var">hash</span> <span class="id" title="var">tree1</span> <span class="id" title="var">Htree1</span> <span class="id" title="var">tree2</span> <span class="id" title="var">Htree2</span>] "IH"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">n</span> <span class="id" title="var">v</span> <span class="id" title="var">m</span> <span class="id" title="var">proof</span> <span class="id" title="var">lproof</span> <span class="id" title="var">Î¦</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Htvalid</span> <span class="id" title="var">Hproof</span> <span class="id" title="var">Hposs</span> <span class="id" title="var">Hmsize</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#compute_hash_from_leaf"><span class="id" title="definition">compute_hash_from_leaf</span></a>. <span class="id" title="var">wp_pures</span>. <span class="id" title="tactic">rewrite</span> -/<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#compute_hash_from_leaf"><span class="id" title="definition">compute_hash_from_leaf</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> (<a class="idref" href="clutch.eris.lib.list.html#wp_list_head"><span class="id" title="lemma">wp_list_head</span></a>); <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "[[-&gt;-&gt;]|(%&amp;%&amp;%&amp;%)]"; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hposs</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htvalid</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#wp_insert_amortized"><span class="id" title="lemma">wp_insert_amortized</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$H Herr]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iApply</span> <a class="idref" href="clutch.eris.error_credits.html#ec_spend_irrel"><span class="id" title="lemma">ec_spend_irrel</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iIntros</span> (<span class="id" title="var">retv</span>) "(%m' &amp; H &amp; %Hfound &amp; %Hmsize' &amp; %Hmsubset)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"HÎ¦" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[H]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="tactic">do</span> 2 (<span class="id" title="var">iSplit</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iPureIntro</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iPoseProof</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized_implies_bounded_range"><span class="id" title="lemma">coll_free_hashfun_amortized_implies_bounded_range</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$H][//]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[% %K]"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#hash_bound_manipulation"><span class="id" title="lemma">hash_bound_manipulation</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#compute_hash_from_leaf"><span class="id" title="definition">compute_hash_from_leaf</span></a>. <span class="id" title="var">wp_pures</span>. <span class="id" title="tactic">rewrite</span> -/<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#compute_hash_from_leaf"><span class="id" title="definition">compute_hash_from_leaf</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="clutch.eris.lib.list.html#wp_list_head"><span class="id" title="lemma">wp_list_head</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "[[-&gt;-&gt;]|(%head &amp; %lproof' &amp; -&gt; &amp; -&gt;)]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hposs</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="var">wp_apply</span> <a class="idref" href="clutch.eris.lib.list.html#wp_list_tail"><span class="id" title="lemma">wp_list_tail</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">proof'</span>) "%Hproof'".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htvalid</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">â¯</span></a> <a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">(</span></a>(<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_nat"><span class="id" title="definition">nnreal_nat</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n0</span>) <a class="idref" href="clutch.prelude.NNRbar.html#1bc6a42bff0f67d6034bb210662be20d"><span class="id" title="notation">*</span></a> <a class="idref" href="clutch.eris.examples.hash.html#amortized_error"><span class="id" title="definition">amortized_error</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">NNR</span><a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">â¯</span></a> <a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#amortized_error"><span class="id" title="definition">amortized_error</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a> <span class="id" title="var">_</span><a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">)</span></a>%<span class="id" title="var">NNR</span>)%<span class="id" title="var">I</span> <span class="id" title="keyword">with</span> "[Herr]" <span class="id" title="keyword">as</span> "[Herr Herr']".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iApply</span> <a class="idref" href="clutch.eris.error_credits.html#ec_split"><span class="id" title="lemma">ec_split</span></a>. <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.error_credits.html#ec_spend_irrel"><span class="id" title="lemma">ec_spend_irrel</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hposs</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">wp_pures</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"IH" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[][][][][$H][$Herr]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iPureIntro</span>; <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">lefthash'</span>) "(%m' &amp; %Hmsubset &amp; H &amp; %Hmvalid' &amp; %Hmsize' &amp; %Hlefthashsize')".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">*</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a><span class="id" title="var">_</span>)%<span class="id" title="var">Z</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <span class="id" title="var">lefthash'</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">hash0</span>)); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_add"><span class="id" title="lemma">Nat2Z.inj_add</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_mul"><span class="id" title="lemma">Nat2Z.inj_mul</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Z2Nat.id"><span class="id" title="lemma">Z2Nat.id</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#Z2Nat.inj_pow"><span class="id" title="lemma">Z2Nat.inj_pow</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#wp_insert_amortized"><span class="id" title="lemma">wp_insert_amortized</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$H $Herr']"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iIntros</span> (<span class="id" title="var">finalhash</span>) "(%m'' &amp; H  &amp; %Hmfound'' &amp; %Hmsize'' &amp; %Hmsubset')".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HÎ¦".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">m''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>; <span class="id" title="tactic">try</span> (<span class="id" title="var">iPureIntro</span>; <span class="id" title="var">etrans</span>; <span class="id" title="tactic">exact</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 (<span class="id" title="var">iSplit</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">iPureIntro</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">iPoseProof</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized_implies_bounded_range"><span class="id" title="lemma">coll_free_hashfun_amortized_implies_bounded_range</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$H][//]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[% %K]"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#hash_bound_manipulation"><span class="id" title="lemma">hash_bound_manipulation</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"IH1" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[][][][][$H][$Herr]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iPureIntro</span>; <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">lefthash'</span>) "(%m' &amp; %Hmsubset &amp; H &amp; %Hmsize' &amp; %Hlefthashsize')".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">*</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a><span class="id" title="var">_</span>)%<span class="id" title="var">Z</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<span class="id" title="var">hash0</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <span class="id" title="var">lefthash'</span>)); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_add"><span class="id" title="lemma">Nat2Z.inj_add</span></a>. <span class="id" title="tactic">f_equal</span>; <span class="id" title="var">last</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_mul"><span class="id" title="lemma">Nat2Z.inj_mul</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#Z2Nat.inj_pow"><span class="id" title="lemma">Z2Nat.inj_pow</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#wp_insert_amortized"><span class="id" title="lemma">wp_insert_amortized</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$H $Herr']"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iIntros</span> (<span class="id" title="var">finalhash</span>) "(%m'' &amp; H &amp; %Hmfound'' &amp; %Hmsize'' &amp; %Hmsubset')".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HÎ¦".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">m''</span>. <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> (<span class="id" title="var">iPureIntro</span>; <span class="id" title="var">etrans</span>; <span class="id" title="tactic">exact</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 (<span class="id" title="var">iSplit</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">iPureIntro</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">iPoseProof</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized_implies_bounded_range"><span class="id" title="lemma">coll_free_hashfun_amortized_implies_bounded_range</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$H][//]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[% %K]"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#hash_bound_manipulation"><span class="id" title="lemma">hash_bound_manipulation</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;case&nbsp;where&nbsp;everything&nbsp;is&nbsp;correct&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Lemma</span> <a id="wp_compute_hash_from_leaf_correct" class="idref" href="#wp_compute_hash_from_leaf_correct"><span class="id" title="lemma">wp_compute_hash_from_leaf_correct</span></a> (<a id="tree:114" class="idref" href="#tree:114"><span class="id" title="binder">tree</span></a>:<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree"><span class="id" title="inductive">merkle_tree</span></a>) (<a id="m:115" class="idref" href="#m:115"><span class="id" title="binder">m</span></a>:<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gmap"><span class="id" title="record">gmap</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="v:116" class="idref" href="#v:116"><span class="id" title="binder">v</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="proof:117" class="idref" href="#proof:117"><span class="id" title="binder">proof</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)) <a id="lproof:118" class="idref" href="#lproof:118"><span class="id" title="binder">lproof</span></a> <a id="f:119" class="idref" href="#f:119"><span class="id" title="binder">f</span></a> <a id="E:120" class="idref" href="#E:120"><span class="id" title="binder">E</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid"><span class="id" title="inductive">tree_valid</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.height"><span class="id" title="variable">height</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:114"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:115"><span class="id" title="variable">m</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized"><span class="id" title="definition">coll_free_hashfun_amortized</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a>)%<span class="id" title="var">nat</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#f:119"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:115"><span class="id" title="variable">m</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.lib.list.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:117"><span class="id" title="variable">proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#lproof:118"><span class="id" title="variable">lproof</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#correct_proof"><span class="id" title="inductive">correct_proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:114"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:117"><span class="id" title="variable">proof</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_leaf_value_match"><span class="id" title="inductive">tree_leaf_value_match</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:114"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v:116"><span class="id" title="variable">v</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:117"><span class="id" title="variable">proof</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#compute_hash_from_leaf"><span class="id" title="definition">compute_hash_from_leaf</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#f:119"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#lproof:118"><span class="id" title="variable">lproof</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v:116"><span class="id" title="variable">v</span></a>) <a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#E:120"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">(</span></a><a id="retv:121" class="idref" href="#retv:121"><span class="id" title="binder">retv</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">),</span></a> <a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">RET</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#retv:121"><span class="id" title="variable">retv</span></a><a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized"><span class="id" title="definition">coll_free_hashfun_amortized</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a>) <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#f:119"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:115"><span class="id" title="variable">m</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#retv:121"><span class="id" title="variable">retv</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:114"><span class="id" title="variable">tree</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Î¦</span>) "(%Htvalid &amp; H &amp; %Hlist &amp; %Hcorrect &amp; %Hvmatch) HÎ¦".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> <span class="id" title="var">tree</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">hash</span> <span class="id" title="var">leaf</span>|<span class="id" title="var">hash</span> <span class="id" title="var">tree1</span> <span class="id" title="var">Htree1</span> <span class="id" title="var">tree2</span> <span class="id" title="var">Htree2</span>] "IH"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">height</span> <span class="id" title="var">m</span> <span class="id" title="var">proof</span> <span class="id" title="var">lproof</span> <span class="id" title="var">Î¦</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Htvalid</span> <span class="id" title="var">Hlist</span> <span class="id" title="var">Hcorrect</span> <span class="id" title="var">Hvmatch</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#compute_hash_from_leaf"><span class="id" title="definition">compute_hash_from_leaf</span></a>. <span class="id" title="var">wp_pures</span>. <span class="id" title="tactic">rewrite</span> -/<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#compute_hash_from_leaf"><span class="id" title="definition">compute_hash_from_leaf</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="clutch.eris.lib.list.html#wp_list_head"><span class="id" title="lemma">wp_list_head</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "[[-&gt; -&gt;]|%]"; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcorrect</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [?[?[??]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htvalid</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hvmatch</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#wp_coll_free_hashfun_prev_amortized"><span class="id" title="lemma">wp_coll_free_hashfun_prev_amortized</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iIntros</span> "H". <span class="id" title="var">iApply</span> "HÎ¦"; <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#compute_hash_from_leaf"><span class="id" title="definition">compute_hash_from_leaf</span></a>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#compute_hash_from_leaf"><span class="id" title="definition">compute_hash_from_leaf</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="clutch.eris.lib.list.html#wp_list_head"><span class="id" title="lemma">wp_list_head</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">head</span>) "[[-&gt;-&gt;]|(%&amp;%&amp;-&gt;&amp;-&gt;)]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcorrect</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="var">wp_apply</span> <a class="idref" href="clutch.eris.lib.list.html#wp_list_tail"><span class="id" title="lemma">wp_list_tail</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">tail</span>) "%Htail".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcorrect</span>; <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htvalid</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hvmatch</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"IH" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[][][][][$]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">lhash</span>) "[H -&gt;]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">*</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a><span class="id" title="var">_</span>)%<span class="id" title="var">Z</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <span class="id" title="var">tree1</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <span class="id" title="var">tree2</span>)); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_add"><span class="id" title="lemma">Nat2Z.inj_add</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_mul"><span class="id" title="lemma">Nat2Z.inj_mul</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#Z2Nat.inj_pow"><span class="id" title="lemma">Z2Nat.inj_pow</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#wp_coll_free_hashfun_prev_amortized"><span class="id" title="lemma">wp_coll_free_hashfun_prev_amortized</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "H"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iIntros</span> "H". <span class="id" title="var">iApply</span> "HÎ¦".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htvalid</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hvmatch</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"IH1" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[][][][][$]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">rhash</span>) "[H -&gt;]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">*</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a><span class="id" title="var">_</span>)%<span class="id" title="var">Z</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <span class="id" title="var">tree1</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <span class="id" title="var">tree2</span>)); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_add"><span class="id" title="lemma">Nat2Z.inj_add</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_mul"><span class="id" title="lemma">Nat2Z.inj_mul</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#Z2Nat.inj_pow"><span class="id" title="lemma">Z2Nat.inj_pow</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#wp_coll_free_hashfun_prev_amortized"><span class="id" title="lemma">wp_coll_free_hashfun_prev_amortized</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "H"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iIntros</span> "H". <span class="id" title="var">iApply</span> "HÎ¦".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*The&nbsp;case&nbsp;where&nbsp;the&nbsp;leaf&nbsp;is&nbsp;incorrect*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Lemma</span> <a id="wp_compute_hash_from_leaf_incorrect" class="idref" href="#wp_compute_hash_from_leaf_incorrect"><span class="id" title="lemma">wp_compute_hash_from_leaf_incorrect</span></a> (<a id="tree:122" class="idref" href="#tree:122"><span class="id" title="binder">tree</span></a>:<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree"><span class="id" title="inductive">merkle_tree</span></a>) (<a id="m:123" class="idref" href="#m:123"><span class="id" title="binder">m</span></a>:<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gmap"><span class="id" title="record">gmap</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="v:124" class="idref" href="#v:124"><span class="id" title="binder">v</span></a> <a id="v':125" class="idref" href="#v':125"><span class="id" title="binder">v'</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="proof:126" class="idref" href="#proof:126"><span class="id" title="binder">proof</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)) <a id="lproof:127" class="idref" href="#lproof:127"><span class="id" title="binder">lproof</span></a> <a id="f:128" class="idref" href="#f:128"><span class="id" title="binder">f</span></a> <a id="E:129" class="idref" href="#E:129"><span class="id" title="binder">E</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid"><span class="id" title="inductive">tree_valid</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.height"><span class="id" title="variable">height</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:122"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:123"><span class="id" title="variable">m</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized"><span class="id" title="definition">coll_free_hashfun_amortized</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a>)%<span class="id" title="var">nat</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#f:128"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:123"><span class="id" title="variable">m</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.lib.list.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:126"><span class="id" title="variable">proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#lproof:127"><span class="id" title="variable">lproof</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#possible_proof"><span class="id" title="inductive">possible_proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:122"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:126"><span class="id" title="variable">proof</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_leaf_value_match"><span class="id" title="inductive">tree_leaf_value_match</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:122"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v:124"><span class="id" title="variable">v</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:126"><span class="id" title="variable">proof</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v:124"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">â </span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v':125"><span class="id" title="variable">v'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#size"><span class="id" title="definition">size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:123"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.height"><span class="id" title="variable">height</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">â¯</span></a> <a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prelude.NNRbar.html#nnreal_nat"><span class="id" title="definition">nnreal_nat</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.height"><span class="id" title="variable">height</span></a>) <a class="idref" href="clutch.prelude.NNRbar.html#1bc6a42bff0f67d6034bb210662be20d"><span class="id" title="notation">*</span></a> <a class="idref" href="clutch.eris.examples.hash.html#amortized_error"><span class="id" title="definition">amortized_error</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a>)%<span class="id" title="var">nat</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size_pos"><span class="id" title="variable">max_hash_size_pos</span></a><a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">)</span></a>%<span class="id" title="var">NNR</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#compute_hash_from_leaf"><span class="id" title="definition">compute_hash_from_leaf</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#f:128"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#lproof:127"><span class="id" title="variable">lproof</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v':125"><span class="id" title="variable">v'</span></a>) <a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#E:129"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">(</span></a><a id="retv:130" class="idref" href="#retv:130"><span class="id" title="binder">retv</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">),</span></a> <a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">RET</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#retv:130"><span class="id" title="variable">retv</span></a><a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">â</span></a> <a id="m':131" class="idref" href="#m':131"><span class="id" title="binder">m'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:123"><span class="id" title="variable">m</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">â</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m':131"><span class="id" title="variable">m'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized"><span class="id" title="definition">coll_free_hashfun_amortized</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a>) <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#f:128"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m':131"><span class="id" title="variable">m'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#size"><span class="id" title="definition">size</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m':131"><span class="id" title="variable">m'</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#size"><span class="id" title="definition">size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:123"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.height"><span class="id" title="variable">height</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#retv:130"><span class="id" title="variable">retv</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">â </span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:122"><span class="id" title="variable">tree</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a>(0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#retv:130"><span class="id" title="variable">retv</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211"><span class="id" title="notation">&lt;</span></a> 2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43"><span class="id" title="notation">^</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a>)%<span class="id" title="var">Z</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Î¦</span>) "(%Htvalid &amp; H &amp; %Hlist &amp; %Hpossible &amp; %Hvmatch &amp; %Hneq &amp; %Hmsize &amp; Herr) HÎ¦".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> <span class="id" title="var">tree</span> <span class="id" title="keyword">as</span> [|] "IH"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">height</span> <span class="id" title="var">m</span> <span class="id" title="var">proof</span> <span class="id" title="var">lproof</span> <span class="id" title="var">Î¦</span> <span class="id" title="var">Htvalid</span> <span class="id" title="var">Hlist</span> <span class="id" title="var">Hpossible</span> <span class="id" title="var">Hvmatch</span> <span class="id" title="var">Hmsize</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htvalid</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#compute_hash_from_leaf"><span class="id" title="definition">compute_hash_from_leaf</span></a>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#compute_hash_from_leaf"><span class="id" title="definition">compute_hash_from_leaf</span></a>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hvmatch</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="clutch.eris.lib.list.html#wp_list_head"><span class="id" title="lemma">wp_list_head</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "[[_ -&gt;]|(%&amp;%&amp;%&amp;%)]"; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#wp_insert_amortized"><span class="id" title="lemma">wp_insert_amortized</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$H Herr]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iApply</span> <a class="idref" href="clutch.eris.error_credits.html#ec_spend_irrel"><span class="id" title="lemma">ec_spend_irrel</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iIntros</span> (<span class="id" title="var">hash_value'</span>) "(%m' &amp; H &amp; %Hmfound &amp; %Hmsize' &amp; %Hmsubset)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HÎ¦".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 (<span class="id" title="tactic">try</span> <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iPureIntro</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htvalid</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.hash.html#coll_free"><span class="id" title="definition">coll_free</span></a> <span class="id" title="var">m'</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a>)%<span class="id" title="var">I</span> <span class="id" title="keyword">with</span> "[H]" <span class="id" title="keyword">as</span> "%".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized_implies_coll_free"><span class="id" title="lemma">coll_free_hashfun_amortized_implies_coll_free</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hneq</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#coll_free_lemma"><span class="id" title="lemma">coll_free_lemma</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_weaken"><span class="id" title="lemma">lookup_weaken</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">exact</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj"><span class="id" title="lemma">Nat2Z.inj</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iPoseProof</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized_implies_bounded_range"><span class="id" title="lemma">coll_free_hashfun_amortized_implies_bounded_range</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$H][//]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[% %K]"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#hash_bound_manipulation"><span class="id" title="lemma">hash_bound_manipulation</span></a>; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#compute_hash_from_leaf"><span class="id" title="definition">compute_hash_from_leaf</span></a>. <span class="id" title="var">wp_pures</span>. <span class="id" title="tactic">rewrite</span> -/<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#compute_hash_from_leaf"><span class="id" title="definition">compute_hash_from_leaf</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="clutch.eris.lib.list.html#wp_list_head"><span class="id" title="lemma">wp_list_head</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "[[-&gt;-&gt;]|(%head &amp; %lproof' &amp; -&gt; &amp; -&gt;)]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hvmatch</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="var">wp_apply</span> <a class="idref" href="clutch.eris.lib.list.html#wp_list_tail"><span class="id" title="lemma">wp_list_tail</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">proof'</span>) "%Hproof'".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htvalid</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">â¯</span></a> <a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">(</span></a>(<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_nat"><span class="id" title="definition">nnreal_nat</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) <a class="idref" href="clutch.prelude.NNRbar.html#1bc6a42bff0f67d6034bb210662be20d"><span class="id" title="notation">*</span></a> <a class="idref" href="clutch.eris.examples.hash.html#amortized_error"><span class="id" title="definition">amortized_error</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">NNR</span><a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">â¯</span></a> <a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#amortized_error"><span class="id" title="definition">amortized_error</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a> <span class="id" title="var">_</span><a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">)</span></a>%<span class="id" title="var">NNR</span>)%<span class="id" title="var">I</span> <span class="id" title="keyword">with</span> "[Herr]" <span class="id" title="keyword">as</span> "[Herr Herr']".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iApply</span> <a class="idref" href="clutch.eris.error_credits.html#ec_split"><span class="id" title="lemma">ec_split</span></a>. <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.error_credits.html#ec_spend_irrel"><span class="id" title="lemma">ec_spend_irrel</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hpossible</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hvmatch</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htvalid</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">wp_pures</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"IH" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[][][][][][$H][$Herr]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iPureIntro</span>; <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">lefthash'</span>) "(%m' &amp; %Hmsubset &amp; H &amp; %Hmsize' &amp; %Hlefthashneq &amp; %Hlefthashsize')".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">*</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a><span class="id" title="var">_</span>)%<span class="id" title="var">Z</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <span class="id" title="var">lefthash'</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">hash</span>)); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_add"><span class="id" title="lemma">Nat2Z.inj_add</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_mul"><span class="id" title="lemma">Nat2Z.inj_mul</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Z2Nat.id"><span class="id" title="lemma">Z2Nat.id</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#Z2Nat.inj_pow"><span class="id" title="lemma">Z2Nat.inj_pow</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#wp_insert_amortized"><span class="id" title="lemma">wp_insert_amortized</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$H $Herr']"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iIntros</span> (<span class="id" title="var">finalhash</span>) "(%m'' &amp; H &amp; %Hmfound'' &amp; %Hmsize'' &amp; %Hmsubset')".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HÎ¦".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">m''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> (<span class="id" title="var">iPureIntro</span>; <span class="id" title="var">etrans</span>; <span class="id" title="tactic">exact</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.hash.html#coll_free"><span class="id" title="definition">coll_free</span></a> <span class="id" title="var">m''</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a>)%<span class="id" title="var">I</span> <span class="id" title="keyword">with</span> "[H]" <span class="id" title="keyword">as</span> "%".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized_implies_coll_free"><span class="id" title="lemma">coll_free_hashfun_amortized_implies_coll_free</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 (<span class="id" title="tactic">try</span> <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">iPureIntro</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hlefthashneq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <span class="id" title="var">tree1</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <span class="id" title="var">tree2</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <span class="id" title="var">lefthash'</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">hash</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">helper</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#coll_free_lemma"><span class="id" title="lemma">coll_free_lemma</span></a> <span class="id" title="var">m''</span>); <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">finalhash</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><span class="id" title="var">hash_value</span>) <span class="id" title="keyword">as</span> -&gt;. { <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj"><span class="id" title="lemma">Nat2Z.inj</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_weaken"><span class="id" title="lemma">lookup_weaken</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etrans</span>; <span class="id" title="tactic">exact</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#Nat.mul_split_l"><span class="id" title="lemma">Nat.mul_split_l</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">helper</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hsplit</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">H22</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hpossible</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--  <span class="id" title="var">iPoseProof</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized_implies_bounded_range"><span class="id" title="lemma">coll_free_hashfun_amortized_implies_bounded_range</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$H][//]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[% %K]"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#hash_bound_manipulation"><span class="id" title="lemma">hash_bound_manipulation</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"IH1" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[][][][][][$H][$Herr]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iPureIntro</span>; <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">righthash'</span>) "(%m' &amp; %Hmsubset &amp; H &amp; %Hmvalid' &amp; %Hmsize' &amp; %Hrighthashneq &amp; %Hrighthashsize')".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">*</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a><span class="id" title="var">_</span>)%<span class="id" title="var">Z</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<span class="id" title="var">hash</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <span class="id" title="var">righthash'</span>)); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_add"><span class="id" title="lemma">Nat2Z.inj_add</span></a>. <span class="id" title="tactic">f_equal</span>; <span class="id" title="var">last</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_mul"><span class="id" title="lemma">Nat2Z.inj_mul</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#Z2Nat.inj_pow"><span class="id" title="lemma">Z2Nat.inj_pow</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#wp_insert_amortized"><span class="id" title="lemma">wp_insert_amortized</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$H $Herr']"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iIntros</span> (<span class="id" title="var">finalhash</span>) "(%m'' &amp; H &amp; %Hmfound'' &amp; %Hmsize'' &amp; %Hmsubset')".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HÎ¦".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">m''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> (<span class="id" title="var">iPureIntro</span>; <span class="id" title="var">etrans</span>; <span class="id" title="tactic">exact</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.hash.html#coll_free"><span class="id" title="definition">coll_free</span></a> <span class="id" title="var">m''</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a>)%<span class="id" title="var">I</span> <span class="id" title="keyword">with</span> "[H]" <span class="id" title="keyword">as</span> "%".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized_implies_coll_free"><span class="id" title="lemma">coll_free_hashfun_amortized_implies_coll_free</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 (<span class="id" title="tactic">try</span> <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">iPureIntro</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hrighthashneq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <span class="id" title="var">tree1</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <span class="id" title="var">tree2</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hash</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <span class="id" title="var">righthash'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">helper</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#coll_free_lemma"><span class="id" title="lemma">coll_free_lemma</span></a> <span class="id" title="var">m''</span>); <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">finalhash</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><span class="id" title="var">hash_value</span>) <span class="id" title="keyword">as</span> -&gt;. { <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj"><span class="id" title="lemma">Nat2Z.inj</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_weaken"><span class="id" title="lemma">lookup_weaken</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etrans</span>; <span class="id" title="tactic">exact</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#Nat.mul_split_l"><span class="id" title="lemma">Nat.mul_split_l</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">helper</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hsplit</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">H22</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_lt"><span class="id" title="lemma">Nat2Z.inj_lt</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#Z2Nat.inj_pow"><span class="id" title="lemma">Z2Nat.inj_pow</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> 2) <span class="id" title="keyword">with</span> 2%<span class="id" title="var">Z</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Z2Nat.id"><span class="id" title="lemma">Z2Nat.id</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">iPoseProof</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized_implies_bounded_range"><span class="id" title="lemma">coll_free_hashfun_amortized_implies_bounded_range</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$H][//]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[% %K]"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#hash_bound_manipulation"><span class="id" title="lemma">hash_bound_manipulation</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*The&nbsp;case&nbsp;where&nbsp;the&nbsp;leaf&nbsp;is&nbsp;correct&nbsp;but&nbsp;the&nbsp;proof&nbsp;is&nbsp;not&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Lemma</span> <a id="wp_compute_hash_from_leaf_incorrect_proof" class="idref" href="#wp_compute_hash_from_leaf_incorrect_proof"><span class="id" title="lemma">wp_compute_hash_from_leaf_incorrect_proof</span></a> (<a id="tree:132" class="idref" href="#tree:132"><span class="id" title="binder">tree</span></a>:<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree"><span class="id" title="inductive">merkle_tree</span></a>) (<a id="m:133" class="idref" href="#m:133"><span class="id" title="binder">m</span></a>:<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gmap"><span class="id" title="record">gmap</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="v:134" class="idref" href="#v:134"><span class="id" title="binder">v</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="proof:135" class="idref" href="#proof:135"><span class="id" title="binder">proof</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)) <a id="lproof:136" class="idref" href="#lproof:136"><span class="id" title="binder">lproof</span></a> <a id="f:137" class="idref" href="#f:137"><span class="id" title="binder">f</span></a> <a id="E:138" class="idref" href="#E:138"><span class="id" title="binder">E</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid"><span class="id" title="inductive">tree_valid</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.height"><span class="id" title="variable">height</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:132"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:133"><span class="id" title="variable">m</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized"><span class="id" title="definition">coll_free_hashfun_amortized</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a>)%<span class="id" title="var">nat</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#f:137"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:133"><span class="id" title="variable">m</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.lib.list.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:135"><span class="id" title="variable">proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#lproof:136"><span class="id" title="variable">lproof</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#possible_proof"><span class="id" title="inductive">possible_proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:132"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:135"><span class="id" title="variable">proof</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#incorrect_proof"><span class="id" title="inductive">incorrect_proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:132"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:135"><span class="id" title="variable">proof</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_leaf_value_match"><span class="id" title="inductive">tree_leaf_value_match</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:132"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v:134"><span class="id" title="variable">v</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:135"><span class="id" title="variable">proof</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#size"><span class="id" title="definition">size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:133"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.height"><span class="id" title="variable">height</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">â¯</span></a> <a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prelude.NNRbar.html#nnreal_nat"><span class="id" title="definition">nnreal_nat</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.height"><span class="id" title="variable">height</span></a>) <a class="idref" href="clutch.prelude.NNRbar.html#1bc6a42bff0f67d6034bb210662be20d"><span class="id" title="notation">*</span></a> <a class="idref" href="clutch.eris.examples.hash.html#amortized_error"><span class="id" title="definition">amortized_error</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a>)%<span class="id" title="var">nat</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size_pos"><span class="id" title="variable">max_hash_size_pos</span></a><a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">)</span></a>%<span class="id" title="var">NNR</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#compute_hash_from_leaf"><span class="id" title="definition">compute_hash_from_leaf</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#f:137"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#lproof:136"><span class="id" title="variable">lproof</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v:134"><span class="id" title="variable">v</span></a>) <a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#E:138"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">(</span></a><a id="retv:139" class="idref" href="#retv:139"><span class="id" title="binder">retv</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">),</span></a> <a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">RET</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#retv:139"><span class="id" title="variable">retv</span></a><a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">â</span></a> <a id="m':140" class="idref" href="#m':140"><span class="id" title="binder">m'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:133"><span class="id" title="variable">m</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">â</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m':140"><span class="id" title="variable">m'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized"><span class="id" title="definition">coll_free_hashfun_amortized</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a>) <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#f:137"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m':140"><span class="id" title="variable">m'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#size"><span class="id" title="definition">size</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m':140"><span class="id" title="variable">m'</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#size"><span class="id" title="definition">size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:133"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.height"><span class="id" title="variable">height</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#retv:139"><span class="id" title="variable">retv</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">â </span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:132"><span class="id" title="variable">tree</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a>(0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#retv:139"><span class="id" title="variable">retv</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211"><span class="id" title="notation">&lt;</span></a> 2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43"><span class="id" title="notation">^</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a>)%<span class="id" title="var">Z</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Î¦</span>) "(%Htvalid &amp; H &amp; %Hlist &amp; %Hposs &amp; %Hincorrect &amp; %Hvmatch &amp; %Hmsize &amp; Herr) HÎ¦".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> <span class="id" title="var">tree</span> <span class="id" title="keyword">as</span> [|] "IH"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">height</span> <span class="id" title="var">m</span> <span class="id" title="var">proof</span> <span class="id" title="var">lproof</span> <span class="id" title="var">Î¦</span> <span class="id" title="var">Htvalid</span> <span class="id" title="var">Hlist</span> <span class="id" title="var">Hposs</span> <span class="id" title="var">Hincorrect</span> <span class="id" title="var">Hvmatch</span> <span class="id" title="var">Hmsize</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hincorrect</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#compute_hash_from_leaf"><span class="id" title="definition">compute_hash_from_leaf</span></a>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#compute_hash_from_leaf"><span class="id" title="definition">compute_hash_from_leaf</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="clutch.eris.lib.list.html#wp_list_head"><span class="id" title="lemma">wp_list_head</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "[[-&gt;-&gt;]|(%head &amp; %lproof' &amp; -&gt; &amp; -&gt;)]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hvmatch</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="var">wp_apply</span> <a class="idref" href="clutch.eris.lib.list.html#wp_list_tail"><span class="id" title="lemma">wp_list_tail</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">proof'</span>) "%Hproof'".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htvalid</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">â¯</span></a> <a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">(</span></a>(<a class="idref" href="clutch.prelude.NNRbar.html#nnreal_nat"><span class="id" title="definition">nnreal_nat</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) <a class="idref" href="clutch.prelude.NNRbar.html#1bc6a42bff0f67d6034bb210662be20d"><span class="id" title="notation">*</span></a> <a class="idref" href="clutch.eris.examples.hash.html#amortized_error"><span class="id" title="definition">amortized_error</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">NNR</span><a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">â¯</span></a> <a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#amortized_error"><span class="id" title="definition">amortized_error</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a> <span class="id" title="var">_</span><a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">)</span></a>%<span class="id" title="var">NNR</span>)%<span class="id" title="var">I</span> <span class="id" title="keyword">with</span> "[Herr]" <span class="id" title="keyword">as</span> "[Herr Herr']".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iApply</span> <a class="idref" href="clutch.eris.error_credits.html#ec_split"><span class="id" title="lemma">ec_split</span></a>. <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.error_credits.html#ec_spend_irrel"><span class="id" title="lemma">ec_spend_irrel</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hposs</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hvmatch</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htvalid</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hincorrect</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">wp_pures</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*right&nbsp;neq&nbsp;guess&nbsp;right*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#wp_compute_hash_from_leaf_size"><span class="id" title="lemma">wp_compute_hash_from_leaf_size</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$H $Herr]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">repeat</span> <span class="id" title="var">iSplit</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>; <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iIntros</span> (<span class="id" title="var">lefthash</span>) "(%m' &amp; %Hmsubset &amp; H &amp; %Hmvalid' &amp; %Hmsize' &amp; %Hlefthashsize)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">*</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a><span class="id" title="var">_</span>)%<span class="id" title="var">Z</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <span class="id" title="var">lefthash</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">hash</span>)); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_add"><span class="id" title="lemma">Nat2Z.inj_add</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_mul"><span class="id" title="lemma">Nat2Z.inj_mul</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Z2Nat.id"><span class="id" title="lemma">Z2Nat.id</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#Z2Nat.inj_pow"><span class="id" title="lemma">Z2Nat.inj_pow</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#wp_insert_amortized"><span class="id" title="lemma">wp_insert_amortized</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$H $Herr']"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">iIntros</span> (<span class="id" title="var">retv</span>) "(%m'' &amp; H &amp; %Hmfound &amp; %Hsize'' &amp; %Hmsubset')".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HÎ¦".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.hash.html#coll_free"><span class="id" title="definition">coll_free</span></a> <span class="id" title="var">m''</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a>)%<span class="id" title="var">I</span> <span class="id" title="keyword">with</span> "[H]" <span class="id" title="keyword">as</span> "%".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized_implies_coll_free"><span class="id" title="lemma">coll_free_hashfun_amortized_implies_coll_free</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">m''</span>. <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> (<span class="id" title="var">iPureIntro</span>; <span class="id" title="var">etrans</span>; <span class="id" title="tactic">exact</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 (<span class="id" title="tactic">try</span> <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">iPureIntro</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">retv</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><span class="id" title="var">hash_value</span>) <span class="id" title="keyword">as</span> -&gt;. { <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj"><span class="id" title="lemma">Nat2Z.inj</span></a>. } <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H30</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <span class="id" title="var">tree1</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <span class="id" title="var">tree2</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <span class="id" title="var">lefthash</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">hash</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">helper</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#coll_free_lemma"><span class="id" title="lemma">coll_free_lemma</span></a> <span class="id" title="var">m''</span>); <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_weaken"><span class="id" title="lemma">lookup_weaken</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etrans</span>; <span class="id" title="tactic">exact</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#Nat.mul_split_l"><span class="id" title="lemma">Nat.mul_split_l</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">helper</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hsplit</span> <span class="id" title="var">Hsplit'</span>]; <span class="id" title="tactic">subst</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">H22</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">iPoseProof</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized_implies_bounded_range"><span class="id" title="lemma">coll_free_hashfun_amortized_implies_bounded_range</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$H][//]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[% %K]"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#hash_bound_manipulation"><span class="id" title="lemma">hash_bound_manipulation</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*incorrect&nbsp;happens&nbsp;above*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"IH" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[][][][][][][$H][$Herr]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iPureIntro</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iIntros</span> (<span class="id" title="var">lefthash</span>) "(%m' &amp; %Hmsubset &amp; H &amp; %Hmsize' &amp; %Hlefthashneq &amp; %Hlefthashsize)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">*</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a><span class="id" title="var">_</span>)%<span class="id" title="var">Z</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <span class="id" title="var">lefthash</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">hash</span>)); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_add"><span class="id" title="lemma">Nat2Z.inj_add</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_mul"><span class="id" title="lemma">Nat2Z.inj_mul</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Z2Nat.id"><span class="id" title="lemma">Z2Nat.id</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#Z2Nat.inj_pow"><span class="id" title="lemma">Z2Nat.inj_pow</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#wp_insert_amortized"><span class="id" title="lemma">wp_insert_amortized</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$H $Herr']"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">iIntros</span> (<span class="id" title="var">retv</span>) "(%m'' &amp; H &amp; %Hmfound &amp; %Hsize'' &amp; %Hmsubset')".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HÎ¦".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.hash.html#coll_free"><span class="id" title="definition">coll_free</span></a> <span class="id" title="var">m''</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a>)%<span class="id" title="var">I</span> <span class="id" title="keyword">with</span> "[H]" <span class="id" title="keyword">as</span> "%".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized_implies_coll_free"><span class="id" title="lemma">coll_free_hashfun_amortized_implies_coll_free</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">m''</span>. <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> (<span class="id" title="var">iPureIntro</span>; <span class="id" title="var">etrans</span>; <span class="id" title="tactic">exact</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 (<span class="id" title="tactic">try</span> <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">iPureIntro</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">retv</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><span class="id" title="var">hash_value</span>) <span class="id" title="keyword">as</span> -&gt;. { <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj"><span class="id" title="lemma">Nat2Z.inj</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hlefthashneq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H30</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <span class="id" title="var">tree1</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <span class="id" title="var">tree2</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <span class="id" title="var">lefthash</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <span class="id" title="var">tree2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">helper</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#coll_free_lemma"><span class="id" title="lemma">coll_free_lemma</span></a> <span class="id" title="var">m''</span>); <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_weaken"><span class="id" title="lemma">lookup_weaken</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etrans</span>; <span class="id" title="tactic">exact</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#Nat.mul_split_l"><span class="id" title="lemma">Nat.mul_split_l</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">helper</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hsplit</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">H22</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hposs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">iPoseProof</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized_implies_bounded_range"><span class="id" title="lemma">coll_free_hashfun_amortized_implies_bounded_range</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$H][//]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[% %K]"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#hash_bound_manipulation"><span class="id" title="lemma">hash_bound_manipulation</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*left&nbsp;neq&nbsp;guess&nbsp;left&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#wp_compute_hash_from_leaf_size"><span class="id" title="lemma">wp_compute_hash_from_leaf_size</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$H $Herr]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">repeat</span> <span class="id" title="var">iSplit</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>; <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iIntros</span> (<span class="id" title="var">righthash</span>) "(%m' &amp; %Hmsubset &amp; H &amp; %Hmsize' &amp; %Hrighthashsize)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">*</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a><span class="id" title="var">_</span>)%<span class="id" title="var">Z</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<span class="id" title="var">hash</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <span class="id" title="var">righthash</span> )); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_add"><span class="id" title="lemma">Nat2Z.inj_add</span></a>. <span class="id" title="tactic">f_equal</span>; <span class="id" title="var">last</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_mul"><span class="id" title="lemma">Nat2Z.inj_mul</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#Z2Nat.inj_pow"><span class="id" title="lemma">Z2Nat.inj_pow</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#wp_insert_amortized"><span class="id" title="lemma">wp_insert_amortized</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$H $Herr']"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">iIntros</span> (<span class="id" title="var">retv</span>) "(%m'' &amp; H &amp; %Hmfound &amp; %Hsize'' &amp; %Hmsubset')".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HÎ¦".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.hash.html#coll_free"><span class="id" title="definition">coll_free</span></a> <span class="id" title="var">m''</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a>)%<span class="id" title="var">I</span> <span class="id" title="keyword">with</span> "[H]" <span class="id" title="keyword">as</span> "%".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized_implies_coll_free"><span class="id" title="lemma">coll_free_hashfun_amortized_implies_coll_free</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">m''</span>. <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> (<span class="id" title="var">iPureIntro</span>; <span class="id" title="var">etrans</span>; <span class="id" title="tactic">exact</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 (<span class="id" title="tactic">try</span> <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">iPureIntro</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">retv</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><span class="id" title="var">hash_value</span>) <span class="id" title="keyword">as</span> -&gt;. { <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj"><span class="id" title="lemma">Nat2Z.inj</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H30</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <span class="id" title="var">tree1</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <span class="id" title="var">tree2</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hash</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <span class="id" title="var">righthash</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">helper</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#coll_free_lemma"><span class="id" title="lemma">coll_free_lemma</span></a> <span class="id" title="var">m''</span>); <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_weaken"><span class="id" title="lemma">lookup_weaken</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etrans</span>; <span class="id" title="tactic">exact</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#Nat.mul_split_l"><span class="id" title="lemma">Nat.mul_split_l</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">helper</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hsplit</span> <span class="id" title="var">Hsplit'</span>]; <span class="id" title="tactic">subst</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">H22</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrighthashsize</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hrighthashsize</span> <span class="id" title="var">Hrighthashsize'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_lt"><span class="id" title="lemma">Nat2Z.inj_lt</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#Z2Nat.inj_pow"><span class="id" title="lemma">Z2Nat.inj_pow</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> 2) <span class="id" title="keyword">with</span> 2%<span class="id" title="var">Z</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Z2Nat.id"><span class="id" title="lemma">Z2Nat.id</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">iPoseProof</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized_implies_bounded_range"><span class="id" title="lemma">coll_free_hashfun_amortized_implies_bounded_range</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$H][//]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[% %K]"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#hash_bound_manipulation"><span class="id" title="lemma">hash_bound_manipulation</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*incorrect&nbsp;happens&nbsp;above&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"IH1" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[][][][][][][$H][$Herr]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iPureIntro</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iIntros</span> (<span class="id" title="var">righthash</span>) "(%m' &amp; %Hmsubset &amp; H &amp; %Hmsize' &amp; %Hrighthashneq &amp; %Hrighthashsize)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">*</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a><span class="id" title="var">_</span>)%<span class="id" title="var">Z</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<span class="id" title="var">hash</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <span class="id" title="var">righthash</span>)); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_add"><span class="id" title="lemma">Nat2Z.inj_add</span></a>. <span class="id" title="tactic">f_equal</span>; <span class="id" title="var">last</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_mul"><span class="id" title="lemma">Nat2Z.inj_mul</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#Z2Nat.inj_pow"><span class="id" title="lemma">Z2Nat.inj_pow</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#wp_insert_amortized"><span class="id" title="lemma">wp_insert_amortized</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$H $Herr']"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">iIntros</span> (<span class="id" title="var">retv</span>) "(%m'' &amp; H &amp; %Hmfound &amp; %Hsize'' &amp; %Hmsubset')".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HÎ¦".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.hash.html#coll_free"><span class="id" title="definition">coll_free</span></a> <span class="id" title="var">m''</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a>)%<span class="id" title="var">I</span> <span class="id" title="keyword">with</span> "[H]" <span class="id" title="keyword">as</span> "%".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized_implies_coll_free"><span class="id" title="lemma">coll_free_hashfun_amortized_implies_coll_free</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">m''</span>. <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> (<span class="id" title="var">iPureIntro</span>; <span class="id" title="var">etrans</span>; <span class="id" title="tactic">exact</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 (<span class="id" title="tactic">try</span> <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">iPureIntro</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">retv</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><span class="id" title="var">hash_value</span>) <span class="id" title="keyword">as</span> -&gt;. { <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj"><span class="id" title="lemma">Nat2Z.inj</span></a>. } <span class="id" title="tactic">apply</span> <span class="id" title="var">Hrighthashneq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H30</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <span class="id" title="var">tree1</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <span class="id" title="var">tree2</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <span class="id" title="var">tree1</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <span class="id" title="var">righthash</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">helper</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#coll_free_lemma"><span class="id" title="lemma">coll_free_lemma</span></a> <span class="id" title="var">m''</span>); <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_weaken"><span class="id" title="lemma">lookup_weaken</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etrans</span>; <span class="id" title="tactic">exact</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#Nat.mul_split_l"><span class="id" title="lemma">Nat.mul_split_l</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">helper</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hsplit</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">H22</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrighthashsize</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hrighthashsize</span> <span class="id" title="var">Hrighthashsize'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_lt"><span class="id" title="lemma">Nat2Z.inj_lt</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#Z2Nat.inj_pow"><span class="id" title="lemma">Z2Nat.inj_pow</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> 2) <span class="id" title="keyword">with</span> 2%<span class="id" title="var">Z</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Z2Nat.id"><span class="id" title="lemma">Z2Nat.id</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">iPoseProof</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized_implies_bounded_range"><span class="id" title="lemma">coll_free_hashfun_amortized_implies_bounded_range</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$H][//]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[% %K]"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#hash_bound_manipulation"><span class="id" title="lemma">hash_bound_manipulation</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="is_possible_proof_list" class="idref" href="#is_possible_proof_list"><span class="id" title="definition">is_possible_proof_list</span></a> <a id="proof:141" class="idref" href="#proof:141"><span class="id" title="binder">proof</span></a> <a id="lproof:142" class="idref" href="#lproof:142"><span class="id" title="binder">lproof</span></a> <a id="tree:143" class="idref" href="#tree:143"><span class="id" title="binder">tree</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.lib.list.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:141"><span class="id" title="variable">proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#lproof:142"><span class="id" title="variable">lproof</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#possible_proof"><span class="id" title="inductive">possible_proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:143"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:141"><span class="id" title="variable">proof</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="tree_leaf_proof_match" class="idref" href="#tree_leaf_proof_match"><span class="id" title="definition">tree_leaf_proof_match</span></a> <a id="tree:144" class="idref" href="#tree:144"><span class="id" title="binder">tree</span></a> <a id="proof:145" class="idref" href="#proof:145"><span class="id" title="binder">proof</span></a> <a id="v:146" class="idref" href="#v:146"><span class="id" title="binder">v</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#correct_proof"><span class="id" title="inductive">correct_proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:144"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:145"><span class="id" title="variable">proof</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_leaf_value_match"><span class="id" title="inductive">tree_leaf_value_match</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:144"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v:146"><span class="id" title="variable">v</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:145"><span class="id" title="variable">proof</span></a>.<br/>

<br/>
</div>

<div class="doc">
checker
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="incorrect_proof_or_leaf" class="idref" href="#incorrect_proof_or_leaf"><span class="id" title="definition">incorrect_proof_or_leaf</span></a> <a id="tree:147" class="idref" href="#tree:147"><span class="id" title="binder">tree</span></a> <a id="proof:148" class="idref" href="#proof:148"><span class="id" title="binder">proof</span></a> <a id="v:149" class="idref" href="#v:149"><span class="id" title="binder">v</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#incorrect_proof"><span class="id" title="inductive">incorrect_proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:147"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:148"><span class="id" title="variable">proof</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">â</span></a> <a id="v':150" class="idref" href="#v':150"><span class="id" title="binder">v'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_leaf_value_match"><span class="id" title="inductive">tree_leaf_value_match</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:147"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v':150"><span class="id" title="variable">v'</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:148"><span class="id" title="variable">proof</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v:149"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">â </span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v':150"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="merkle_tree_decider_program" class="idref" href="#merkle_tree_decider_program"><span class="id" title="definition">merkle_tree_decider_program</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">Î»</span></a><a class="idref" href="clutch.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">:</span></a> "correct_root_hash" "lhmf"<a class="idref" href="clutch.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#3d489cbe8f13619f2070e081d1ecd1f6"><span class="id" title="notation">Î»</span></a><a class="idref" href="clutch.prob_lang.notation.html#3d489cbe8f13619f2070e081d1ecd1f6"><span class="id" title="notation">:</span></a> "lproof" "lleaf"<a class="idref" href="clutch.prob_lang.notation.html#3d489cbe8f13619f2070e081d1ecd1f6"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"correct_root_hash" <a class="idref" href="clutch.prob_lang.notation.html#268bceb185e8402e5a254d7b9bacc674"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#compute_hash_from_leaf"><span class="id" title="definition">compute_hash_from_leaf</span></a> "lhmf" "lproof" "lleaf"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="decider_program_helper_spec" class="idref" href="#decider_program_helper_spec"><span class="id" title="definition">decider_program_helper_spec</span></a> (<a id="checker:151" class="idref" href="#checker:151"><span class="id" title="binder">checker</span></a>:<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) (<a id="tree:152" class="idref" href="#tree:152"><span class="id" title="binder">tree</span></a>:<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree"><span class="id" title="inductive">merkle_tree</span></a>) (<a id="f:153" class="idref" href="#f:153"><span class="id" title="binder">f</span></a>:<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#77f85321a566d9fc4459af4d64a73409"><span class="id" title="variable">Î£</span></a>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">â</span></a> <a id="lproof:154" class="idref" href="#lproof:154"><span class="id" title="binder">lproof</span></a> <a id="proof:155" class="idref" href="#proof:155"><span class="id" title="binder">proof</span></a> <a id="v:156" class="idref" href="#v:156"><span class="id" title="binder">v</span></a> <a id="m':157" class="idref" href="#m':157"><span class="id" title="binder">m'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">{{{</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid"><span class="id" title="inductive">tree_valid</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.height"><span class="id" title="variable">height</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:152"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m':157"><span class="id" title="variable">m'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized"><span class="id" title="definition">coll_free_hashfun_amortized</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a>)%<span class="id" title="var">nat</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#f:153"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m':157"><span class="id" title="variable">m'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#is_possible_proof_list"><span class="id" title="definition">is_possible_proof_list</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:155"><span class="id" title="variable">proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#lproof:154"><span class="id" title="variable">lproof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:152"><span class="id" title="variable">tree</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#size"><span class="id" title="definition">size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m':157"><span class="id" title="variable">m'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.height"><span class="id" title="variable">height</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">â¯</span></a> <a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prelude.NNRbar.html#nnreal_nat"><span class="id" title="definition">nnreal_nat</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.height"><span class="id" title="variable">height</span></a>) <a class="idref" href="clutch.prelude.NNRbar.html#1bc6a42bff0f67d6034bb210662be20d"><span class="id" title="notation">*</span></a> <a class="idref" href="clutch.eris.examples.hash.html#amortized_error"><span class="id" title="definition">amortized_error</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a>)%<span class="id" title="var">nat</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size_pos"><span class="id" title="variable">max_hash_size_pos</span></a><a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">)</span></a>%<span class="id" title="var">NNR</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#checker:151"><span class="id" title="variable">checker</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#lproof:154"><span class="id" title="variable">lproof</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v:156"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">{{{</span></a> <a class="idref" href="clutch.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">(</span></a><a id="b:158" class="idref" href="#b:158"><span class="id" title="binder">b</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><a class="idref" href="clutch.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">),</span></a> <a class="idref" href="clutch.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">RET</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#b:158"><span class="id" title="variable">b</span></a><a class="idref" href="clutch.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#b:158"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_leaf_proof_match"><span class="id" title="definition">tree_leaf_proof_match</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:152"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:155"><span class="id" title="variable">proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v:156"><span class="id" title="variable">v</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized"><span class="id" title="definition">coll_free_hashfun_amortized</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a>) <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#f:153"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m':157"><span class="id" title="variable">m'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">â¯</span></a> <a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prelude.NNRbar.html#nnreal_nat"><span class="id" title="definition">nnreal_nat</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.height"><span class="id" title="variable">height</span></a>) <a class="idref" href="clutch.prelude.NNRbar.html#1bc6a42bff0f67d6034bb210662be20d"><span class="id" title="notation">*</span></a> <a class="idref" href="clutch.eris.examples.hash.html#amortized_error"><span class="id" title="definition">amortized_error</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a>)%<span class="id" title="var">nat</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size_pos"><span class="id" title="variable">max_hash_size_pos</span></a><a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">)</span></a>%<span class="id" title="var">NNR</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#incorrect_proof_or_leaf"><span class="id" title="definition">incorrect_proof_or_leaf</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:152"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:155"><span class="id" title="variable">proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#v:156"><span class="id" title="variable">v</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">â</span></a> <a id="m'':159" class="idref" href="#m'':159"><span class="id" title="binder">m''</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m':157"><span class="id" title="variable">m'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">â</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m'':159"><span class="id" title="variable">m''</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized"><span class="id" title="definition">coll_free_hashfun_amortized</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a>) <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#f:153"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m'':159"><span class="id" title="variable">m''</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#size"><span class="id" title="definition">size</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m'':159"><span class="id" title="variable">m''</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#size"><span class="id" title="definition">size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m':157"><span class="id" title="variable">m'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.height"><span class="id" title="variable">height</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">}}}</span></a> )%<span class="id" title="var">I</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="merkle_tree_decider_program_spec" class="idref" href="#merkle_tree_decider_program_spec"><span class="id" title="lemma">merkle_tree_decider_program_spec</span></a> <a id="tree:160" class="idref" href="#tree:160"><span class="id" title="binder">tree</span></a> (<a id="m:161" class="idref" href="#m:161"><span class="id" title="binder">m</span></a>:<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gmap"><span class="id" title="record">gmap</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="f:162" class="idref" href="#f:162"><span class="id" title="binder">f</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">{{{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid"><span class="id" title="inductive">tree_valid</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.height"><span class="id" title="variable">height</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:160"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:161"><span class="id" title="variable">m</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">â</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized"><span class="id" title="definition">coll_free_hashfun_amortized</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a>)%<span class="id" title="var">nat</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#f:162"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:161"><span class="id" title="variable">m</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">}}}</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree_decider_program"><span class="id" title="definition">merkle_tree_decider_program</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:160"><span class="id" title="variable">tree</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#f:162"><span class="id" title="variable">f</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">{{{</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">(</span></a><a id="checker:163" class="idref" href="#checker:163"><span class="id" title="binder">checker</span></a>:<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a><a class="idref" href="clutch.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">),</span></a> <a class="idref" href="clutch.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">RET</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#checker:163"><span class="id" title="variable">checker</span></a><a class="idref" href="clutch.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.hash.html#coll_free_hashfun_amortized"><span class="id" title="definition">coll_free_hashfun_amortized</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_size_for_hash"><span class="id" title="definition">val_size_for_hash</span></a>)%<span class="id" title="var">nat</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree.max_hash_size"><span class="id" title="variable">max_hash_size</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#f:162"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:161"><span class="id" title="variable">m</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">â</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#decider_program_helper_spec"><span class="id" title="definition">decider_program_helper_spec</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#checker:163"><span class="id" title="variable">checker</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:160"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#f:162"><span class="id" title="variable">f</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Î¦</span>) "(%Htvalid &amp; H) IH".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree_decider_program"><span class="id" title="definition">merkle_tree_decider_program</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "IH". <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?????) "!&gt; (%&amp;H&amp;[%%]&amp;%&amp;Herr) HÎ¦".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#possible_proof_implies_exists_leaf"><span class="id" title="lemma">possible_proof_implies_exists_leaf</span></a> <span class="id" title="var">tree</span> <span class="id" title="var">proof</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v'</span> ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><span class="id" title="var">v'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#correct_proof"><span class="id" title="inductive">correct_proof</span></a> <span class="id" title="var">tree</span> <span class="id" title="var">proof</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">K</span>|<span class="id" title="var">K</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#wp_compute_hash_from_leaf_correct"><span class="id" title="lemma">wp_compute_hash_from_leaf_correct</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$H]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">repeat</span> <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>; <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iIntros</span> (?) "(H&amp;%)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">case_bool_decide</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iApply</span> "HÎ¦". <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof_not_correct_implies_incorrect"><span class="id" title="lemma">proof_not_correct_implies_incorrect</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">K</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#wp_compute_hash_from_leaf_incorrect_proof"><span class="id" title="lemma">wp_compute_hash_from_leaf_incorrect_proof</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$H $Herr]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">repeat</span> <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>; <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iIntros</span> (?) "(%&amp;%&amp;H&amp;%&amp;%&amp;%&amp;%)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_false_2"><span class="id" title="lemma">bool_decide_eq_false_2</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">K'</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">K'</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>; <span class="id" title="var">iApply</span> "HÎ¦".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">left</span>. <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#wp_compute_hash_from_leaf_incorrect"><span class="id" title="lemma">wp_compute_hash_from_leaf_incorrect</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$H $Herr]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">repeat</span> <span class="id" title="var">iSplit</span>; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iIntros</span> (?) "(%&amp;%&amp;H&amp;%&amp;%&amp;%&amp;%)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_false_2"><span class="id" title="lemma">bool_decide_eq_false_2</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">K</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">K</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iApply</span> "HÎ¦".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eexists</span> <span class="id" title="var">_</span>; <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">repeat</span> <span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Useful predicates 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="proof_idx_relate" class="idref" href="#proof_idx_relate"><span class="id" title="definition, inductive"><span id="proof_idx_relate_ind" class="id"><span id="proof_idx_relate_sind" class="id">proof_idx_relate</span></span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a id="proof_idx_relate_lf" class="idref" href="#proof_idx_relate_lf"><span class="id" title="constructor">proof_idx_relate_lf</span></a>: <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof_idx_relate:164"><span class="id" title="inductive">proof_idx_relate</span></a> 0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> 0<br/>
&nbsp;&nbsp;| <a id="proof_idx_relate_left" class="idref" href="#proof_idx_relate_left"><span class="id" title="constructor">proof_idx_relate_left</span></a> <a id="idx:166" class="idref" href="#idx:166"><span class="id" title="binder">idx</span></a> <a id="n:167" class="idref" href="#n:167"><span class="id" title="binder">n</span></a> <a id="rhash:168" class="idref" href="#rhash:168"><span class="id" title="binder">rhash</span></a> <a id="proof:169" class="idref" href="#proof:169"><span class="id" title="binder">proof</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof_idx_relate:164"><span class="id" title="inductive">proof_idx_relate</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#n:167"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:169"><span class="id" title="variable">proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#idx:166"><span class="id" title="variable">idx</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#idx:166"><span class="id" title="variable">idx</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> 2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#n:167"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof_idx_relate:164"><span class="id" title="inductive">proof_idx_relate</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#n:167"><span class="id" title="variable">n</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#rhash:168"><span class="id" title="variable">rhash</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:169"><span class="id" title="variable">proof</span></a>) <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#idx:166"><span class="id" title="variable">idx</span></a><br/>
&nbsp;&nbsp;| <a id="proof_idx_relate_right" class="idref" href="#proof_idx_relate_right"><span class="id" title="constructor">proof_idx_relate_right</span></a> <a id="idx:170" class="idref" href="#idx:170"><span class="id" title="binder">idx</span></a> <a id="n:171" class="idref" href="#n:171"><span class="id" title="binder">n</span></a> <a id="lhash:172" class="idref" href="#lhash:172"><span class="id" title="binder">lhash</span></a> <a id="proof:173" class="idref" href="#proof:173"><span class="id" title="binder">proof</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof_idx_relate:164"><span class="id" title="inductive">proof_idx_relate</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#n:171"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:173"><span class="id" title="variable">proof</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#idx:170"><span class="id" title="variable">idx</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#n:171"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#n:171"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#idx:170"><span class="id" title="variable">idx</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof_idx_relate:164"><span class="id" title="inductive">proof_idx_relate</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#n:171"><span class="id" title="variable">n</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#lhash:172"><span class="id" title="variable">lhash</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:173"><span class="id" title="variable">proof</span></a>) <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#idx:170"><span class="id" title="variable">idx</span></a><br/>
&nbsp;&nbsp;.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="proof_idx_relate_implies_possible_proof" class="idref" href="#proof_idx_relate_implies_possible_proof"><span class="id" title="lemma">proof_idx_relate_implies_possible_proof</span></a> <a id="tree:174" class="idref" href="#tree:174"><span class="id" title="binder">tree</span></a> <a id="proof:175" class="idref" href="#proof:175"><span class="id" title="binder">proof</span></a> <a id="h:176" class="idref" href="#h:176"><span class="id" title="binder">h</span></a> <a id="idx:177" class="idref" href="#idx:177"><span class="id" title="binder">idx</span></a> <a id="m:178" class="idref" href="#m:178"><span class="id" title="binder">m</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid"><span class="id" title="inductive">tree_valid</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:176"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:174"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:178"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof_idx_relate"><span class="id" title="inductive">proof_idx_relate</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:176"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:175"><span class="id" title="variable">proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#idx:177"><span class="id" title="variable">idx</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">Î»</span></a> <a id="x:179" class="idref" href="#x:179"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#x:179"><span class="id" title="variable">x</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#:::x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a>) <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:175"><span class="id" title="variable">proof</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#possible_proof"><span class="id" title="inductive">possible_proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:174"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:175"><span class="id" title="variable">proof</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">tree</span> <span class="id" title="var">proof</span> <span class="id" title="var">idx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">h</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">h</span> <span class="id" title="var">IHheight</span>]; <span class="id" title="tactic">intros</span> <span class="id" title="var">tree</span> <span class="id" title="var">proof</span> <span class="id" title="var">idx</span> <span class="id" title="var">Htvalid</span> <span class="id" title="var">Hrelate</span> <span class="id" title="var">Hforall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hrelate</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htvalid</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htvalid</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hrelate</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHheight</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#Forall_inv_tail"><span class="id" title="lemma">Forall_inv_tail</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#Forall_inv"><span class="id" title="lemma">Forall_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hforall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHheight</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#Forall_inv_tail"><span class="id" title="lemma">Forall_inv_tail</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#Forall_inv"><span class="id" title="lemma">Forall_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hforall</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="tree_leaf_list" class="idref" href="#tree_leaf_list"><span class="id" title="definition, inductive"><span id="tree_leaf_list_ind" class="id"><span id="tree_leaf_list_sind" class="id">tree_leaf_list</span></span></span></a>: <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree"><span class="id" title="inductive">merkle_tree</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a id="tree_leaf_list_lf" class="idref" href="#tree_leaf_list_lf"><span class="id" title="constructor">tree_leaf_list_lf</span></a> <a id="h:182" class="idref" href="#h:182"><span class="id" title="binder">h</span></a> <a id="lf:183" class="idref" href="#lf:183"><span class="id" title="binder">lf</span></a>: <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_leaf_list:180"><span class="id" title="inductive">tree_leaf_list</span></a> 0 (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#Leaf"><span class="id" title="constructor">Leaf</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:182"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#lf:183"><span class="id" title="variable">lf</span></a>) (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#lf:183"><span class="id" title="variable">lf</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)<br/>
&nbsp;&nbsp;| <a id="tree_leaf_list_br" class="idref" href="#tree_leaf_list_br"><span class="id" title="constructor">tree_leaf_list_br</span></a> <a id="n:184" class="idref" href="#n:184"><span class="id" title="binder">n</span></a> <a id="a:185" class="idref" href="#a:185"><span class="id" title="binder">a</span></a> <a id="alist:186" class="idref" href="#alist:186"><span class="id" title="binder">alist</span></a> <a id="b:187" class="idref" href="#b:187"><span class="id" title="binder">b</span></a> <a id="blist:188" class="idref" href="#blist:188"><span class="id" title="binder">blist</span></a> <a id="h:189" class="idref" href="#h:189"><span class="id" title="binder">h</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_leaf_list:180"><span class="id" title="inductive">tree_leaf_list</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#n:184"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#a:185"><span class="id" title="variable">a</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#alist:186"><span class="id" title="variable">alist</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_leaf_list:180"><span class="id" title="inductive">tree_leaf_list</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#n:184"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#b:187"><span class="id" title="variable">b</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#blist:188"><span class="id" title="variable">blist</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_leaf_list:180"><span class="id" title="inductive">tree_leaf_list</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#n:184"><span class="id" title="variable">n</span></a>) (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#Branch"><span class="id" title="constructor">Branch</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:189"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#a:185"><span class="id" title="variable">a</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#b:187"><span class="id" title="variable">b</span></a>) (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#alist:186"><span class="id" title="variable">alist</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#blist:188"><span class="id" title="variable">blist</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="tree_valid_with_leaf_list" class="idref" href="#tree_valid_with_leaf_list"><span class="id" title="definition">tree_valid_with_leaf_list</span></a> <a id="height:190" class="idref" href="#height:190"><span class="id" title="binder">height</span></a> <a id="tree:191" class="idref" href="#tree:191"><span class="id" title="binder">tree</span></a> <a id="list:192" class="idref" href="#list:192"><span class="id" title="binder">list</span></a> <a id="m:193" class="idref" href="#m:193"><span class="id" title="binder">m</span></a>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_leaf_list"><span class="id" title="inductive">tree_leaf_list</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#height:190"><span class="id" title="variable">height</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:191"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#list:192"><span class="id" title="variable">list</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid"><span class="id" title="inductive">tree_valid</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#height:190"><span class="id" title="variable">height</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:191"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:193"><span class="id" title="variable">m</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tree_valid_with_leaf_list_implies_tree_leaf_list" class="idref" href="#tree_valid_with_leaf_list_implies_tree_leaf_list"><span class="id" title="lemma">tree_valid_with_leaf_list_implies_tree_leaf_list</span></a> <a id="h:194" class="idref" href="#h:194"><span class="id" title="binder">h</span></a> <a id="tree:195" class="idref" href="#tree:195"><span class="id" title="binder">tree</span></a> <a id="list:196" class="idref" href="#list:196"><span class="id" title="binder">list</span></a> <a id="m:197" class="idref" href="#m:197"><span class="id" title="binder">m</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid_with_leaf_list"><span class="id" title="definition">tree_valid_with_leaf_list</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:194"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:195"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#list:196"><span class="id" title="variable">list</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:197"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_leaf_list"><span class="id" title="inductive">tree_leaf_list</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:194"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:195"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#list:196"><span class="id" title="variable">list</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> [].<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tree_valid_with_leaf_list_implies_tree_valid" class="idref" href="#tree_valid_with_leaf_list_implies_tree_valid"><span class="id" title="lemma">tree_valid_with_leaf_list_implies_tree_valid</span></a> <a id="h:198" class="idref" href="#h:198"><span class="id" title="binder">h</span></a> <a id="tree:199" class="idref" href="#tree:199"><span class="id" title="binder">tree</span></a> <a id="list:200" class="idref" href="#list:200"><span class="id" title="binder">list</span></a> <a id="m:201" class="idref" href="#m:201"><span class="id" title="binder">m</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid_with_leaf_list"><span class="id" title="definition">tree_valid_with_leaf_list</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:198"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:199"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#list:200"><span class="id" title="variable">list</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:201"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid"><span class="id" title="inductive">tree_valid</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:198"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:199"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:201"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> [].<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tree_valid_with_leaf_list_br" class="idref" href="#tree_valid_with_leaf_list_br"><span class="id" title="lemma">tree_valid_with_leaf_list_br</span></a> <a id="h:202" class="idref" href="#h:202"><span class="id" title="binder">h</span></a> <a id="treea:203" class="idref" href="#treea:203"><span class="id" title="binder">treea</span></a> <a id="l1:204" class="idref" href="#l1:204"><span class="id" title="binder">l1</span></a> (<a id="m:205" class="idref" href="#m:205"><span class="id" title="binder">m</span></a>:<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gmap"><span class="id" title="record">gmap</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="treeb:206" class="idref" href="#treeb:206"><span class="id" title="binder">treeb</span></a> <a id="l2:207" class="idref" href="#l2:207"><span class="id" title="binder">l2</span></a> <a id="hash:208" class="idref" href="#hash:208"><span class="id" title="binder">hash</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#hash:208"><span class="id" title="variable">hash</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:205"><span class="id" title="variable">m</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#treea:203"><span class="id" title="variable">treea</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#val_bit_size"><span class="id" title="definition">val_bit_size</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#root_hash_value"><span class="id" title="definition">root_hash_value</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#treeb:206"><span class="id" title="variable">treeb</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#hash:208"><span class="id" title="variable">hash</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid_with_leaf_list"><span class="id" title="definition">tree_valid_with_leaf_list</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:202"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#treea:203"><span class="id" title="variable">treea</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#l1:204"><span class="id" title="variable">l1</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:205"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid_with_leaf_list"><span class="id" title="definition">tree_valid_with_leaf_list</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:202"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#treeb:206"><span class="id" title="variable">treeb</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#l2:207"><span class="id" title="variable">l2</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:205"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid_with_leaf_list"><span class="id" title="definition">tree_valid_with_leaf_list</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:202"><span class="id" title="variable">h</span></a>) (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#Branch"><span class="id" title="constructor">Branch</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#hash:208"><span class="id" title="variable">hash</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#treea:203"><span class="id" title="variable">treea</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#treeb:206"><span class="id" title="variable">treeb</span></a>) (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#l1:204"><span class="id" title="variable">l1</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#l2:207"><span class="id" title="variable">l2</span></a>) <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:205"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ?[??] [??]. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tree_valid_with_leaf_list_superset" class="idref" href="#tree_valid_with_leaf_list_superset"><span class="id" title="lemma">tree_valid_with_leaf_list_superset</span></a> <a id="m:209" class="idref" href="#m:209"><span class="id" title="binder">m</span></a> <a id="m':210" class="idref" href="#m':210"><span class="id" title="binder">m'</span></a> <a id="h:211" class="idref" href="#h:211"><span class="id" title="binder">h</span></a> <a id="tree:212" class="idref" href="#tree:212"><span class="id" title="binder">tree</span></a> <a id="l:213" class="idref" href="#l:213"><span class="id" title="binder">l</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:209"><span class="id" title="variable">m</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">â</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m':210"><span class="id" title="variable">m'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid_with_leaf_list"><span class="id" title="definition">tree_valid_with_leaf_list</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:211"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:212"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#l:213"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:209"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid_with_leaf_list"><span class="id" title="definition">tree_valid_with_leaf_list</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:211"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:212"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#l:213"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m':210"><span class="id" title="variable">m'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? [??]. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid_superset"><span class="id" title="lemma">tree_valid_superset</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tree_valid_with_leaf_list_length" class="idref" href="#tree_valid_with_leaf_list_length"><span class="id" title="lemma">tree_valid_with_leaf_list_length</span></a> <a id="n:214" class="idref" href="#n:214"><span class="id" title="binder">n</span></a> <a id="tree:215" class="idref" href="#tree:215"><span class="id" title="binder">tree</span></a> <a id="lis:216" class="idref" href="#lis:216"><span class="id" title="binder">lis</span></a> <a id="m:217" class="idref" href="#m:217"><span class="id" title="binder">m</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid_with_leaf_list"><span class="id" title="definition">tree_valid_with_leaf_list</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#n:214"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:215"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#lis:216"><span class="id" title="variable">lis</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:217"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#lis:216"><span class="id" title="variable">lis</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#n:214"><span class="id" title="variable">n</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hlist</span> <span class="id" title="var">_</span>]. <span class="id" title="var">revert</span> <span class="id" title="var">Hlist</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">tree</span> <span class="id" title="var">lis</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">tree</span> <span class="id" title="var">lis</span> <span class="id" title="var">Hlist</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlist</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlist</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">erewrite</span> !<span class="id" title="var">IHn</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tree_valid_with_leaf_list_implies_lookup_some" class="idref" href="#tree_valid_with_leaf_list_implies_lookup_some"><span class="id" title="lemma">tree_valid_with_leaf_list_implies_lookup_some</span></a> <a id="lis:218" class="idref" href="#lis:218"><span class="id" title="binder">lis</span></a> <a id="tree:219" class="idref" href="#tree:219"><span class="id" title="binder">tree</span></a> <a id="h:220" class="idref" href="#h:220"><span class="id" title="binder">h</span></a> <a id="proof:221" class="idref" href="#proof:221"><span class="id" title="binder">proof</span></a> <a id="idx:222" class="idref" href="#idx:222"><span class="id" title="binder">idx</span></a> <a id="leafv:223" class="idref" href="#leafv:223"><span class="id" title="binder">leafv</span></a> <a id="m:224" class="idref" href="#m:224"><span class="id" title="binder">m</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid_with_leaf_list"><span class="id" title="definition">tree_valid_with_leaf_list</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:220"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:219"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#lis:218"><span class="id" title="variable">lis</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#m:224"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof_idx_relate"><span class="id" title="inductive">proof_idx_relate</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#h:220"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:221"><span class="id" title="variable">proof</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#idx:222"><span class="id" title="variable">idx</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_leaf_value_match"><span class="id" title="inductive">tree_leaf_value_match</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree:219"><span class="id" title="variable">tree</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#leafv:223"><span class="id" title="variable">leafv</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#proof:221"><span class="id" title="variable">proof</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#lis:218"><span class="id" title="variable">lis</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#idx:222"><span class="id" title="variable">idx</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#leafv:223"><span class="id" title="variable">leafv</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">lis</span> <span class="id" title="var">tree</span> <span class="id" title="var">proof</span> <span class="id" title="var">idx</span> <span class="id" title="var">leafv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">h</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">h</span> <span class="id" title="var">IHheight</span>]; <span class="id" title="tactic">intros</span> <span class="id" title="var">lis</span> <span class="id" title="var">tree</span> <span class="id" title="var">proof</span> <span class="id" title="var">idx</span> <span class="id" title="var">leafv</span> [<span class="id" title="var">Hlist</span> <span class="id" title="var">Hvalid</span>] <span class="id" title="var">Hrelate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">Hmatch</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hrelate</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hmatch</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlist</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">Hfound</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hrelate</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlist</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfound</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hfound</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">Hmatch</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hrelate</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hrelate</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hmatch</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlist</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hvalid</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H15</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H22</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">alist</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a><span class="id" title="var">h</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid_with_leaf_list_length"><span class="id" title="lemma">tree_valid_with_leaf_list_length</span></a>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#lookup_app_l"><span class="id" title="lemma">lookup_app_l</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">IHheight</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hrelate</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hmatch</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlist</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hvalid</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H15</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H22</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">alist</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a><span class="id" title="var">h</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">K</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid_with_leaf_list_length"><span class="id" title="lemma">tree_valid_with_leaf_list_length</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#lookup_app_r"><span class="id" title="lemma">lookup_app_r</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">K</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">IHheight</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">Hfound</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#tree_valid_with_leaf_list_length"><span class="id" title="lemma">tree_valid_with_leaf_list_length</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hlen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hrelate</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlist</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hvalid</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H14</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHheight</span>; [|<span class="id" title="var">done</span>|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;-<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#lookup_app_l"><span class="id" title="lemma">lookup_app_l</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">erewrite</span> <span class="id" title="var">Hlen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H14</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHheight</span>; [|<span class="id" title="var">done</span>|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;-<span class="id" title="var">Hlen</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">erewrite</span> &lt;-<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#lookup_app_r"><span class="id" title="lemma">lookup_app_r</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">erewrite</span> <span class="id" title="var">Hlen</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="clutch.eris.examples.merkle.merkle_tree.html#merkle_tree"><span class="id" title="section">merkle_tree</span></a>.<br/>

<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/coq-community/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
