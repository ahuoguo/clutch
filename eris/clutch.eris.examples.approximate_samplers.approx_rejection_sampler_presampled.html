<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resources/config.js"></script>
<script type="text/javascript" src="resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/logsem/clutch">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">clutch.eris.examples.approximate_samplers.approx_rejection_sampler_presampled</h1>

<div class="code">
</div>

<div class="doc">
<a id="lab39"></a><h1 class="section">Examples related to rejection samplers with a bounded number of attempts</h1>

</div>
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch.eris</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="clutch.eris.eris.html#"><span class="id" title="library">eris</span></a> <a class="idref" href="clutch.eris.error_rules.html#"><span class="id" title="library">error_rules</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch.eris</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#"><span class="id" title="library">examples.approximate_samplers.approx_sampler_lib</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coquelicot</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coquelicot.saclay.inria.fr/html//Coquelicot.Series.html#"><span class="id" title="library">Series</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.micromega.Lra.html#"><span class="id" title="library">Lra</span></a>.<br/>

<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Default</span> <span class="id" title="keyword">Proof</span> <span class="id" title="var">Using</span> "Type*".<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="presampled_flip2" class="idref" href="#presampled_flip2"><span class="id" title="section">presampled_flip2</span></a>.<br/>
</div>

<div class="doc">
Demonstration of using the planner rule instead of the higher-order spec  This proof is fairly idiomatic Iris and does not need to do manual credit accounting 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="erisGS0:2" class="idref" href="#erisGS0:2"><span class="id" title="binder">!</span></a><a id="erisGS0:2" class="idref" href="#erisGS0:2"><span class="id" title="binder">erisGS</span></a> <a id="0101b9beac487b383a5ba2a8f6922788" class="idref" href="#0101b9beac487b383a5ba2a8f6922788"><span class="id" title="binder"><span id="erisGS0:2" class="id">Σ</span></span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tapes_flip2_safe" class="idref" href="#tapes_flip2_safe"><span class="id" title="lemma">tapes_flip2_safe</span></a> (<a id="506788ceeff1a2fff9c4bdffc2ebf42b" class="idref" href="#506788ceeff1a2fff9c4bdffc2ebf42b"><span class="id" title="binder">ε</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#nonnegreal"><span class="id" title="record">nonnegreal</span></a>) <a id="E:4" class="idref" href="#E:4"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_rejection_sampler_presampled.html#506788ceeff1a2fff9c4bdffc2ebf42b"><span class="id" title="variable">ε</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="clutch.eris.error_credits.html#08e29de66e639a50320709004a6b0ae4"><span class="id" title="notation">↯</span></a><a class="idref" href="clutch.eris.examples.approximate_samplers.approx_rejection_sampler_presampled.html#506788ceeff1a2fff9c4bdffc2ebf42b"><span class="id" title="variable">ε</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#4465c01284a6dbd7c946837789ab53bf"><span class="id" title="notation">WP</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "α" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#alloc"><span class="id" title="abbreviation">alloc</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.succ"><span class="id" title="definition">Z.succ</span></a> 0<a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.eris.examples.approximate_samplers.approx_sampler_lib.html#gen_rejection_sampler"><span class="id" title="definition">gen_rejection_sampler</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">:</span></a> "_"<a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Pair"><span class="id" title="constructor">Pair</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">rand</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">(</span></a>"α"<a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">)</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1) (<a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">rand</span></a><a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">(</span></a>"α"<a class="idref" href="clutch.prob_lang.notation.html#0eb1fe004f051d5e37e7bedb1eca7375"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">:</span></a> "sample"<a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#268bceb185e8402e5a254d7b9bacc674"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Fst"><span class="id" title="constructor">Fst</span></a> "sample"<a class="idref" href="clutch.prob_lang.notation.html#268bceb185e8402e5a254d7b9bacc674"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#268bceb185e8402e5a254d7b9bacc674"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#268bceb185e8402e5a254d7b9bacc674"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Snd"><span class="id" title="constructor">Snd</span></a> "sample"<a class="idref" href="clutch.prob_lang.notation.html#268bceb185e8402e5a254d7b9bacc674"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#268bceb185e8402e5a254d7b9bacc674"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a><a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.bi.weakestpre.html#4465c01284a6dbd7c946837789ab53bf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_rejection_sampler_presampled.html#E:4"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.bi.weakestpre.html#4465c01284a6dbd7c946837789ab53bf"><span class="id" title="notation">[{</span></a> <a id="v:5" class="idref" href="#v:5"><span class="id" title="binder">v</span></a><a class="idref" href="clutch.bi.weakestpre.html#4465c01284a6dbd7c946837789ab53bf"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_rejection_sampler_presampled.html#v:5"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1%<span class="id" title="var">Z</span><a class="idref" href="clutch.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1%<span class="id" title="var">Z</span><a class="idref" href="clutch.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)</span></a>%<span class="id" title="var">V</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="clutch.bi.weakestpre.html#4465c01284a6dbd7c946837789ab53bf"><span class="id" title="notation">}]</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "Hcr".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_bind</span> (<a class="idref" href="clutch.prob_lang.notation.html#alloc"><span class="id" title="abbreviation">alloc</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">I</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> (<a class="idref" href="clutch.eris.total_primitive_laws.html#twp_alloc_tape"><span class="id" title="lemma">twp_alloc_tape</span></a>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">α</span>) "Hα".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Z2Nat.inj_succ"><span class="id" title="lemma">Z2Nat.inj_succ</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> (<a class="idref" href="clutch.eris.error_rules.html#twp_presample_planner_aligned"><span class="id" title="lemma">twp_presample_planner_aligned</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a>1%<span class="id" title="var">fin</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> 1%<span class="id" title="var">fin</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a>); <span class="id" title="tactic">auto</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "[%junk Hα] /=".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">flip2_junk_inv</span> <a id="k:6" class="idref" href="#k:6"><span class="id" title="binder"><span id="k:8" class="id">k</span></span></a> <a id="s:7" class="idref" href="#s:7"><span class="id" title="binder"><span id="s:9" class="id">s</span></span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_rejection_sampler_presampled.html#b8a947f4eb1fe446bc769eac9aa99926"><span class="id" title="variable">Σ</span></a> := (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="j:10" class="idref" href="#j:10"><span class="id" title="binder">j</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <span class="id" title="var">α</span> <a class="idref" href="clutch.eris.primitive_laws.html#52c0998123349fcc3e1f8d05ae50419f"><span class="id" title="notation">↪</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> 0)<a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_rejection_sampler_presampled.html#j:10"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_rejection_sampler_presampled.html#s:9"><span class="id" title="variable">s</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_rejection_sampler_presampled.html#j:10"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_rejection_sampler_presampled.html#k:8"><span class="id" title="variable">k</span></a>)%<span class="id" title="var">nat</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a>)%<span class="id" title="var">I</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<span class="id" title="var">flip2_junk_inv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> (<span class="id" title="var">junk</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="clutch.eris.error_rules.html#block_pad"><span class="id" title="definition">block_pad</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> 0) 2 <span class="id" title="var">junk</span>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#6ee8efadebadf826566875157ca1aa60"><span class="id" title="notation">`</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#6ee8efadebadf826566875157ca1aa60"><span class="id" title="notation">div</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#6ee8efadebadf826566875157ca1aa60"><span class="id" title="notation">`</span></a> 2) <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> "[Hα]" <span class="id" title="keyword">as</span> "Hinv".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">flip2_junk_inv</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>; <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#Nat.Div0.div_exact"><span class="id" title="lemma">Nat.Div0.div_exact</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="clutch.eris.error_rules.html#blocks_aligned"><span class="id" title="lemma">blocks_aligned</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> 0%<span class="id" title="var">nat</span>) 2%<span class="id" title="var">nat</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 11 <span class="id" title="var">wp_pure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> (<span class="id" title="var">junk</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="clutch.eris.error_rules.html#block_pad"><span class="id" title="definition">block_pad</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> 0) 2 <span class="id" title="var">junk</span>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#6ee8efadebadf826566875157ca1aa60"><span class="id" title="notation">`</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#6ee8efadebadf826566875157ca1aa60"><span class="id" title="notation">div</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.numbers.html#6ee8efadebadf826566875157ca1aa60"><span class="id" title="notation">`</span></a> 2) <span class="id" title="keyword">as</span> [|<span class="id" title="var">k'</span>] "IH".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">flip2_junk_inv</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hinv" <span class="id" title="keyword">as</span> "[%j (Hα &amp; %Hl)] /=".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#nil_length_inv"><span class="id" title="lemma">nil_length_inv</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hl</span>) /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_bind</span> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Rand"><span class="id" title="constructor">Rand</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.total_primitive_laws.html#twp_rand_tape"><span class="id" title="lemma">twp_rand_tape</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hα"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="var">iIntros</span> "Hα".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_bind</span> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Rand"><span class="id" title="constructor">Rand</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.total_primitive_laws.html#twp_rand_tape"><span class="id" title="lemma">twp_rand_tape</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hα"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="var">iIntros</span> "Hα".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">flip2_junk_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hinv" <span class="id" title="keyword">as</span> "[%j (Hα &amp; %Hl)] /=".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#Nat.mul_succ_r"><span class="id" title="lemma">Nat.mul_succ_r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">j</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">s0</span> <span class="id" title="var">j0</span>]. { <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>. <span class="id" title="var">exfalso</span>; <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">j0</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">s1</span> <span class="id" title="var">j'</span>]. { <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>. <span class="id" title="var">exfalso</span>; <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_bind</span> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Rand"><span class="id" title="constructor">Rand</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.total_primitive_laws.html#twp_rand_tape"><span class="id" title="lemma">twp_rand_tape</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hα"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="var">iIntros</span> "Hα".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_bind</span> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Rand"><span class="id" title="constructor">Rand</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.eris.total_primitive_laws.html#twp_rand_tape"><span class="id" title="lemma">twp_rand_tape</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hα"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="var">iIntros</span> "Hα".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSpecialize</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"IH" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[Hα]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>; <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#cons_length"><span class="id" title="definition">cons_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>. <span class="id" title="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>; [<span class="id" title="var">wp_pures</span>; <span class="id" title="var">case_bool_decide</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">wp_pures</span>. <span class="id" title="var">iModIntro</span>; <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">wp_pure</span>. <span class="id" title="var">iApply</span> "IH".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">do</span> 2 <span class="id" title="var">wp_pure</span>; <span class="id" title="var">iApply</span> "IH".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="clutch.eris.examples.approximate_samplers.approx_rejection_sampler_presampled.html#presampled_flip2"><span class="id" title="section">presampled_flip2</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/coq-community/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
