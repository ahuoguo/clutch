<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resources/config.js"></script>
<script type="text/javascript" src="resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/logsem/clutch">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">tachis.tachis.proofmode</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.proofmode</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.coq_tactics.html#"><span class="id" title="library">coq_tactics</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.reduction.html#"><span class="id" title="library">reduction</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.spec_patterns.html#"><span class="id" title="library">spec_patterns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.intro_patterns.html#"><span class="id" title="library">intro_patterns</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.proofmode</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.tactics.html#"><span class="id" title="library">tactics</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">tachis.prob_lang</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="tachis.prob_lang.lang.html#"><span class="id" title="library">lang</span></a> <a class="idref" href="tachis.prob_lang.notation.html#"><span class="id" title="library">notation</span></a> <a class="idref" href="tachis.prob_lang.class_instances.html#"><span class="id" title="library">class_instances</span></a> <a class="idref" href="tachis.prob_lang.tactics.html#"><span class="id" title="library">tactics</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">tachis.prob_lang</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="tachis.prob_lang.wp_tactics.html#"><span class="id" title="library">wp_tactics</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">tachis.tachis</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="tachis.tachis.ert_weakestpre.html#"><span class="id" title="library">ert_weakestpre</span></a> <a class="idref" href="tachis.tachis.lifting.html#"><span class="id" title="library">lifting</span></a> <a class="idref" href="tachis.tachis.ectx_lifting.html#"><span class="id" title="library">ectx_lifting</span></a> <a class="idref" href="tachis.tachis.primitive_laws.html#"><span class="id" title="library">primitive_laws</span></a> <a class="idref" href="tachis.tachis.cost_models.html#"><span class="id" title="library">cost_models</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.prelude</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.prelude.options.html#"><span class="id" title="library">options</span></a>.<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Default</span> <span class="id" title="keyword">Proof</span> <span class="id" title="var">Using</span> "Type*".<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="var">Program</span> <span class="id" title="keyword">Instance</span> <a id="rel_logic_wptactics_base" class="idref" href="#rel_logic_wptactics_base"><span class="id" title="instance">rel_logic_wptactics_base</span></a> `{<a id="tachisWpGS0:2" class="idref" href="#tachisWpGS0:2"><span class="id" title="binder">!</span></a><a id="tachisWpGS0:2" class="idref" href="#tachisWpGS0:2"><span class="id" title="binder">tachisWpGS</span></a> <a id="tachisWpGS0:2" class="idref" href="#tachisWpGS0:2"><span class="id" title="binder">prob_lang</span></a> <a id="0101b9beac487b383a5ba2a8f6922788" class="idref" href="#0101b9beac487b383a5ba2a8f6922788"><span class="id" title="binder"><span id="tachisWpGS0:2" class="id">Σ</span></span></a>} : <a class="idref" href="tachis.prob_lang.wp_tactics.html#GwpTacticsBase"><span class="id" title="class">GwpTacticsBase</span></a> <a class="idref" href="tachis.tachis.proofmode.html#0101b9beac487b383a5ba2a8f6922788"><span class="id" title="variable">Σ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="tachis.bi.weakestpre.html#wp"><span class="id" title="method">wp</span></a>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.ert_weakestpre.html#ert_wp_value"><span class="id" title="lemma">ert_wp_value</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.ert_weakestpre.html#ert_wp_fupd"><span class="id" title="lemma">ert_wp_fupd</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Like in <span class="inlinecode"><a class="idref" href="tachis.prob_lang.wp_tactics.html#wp_tactics"><span class="id" title="section">wp_tactics</span></a></span>, but using a <span class="inlinecode"><a class="idref" href="tachis.tachis.ert_weakestpre.html#CostLanguageCtx"><span class="id" title="record">CostLanguageCtx</span></a></span> 
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a id="EwpTacticsBind" class="idref" href="#EwpTacticsBind"><span class="id" title="record">EwpTacticsBind</span></a> (<a id="eb9571817dd417966f307c3a9de8fe7f" class="idref" href="#eb9571817dd417966f307c3a9de8fe7f"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gFunctors"><span class="id" title="record">gFunctors</span></a>) (<a id="A:4" class="idref" href="#A:4"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) (<a id="c:5" class="idref" href="#c:5"><span class="id" title="binder">c</span></a> : <a class="idref" href="tachis.tachis.ert_weakestpre.html#Costfun"><span class="id" title="class">Costfun</span></a> <a class="idref" href="tachis.prob_lang.lang.html#prob_lang"><span class="id" title="definition">prob_lang</span></a>) `{<a id="invGS_gen0:7" class="idref" href="#invGS_gen0:7"><span class="id" title="binder">!</span></a><a id="invGS_gen0:7" class="idref" href="#invGS_gen0:7"><span class="id" title="binder">invGS_gen</span></a> <a id="hlc:6" class="idref" href="#hlc:6"><span class="id" title="binder"><span id="invGS_gen0:7" class="id">hlc</span></span></a> <a id="invGS_gen0:7" class="idref" href="#invGS_gen0:7"><span class="id" title="binder">Σ</span></a>} (<a id="gwp:8" class="idref" href="#gwp:8"><span class="id" title="binder">gwp</span></a> : <a class="idref" href="tachis.tachis.proofmode.html#A:4"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="tachis.tachis.proofmode.html#eb9571817dd417966f307c3a9de8fe7f"><span class="id" title="variable">Σ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="tachis.tachis.proofmode.html#eb9571817dd417966f307c3a9de8fe7f"><span class="id" title="variable">Σ</span></a>)  := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="wptac_wp_bind" class="idref" href="#wptac_wp_bind"><span class="id" title="projection">wptac_wp_bind</span></a> <a id="K:10" class="idref" href="#K:10"><span class="id" title="binder">K</span></a> `{<a id="CostLanguageCtx0:11" class="idref" href="#CostLanguageCtx0:11"><span class="id" title="binder">!</span></a><a id="CostLanguageCtx0:11" class="idref" href="#CostLanguageCtx0:11"><span class="id" title="binder">CostLanguageCtx</span></a> <a id="CostLanguageCtx0:11" class="idref" href="#CostLanguageCtx0:11"><span class="id" title="binder">c</span></a> <a id="CostLanguageCtx0:11" class="idref" href="#CostLanguageCtx0:11"><span class="id" title="binder">K</span></a>} <a id="E:12" class="idref" href="#E:12"><span class="id" title="binder">E</span></a> <a id="e:13" class="idref" href="#e:13"><span class="id" title="binder">e</span></a> <a id="3113a0c09db68ed6481f1bb96933c3de" class="idref" href="#3113a0c09db68ed6481f1bb96933c3de"><span class="id" title="binder">Φ</span></a> <a id="a:15" class="idref" href="#a:15"><span class="id" title="binder">a</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.proofmode.html#gwp:8"><span class="id" title="variable">gwp</span></a> <a class="idref" href="tachis.tachis.proofmode.html#a:15"><span class="id" title="variable">a</span></a> <a class="idref" href="tachis.tachis.proofmode.html#E:12"><span class="id" title="variable">E</span></a> <a class="idref" href="tachis.tachis.proofmode.html#e:13"><span class="id" title="variable">e</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="v:16" class="idref" href="#v:16"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.tachis.proofmode.html#gwp:8"><span class="id" title="variable">gwp</span></a> <a class="idref" href="tachis.tachis.proofmode.html#a:15"><span class="id" title="variable">a</span></a> <a class="idref" href="tachis.tachis.proofmode.html#E:12"><span class="id" title="variable">E</span></a> (<a class="idref" href="tachis.tachis.proofmode.html#K:10"><span class="id" title="variable">K</span></a> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="tachis.tachis.proofmode.html#v:16"><span class="id" title="variable">v</span></a>)) <a class="idref" href="tachis.tachis.proofmode.html#3113a0c09db68ed6481f1bb96933c3de"><span class="id" title="variable">Φ</span></a> ) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="tachis.tachis.proofmode.html#gwp:8"><span class="id" title="variable">gwp</span></a> <a class="idref" href="tachis.tachis.proofmode.html#a:15"><span class="id" title="variable">a</span></a> <a class="idref" href="tachis.tachis.proofmode.html#E:12"><span class="id" title="variable">E</span></a> (<a class="idref" href="tachis.tachis.proofmode.html#K:10"><span class="id" title="variable">K</span></a> <a class="idref" href="tachis.tachis.proofmode.html#e:13"><span class="id" title="variable">e</span></a>) <a class="idref" href="tachis.tachis.proofmode.html#3113a0c09db68ed6481f1bb96933c3de"><span class="id" title="variable">Φ</span></a> ;<br/>
}.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="wp_bind_tactics" class="idref" href="#wp_bind_tactics"><span class="id" title="section">wp_bind_tactics</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:24" class="idref" href="#H:24"><span class="id" title="binder">EwpTacticsBind</span></a> <a id="8b13b958e79b112c1b4fdea541acbd8a" class="idref" href="#8b13b958e79b112c1b4fdea541acbd8a"><span class="id" title="binder"><span id="H:24" class="id">Σ</span></span></a> <a id="A:19" class="idref" href="#A:19"><span class="id" title="binder"><span id="H:24" class="id">A</span></span></a> <a id="hlc:21" class="idref" href="#hlc:21"><span class="id" title="binder"><span id="H:24" class="id">hlc</span></span></a> <a id="gwp:23" class="idref" href="#gwp:23"><span class="id" title="binder"><span id="H:24" class="id">gwp</span></span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Notation</span> <a id="9ff15d9c5572a880009467e65c941855" class="idref" href="#9ff15d9c5572a880009467e65c941855"><span class="id" title="notation">&quot;</span></a>'WP' e @ s ; E {{ Φ } }" := (<a class="idref" href="tachis.tachis.proofmode.html#wp_bind_tactics.gwp"><span class="id" title="variable">gwp</span></a> <span class="id" title="var">s</span> <span class="id" title="var">E</span> <span class="id" title="var">e</span>%<span class="id" title="var">E</span> <span class="id" title="var">Φ</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">e</span>, <span class="id" title="var">Φ</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200, <span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">bi_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Notation</span> <a id="afbf17735a49a9f5413aa97346bd9e6b" class="idref" href="#afbf17735a49a9f5413aa97346bd9e6b"><span class="id" title="notation">&quot;</span></a>'WP' e @ s ; E {{ v , Q } }" := (<a class="idref" href="tachis.tachis.proofmode.html#wp_bind_tactics.gwp"><span class="id" title="variable">gwp</span></a> <span class="id" title="var">s</span> <span class="id" title="var">E</span> <span class="id" title="var">e</span>%<span class="id" title="var">E</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="v:25" class="idref" href="#v:25"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="var">Q</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">e</span>, <span class="id" title="var">Q</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">format</span> "'[hv' 'WP'  e  '/' @  '[' s ;  '/' E  ']' '/' {{  '[' v ,  '/' Q  ']' } } ']'") : <span class="id" title="var">bi_scope</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tac_wp_bind" class="idref" href="#tac_wp_bind"><span class="id" title="lemma">tac_wp_bind</span></a> <a id="K:26" class="idref" href="#K:26"><span class="id" title="binder">K</span></a> `{<a id="CostLanguageCtx0:27" class="idref" href="#CostLanguageCtx0:27"><span class="id" title="binder">!</span></a><a id="CostLanguageCtx0:27" class="idref" href="#CostLanguageCtx0:27"><span class="id" title="binder">CostLanguageCtx</span></a> <a id="CostLanguageCtx0:27" class="idref" href="#CostLanguageCtx0:27"><span class="id" title="binder">(</span></a><a id="CostLanguageCtx0:27" class="idref" href="#CostLanguageCtx0:27"><span class="id" title="binder">Λ</span></a> <a id="CostLanguageCtx0:27" class="idref" href="#CostLanguageCtx0:27"><span class="id" title="binder">:=</span></a> <a id="CostLanguageCtx0:27" class="idref" href="#CostLanguageCtx0:27"><span class="id" title="binder">prob_lang</span></a><a id="CostLanguageCtx0:27" class="idref" href="#CostLanguageCtx0:27"><span class="id" title="binder">)</span></a> <a id="CostLanguageCtx0:27" class="idref" href="#CostLanguageCtx0:27"><span class="id" title="binder">c</span></a> <a id="CostLanguageCtx0:27" class="idref" href="#CostLanguageCtx0:27"><span class="id" title="binder">(</span></a><a id="CostLanguageCtx0:27" class="idref" href="#CostLanguageCtx0:27"><span class="id" title="binder">fill</span></a> <a id="CostLanguageCtx0:27" class="idref" href="#CostLanguageCtx0:27"><span class="id" title="binder">K</span></a><a id="CostLanguageCtx0:27" class="idref" href="#CostLanguageCtx0:27"><span class="id" title="binder">)</span></a>} <a id="429bde08aec4510dd7c009bdb80fa47b" class="idref" href="#429bde08aec4510dd7c009bdb80fa47b"><span class="id" title="binder">Δ</span></a> <a id="E:29" class="idref" href="#E:29"><span class="id" title="binder">E</span></a> <a id="01a46550ac8db3a3545feae0533fc1da" class="idref" href="#01a46550ac8db3a3545feae0533fc1da"><span class="id" title="binder">Φ</span></a> <a id="e:31" class="idref" href="#e:31"><span class="id" title="binder">e</span></a> <a id="f:32" class="idref" href="#f:32"><span class="id" title="binder">f</span></a> <a id="a:33" class="idref" href="#a:33"><span class="id" title="binder">a</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.proofmode.html#f:32"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="e:34" class="idref" href="#e:34"><span class="id" title="binder">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.common.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="tachis.tachis.proofmode.html#K:26"><span class="id" title="variable">K</span></a> <a class="idref" href="tachis.tachis.proofmode.html#e:34"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="comment">(*&nbsp;as&nbsp;an&nbsp;eta&nbsp;expanded&nbsp;hypothesis&nbsp;so&nbsp;that&nbsp;we&nbsp;can&nbsp;`simpl`&nbsp;it&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_entails"><span class="id" title="definition">envs_entails</span></a> <a class="idref" href="tachis.tachis.proofmode.html#429bde08aec4510dd7c009bdb80fa47b"><span class="id" title="variable">Δ</span></a> (<a class="idref" href="tachis.tachis.proofmode.html#afbf17735a49a9f5413aa97346bd9e6b"><span class="id" title="notation">WP</span></a> <a class="idref" href="tachis.tachis.proofmode.html#e:31"><span class="id" title="variable">e</span></a> <a class="idref" href="tachis.tachis.proofmode.html#afbf17735a49a9f5413aa97346bd9e6b"><span class="id" title="notation">@</span></a> <a class="idref" href="tachis.tachis.proofmode.html#a:33"><span class="id" title="variable">a</span></a><a class="idref" href="tachis.tachis.proofmode.html#afbf17735a49a9f5413aa97346bd9e6b"><span class="id" title="notation">;</span></a> <a class="idref" href="tachis.tachis.proofmode.html#E:29"><span class="id" title="variable">E</span></a> <a class="idref" href="tachis.tachis.proofmode.html#afbf17735a49a9f5413aa97346bd9e6b"><span class="id" title="notation">{{</span></a> <a id="v:35" class="idref" href="#v:35"><span class="id" title="binder">v</span></a><a class="idref" href="tachis.tachis.proofmode.html#afbf17735a49a9f5413aa97346bd9e6b"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.tachis.proofmode.html#9ff15d9c5572a880009467e65c941855"><span class="id" title="notation">WP</span></a> <a class="idref" href="tachis.tachis.proofmode.html#f:32"><span class="id" title="variable">f</span></a> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="tachis.tachis.proofmode.html#v:35"><span class="id" title="variable">v</span></a>) <a class="idref" href="tachis.tachis.proofmode.html#9ff15d9c5572a880009467e65c941855"><span class="id" title="notation">@</span></a> <a class="idref" href="tachis.tachis.proofmode.html#a:33"><span class="id" title="variable">a</span></a><a class="idref" href="tachis.tachis.proofmode.html#9ff15d9c5572a880009467e65c941855"><span class="id" title="notation">;</span></a> <a class="idref" href="tachis.tachis.proofmode.html#E:29"><span class="id" title="variable">E</span></a> <a class="idref" href="tachis.tachis.proofmode.html#9ff15d9c5572a880009467e65c941855"><span class="id" title="notation">{{</span></a> <a class="idref" href="tachis.tachis.proofmode.html#01a46550ac8db3a3545feae0533fc1da"><span class="id" title="variable">Φ</span></a> <a class="idref" href="tachis.tachis.proofmode.html#9ff15d9c5572a880009467e65c941855"><span class="id" title="notation">}}</span></a> <a class="idref" href="tachis.tachis.proofmode.html#afbf17735a49a9f5413aa97346bd9e6b"><span class="id" title="notation">}}</span></a>)%<span class="id" title="var">I</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_entails"><span class="id" title="definition">envs_entails</span></a> <a class="idref" href="tachis.tachis.proofmode.html#429bde08aec4510dd7c009bdb80fa47b"><span class="id" title="variable">Δ</span></a> (<a class="idref" href="tachis.tachis.proofmode.html#9ff15d9c5572a880009467e65c941855"><span class="id" title="notation">WP</span></a> <a class="idref" href="tachis.common.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="tachis.tachis.proofmode.html#K:26"><span class="id" title="variable">K</span></a> <a class="idref" href="tachis.tachis.proofmode.html#e:31"><span class="id" title="variable">e</span></a> <a class="idref" href="tachis.tachis.proofmode.html#9ff15d9c5572a880009467e65c941855"><span class="id" title="notation">@</span></a> <a class="idref" href="tachis.tachis.proofmode.html#a:33"><span class="id" title="variable">a</span></a><a class="idref" href="tachis.tachis.proofmode.html#9ff15d9c5572a880009467e65c941855"><span class="id" title="notation">;</span></a> <a class="idref" href="tachis.tachis.proofmode.html#E:29"><span class="id" title="variable">E</span></a> <a class="idref" href="tachis.tachis.proofmode.html#9ff15d9c5572a880009467e65c941855"><span class="id" title="notation">{{</span></a> <a class="idref" href="tachis.tachis.proofmode.html#01a46550ac8db3a3545feae0533fc1da"><span class="id" title="variable">Φ</span></a> <a class="idref" href="tachis.tachis.proofmode.html#9ff15d9c5572a880009467e65c941855"><span class="id" title="notation">}}</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_entails_unseal"><span class="id" title="definition">envs_entails_unseal</span></a>=&gt; -&gt; -&gt;. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>: <a class="idref" href="tachis.tachis.proofmode.html#wptac_wp_bind"><span class="id" title="method">wptac_wp_bind</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="tachis.tachis.proofmode.html#wp_bind_tactics"><span class="id" title="section">wp_bind_tactics</span></a>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">wp_bind_core</span> <span class="id" title="var">K</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="tactic">eval</span> <span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">K</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">eapply</span> (<a class="idref" href="tachis.tachis.proofmode.html#tac_wp_bind"><span class="id" title="lemma">tac_wp_bind</span></a> <span class="id" title="var">K</span>); [<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">reflexivity</span>|<span class="id" title="var">reduction.pm_prettify</span>]<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_bind" <span class="id" title="var">open_constr</span>(<span class="id" title="var">efoc</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">iStartProof</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| |- <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_entails"><span class="id" title="definition">envs_entails</span></a> <span class="id" title="var">_</span> (<a class="idref" href="tachis.bi.weakestpre.html#wp"><span class="id" title="method">wp</span></a> ?<span class="id" title="var">s</span> ?<span class="id" title="var">E</span> ?<span class="id" title="var">e</span> ?<span class="id" title="var">Q</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">first</span> [ <span class="id" title="var">reshape_expr</span> <span class="id" title="var">e</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">K</span> <span class="id" title="var">e'</span> =&gt; <span class="id" title="var">unify</span> <span class="id" title="var">e'</span> <span class="id" title="var">efoc</span>; <span class="id" title="var">wp_bind_core</span> <span class="id" title="var">K</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">fail</span> 1 "wp_bind: cannot find" <span class="id" title="var">efoc</span> "in" <span class="id" title="var">e</span> ]<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">wp_apply_core</span> <span class="id" title="var">lem</span> <span class="id" title="var">tac_suc</span> <span class="id" title="var">tac_fail</span> := <span class="id" title="tactic">first</span><br/>
&nbsp;&nbsp;[<span class="id" title="var">iPoseProofCore</span> <span class="id" title="var">lem</span> <span class="id" title="keyword">as</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">H</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_entails"><span class="id" title="definition">envs_entails</span></a> <span class="id" title="var">_</span> (<a class="idref" href="tachis.bi.weakestpre.html#wp"><span class="id" title="method">wp</span></a> ?<span class="id" title="var">s</span> ?<span class="id" title="var">E</span> ?<span class="id" title="var">e</span> ?<span class="id" title="var">Q</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">reshape_expr</span> <span class="id" title="var">e</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">K</span> <span class="id" title="var">e'</span> =&gt; <span class="id" title="var">wp_bind_core</span> <span class="id" title="var">K</span>; <span class="id" title="var">tac_suc</span> <span class="id" title="var">H</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;|<span class="id" title="var">tac_fail</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">wp_apply_core</span> <span class="id" title="var">lem</span> <span class="id" title="var">tac_suc</span> <span class="id" title="var">tac_fail</span>)<br/>
&nbsp;&nbsp;|<span class="id" title="keyword">let</span> <span class="id" title="var">P</span> := <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">lem</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fail</span> "wp_apply: cannot apply" <span class="id" title="var">lem</span> ":" <span class="id" title="var">P</span> ].<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_apply" <span class="id" title="var">open_constr</span>(<span class="id" title="var">lem</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">wp_apply_core</span> <span class="id" title="var">lem</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">H</span> =&gt; <span class="id" title="var">iApplyHyp</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">iNext</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">wp_expr_simpl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">cont</span> =&gt; <span class="id" title="tactic">fail</span>).<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_smart_apply" <span class="id" title="var">open_constr</span>(<span class="id" title="var">lem</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">wp_apply_core</span> <span class="id" title="var">lem</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">H</span> =&gt; <span class="id" title="var">iApplyHyp</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">iNext</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">wp_expr_simpl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">cont</span> =&gt; <span class="id" title="var">wp_pure</span> <span class="id" title="var">_</span>; []; <span class="id" title="var">cont</span> ()).<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="var">Program</span> <span class="id" title="keyword">Instance</span> <a id="ert_wptactics_bind" class="idref" href="#ert_wptactics_bind"><span class="id" title="instance">ert_wptactics_bind</span></a> `{<a id="tachisWpGS0:37" class="idref" href="#tachisWpGS0:37"><span class="id" title="binder">!</span></a><a id="tachisWpGS0:37" class="idref" href="#tachisWpGS0:37"><span class="id" title="binder">tachisWpGS</span></a> <a id="tachisWpGS0:37" class="idref" href="#tachisWpGS0:37"><span class="id" title="binder">prob_lang</span></a> <a id="06f02a2e1ae1dbc558fdd78ca814765d" class="idref" href="#06f02a2e1ae1dbc558fdd78ca814765d"><span class="id" title="binder"><span id="tachisWpGS0:37" class="id">Σ</span></span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="tachis.tachis.proofmode.html#EwpTacticsBind"><span class="id" title="class">EwpTacticsBind</span></a> <a class="idref" href="tachis.tachis.proofmode.html#06f02a2e1ae1dbc558fdd78ca814765d"><span class="id" title="variable">Σ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Program.Syntax.html#fbbfb55f1ee0a61e0473fa0799e34e17"><span class="id" title="notation">()</span></a> <a class="idref" href="tachis.tachis.ert_weakestpre.html#costfun"><span class="id" title="method">costfun</span></a> <a class="idref" href="tachis.bi.weakestpre.html#wp"><span class="id" title="method">wp</span></a>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.ert_weakestpre.html#ert_wp_bind"><span class="id" title="lemma">ert_wp_bind</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="proofmode" class="idref" href="#proofmode"><span class="id" title="section">proofmode</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="tachisWpGS0:39" class="idref" href="#tachisWpGS0:39"><span class="id" title="binder">!</span></a><a id="tachisWpGS0:39" class="idref" href="#tachisWpGS0:39"><span class="id" title="binder">tachisWpGS</span></a> <a id="tachisWpGS0:39" class="idref" href="#tachisWpGS0:39"><span class="id" title="binder">prob_lang</span></a> <a id="4419af43eee85446dd7b19942c9f830b" class="idref" href="#4419af43eee85446dd7b19942c9f830b"><span class="id" title="binder"><span id="tachisWpGS0:39" class="id">Σ</span></span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tac_wp_pure_cost" class="idref" href="#tac_wp_pure_cost"><span class="id" title="lemma">tac_wp_pure_cost</span></a> <a id="715aea7d2f04560a98eeb6a2954dbd94" class="idref" href="#715aea7d2f04560a98eeb6a2954dbd94"><span class="id" title="binder">Δ1</span></a> <a id="ed65f4c77227f779acb337d20436c7ce" class="idref" href="#ed65f4c77227f779acb337d20436c7ce"><span class="id" title="binder">Δ2</span></a> <a id="9b500ec1ac94e4d9ca204c12e3e4cbd8" class="idref" href="#9b500ec1ac94e4d9ca204c12e3e4cbd8"><span class="id" title="binder">Δ3</span></a> <a id="E:43" class="idref" href="#E:43"><span class="id" title="binder">E</span></a> <a id="i:44" class="idref" href="#i:44"><span class="id" title="binder">i</span></a> <a id="K:45" class="idref" href="#K:45"><span class="id" title="binder">K</span></a> `{<a id="CostLanguageCtx0:46" class="idref" href="#CostLanguageCtx0:46"><span class="id" title="binder">!</span></a><a id="CostLanguageCtx0:46" class="idref" href="#CostLanguageCtx0:46"><span class="id" title="binder">CostLanguageCtx</span></a> <a id="CostLanguageCtx0:46" class="idref" href="#CostLanguageCtx0:46"><span class="id" title="binder">costfun</span></a> <a id="CostLanguageCtx0:46" class="idref" href="#CostLanguageCtx0:46"><span class="id" title="binder">(</span></a><a id="CostLanguageCtx0:46" class="idref" href="#CostLanguageCtx0:46"><span class="id" title="binder">fill</span></a> <a id="CostLanguageCtx0:46" class="idref" href="#CostLanguageCtx0:46"><span class="id" title="binder">K</span></a><a id="CostLanguageCtx0:46" class="idref" href="#CostLanguageCtx0:46"><span class="id" title="binder">)</span></a>} <a id="e1:47" class="idref" href="#e1:47"><span class="id" title="binder">e1</span></a> <a id="e2:48" class="idref" href="#e2:48"><span class="id" title="binder">e2</span></a> <a id="c685ea60f5cec8742ff8cf92bbf5e236" class="idref" href="#c685ea60f5cec8742ff8cf92bbf5e236"><span class="id" title="binder">φ</span></a> <a id="cd8bab98b89be933d89353523b6e2fb0" class="idref" href="#cd8bab98b89be933d89353523b6e2fb0"><span class="id" title="binder">Φ</span></a> <a id="a:51" class="idref" href="#a:51"><span class="id" title="binder">a</span></a> <a id="r1:52" class="idref" href="#r1:52"><span class="id" title="binder">r1</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.common.language.html#PureExec"><span class="id" title="class">PureExec</span></a> <a class="idref" href="tachis.tachis.proofmode.html#c685ea60f5cec8742ff8cf92bbf5e236"><span class="id" title="variable">φ</span></a> 1 <a class="idref" href="tachis.tachis.proofmode.html#e1:47"><span class="id" title="variable">e1</span></a> <a class="idref" href="tachis.tachis.proofmode.html#e2:48"><span class="id" title="variable">e2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.proofmode.html#c685ea60f5cec8742ff8cf92bbf5e236"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.coq_tactics.html#MaybeIntoLaterNEnvs"><span class="id" title="class">MaybeIntoLaterNEnvs</span></a> 1 <a class="idref" href="tachis.tachis.proofmode.html#715aea7d2f04560a98eeb6a2954dbd94"><span class="id" title="variable">Δ1</span></a> <a class="idref" href="tachis.tachis.proofmode.html#ed65f4c77227f779acb337d20436c7ce"><span class="id" title="variable">Δ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_lookup"><span class="id" title="definition">envs_lookup</span></a> <a class="idref" href="tachis.tachis.proofmode.html#i:44"><span class="id" title="variable">i</span></a> <a class="idref" href="tachis.tachis.proofmode.html#ed65f4c77227f779acb337d20436c7ce"><span class="id" title="variable">Δ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.proofmode.html#r1:52"><span class="id" title="variable">r1</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>%<span class="id" title="var">I</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="tachis.tachis.ert_weakestpre.html#cost"><span class="id" title="method">cost</span></a> <a class="idref" href="tachis.tachis.proofmode.html#e1:47"><span class="id" title="variable">e1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.proofmode.html#r1:52"><span class="id" title="variable">r1</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_simple_replace"><span class="id" title="definition">envs_simple_replace</span></a> <a class="idref" href="tachis.tachis.proofmode.html#i:44"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#Esnoc"><span class="id" title="constructor">Esnoc</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#Enil"><span class="id" title="constructor">Enil</span></a> <a class="idref" href="tachis.tachis.proofmode.html#i:44"><span class="id" title="variable">i</span></a> (<a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.proofmode.html#r1:52"><span class="id" title="variable">r1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="tachis.tachis.ert_weakestpre.html#cost"><span class="id" title="method">cost</span></a> <a class="idref" href="tachis.tachis.proofmode.html#e1:47"><span class="id" title="variable">e1</span></a><a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">)</span></a>)) <a class="idref" href="tachis.tachis.proofmode.html#ed65f4c77227f779acb337d20436c7ce"><span class="id" title="variable">Δ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="tachis.tachis.proofmode.html#9b500ec1ac94e4d9ca204c12e3e4cbd8"><span class="id" title="variable">Δ3</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_entails"><span class="id" title="definition">envs_entails</span></a> <a class="idref" href="tachis.tachis.proofmode.html#9b500ec1ac94e4d9ca204c12e3e4cbd8"><span class="id" title="variable">Δ3</span></a> (<a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">WP</span></a> <a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.common.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="tachis.tachis.proofmode.html#K:45"><span class="id" title="variable">K</span></a> <a class="idref" href="tachis.tachis.proofmode.html#e2:48"><span class="id" title="variable">e2</span></a><a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">)</span></a> <a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">@</span></a> <a class="idref" href="tachis.tachis.proofmode.html#a:51"><span class="id" title="variable">a</span></a><a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">;</span></a> <a class="idref" href="tachis.tachis.proofmode.html#E:43"><span class="id" title="variable">E</span></a> <a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">{{</span></a> <a class="idref" href="tachis.tachis.proofmode.html#cd8bab98b89be933d89353523b6e2fb0"><span class="id" title="variable">Φ</span></a> <a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">}}</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_entails"><span class="id" title="definition">envs_entails</span></a> <a class="idref" href="tachis.tachis.proofmode.html#715aea7d2f04560a98eeb6a2954dbd94"><span class="id" title="variable">Δ1</span></a> (<a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">WP</span></a> <a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.common.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="tachis.tachis.proofmode.html#K:45"><span class="id" title="variable">K</span></a> <a class="idref" href="tachis.tachis.proofmode.html#e1:47"><span class="id" title="variable">e1</span></a><a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">)</span></a> <a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">@</span></a> <a class="idref" href="tachis.tachis.proofmode.html#a:51"><span class="id" title="variable">a</span></a><a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">;</span></a> <a class="idref" href="tachis.tachis.proofmode.html#E:43"><span class="id" title="variable">E</span></a> <a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">{{</span></a> <a class="idref" href="tachis.tachis.proofmode.html#cd8bab98b89be933d89353523b6e2fb0"><span class="id" title="variable">Φ</span></a> <a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">}}</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_entails_unseal"><span class="id" title="definition">envs_entails_unseal</span></a>=&gt; <span class="id" title="var">HP</span> <span class="id" title="var">H</span>φ ? ??? <span class="id" title="var">Hcnt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.coq_tactics.html#into_laterN_env_sound"><span class="id" title="lemma">into_laterN_env_sound</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_simple_replace_sound"><span class="id" title="lemma">envs_simple_replace_sound</span></a> //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="tachis.tachis.expected_time_credits.html#etc_split_le"><span class="id" title="lemma">etc_split_le</span></a> (<a class="idref" href="tachis.tachis.ert_weakestpre.html#cost"><span class="id" title="method">cost</span></a> <span class="id" title="var">e1</span>)) /=; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="tachis.tachis.ert_weakestpre.html#cost_nonneg"><span class="id" title="method">cost_nonneg</span></a> <span class="id" title="var">e1</span>). <span class="id" title="var">lra</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "[&gt;[? ?] HΔ3]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> @<a class="idref" href="tachis.common.ectx_language.html#pure_exec_fill"><span class="id" title="lemma">pure_exec_fill</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="tachis.tachis.lifting.html#wp_pure_step_later"><span class="id" title="lemma">wp_pure_step_later</span></a>; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.to_val"><span class="id" title="definition">to_val</span></a> <span class="id" title="var">e1</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="tachis.common.language.html#PureExec_not_val"><span class="id" title="lemma">PureExec_not_val</span></a>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>φ|<span class="id" title="var">done</span>]. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="tachis.tachis.ert_weakestpre.html#cost_fill"><span class="id" title="method">cost_fill</span></a>; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="var">Hcnt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"HΔ3" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tac_wp_pure_no_cost" class="idref" href="#tac_wp_pure_no_cost"><span class="id" title="lemma">tac_wp_pure_no_cost</span></a> <a id="4dd6bee8dba0adcd55c66d6f2601238e" class="idref" href="#4dd6bee8dba0adcd55c66d6f2601238e"><span class="id" title="binder">Δ1</span></a> <a id="f8e21096e6450b2e6729f605328c0686" class="idref" href="#f8e21096e6450b2e6729f605328c0686"><span class="id" title="binder">Δ2</span></a> <a id="E:55" class="idref" href="#E:55"><span class="id" title="binder">E</span></a> <a id="K:56" class="idref" href="#K:56"><span class="id" title="binder">K</span></a> `{<a id="CostLanguageCtx0:57" class="idref" href="#CostLanguageCtx0:57"><span class="id" title="binder">!</span></a><a id="CostLanguageCtx0:57" class="idref" href="#CostLanguageCtx0:57"><span class="id" title="binder">CostLanguageCtx</span></a> <a id="CostLanguageCtx0:57" class="idref" href="#CostLanguageCtx0:57"><span class="id" title="binder">costfun</span></a> <a id="CostLanguageCtx0:57" class="idref" href="#CostLanguageCtx0:57"><span class="id" title="binder">(</span></a><a id="CostLanguageCtx0:57" class="idref" href="#CostLanguageCtx0:57"><span class="id" title="binder">fill</span></a> <a id="CostLanguageCtx0:57" class="idref" href="#CostLanguageCtx0:57"><span class="id" title="binder">K</span></a><a id="CostLanguageCtx0:57" class="idref" href="#CostLanguageCtx0:57"><span class="id" title="binder">)</span></a>} <a id="e1:58" class="idref" href="#e1:58"><span class="id" title="binder">e1</span></a> <a id="e2:59" class="idref" href="#e2:59"><span class="id" title="binder">e2</span></a> <a id="a6907591c18ff9049e8f912ac42d7ac7" class="idref" href="#a6907591c18ff9049e8f912ac42d7ac7"><span class="id" title="binder">φ</span></a> <a id="d104da34b9506e4cd4fc5bf1a73cc7b3" class="idref" href="#d104da34b9506e4cd4fc5bf1a73cc7b3"><span class="id" title="binder">Φ</span></a> <a id="a:62" class="idref" href="#a:62"><span class="id" title="binder">a</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.common.language.html#PureExec"><span class="id" title="class">PureExec</span></a> <a class="idref" href="tachis.tachis.proofmode.html#a6907591c18ff9049e8f912ac42d7ac7"><span class="id" title="variable">φ</span></a> 1 <a class="idref" href="tachis.tachis.proofmode.html#e1:58"><span class="id" title="variable">e1</span></a> <a class="idref" href="tachis.tachis.proofmode.html#e2:59"><span class="id" title="variable">e2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.proofmode.html#a6907591c18ff9049e8f912ac42d7ac7"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.ert_weakestpre.html#cost"><span class="id" title="method">cost</span></a> <a class="idref" href="tachis.tachis.proofmode.html#e1:58"><span class="id" title="variable">e1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.coq_tactics.html#MaybeIntoLaterNEnvs"><span class="id" title="class">MaybeIntoLaterNEnvs</span></a> 1 <a class="idref" href="tachis.tachis.proofmode.html#4dd6bee8dba0adcd55c66d6f2601238e"><span class="id" title="variable">Δ1</span></a> <a class="idref" href="tachis.tachis.proofmode.html#f8e21096e6450b2e6729f605328c0686"><span class="id" title="variable">Δ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_entails"><span class="id" title="definition">envs_entails</span></a> <a class="idref" href="tachis.tachis.proofmode.html#f8e21096e6450b2e6729f605328c0686"><span class="id" title="variable">Δ2</span></a> (<a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">WP</span></a> <a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.common.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="tachis.tachis.proofmode.html#K:56"><span class="id" title="variable">K</span></a> <a class="idref" href="tachis.tachis.proofmode.html#e2:59"><span class="id" title="variable">e2</span></a><a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">)</span></a> <a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">@</span></a> <a class="idref" href="tachis.tachis.proofmode.html#a:62"><span class="id" title="variable">a</span></a><a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">;</span></a> <a class="idref" href="tachis.tachis.proofmode.html#E:55"><span class="id" title="variable">E</span></a> <a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">{{</span></a> <a class="idref" href="tachis.tachis.proofmode.html#d104da34b9506e4cd4fc5bf1a73cc7b3"><span class="id" title="variable">Φ</span></a> <a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">}}</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_entails"><span class="id" title="definition">envs_entails</span></a> <a class="idref" href="tachis.tachis.proofmode.html#4dd6bee8dba0adcd55c66d6f2601238e"><span class="id" title="variable">Δ1</span></a> (<a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">WP</span></a> <a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.common.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="tachis.tachis.proofmode.html#K:56"><span class="id" title="variable">K</span></a> <a class="idref" href="tachis.tachis.proofmode.html#e1:58"><span class="id" title="variable">e1</span></a><a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">)</span></a> <a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">@</span></a> <a class="idref" href="tachis.tachis.proofmode.html#a:62"><span class="id" title="variable">a</span></a><a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">;</span></a> <a class="idref" href="tachis.tachis.proofmode.html#E:55"><span class="id" title="variable">E</span></a> <a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">{{</span></a> <a class="idref" href="tachis.tachis.proofmode.html#d104da34b9506e4cd4fc5bf1a73cc7b3"><span class="id" title="variable">Φ</span></a> <a class="idref" href="tachis.bi.weakestpre.html#ca808999e0a0dfd644967e1c18004286"><span class="id" title="notation">}}</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_entails_unseal"><span class="id" title="definition">envs_entails_unseal</span></a>=&gt; ? <span class="id" title="var">H</span>φ <span class="id" title="var">Hcost</span> ? <span class="id" title="var">HΔ'</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.coq_tactics.html#into_laterN_env_sound"><span class="id" title="lemma">into_laterN_env_sound</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> @<a class="idref" href="tachis.common.ectx_language.html#pure_exec_fill"><span class="id" title="lemma">pure_exec_fill</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HΔ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "He2".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="tachis.tachis.expected_time_credits.html#etc_zero"><span class="id" title="lemma">etc_zero</span></a> <span class="id" title="keyword">as</span> "Hz".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="tachis.tachis.lifting.html#wp_pure_step_later"><span class="id" title="lemma">wp_pure_step_later</span></a>; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.to_val"><span class="id" title="definition">to_val</span></a> <span class="id" title="var">e1</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="tachis.common.language.html#PureExec_not_val"><span class="id" title="lemma">PureExec_not_val</span></a>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>φ|<span class="id" title="var">done</span>]. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.ert_weakestpre.html#cost_fill"><span class="id" title="method">cost_fill</span></a> // <span class="id" title="var">Hcost</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="tachis.tachis.proofmode.html#proofmode"><span class="id" title="section">proofmode</span></a>.<br/>

<br/>
</div>

<div class="doc">
Pure reduction w/o cost  
</div>
<div class="code">
<span class="id" title="keyword">Tactic Notation</span> "wp_pure_no_cost" <span class="id" title="var">open_constr</span>(<span class="id" title="var">efoc</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">iStartProof</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| |- <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_entails"><span class="id" title="definition">envs_entails</span></a> <span class="id" title="var">_</span> (<a class="idref" href="tachis.bi.weakestpre.html#wp"><span class="id" title="method">wp</span></a> ?<span class="id" title="var">s</span> ?<span class="id" title="var">E</span> ?<span class="id" title="var">e</span> ?<span class="id" title="var">Q</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">e</span> := <span class="id" title="tactic">eval</span> <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">reshape_expr</span> <span class="id" title="var">e</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">K</span> <span class="id" title="var">e'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unify</span> <span class="id" title="var">e'</span> <span class="id" title="var">efoc</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="tachis.tachis.proofmode.html#tac_wp_pure_no_cost"><span class="id" title="lemma">tac_wp_pure_no_cost</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">K</span> <span class="id" title="var">e'</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">tc_solve</span>                       <span class="comment">(*&nbsp;PureExec&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id" title="tactic">try</span> <span class="id" title="var">solve_vals_compare_safe</span>    <span class="comment">(*&nbsp;The&nbsp;pure&nbsp;condition&nbsp;for&nbsp;PureExec&nbsp;--&nbsp;handles&nbsp;trivial&nbsp;goals,&nbsp;including&nbsp;<span class="inlinecode"><span class="id" title="var">vals_compare_safe</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|(<span class="id" title="tactic">reflexivity</span> || <span class="id" title="tactic">fail</span> "wp_pure_no_cost: could not prove that cost of " <span class="id" title="var">e</span> " is 0")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id" title="var">tc_solve</span>                       <span class="comment">(*&nbsp;IntoLaters&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id" title="var">pm_reduce</span>; <span class="id" title="var">wp_finish</span>           <span class="comment">(*&nbsp;new&nbsp;goal&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;])<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id" title="tactic">fail</span> "wp_pure_no_cost: cannot find" <span class="id" title="var">efoc</span> "in" <span class="id" title="var">e</span> "or" <span class="id" title="var">efoc</span> "is not a redex"<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_pure_no_cost" :=<br/>
&nbsp;&nbsp;<span class="id" title="var">wp_pure_no_cost</span> <span class="id" title="var">_</span>.<br/>

<br/>
</div>

<div class="doc">
Pure reduction w/potential cost  
</div>
<div class="code">
<span class="id" title="keyword">Tactic Notation</span> "wp_pure_cost" <span class="id" title="var">open_constr</span>(<span class="id" title="var">efoc</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">solve_credit</span> <span class="id" title="var">_</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssumptionCore</span> || <span class="id" title="tactic">fail</span> "wp_pure_cost: cannot find credit '⧖ ?'" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">iStartProof</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| |- <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_entails"><span class="id" title="definition">envs_entails</span></a> <span class="id" title="var">_</span> (<a class="idref" href="tachis.bi.weakestpre.html#wp"><span class="id" title="method">wp</span></a> ?<span class="id" title="var">s</span> ?<span class="id" title="var">E</span> ?<span class="id" title="var">e</span> ?<span class="id" title="var">Q</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">e</span> := <span class="id" title="tactic">eval</span> <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">reshape_expr</span> <span class="id" title="var">e</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">K</span> <span class="id" title="var">e'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unify</span> <span class="id" title="var">e'</span> <span class="id" title="var">efoc</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="tachis.tachis.proofmode.html#tac_wp_pure_cost"><span class="id" title="lemma">tac_wp_pure_cost</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">K</span> <span class="id" title="var">e'</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="comment">(*&nbsp;<span class="inlinecode"><span class="id" title="var">PureExec</span></span> <span class="inlinecode">φ</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tc_solve</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.wp_tactics.html#wptac_mapsto"><span class="id" title="method">|</span></a> <span class="comment">(*&nbsp;φ&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">solve_vals_compare_safe</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="comment">(*&nbsp;MaybeIntoLaterNEnvs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tc_solve</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="comment">(*&nbsp;credit&nbsp;resource&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_credit</span> ()<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="comment">(*&nbsp;enough&nbsp;credits&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lra</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="comment">(*&nbsp;new&nbsp;environment&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> [<a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <span class="id" title="var">_</span>]/=; <span class="id" title="var">done</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="comment">(*&nbsp;new&nbsp;goal&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pm_reduce</span>; <span class="id" title="var">wp_finish</span>; <span class="id" title="tactic">rewrite</span> [<a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <span class="id" title="var">_</span>]/=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;])<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id" title="tactic">fail</span> "wp_pure_cost: cannot find" <span class="id" title="var">efoc</span> "in" <span class="id" title="var">e</span> "or" <span class="id" title="var">efoc</span> "is not a redex"<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_pure_cost" :=<br/>
&nbsp;&nbsp;<span class="id" title="var">wp_pure_cost</span> <span class="id" title="var">_</span>.<br/>

<br/>
</div>

<div class="doc">
Pure reduction w/cost and specific credit assumption  
</div>
<div class="code">
<span class="id" title="keyword">Tactic Notation</span> "wp_pure_cost" <span class="id" title="var">open_constr</span>(<span class="id" title="var">efoc</span>) "with" <span class="id" title="var">open_constr</span>(<span class="id" title="var">credit</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">iStartProof</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| |- <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_entails"><span class="id" title="definition">envs_entails</span></a> <span class="id" title="var">_</span> (<a class="idref" href="tachis.bi.weakestpre.html#wp"><span class="id" title="method">wp</span></a> ?<span class="id" title="var">s</span> ?<span class="id" title="var">E</span> ?<span class="id" title="var">e</span> ?<span class="id" title="var">Q</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">e</span> := <span class="id" title="tactic">eval</span> <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">reshape_expr</span> <span class="id" title="var">e</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">K</span> <span class="id" title="var">e'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unify</span> <span class="id" title="var">e'</span> <span class="id" title="var">efoc</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="tachis.tachis.proofmode.html#tac_wp_pure_cost"><span class="id" title="lemma">tac_wp_pure_cost</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">credit</span> <span class="id" title="var">K</span> <span class="id" title="var">e'</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="comment">(*&nbsp;<span class="inlinecode"><span class="id" title="var">PureExec</span></span> <span class="inlinecode">φ</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tc_solve</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="comment">(*&nbsp;φ&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">solve_vals_compare_safe</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="comment">(*&nbsp;MaybeIntoLaterNEnvs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tc_solve</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="comment">(*&nbsp;credit&nbsp;resource&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">done</span> || <span class="id" title="tactic">fail</span> "wp_pure_cost: cannot find rcedit " <span class="id" title="var">credit</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="comment">(*&nbsp;enough&nbsp;credits&nbsp;--&nbsp;postpone&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lra</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="comment">(*&nbsp;new&nbsp;environment&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> [<a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <span class="id" title="var">_</span>]/=; <span class="id" title="var">done</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="comment">(*&nbsp;new&nbsp;goal&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pm_reduce</span>; <span class="id" title="var">wp_finish</span>; <span class="id" title="tactic">rewrite</span> [<a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <span class="id" title="var">_</span>]/=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;])<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id" title="tactic">fail</span> "wp_pure_cost: cannot find" <span class="id" title="var">efoc</span> "in" <span class="id" title="var">e</span> "or" <span class="id" title="var">efoc</span> "is not a redex"<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_pure_cost" "with" <span class="id" title="var">open_constr</span>(<span class="id" title="var">credit</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">wp_pure_cost</span> <span class="id" title="var">_</span> <span class="id" title="keyword">with</span> <span class="id" title="var">credit</span>.<br/>

<br/>
</div>

<div class="doc">
Applies <span class="inlinecode"><span class="id" title="var">tac1</span></span> if the head redex has *no* cost and <span class="inlinecode"><span class="id" title="var">tac2</span></span> if it *does*   
</div>
<div class="code">
<span class="id" title="keyword">Tactic Notation</span> "wp_has_cost" <span class="id" title="var">open_constr</span>(<span class="id" title="var">efoc</span>) "with" <span class="id" title="var">tactic3</span>(<span class="id" title="var">tac1</span>) "," <span class="id" title="var">tactic3</span>(<span class="id" title="var">tac2</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">iStartProof</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| |- <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_entails"><span class="id" title="definition">envs_entails</span></a> <span class="id" title="var">_</span> (<a class="idref" href="tachis.bi.weakestpre.html#wp"><span class="id" title="method">wp</span></a> ?<span class="id" title="var">s</span> ?<span class="id" title="var">E</span> ?<span class="id" title="var">e</span> ?<span class="id" title="var">Q</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">e</span> := <span class="id" title="tactic">eval</span> <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">reshape_expr</span> <span class="id" title="var">e</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">K</span> <span class="id" title="var">e'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unify</span> <span class="id" title="var">e'</span> <span class="id" title="var">efoc</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="tactic">eval</span> <span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> (<a class="idref" href="tachis.tachis.ert_weakestpre.html#cost"><span class="id" title="method">cost</span></a> <span class="id" title="var">e'</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R0"><span class="id" title="axiom">R0</span></a> =&gt; <span class="id" title="var">tac1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="var">tac2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id" title="tactic">fail</span> "wp_has_cost: cannot find" <span class="id" title="var">efoc</span> "in" <span class="id" title="var">e</span> "or" <span class="id" title="var">efoc</span> "is not a redex"<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_pure" <span class="id" title="var">open_constr</span>(<span class="id" title="var">efoc</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">wp_has_cost</span> <span class="id" title="var">efoc</span> <span class="id" title="keyword">with</span> <span class="id" title="var">wp_pure_no_cost</span>, <span class="id" title="var">wp_pure_cost</span>.<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_pure" :=<br/>
&nbsp;&nbsp;<span class="id" title="var">wp_pure</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_pure" <span class="id" title="var">open_constr</span>(<span class="id" title="var">efoc</span>) "with" <span class="id" title="var">open_constr</span>(<span class="id" title="var">credit</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">wp_pure_cost</span> <span class="id" title="var">efoc</span> <span class="id" title="keyword">with</span> <span class="id" title="var">credit</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_pure" "with" <span class="id" title="var">open_constr</span>(<span class="id" title="var">credit</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">wp_pure_cost</span> <span class="id" title="keyword">with</span> <span class="id" title="var">credit</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">wp_pures</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">iStartProof</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">first</span> [ <span class="comment">(*&nbsp;The&nbsp;`;<span class="inlinecode"></span>`&nbsp;makes&nbsp;sure&nbsp;that&nbsp;no&nbsp;side-condition&nbsp;magically&nbsp;spawns.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">progress</span> <span class="id" title="tactic">repeat</span> (<span class="id" title="var">wp_pure</span> <span class="id" title="var">_</span>; [])<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">wp_finish</span> <span class="comment">(*&nbsp;In&nbsp;case&nbsp;wp_pure&nbsp;never&nbsp;ran,&nbsp;make&nbsp;sure&nbsp;we&nbsp;do&nbsp;the&nbsp;usual&nbsp;cleanup.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;].<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_pures" "with" <span class="id" title="var">open_constr</span>(<span class="id" title="var">credit</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">iStartProof</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">first</span> [ <span class="comment">(*&nbsp;The&nbsp;`;<span class="inlinecode"></span>`&nbsp;makes&nbsp;sure&nbsp;that&nbsp;no&nbsp;side-condition&nbsp;magically&nbsp;spawns.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">progress</span> <span class="id" title="tactic">repeat</span> (<span class="id" title="var">wp_pure</span> <span class="id" title="var">_</span> <span class="id" title="keyword">with</span> <span class="id" title="var">credit</span>; [])<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">wp_finish</span> <span class="comment">(*&nbsp;In&nbsp;case&nbsp;wp_pure&nbsp;never&nbsp;ran,&nbsp;make&nbsp;sure&nbsp;we&nbsp;do&nbsp;the&nbsp;usual&nbsp;cleanup.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;].<br/>

<br/>
</div>

<div class="doc">
Unlike <span class="inlinecode"><span class="id" title="var">wp_pures</span></span>, the tactics <span class="inlinecode"><span class="id" title="var">wp_rec</span></span> and <span class="inlinecode"><span class="id" title="var">wp_lam</span></span> should also reduce
    lambdas/recs that are hidden behind a definition, i.e. they should use
    <span class="inlinecode"><a class="idref" href="tachis.prob_lang.class_instances.html#AsRecV_recv"><span class="id" title="definition">AsRecV_recv</span></a></span> as a proper instance instead of a <span class="inlinecode"><span class="id" title="keyword">Hint</span></span> <span class="inlinecode"><span class="id" title="keyword">Extern</span></span>.

<div class="paragraph"> </div>

    We achieve this by putting <span class="inlinecode"><a class="idref" href="tachis.prob_lang.class_instances.html#AsRecV_recv"><span class="id" title="definition">AsRecV_recv</span></a></span> in the current environment so that it
    can be used as an instance by the typeclass resolution system. We then perform
    the reduction, and finally we clear this new hypothesis. 
</div>
<div class="code">
<span class="id" title="keyword">Tactic Notation</span> "wp_rec" :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">H</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> := <a class="idref" href="tachis.prob_lang.class_instances.html#AsRecV_recv"><span class="id" title="definition">AsRecV_recv</span></a>);<br/>
&nbsp;&nbsp;<span class="id" title="var">wp_pure</span> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.App"><span class="id" title="constructor">App</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>.<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_if" := <span class="id" title="var">wp_pure</span> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.If"><span class="id" title="constructor">If</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_if_true" := <span class="id" title="var">wp_pure</span> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.If"><span class="id" title="constructor">If</span></a> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.LitBool"><span class="id" title="constructor">LitBool</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>)) <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_if_false" := <span class="id" title="var">wp_pure</span> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.If"><span class="id" title="constructor">If</span></a> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.LitBool"><span class="id" title="constructor">LitBool</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>)) <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_unop" := <span class="id" title="var">wp_pure</span> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.UnOp"><span class="id" title="constructor">UnOp</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_binop" := <span class="id" title="var">wp_pure</span> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.BinOp"><span class="id" title="constructor">BinOp</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_op" := <span class="id" title="var">wp_unop</span> || <span class="id" title="var">wp_binop</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_lam" := <span class="id" title="var">wp_rec</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_let" := <span class="id" title="var">wp_pure</span> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.Rec"><span class="id" title="constructor">Rec</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#BAnon"><span class="id" title="constructor">BAnon</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#BNamed"><span class="id" title="constructor">BNamed</span></a> <span class="id" title="var">_</span>) <span class="id" title="var">_</span>); <span class="id" title="var">wp_lam</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_seq" := <span class="id" title="var">wp_pure</span> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.Rec"><span class="id" title="constructor">Rec</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#BAnon"><span class="id" title="constructor">BAnon</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.binders.html#BAnon"><span class="id" title="constructor">BAnon</span></a> <span class="id" title="var">_</span>); <span class="id" title="var">wp_lam</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_proj" := <span class="id" title="var">wp_pure</span> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.Fst"><span class="id" title="constructor">Fst</span></a> <span class="id" title="var">_</span>) || <span class="id" title="var">wp_pure</span> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.Snd"><span class="id" title="constructor">Snd</span></a> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_case" := <span class="id" title="var">wp_pure</span> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.Case"><span class="id" title="constructor">Case</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_match" := <span class="id" title="var">wp_case</span>; <span class="id" title="var">wp_pure</span> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.Rec"><span class="id" title="constructor">Rec</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="var">wp_lam</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_inj" := <span class="id" title="var">wp_pure</span> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.InjL"><span class="id" title="constructor">InjL</span></a> <span class="id" title="var">_</span>) || <span class="id" title="var">wp_pure</span> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.InjR"><span class="id" title="constructor">InjR</span></a> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_pair" := <span class="id" title="var">wp_pure</span> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.Pair"><span class="id" title="constructor">Pair</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_closure" := <span class="id" title="var">wp_pure</span> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.Rec"><span class="id" title="constructor">Rec</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="tac_chip" class="idref" href="#tac_chip"><span class="id" title="lemma">tac_chip</span></a> `{<a id="tachisWpGS0:64" class="idref" href="#tachisWpGS0:64"><span class="id" title="binder">!</span></a><a id="tachisWpGS0:64" class="idref" href="#tachisWpGS0:64"><span class="id" title="binder">tachisWpGS</span></a> <a id="tachisWpGS0:64" class="idref" href="#tachisWpGS0:64"><span class="id" title="binder">prob_lang</span></a> <a id="45eeb0a1cf4691796472cadbc1cb66fd" class="idref" href="#45eeb0a1cf4691796472cadbc1cb66fd"><span class="id" title="binder"><span id="tachisWpGS0:64" class="id">Σ</span></span></a>} <a id="i:65" class="idref" href="#i:65"><span class="id" title="binder">i</span></a> <a id="j:66" class="idref" href="#j:66"><span class="id" title="binder">j</span></a> <a id="b1a7cdf1510cde46f3470a3f9470490c" class="idref" href="#b1a7cdf1510cde46f3470a3f9470490c"><span class="id" title="binder">Δ1</span></a> <a id="7986fce5528547e852f37d914fb99491" class="idref" href="#7986fce5528547e852f37d914fb99491"><span class="id" title="binder">Δ2</span></a> <a id="424b16c6c39a32314c8b9362a6a59866" class="idref" href="#424b16c6c39a32314c8b9362a6a59866"><span class="id" title="binder">Δ3</span></a> <a id="r:70" class="idref" href="#r:70"><span class="id" title="binder">r</span></a> <a id="P:71" class="idref" href="#P:71"><span class="id" title="binder">P</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_lookup"><span class="id" title="definition">envs_lookup</span></a> <a class="idref" href="tachis.tachis.proofmode.html#i:65"><span class="id" title="variable">i</span></a> <a class="idref" href="tachis.tachis.proofmode.html#b1a7cdf1510cde46f3470a3f9470490c"><span class="id" title="variable">Δ1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.proofmode.html#r:70"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;(1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.proofmode.html#r:70"><span class="id" title="variable">r</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_simple_replace"><span class="id" title="definition">envs_simple_replace</span></a> <a class="idref" href="tachis.tachis.proofmode.html#i:65"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#Esnoc"><span class="id" title="constructor">Esnoc</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#Enil"><span class="id" title="constructor">Enil</span></a> <a class="idref" href="tachis.tachis.proofmode.html#i:65"><span class="id" title="variable">i</span></a> (<a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.proofmode.html#r:70"><span class="id" title="variable">r</span></a>  <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1<a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">)</span></a>)) <a class="idref" href="tachis.tachis.proofmode.html#b1a7cdf1510cde46f3470a3f9470490c"><span class="id" title="variable">Δ1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="tachis.tachis.proofmode.html#7986fce5528547e852f37d914fb99491"><span class="id" title="variable">Δ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_app"><span class="id" title="definition">envs_app</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#Esnoc"><span class="id" title="constructor">Esnoc</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#Enil"><span class="id" title="constructor">Enil</span></a> <a class="idref" href="tachis.tachis.proofmode.html#j:66"><span class="id" title="variable">j</span></a> (<a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> 1)) <a class="idref" href="tachis.tachis.proofmode.html#7986fce5528547e852f37d914fb99491"><span class="id" title="variable">Δ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="tachis.tachis.proofmode.html#424b16c6c39a32314c8b9362a6a59866"><span class="id" title="variable">Δ3</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_entails"><span class="id" title="definition">envs_entails</span></a> <a class="idref" href="tachis.tachis.proofmode.html#424b16c6c39a32314c8b9362a6a59866"><span class="id" title="variable">Δ3</span></a> <a class="idref" href="tachis.tachis.proofmode.html#P:71"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_entails"><span class="id" title="definition">envs_entails</span></a> <a class="idref" href="tachis.tachis.proofmode.html#b1a7cdf1510cde46f3470a3f9470490c"><span class="id" title="variable">Δ1</span></a> <a class="idref" href="tachis.tachis.proofmode.html#P:71"><span class="id" title="variable">P</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_entails_unseal"><span class="id" title="definition">envs_entails_unseal</span></a> =&gt;/= ???? <span class="id" title="var">Hcnt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_simple_replace_singleton_sound"><span class="id" title="lemma">envs_simple_replace_singleton_sound</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="tachis.tachis.expected_time_credits.html#etc_split_le"><span class="id" title="lemma">etc_split_le</span></a> 1); [|<span class="id" title="var">lra</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.environments.html#envs_app_singleton_sound"><span class="id" title="lemma">envs_app_singleton_sound</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcnt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "/= [[H1 Hc] HP]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"HP" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hc H1"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Takes <span class="inlinecode"><span class="id" title="var">H1</span></span> <span class="inlinecode">:</span> <span class="inlinecode">⧖</span> <span class="inlinecode"><span class="id" title="var">r</span></span> to <span class="inlinecode"><span class="id" title="var">H2</span></span> <span class="inlinecode">:</span> <span class="inlinecode">⧖</span> <span class="inlinecode">1</span> and <span class="inlinecode"><span class="id" title="var">H1</span></span> <span class="inlinecode">:</span> <span class="inlinecode">⧖</span> <span class="inlinecode">(<span class="id" title="var">r</span></span> <span class="inlinecode">-</span> <span class="inlinecode">1)</span> if <span class="inlinecode">1</span> <span class="inlinecode">&lt;=</span> <span class="inlinecode"><span class="id" title="var">r</span></span> 
</div>
<div class="code">
<span class="id" title="keyword">Tactic Notation</span> "iChip" <span class="id" title="keyword">constr</span>(<span class="id" title="var">H1</span>) "as" <span class="id" title="keyword">constr</span>(<span class="id" title="var">H2</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="tachis.tachis.proofmode.html#tac_chip"><span class="id" title="lemma">tac_chip</span></a> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>);<br/>
&nbsp;&nbsp;[<span class="id" title="var">iAssumptionCore</span> || <span class="id" title="tactic">fail</span> "iChip: cannot find credit '⧖ ?'"<br/>
&nbsp;&nbsp;| <span class="comment">(*&nbsp;<span class="inlinecode">1</span> <span class="inlinecode">&lt;=</span> <span class="inlinecode"><span class="id" title="var">r</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lra</span><br/>
&nbsp;&nbsp;|<span class="id" title="var">done</span>|<span class="id" title="var">done</span>|].<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "iChip" <span class="id" title="keyword">constr</span>(<span class="id" title="var">H1</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Htmp</span> := <span class="id" title="var">iFresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">iChip</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Htmp</span>.<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "iChip" :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Htmp</span> := <span class="id" title="var">iFresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="tachis.tachis.proofmode.html#tac_chip"><span class="id" title="lemma">tac_chip</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Htmp</span>);<br/>
&nbsp;&nbsp;[<span class="id" title="var">iAssumptionCore</span> || <span class="id" title="tactic">fail</span> "iChip: cannot find credit '⧖ ?'"<br/>
&nbsp;&nbsp;| <span class="comment">(*&nbsp;<span class="inlinecode">1</span> <span class="inlinecode">&lt;=</span> <span class="inlinecode"><span class="id" title="var">r</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lra</span><br/>
&nbsp;&nbsp;|<span class="id" title="var">done</span>|<span class="id" title="var">done</span>|].<br/>

<br/>
</div>

<div class="doc">
Some very primitive heap tactics  
</div>
<div class="code">
<span class="id" title="keyword">Tactic Notation</span> "wp_alloc" <span class="id" title="var">ident</span>(<span class="id" title="var">l</span>) "as" <span class="id" title="keyword">constr</span>(<span class="id" title="var">H</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Htmp</span> := <span class="id" title="var">iFresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">iPoseProof</span> <a class="idref" href="tachis.tachis.primitive_laws.html#wp_alloc"><span class="id" title="lemma">wp_alloc</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">Htmp</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_true_2"><span class="id" title="lemma">bool_decide_eq_true_2</span></a> //; []<br/>
&nbsp;&nbsp;&nbsp;|| <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_false_2"><span class="id" title="lemma">bool_decide_eq_false_2</span></a> //; []);<br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="tactic">eval</span> <span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> (<a class="idref" href="tachis.tachis.ert_weakestpre.html#cost"><span class="id" title="method">cost</span></a> (<a class="idref" href="tachis.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">ref</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>42)) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R0"><span class="id" title="axiom">R0</span></a> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="var">iChip</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><span class="id" title="var">Htmp</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>;<br/>
&nbsp;&nbsp;<span class="id" title="var">iClear</span> <span class="id" title="var">Htmp</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">l</span>) <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_alloc" <span class="id" title="var">ident</span>(<span class="id" title="var">l</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">wp_alloc</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> "?".<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_alloc" :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">l</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wp_alloc</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> "?".<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_store" :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Htmp</span> := <span class="id" title="var">iFresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">iPoseProof</span> <a class="idref" href="tachis.tachis.primitive_laws.html#wp_store"><span class="id" title="lemma">wp_store</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">Htmp</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_true_2"><span class="id" title="lemma">bool_decide_eq_true_2</span></a> //; []<br/>
&nbsp;&nbsp;&nbsp;|| <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_false_2"><span class="id" title="lemma">bool_decide_eq_false_2</span></a> //; []);<br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="tactic">eval</span> <span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> (<a class="idref" href="tachis.tachis.ert_weakestpre.html#cost"><span class="id" title="method">cost</span></a> (<a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1 <a class="idref" href="tachis.prob_lang.notation.html#::expr_scope:x_'&lt;-'_x"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>42)%<span class="id" title="var">E</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R0"><span class="id" title="axiom">R0</span></a> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="var">iChip</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><span class="id" title="var">Htmp</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>;<br/>
&nbsp;&nbsp;<span class="id" title="var">iClear</span> <span class="id" title="var">Htmp</span>.<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "wp_load" :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Htmp</span> := <span class="id" title="var">iFresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">iPoseProof</span> <a class="idref" href="tachis.tachis.primitive_laws.html#wp_load"><span class="id" title="lemma">wp_load</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">Htmp</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_true_2"><span class="id" title="lemma">bool_decide_eq_true_2</span></a> //; []<br/>
&nbsp;&nbsp;&nbsp;|| <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_false_2"><span class="id" title="lemma">bool_decide_eq_false_2</span></a> //; []);<br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="tactic">eval</span> <span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> (<a class="idref" href="tachis.tachis.ert_weakestpre.html#cost"><span class="id" title="method">cost</span></a> (<a class="idref" href="tachis.prob_lang.notation.html#569b74bc432a2b233b93ae1b45418e26"><span class="id" title="notation">!</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1)%<span class="id" title="var">E</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R0"><span class="id" title="axiom">R0</span></a> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="var">iChip</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><span class="id" title="var">Htmp</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>;<br/>
&nbsp;&nbsp;<span class="id" title="var">iClear</span> <span class="id" title="var">Htmp</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="tests" class="idref" href="#tests"><span class="id" title="section">tests</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="tachisGS0:73" class="idref" href="#tachisGS0:73"><span class="id" title="binder">!</span></a><a id="tachisGS0:73" class="idref" href="#tachisGS0:73"><span class="id" title="binder">tachisGS</span></a> <a id="5f7f8a3a36b9c7b682466610e664c174" class="idref" href="#5f7f8a3a36b9c7b682466610e664c174"><span class="id" title="binder"><span id="tachisGS0:73" class="id">Σ</span></span></a> <a id="tachisGS0:73" class="idref" href="#tachisGS0:73"><span class="id" title="binder">Cost1</span></a>}.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="test_wp_pure" class="idref" href="#test_wp_pure"><span class="id" title="lemma">test_wp_pure</span></a> (<a id="r:74" class="idref" href="#r:74"><span class="id" title="binder">r</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R"><span class="id" title="axiom">R</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.proofmode.html#r:74"><span class="id" title="variable">r</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">{{{</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> <a class="idref" href="tachis.tachis.proofmode.html#r:74"><span class="id" title="variable">r</span></a><a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">)</span></a> <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">}}}</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>2 <a class="idref" href="tachis.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>2 <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">{{{</span></a> <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>4<a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">;</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.proofmode.html#r:74"><span class="id" title="variable">r</span></a> <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (??) "Hx Hp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> <span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">r</span>)%<span class="id" title="var">R</span> <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "Hp".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="test_wp_pure'" class="idref" href="#test_wp_pure'"><span class="id" title="lemma">test_wp_pure'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">{{{</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> 1 <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">}}}</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>2 <a class="idref" href="tachis.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>2 <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">{{{</span></a> <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>4<a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#::bi_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "Hx Hp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "Hp".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="test_multiple" class="idref" href="#test_multiple"><span class="id" title="lemma">test_multiple</span></a> <a id="r:75" class="idref" href="#r:75"><span class="id" title="binder">r</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">{{{</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> 2 <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.proofmode.html#r:75"><span class="id" title="variable">r</span></a> <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">}}}</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>2 <a class="idref" href="tachis.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>2 <a class="idref" href="tachis.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>2 <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">{{{</span></a> <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>6<a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">;</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.proofmode.html#r:75"><span class="id" title="variable">r</span></a> <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "[Hc Hr] H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pure_cost</span> <span class="id" title="keyword">with</span> "Hc".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pure_cost</span> <span class="id" title="keyword">with</span> "Hc".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "H".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="test_wp_pures" class="idref" href="#test_wp_pures"><span class="id" title="lemma">test_wp_pures</span></a> <a id="r:76" class="idref" href="#r:76"><span class="id" title="binder">r</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.proofmode.html#r:76"><span class="id" title="variable">r</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">{{{</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">(</span></a>2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> <a class="idref" href="tachis.tachis.proofmode.html#r:76"><span class="id" title="variable">r</span></a><a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">)</span></a> <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">}}}</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>2 <a class="idref" href="tachis.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>2 <a class="idref" href="tachis.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>2 <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">{{{</span></a> <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>6<a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">;</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.proofmode.html#r:76"><span class="id" title="variable">r</span></a> <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (??) "Hx Hp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> <span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">r</span>)%<span class="id" title="var">R</span> <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "Hp".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="test_wp_pures'" class="idref" href="#test_wp_pures'"><span class="id" title="lemma">test_wp_pures'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">{{{</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> 2 <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">}}}</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>2 <a class="idref" href="tachis.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>2 <a class="idref" href="tachis.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>2 <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">{{{</span></a> <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>6<a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">;</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> 0 <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "Hx Hp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0)%<span class="id" title="var">R</span> <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "Hp".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="test_wp_heap" class="idref" href="#test_wp_heap"><span class="id" title="lemma">test_wp_heap</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">{{{</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> 7 <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">}}}</span></a> <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "x" <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="tachis.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">ref</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>42 <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a> "x" <a class="idref" href="tachis.prob_lang.notation.html#::expr_scope:x_'&lt;-'_x"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>43<a class="idref" href="tachis.prob_lang.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">;;</span></a> <a class="idref" href="tachis.prob_lang.notation.html#569b74bc432a2b233b93ae1b45418e26"><span class="id" title="notation">!</span></a>"x" <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">{{{</span></a> <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>43<a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#::bi_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "Hc H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_alloc</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_store</span>; <span class="id" title="var">iIntros</span> "Hl".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_load</span>; <span class="id" title="var">iIntros</span> "Hl".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "H".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="tachis.tachis.proofmode.html#tests"><span class="id" title="section">tests</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="testsapp" class="idref" href="#testsapp"><span class="id" title="section">testsapp</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="tachisGS0:78" class="idref" href="#tachisGS0:78"><span class="id" title="binder">!</span></a><a id="tachisGS0:78" class="idref" href="#tachisGS0:78"><span class="id" title="binder">tachisGS</span></a> <a id="15bb1c35edab98229a8cfae9c0763c1a" class="idref" href="#15bb1c35edab98229a8cfae9c0763c1a"><span class="id" title="binder"><span id="tachisGS0:78" class="id">Σ</span></span></a> <a id="tachisGS0:78" class="idref" href="#tachisGS0:78"><span class="id" title="binder">CostApp</span></a>}.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="test_app_wp_pure" class="idref" href="#test_app_wp_pure"><span class="id" title="lemma">test_app_wp_pure</span></a> (<a id="r:79" class="idref" href="#r:79"><span class="id" title="binder">r</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R"><span class="id" title="axiom">R</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">{{{</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.proofmode.html#r:79"><span class="id" title="variable">r</span></a> <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">}}}</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>2 <a class="idref" href="tachis.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>2 <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">{{{</span></a> <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>4<a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">;</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.proofmode.html#r:79"><span class="id" title="variable">r</span></a> <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "Hx Hp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "Hp".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="test_app_wp_pure_app" class="idref" href="#test_app_wp_pure_app"><span class="id" title="lemma">test_app_wp_pure_app</span></a> (<a id="r:80" class="idref" href="#r:80"><span class="id" title="binder">r</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R"><span class="id" title="axiom">R</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">{{{</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> 1 <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">}}}</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>2 <a class="idref" href="tachis.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a> <a class="idref" href="tachis.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">λ</span></a><a class="idref" href="tachis.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">:</span></a> "x"<a class="idref" href="tachis.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">,</span></a> "x"<a class="idref" href="tachis.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">)</span></a> <a class="idref" href="tachis.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">#2</span></a> <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">{{{</span></a> <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>4<a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">;</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> 0 <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "Hx Hp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0)%<span class="id" title="var">R</span> <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "Hp".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="test_app_wp_heap" class="idref" href="#test_app_wp_heap"><span class="id" title="lemma">test_app_wp_heap</span></a> (<a id="r:81" class="idref" href="#r:81"><span class="id" title="binder">r</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R"><span class="id" title="axiom">R</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">{{{</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> 3 <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">}}}</span></a> <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "x" <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="tachis.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">ref</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>42 <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a> "x" <a class="idref" href="tachis.prob_lang.notation.html#::expr_scope:x_'&lt;-'_x"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>43<a class="idref" href="tachis.prob_lang.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">;;</span></a> <a class="idref" href="tachis.prob_lang.notation.html#569b74bc432a2b233b93ae1b45418e26"><span class="id" title="notation">!</span></a>"x" <a class="idref" href="tachis.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a> <a class="idref" href="tachis.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">λ</span></a><a class="idref" href="tachis.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">:</span></a> "x"<a class="idref" href="tachis.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">,</span></a> "x"<a class="idref" href="tachis.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">)</span></a> <a class="idref" href="tachis.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">#2</span></a> <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">{{{</span></a> <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>45<a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">;</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> 0 <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "Hx Hp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_alloc</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> "Hl".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_store</span>; <span class="id" title="var">iIntros</span> "Hl".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_load</span>; <span class="id" title="var">iIntros</span> "Hl".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (3 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0)%<span class="id" title="var">R</span> <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "Hp".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="tachis.tachis.proofmode.html#testsapp"><span class="id" title="section">testsapp</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="testtick" class="idref" href="#testtick"><span class="id" title="section">testtick</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="tachisGS0:83" class="idref" href="#tachisGS0:83"><span class="id" title="binder">!</span></a><a id="tachisGS0:83" class="idref" href="#tachisGS0:83"><span class="id" title="binder">tachisGS</span></a> <a id="cfef01e03494c5eba8f86f1492cd95f1" class="idref" href="#cfef01e03494c5eba8f86f1492cd95f1"><span class="id" title="binder"><span id="tachisGS0:83" class="id">Σ</span></span></a> <a id="tachisGS0:83" class="idref" href="#tachisGS0:83"><span class="id" title="binder">CostTick</span></a>}.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="test_tick_wp_pure" class="idref" href="#test_tick_wp_pure"><span class="id" title="lemma">test_tick_wp_pure</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">{{{</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> 5 <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">}}}</span></a> <a class="idref" href="tachis.prob_lang.notation.html#tick"><span class="id" title="abbreviation">tick</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1<a class="idref" href="tachis.prob_lang.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">;;</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>2 <a class="idref" href="tachis.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>2<a class="idref" href="tachis.prob_lang.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">;;</span></a> <a class="idref" href="tachis.prob_lang.notation.html#tick"><span class="id" title="abbreviation">tick</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>4 <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">{{{</span></a> <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="tachis.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a><a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">;</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> 0 <a class="idref" href="tachis.bi.weakestpre.html#293533ceb50477598748589950288e22"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "Hx Hp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "Hp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.expected_time_credits.html#etc_irrel"><span class="id" title="lemma">etc_irrel</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hx"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="tachis.tachis.proofmode.html#testtick"><span class="id" title="section">testtick</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/coq-community/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
