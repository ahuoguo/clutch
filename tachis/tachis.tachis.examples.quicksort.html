<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resources/config.js"></script>
<script type="text/javascript" src="resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/logsem/clutch">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">tachis.tachis.examples.quicksort</h1>

<div class="code">
</div>

<div class="doc">
<a id="lab45"></a><h1 class="section">Exact time credit accounting for Quicksort</h1>

</div>
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">tachis.tachis</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="tachis.tachis.ert_weakestpre.html#"><span class="id" title="library">ert_weakestpre</span></a> <a class="idref" href="tachis.tachis.lifting.html#"><span class="id" title="library">lifting</span></a> <a class="idref" href="tachis.tachis.ectx_lifting.html#"><span class="id" title="library">ectx_lifting</span></a> <a class="idref" href="tachis.tachis.primitive_laws.html#"><span class="id" title="library">primitive_laws</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#"><span class="id" title="library">expected_time_credits</span></a> <a class="idref" href="tachis.tachis.cost_models.html#"><span class="id" title="library">cost_models</span></a> <a class="idref" href="tachis.tachis.problang_wp.html#"><span class="id" title="library">problang_wp</span></a> <a class="idref" href="tachis.tachis.proofmode.html#"><span class="id" title="library">proofmode</span></a> <a class="idref" href="tachis.tachis.ert_rules.html#"><span class="id" title="library">ert_rules</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">tachis.common</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="tachis.common.inject.html#"><span class="id" title="library">inject</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.proofmode</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.tactics.html#"><span class="id" title="library">tactics</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Reals.html#"><span class="id" title="library">Reals</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.micromega.Psatz.html#"><span class="id" title="library">Psatz</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sorting.html#"><span class="id" title="library">sorting</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Program.Tactics.html#"><span class="id" title="library">Coq.Program.Tactics</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Program.Wf.html#"><span class="id" title="library">Coq.Program.Wf</span></a>.<br/>

<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Default</span> <span class="id" title="keyword">Proof</span> <span class="id" title="var">Using</span> "Type*".<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.micromega.Lra.html#"><span class="id" title="library">Lra</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="log_lib" class="idref" href="#log_lib"><span class="id" title="section">log_lib</span></a>.<br/>
</div>

<div class="doc">
Lemmas related to log 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ln_0" class="idref" href="#ln_0"><span class="id" title="lemma">ln_0</span></a> : (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rpower.html#ln"><span class="id" title="definition">ln</span></a> 0%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0%<span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">compute</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rlt_dec"><span class="id" title="lemma">Rlt_dec</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R0"><span class="id" title="axiom">R0</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R0"><span class="id" title="axiom">R0</span></a>); <span class="id" title="tactic">auto</span>. <span class="id" title="var">exfalso</span>. <span class="id" title="var">lra</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ln_pos" class="idref" href="#ln_pos"><span class="id" title="lemma">ln_pos</span></a> (<a id="n:1" class="idref" href="#n:1"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : (1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:1"><span class="id" title="variable">n</span></a>)%<span class="id" title="var">nat</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> (0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rpower.html#ln"><span class="id" title="definition">ln</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:1"><span class="id" title="variable">n</span></a>)%<span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rpower.html#exp_lt_inv"><span class="id" title="lemma">exp_lt_inv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rtrigo_def.html#exp_0"><span class="id" title="lemma">exp_0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">P</span> := (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#pos_INR"><span class="id" title="lemma">pos_INR</span></a> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rpower.html#exp_ln"><span class="id" title="lemma">exp_ln</span></a>; [<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#lt_1_INR"><span class="id" title="lemma">lt_1_INR</span></a>; <span class="id" title="var">lia</span> | <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#lt_0_INR"><span class="id" title="lemma">lt_0_INR</span></a>; <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ln_nonneg" class="idref" href="#ln_nonneg"><span class="id" title="lemma">ln_nonneg</span></a> (<a id="n:2" class="idref" href="#n:2"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : (0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rpower.html#ln"><span class="id" title="definition">ln</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:2"><span class="id" title="variable">n</span></a>)%<span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">n</span>]; [ <span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#ln_0"><span class="id" title="lemma">ln_0</span></a>; <span class="id" title="var">lra</span> | ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">n</span>]; [ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rpower.html#ln_1"><span class="id" title="lemma">ln_1</span></a>; <span class="id" title="var">lra</span> | ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rlt_le"><span class="id" title="lemma">Rlt_le</span></a>, <a class="idref" href="tachis.tachis.examples.quicksort.html#ln_pos"><span class="id" title="lemma">ln_pos</span></a>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Rlog_pos" class="idref" href="#Rlog_pos"><span class="id" title="lemma">Rlog_pos</span></a> (<a id="b:3" class="idref" href="#b:3"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R"><span class="id" title="axiom">R</span></a>) (<a id="v:4" class="idref" href="#v:4"><span class="id" title="binder">v</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : (1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#b:3"><span class="id" title="variable">b</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> (0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rpower.html#Rlog"><span class="id" title="definition">Rlog</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#b:3"><span class="id" title="variable">b</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#v:4"><span class="id" title="variable">v</span></a>)%<span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rpower.html#Rlog"><span class="id" title="definition">Rlog</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rdiv_def"><span class="id" title="lemma">Rdiv_def</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_le_pos"><span class="id" title="lemma">Rmult_le_pos</span></a>; [<span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#ln_nonneg"><span class="id" title="lemma">ln_nonneg</span></a> | ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rlt_le"><span class="id" title="lemma">Rlt_le</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rinv_0_lt_compat"><span class="id" title="lemma">Rinv_0_lt_compat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rpower.html#ln_exp"><span class="id" title="lemma">ln_exp</span></a> 0) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rtrigo_def.html#exp_0"><span class="id" title="lemma">exp_0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rpower.html#ln_increasing"><span class="id" title="lemma">ln_increasing</span></a>; <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Rlog_nonneg_nats" class="idref" href="#Rlog_nonneg_nats"><span class="id" title="lemma">Rlog_nonneg_nats</span></a> (<a id="b:5" class="idref" href="#b:5"><span class="id" title="binder">b</span></a> <a id="v:6" class="idref" href="#v:6"><span class="id" title="binder">v</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : (0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rpower.html#Rlog"><span class="id" title="definition">Rlog</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#b:5"><span class="id" title="variable">b</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#v:6"><span class="id" title="variable">v</span></a>)%<span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rpower.html#Rlog"><span class="id" title="definition">Rlog</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rdiv_def"><span class="id" title="lemma">Rdiv_def</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_le_pos"><span class="id" title="lemma">Rmult_le_pos</span></a>; [<span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#ln_nonneg"><span class="id" title="lemma">ln_nonneg</span></a> | ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>; [<span class="id" title="tactic">rewrite</span> /= <a class="idref" href="tachis.tachis.examples.quicksort.html#ln_0"><span class="id" title="lemma">ln_0</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rinv_0"><span class="id" title="lemma">Rinv_0</span></a>; <span class="id" title="var">lra</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>; [<span class="id" title="tactic">rewrite</span> /= <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rpower.html#ln_1"><span class="id" title="lemma">ln_1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rinv_0"><span class="id" title="lemma">Rinv_0</span></a>; <span class="id" title="var">lra</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rlt_le"><span class="id" title="lemma">Rlt_le</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rinv_0_lt_compat"><span class="id" title="lemma">Rinv_0_lt_compat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#ln_pos"><span class="id" title="lemma">ln_pos</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Rlog_increasing" class="idref" href="#Rlog_increasing"><span class="id" title="lemma">Rlog_increasing</span></a> <a id="x:7" class="idref" href="#x:7"><span class="id" title="binder">x</span></a> <a id="y:8" class="idref" href="#y:8"><span class="id" title="binder">y</span></a> <a id="b:9" class="idref" href="#b:9"><span class="id" title="binder">b</span></a> : (1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#b:9"><span class="id" title="variable">b</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> (0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:7"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#y:8"><span class="id" title="variable">y</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rpower.html#Rlog"><span class="id" title="definition">Rlog</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#b:9"><span class="id" title="variable">b</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:7"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rpower.html#Rlog"><span class="id" title="definition">Rlog</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#b:9"><span class="id" title="variable">b</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#y:8"><span class="id" title="variable">y</span></a>)%<span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rpower.html#Rlog"><span class="id" title="definition">Rlog</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rdiv_def"><span class="id" title="lemma">Rdiv_def</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_lt_compat_r"><span class="id" title="lemma">Rmult_lt_compat_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rinv_0_lt_compat"><span class="id" title="lemma">Rinv_0_lt_compat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rpower.html#ln_exp"><span class="id" title="lemma">ln_exp</span></a> 0) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rtrigo_def.html#exp_0"><span class="id" title="lemma">exp_0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rpower.html#ln_increasing"><span class="id" title="lemma">ln_increasing</span></a>; <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rpower.html#ln_increasing"><span class="id" title="lemma">ln_increasing</span></a>; <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#log_lib"><span class="id" title="section">log_lib</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="lib_misc" class="idref" href="#lib_misc"><span class="id" title="section">lib_misc</span></a>.<br/>
</div>

<div class="doc">
Lemmas: Move or eliminate 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="easy_fix_eq" class="idref" href="#easy_fix_eq"><span class="id" title="lemma">easy_fix_eq</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="A:10" class="idref" href="#A:10"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) (<a id="R:11" class="idref" href="#R:11"><span class="id" title="binder">R</span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#A:10"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:10"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) (<a id="Rwf:12" class="idref" href="#Rwf:12"><span class="id" title="binder">Rwf</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Wf.html#well_founded"><span class="id" title="definition">well_founded</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#R:11"><span class="id" title="variable">R</span></a>) (<a id="P:13" class="idref" href="#P:13"><span class="id" title="binder">P</span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#A:10"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="F:16" class="idref" href="#F:16"><span class="id" title="binder">F</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:14" class="idref" href="#x:14"><span class="id" title="binder">x</span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#A:10"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="y:15" class="idref" href="#y:15"><span class="id" title="binder">y</span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#A:10"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#R:11"><span class="id" title="variable">R</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#y:15"><span class="id" title="variable">y</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:14"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#P:13"><span class="id" title="variable">P</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#y:15"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#P:13"><span class="id" title="variable">P</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:14"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:17" class="idref" href="#x:17"><span class="id" title="binder">x</span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#A:10"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Wf.html#Fix"><span class="id" title="definition">Fix</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#Rwf:12"><span class="id" title="variable">Rwf</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#P:13"><span class="id" title="variable">P</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#F:16"><span class="id" title="variable">F</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:17"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#F:16"><span class="id" title="variable">F</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:17"><span class="id" title="variable">x</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="y:18" class="idref" href="#y:18"><span class="id" title="binder">y</span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#A:10"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">_</span> : <a class="idref" href="tachis.tachis.examples.quicksort.html#R:11"><span class="id" title="variable">R</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#y:18"><span class="id" title="variable">y</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:17"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Wf.html#Fix"><span class="id" title="definition">Fix</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#Rwf:12"><span class="id" title="variable">Rwf</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#P:13"><span class="id" title="variable">P</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#F:16"><span class="id" title="variable">F</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#y:18"><span class="id" title="variable">y</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Wf.html#Fix_eq"><span class="id" title="lemma">Init.Wf.Fix_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">f</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">g</span>) <span class="id" title="keyword">as</span> -&gt;; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality_dep"><span class="id" title="axiom">functional_extensionality_dep</span></a> =&gt; ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality_dep"><span class="id" title="axiom">functional_extensionality_dep</span></a> =&gt; ?. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="fin_inj_incr" class="idref" href="#fin_inj_incr"><span class="id" title="definition">fin_inj_incr</span></a> (<a id="n:19" class="idref" href="#n:19"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="i:20" class="idref" href="#i:20"><span class="id" title="binder">i</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:19"><span class="id" title="variable">n</span></a>) : (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:19"><span class="id" title="variable">n</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:20"><span class="id" title="variable">i</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0%<span class="id" title="var">fin</span> =&gt; 0%<span class="id" title="var">fin</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#FS"><span class="id" title="abbreviation">FS</span></a> <span class="id" title="var">_</span> <span class="id" title="var">i</span>) =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#FS"><span class="id" title="abbreviation">FS</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#fin_inj_incr:21"><span class="id" title="definition">fin_inj_incr</span></a> <span class="id" title="var">_</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:20"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="fin_inj_incr_to_nat" class="idref" href="#fin_inj_incr_to_nat"><span class="id" title="lemma">fin_inj_incr_to_nat</span></a> (<a id="n:23" class="idref" href="#n:23"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="i:24" class="idref" href="#i:24"><span class="id" title="binder">i</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:23"><span class="id" title="variable">n</span></a>) : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat"><span class="id" title="definition">fin_to_nat</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:24"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat"><span class="id" title="definition">fin_to_nat</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#fin_inj_incr"><span class="id" title="definition">fin_inj_incr</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:23"><span class="id" title="variable">n</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:24"><span class="id" title="variable">i</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">i</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">i'</span> <span class="id" title="var">IH</span>]; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="fmap_compat" class="idref" href="#fmap_compat"><span class="id" title="lemma">fmap_compat</span></a> `{<a id="A:25" class="idref" href="#A:25"><span class="id" title="binder">A</span></a>: <span class="id" title="keyword">Type</span>} `{<a id="B:26" class="idref" href="#B:26"><span class="id" title="binder">B</span></a>: <span class="id" title="keyword">Type</span>} <a id="f:27" class="idref" href="#f:27"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#list_fmap"><span class="id" title="instance">list_fmap</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:25"><span class="id" title="variable">A</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#B:26"><span class="id" title="variable">B</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#f:27"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#fmap"><span class="id" title="definition">fmap</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#f:27"><span class="id" title="variable">f</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#fmap"><span class="id" title="definition">fmap</span></a>. <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="fin_inj_FS_comm" class="idref" href="#fin_inj_FS_comm"><span class="id" title="lemma">fin_inj_FS_comm</span></a> (<a id="n:28" class="idref" href="#n:28"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="l:29" class="idref" href="#l:29"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:28"><span class="id" title="variable">n</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#FS"><span class="id" title="abbreviation">FS</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">&lt;$&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#fin_inj_incr"><span class="id" title="definition">fin_inj_incr</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">&lt;$&gt;</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:29"><span class="id" title="variable">l</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#fin_inj_incr"><span class="id" title="definition">fin_inj_incr</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">&lt;$&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#FS"><span class="id" title="abbreviation">FS</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">&lt;$&gt;</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:29"><span class="id" title="variable">l</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#list_fmap_compose"><span class="id" title="lemma">list_fmap_compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#list_fmap_compose"><span class="id" title="lemma">list_fmap_compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#Forall_fmap_ext"><span class="id" title="lemma">Forall_fmap_ext</span></a>, <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#Forall_true"><span class="id" title="lemma">Forall_true</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="fin_enum_snoc_rec" class="idref" href="#fin_enum_snoc_rec"><span class="id" title="lemma">fin_enum_snoc_rec</span></a> (<a id="n:30" class="idref" href="#n:30"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#fin_enum"><span class="id" title="definition">fin_enum</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:30"><span class="id" title="variable">n</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#fin_inj_incr"><span class="id" title="definition">fin_inj_incr</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:30"><span class="id" title="variable">n</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">&lt;$&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#fin_enum"><span class="id" title="definition">fin_enum</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:30"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a>(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#nat_to_fin"><span class="id" title="abbreviation">nat_to_fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#Nat.lt_succ_diag_r"><span class="id" title="lemma">Nat.lt_succ_diag_r</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:30"><span class="id" title="variable">n</span></a>) : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:30"><span class="id" title="variable">n</span></a>))%<span class="id" title="var">fin</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">n'</span> <span class="id" title="var">IH</span>]; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {1}/<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#fin_enum"><span class="id" title="definition">fin_enum</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {1}/<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#fin_enum"><span class="id" title="definition">fin_enum</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#fmap_app"><span class="id" title="lemma">fmap_app</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#fin_enum"><span class="id" title="definition">fin_enum</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#fmap_compat"><span class="id" title="lemma">fmap_compat</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#fin_inj_FS_comm"><span class="id" title="lemma">fin_inj_FS_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Logic.PropExtensionality.html#proof_irrelevance"><span class="id" title="lemma">proof_irrelevance</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="foldr_map_cmp" class="idref" href="#foldr_map_cmp"><span class="id" title="lemma">foldr_map_cmp</span></a> `{<a id="A:31" class="idref" href="#A:31"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="B:32" class="idref" href="#B:32"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="C:33" class="idref" href="#C:33"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>} (<a id="f:34" class="idref" href="#f:34"><span class="id" title="binder">f</span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#B:32"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#C:33"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#C:33"><span class="id" title="variable">C</span></a>) (<a id="g:35" class="idref" href="#g:35"><span class="id" title="binder">g</span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#A:31"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#B:32"><span class="id" title="variable">B</span></a>) (<a id="c0:36" class="idref" href="#c0:36"><span class="id" title="binder">c0</span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#C:33"><span class="id" title="variable">C</span></a>) (<a id="L:37" class="idref" href="#L:37"><span class="id" title="binder">L</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:31"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#f:34"><span class="id" title="variable">f</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#c0:36"><span class="id" title="variable">c0</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#g:35"><span class="id" title="variable">g</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:37"><span class="id" title="variable">L</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#f:34"><span class="id" title="variable">f</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#g:35"><span class="id" title="variable">g</span></a>) <a class="idref" href="tachis.tachis.examples.quicksort.html#c0:36"><span class="id" title="variable">c0</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:37"><span class="id" title="variable">L</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">L</span> <span class="id" title="keyword">as</span> [|? ? <span class="id" title="var">IH</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="foldr_plus_comm_acc" class="idref" href="#foldr_plus_comm_acc"><span class="id" title="lemma">foldr_plus_comm_acc</span></a> `{<a id="A:38" class="idref" href="#A:38"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} (<a id="g:39" class="idref" href="#g:39"><span class="id" title="binder">g</span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#A:38"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R"><span class="id" title="axiom">R</span></a>) (<a id="x:40" class="idref" href="#x:40"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R"><span class="id" title="axiom">R</span></a>) (<a id="L:41" class="idref" href="#L:41"><span class="id" title="binder">L</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:38"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#g:39"><span class="id" title="variable">g</span></a>) <a class="idref" href="tachis.tachis.examples.quicksort.html#x:40"><span class="id" title="variable">x</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:41"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#x:40"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#g:39"><span class="id" title="variable">g</span></a>) 0%<span class="id" title="var">R</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:41"><span class="id" title="variable">L</span></a>)%<span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">L</span> <span class="id" title="keyword">as</span> [| ? ? <span class="id" title="var">IH</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /= <span class="id" title="var">IH</span>. <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#lib_misc"><span class="id" title="section">lib_misc</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sorting" class="idref" href="#sorting"><span class="id" title="section">sorting</span></a>.<br/>
</div>

<div class="doc">
Definitions related to specifying a sorting function 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="A:42" class="idref" href="#A:42"><span class="id" title="binder">A</span></a>} (<a id="R:43" class="idref" href="#R:43"><span class="id" title="binder">R</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:42"><span class="id" title="variable">A</span></a>) `{<a id="H:46" class="idref" href="#H:46"><span class="id" title="binder">∀</span></a> <a id="x:44" class="idref" href="#x:44"><span class="id" title="binder"><span id="H:46" class="id">x</span></span></a> <a id="y:45" class="idref" href="#y:45"><span class="id" title="binder"><span id="H:46" class="id">y</span></span></a><a id="H:46" class="idref" href="#H:46"><span class="id" title="binder">,</span></a> <a id="H:46" class="idref" href="#H:46"><span class="id" title="binder">Decision</span></a> <a id="H:46" class="idref" href="#H:46"><span class="id" title="binder">(</span></a><a id="H:46" class="idref" href="#H:46"><span class="id" title="binder">R</span></a> <a id="H:46" class="idref" href="#H:46"><span class="id" title="binder">x</span></a> <a id="H:46" class="idref" href="#H:46"><span class="id" title="binder">y</span></a><a id="H:46" class="idref" href="#H:46"><span class="id" title="binder">)</span></a>} `{<a id="TotalOrder0:47" class="idref" href="#TotalOrder0:47"><span class="id" title="binder">!</span></a><a id="TotalOrder0:47" class="idref" href="#TotalOrder0:47"><span class="id" title="binder">TotalOrder</span></a> <a id="TotalOrder0:47" class="idref" href="#TotalOrder0:47"><span class="id" title="binder">R</span></a>} `{<a id="H0:48" class="idref" href="#H0:48"><span class="id" title="binder">Inhabited</span></a> <a id="H0:48" class="idref" href="#H0:48"><span class="id" title="binder">A</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="rank" class="idref" href="#rank"><span class="id" title="definition">rank</span></a> (<a id="L:49" class="idref" href="#L:49"><span class="id" title="binder">L</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#sorting.A"><span class="id" title="variable">A</span></a>) (<a id="x:50" class="idref" href="#x:50"><span class="id" title="binder">x</span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#sorting.A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">List.filter</span></a> (<span class="id" title="keyword">fun</span> <a id="y:51" class="idref" href="#y:51"><span class="id" title="binder">y</span></a> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#strict"><span class="id" title="definition">strict</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#sorting.R"><span class="id" title="variable">R</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#y:51"><span class="id" title="variable">y</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:50"><span class="id" title="variable">x</span></a>)) <a class="idref" href="tachis.tachis.examples.quicksort.html#L:49"><span class="id" title="variable">L</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="perm_filter" class="idref" href="#perm_filter"><span class="id" title="lemma">perm_filter</span></a> `{<a id="S:52" class="idref" href="#S:52"><span class="id" title="binder">S</span></a> : <span class="id" title="keyword">Type</span>} <a id="L1:53" class="idref" href="#L1:53"><span class="id" title="binder">L1</span></a> <a id="L2:54" class="idref" href="#L2:54"><span class="id" title="binder">L2</span></a> (<a id="f:55" class="idref" href="#f:55"><span class="id" title="binder">f</span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#S:52"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#L1:53"><span class="id" title="variable">L1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">≡ₚ</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L2:54"><span class="id" title="variable">L2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">List.filter</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#f:55"><span class="id" title="variable">f</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L1:53"><span class="id" title="variable">L1</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">≡ₚ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">List.filter</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#f:55"><span class="id" title="variable">f</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L2:54"><span class="id" title="variable">L2</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">L2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">L1</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">L'</span> <span class="id" title="var">LS</span> <span class="id" title="var">IH</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> ? <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Sorting.Permutation.html#Permutation_nil"><span class="id" title="lemma">Permutation_nil</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">L2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HPerm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hex</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="L2A:56" class="idref" href="#L2A:56"><span class="id" title="binder"><span id="L2A:58" class="id">L2A</span></span></a> <a id="L2B:57" class="idref" href="#L2B:57"><span class="id" title="binder"><span id="L2B:59" class="id">L2B</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">S</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <span class="id" title="var">L2</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L2A:56"><span class="id" title="variable">L2A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">L'</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L2B:57"><span class="id" title="variable">L2B</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#in_split"><span class="id" title="lemma">in_split</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Sorting.Permutation.html#Permutation_in"><span class="id" title="lemma">Permutation_in</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">HPerm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#in_eq"><span class="id" title="lemma">in_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hex</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hex1</span> [<span class="id" title="var">Hex2</span> -&gt;]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Sorting.Permutation.html#Permutation_middle"><span class="id" title="lemma">Permutation_middle</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HPerm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Sorting.Permutation.html#Permutation_cons_inv"><span class="id" title="lemma">Permutation_cons_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HPerm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter_app"><span class="id" title="lemma">List.filter_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">f</span> <span class="id" title="var">L'</span>); <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Sorting.Permutation.html#Permutation_middle"><span class="id" title="lemma">Permutation_middle</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#Permutation_skip"><span class="id" title="lemma">Permutation_skip</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter_app"><span class="id" title="lemma">List.filter_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter_app"><span class="id" title="lemma">List.filter_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="rank_inv_perm" class="idref" href="#rank_inv_perm"><span class="id" title="lemma">rank_inv_perm</span></a> <a id="L1:60" class="idref" href="#L1:60"><span class="id" title="binder">L1</span></a> <a id="L2:61" class="idref" href="#L2:61"><span class="id" title="binder">L2</span></a> <a id="x:62" class="idref" href="#x:62"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#L1:60"><span class="id" title="variable">L1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">≡ₚ</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L2:61"><span class="id" title="variable">L2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#rank"><span class="id" title="definition">rank</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L1:60"><span class="id" title="variable">L1</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:62"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#rank"><span class="id" title="definition">rank</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L2:61"><span class="id" title="variable">L2</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:62"><span class="id" title="variable">x</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#rank"><span class="id" title="definition">rank</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Sorting.Permutation.html#Permutation_length"><span class="id" title="lemma">Permutation_length</span></a>, <a class="idref" href="tachis.tachis.examples.quicksort.html#perm_filter"><span class="id" title="lemma">perm_filter</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="rank_to_sorted" class="idref" href="#rank_to_sorted"><span class="id" title="lemma">rank_to_sorted</span></a> <a id="L:63" class="idref" href="#L:63"><span class="id" title="binder">L</span></a> <a id="x:64" class="idref" href="#x:64"><span class="id" title="binder">x</span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#rank"><span class="id" title="definition">rank</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sorting.html#merge_sort"><span class="id" title="definition">merge_sort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#sorting.R"><span class="id" title="variable">R</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:63"><span class="id" title="variable">L</span></a>) <a class="idref" href="tachis.tachis.examples.quicksort.html#x:64"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#rank"><span class="id" title="definition">rank</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:63"><span class="id" title="variable">L</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:64"><span class="id" title="variable">x</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#rank_inv_perm"><span class="id" title="lemma">rank_inv_perm</span></a>, <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sorting.html#merge_sort_Permutation"><span class="id" title="lemma">merge_sort_Permutation</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="index_to_rank" class="idref" href="#index_to_rank"><span class="id" title="definition">index_to_rank</span></a> (<a id="L:65" class="idref" href="#L:65"><span class="id" title="binder">L</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#sorting.A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> := <a class="idref" href="tachis.tachis.examples.quicksort.html#rank"><span class="id" title="definition">rank</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:65"><span class="id" title="variable">L</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <a id="i:66" class="idref" href="#i:66"><span class="id" title="binder">i</span></a> =&gt; <a class="idref" href="tachis.tachis.examples.quicksort.html#L:65"><span class="id" title="variable">L</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#5a6ec76419c81272088828e5026fff95"><span class="id" title="notation">!!!</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:66"><span class="id" title="variable">i</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
Permutations over the index space 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Separate&nbsp;definition&nbsp;so&nbsp;it&nbsp;stops&nbsp;getting&nbsp;unfolded&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="index_space" class="idref" href="#index_space"><span class="id" title="definition">index_space</span></a> <a id="N:67" class="idref" href="#N:67"><span class="id" title="binder">N</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> := (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a> 0%<span class="id" title="var">nat</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#N:67"><span class="id" title="variable">N</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="index_space_emp" class="idref" href="#index_space_emp"><span class="id" title="lemma">index_space_emp</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> 0<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> /=. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="index_space_snoc" class="idref" href="#index_space_snoc"><span class="id" title="lemma">index_space_snoc</span></a> <a id="N:68" class="idref" href="#N:68"><span class="id" title="binder">N</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#N:68"><span class="id" title="variable">N</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#N:68"><span class="id" title="variable">N</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#N:68"><span class="id" title="variable">N</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq_S"><span class="id" title="lemma">seq_S</span></a> /=. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="index_space_cons" class="idref" href="#index_space_cons"><span class="id" title="lemma">index_space_cons</span></a> <a id="N:69" class="idref" href="#N:69"><span class="id" title="binder">N</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#N:69"><span class="id" title="variable">N</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#fmap"><span class="id" title="definition">fmap</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#N:69"><span class="id" title="variable">N</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> /= <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list_numbers.html#fmap_S_seq"><span class="id" title="lemma">fmap_S_seq</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="index_space_unfold" class="idref" href="#index_space_unfold"><span class="id" title="lemma">index_space_unfold</span></a> <a id="N:70" class="idref" href="#N:70"><span class="id" title="binder">N</span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#N:70"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a> 0%<span class="id" title="var">nat</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#N:70"><span class="id" title="variable">N</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> /=. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a>.<br/>

<br/>
</div>

<div class="doc">
List reversal permutation 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="equal_perm" class="idref" href="#equal_perm"><span class="id" title="lemma">equal_perm</span></a> `{<a id="T:71" class="idref" href="#T:71"><span class="id" title="binder">T</span></a> : <span class="id" title="keyword">Type</span>} (<a id="L1:72" class="idref" href="#L1:72"><span class="id" title="binder">L1</span></a> <a id="L2:73" class="idref" href="#L2:73"><span class="id" title="binder">L2</span></a>: <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#T:71"><span class="id" title="variable">T</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#L1:72"><span class="id" title="variable">L1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L2:73"><span class="id" title="variable">L2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#L1:72"><span class="id" title="variable">L1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">≡ₚ</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L2:73"><span class="id" title="variable">L2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>; <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="reverse_order" class="idref" href="#reverse_order"><span class="id" title="definition">reverse_order</span></a> `{<a id="T:74" class="idref" href="#T:74"><span class="id" title="binder">T</span></a> : <span class="id" title="keyword">Type</span>} (<a id="L:75" class="idref" href="#L:75"><span class="id" title="binder">L</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#T:74"><span class="id" title="variable">T</span></a>) (<a id="i:76" class="idref" href="#i:76"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> := (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:75"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:76"><span class="id" title="variable">i</span></a>)%<span class="id" title="var">nat</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="reverse_perm" class="idref" href="#reverse_perm"><span class="id" title="lemma">reverse_perm</span></a> <a id="N:77" class="idref" href="#N:77"><span class="id" title="binder">N</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#N:77"><span class="id" title="variable">N</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">≡ₚ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#reverse_order"><span class="id" title="definition">reverse_order</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#N:77"><span class="id" title="variable">N</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">&lt;$&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#N:77"><span class="id" title="variable">N</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">N</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">N'</span> <span class="id" title="var">IH</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#reverse_order"><span class="id" title="definition">reverse_order</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq_length"><span class="id" title="lemma">seq_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#reverse_order"><span class="id" title="definition">reverse_order</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq_length"><span class="id" title="lemma">seq_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {2}<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space_cons"><span class="id" title="lemma">index_space_cons</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#fmap_cons"><span class="id" title="definition">fmap_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {1}<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space_snoc"><span class="id" title="lemma">index_space_snoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Sorting.Permutation.html#Permutation_cons_append"><span class="id" title="lemma">Permutation_cons_append</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">N'</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 0) <span class="id" title="keyword">with</span> <span class="id" title="var">N'</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {1}<span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#equal_perm"><span class="id" title="lemma">equal_perm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#list_fmap_compose"><span class="id" title="lemma">list_fmap_compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#list_fmap_ext"><span class="id" title="lemma">list_fmap_ext</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list_numbers.html#lookup_seq"><span class="id" title="lemma">lookup_seq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Index to list permutation on index_space 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="list_access_perm" class="idref" href="#list_access_perm"><span class="id" title="lemma">list_access_perm</span></a> (<a id="L:78" class="idref" href="#L:78"><span class="id" title="binder">L</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#sorting.A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="i:79" class="idref" href="#i:79"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:78"><span class="id" title="variable">L</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#5a6ec76419c81272088828e5026fff95"><span class="id" title="notation">!!!</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:79"><span class="id" title="variable">i</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">&lt;$&gt;</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:78"><span class="id" title="variable">L</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">≡ₚ</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:78"><span class="id" title="variable">L</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">L</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">L'</span> <span class="id" title="var">LS</span> <span class="id" title="var">IH</span>] <span class="id" title="keyword">using</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /= <a class="idref" href="tachis.tachis.examples.quicksort.html#index_space_emp"><span class="id" title="lemma">index_space_emp</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a> /= <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add_1_r"><span class="id" title="lemma">Nat.add_1_r</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#index_space_snoc"><span class="id" title="lemma">index_space_snoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#fmap_app"><span class="id" title="lemma">fmap_app</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Sorting.Permutation.html#Permutation_app"><span class="id" title="lemma">Permutation_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> -{3}<span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#equal_perm"><span class="id" title="lemma">equal_perm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#list_fmap_ext"><span class="id" title="lemma">list_fmap_ext</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">x</span> <span class="id" title="var">HIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#lookup_total_app_l"><span class="id" title="lemma">lookup_total_app_l</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">x</span> <span class="id" title="keyword">with</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">LS</span>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#5a6ec76419c81272088828e5026fff95"><span class="id" title="notation">!!!</span></a> <span class="id" title="var">i</span>); [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#list_lookup_total_correct"><span class="id" title="lemma">list_lookup_total_correct</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#index_space_unfold"><span class="id" title="lemma">index_space_unfold</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#index_space_unfold"><span class="id" title="lemma">index_space_unfold</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list_numbers.html#lookup_seq"><span class="id" title="lemma">lookup_seq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list_numbers.html#lookup_total_seq_lt"><span class="id" title="lemma">lookup_total_seq_lt</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#list_lookup_total_middle"><span class="id" title="lemma">list_lookup_total_middle</span></a>; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="fmap_perm" class="idref" href="#fmap_perm"><span class="id" title="lemma">fmap_perm</span></a> `{<a id="T:80" class="idref" href="#T:80"><span class="id" title="binder">T</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="S:81" class="idref" href="#S:81"><span class="id" title="binder">S</span></a> : <span class="id" title="keyword">Type</span>} (<a id="L1:82" class="idref" href="#L1:82"><span class="id" title="binder">L1</span></a> <a id="L2:83" class="idref" href="#L2:83"><span class="id" title="binder">L2</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#T:80"><span class="id" title="variable">T</span></a>) (<a id="f:84" class="idref" href="#f:84"><span class="id" title="binder">f</span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#T:80"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#S:81"><span class="id" title="variable">S</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#L1:82"><span class="id" title="variable">L1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">≡ₚ</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L2:83"><span class="id" title="variable">L2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#f:84"><span class="id" title="variable">f</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">&lt;$&gt;</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L1:82"><span class="id" title="variable">L1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">≡ₚ</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#f:84"><span class="id" title="variable">f</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">&lt;$&gt;</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L2:83"><span class="id" title="variable">L2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>. <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="index_to_rank_nat_perm_sorted" class="idref" href="#index_to_rank_nat_perm_sorted"><span class="id" title="lemma">index_to_rank_nat_perm_sorted</span></a> (<a id="L:85" class="idref" href="#L:85"><span class="id" title="binder">L</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#sorting.A"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup"><span class="id" title="inductive">List.NoDup</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:85"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Sorting.Sorted.html#Sorted"><span class="id" title="inductive">Sorted</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#sorting.R"><span class="id" title="variable">R</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:85"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:85"><span class="id" title="variable">L</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">≡ₚ</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#rank"><span class="id" title="definition">rank</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:85"><span class="id" title="variable">L</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">&lt;$&gt;</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:85"><span class="id" title="variable">L</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HU</span> <span class="id" title="var">HS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HS'</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Sorting.Sorted.html#StronglySorted"><span class="id" title="inductive">StronglySorted</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#sorting.R"><span class="id" title="variable">R</span></a> <span class="id" title="var">L</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sorting.html#Sorted_StronglySorted"><span class="id" title="lemma">Sorted_StronglySorted</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">HS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#sorting.TotalOrder0"><span class="id" title="variable">TotalOrder0</span></a> <span class="id" title="keyword">as</span> [[[? ?] ?] ?]. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">HS</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#equal_perm"><span class="id" title="lemma">equal_perm</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">L</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">L0</span> <span class="id" title="var">L'</span> <span class="id" title="var">IH</span>] <span class="id" title="keyword">using</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /= <a class="idref" href="tachis.tachis.examples.quicksort.html#index_space_emp"><span class="id" title="lemma">index_space_emp</span></a>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a> /= <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add_1_r"><span class="id" title="lemma">Nat.add_1_r</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#index_space_snoc"><span class="id" title="lemma">index_space_snoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IH</span>; [ | <span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup_app_remove_r"><span class="id" title="lemma">NoDup_app_remove_r</span></a>, <span class="id" title="var">HU</span> |<span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sorting.html#StronglySorted_app_inv_l"><span class="id" title="lemma">StronglySorted_app_inv_l</span></a>, <span class="id" title="var">HS'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#fmap_app"><span class="id" title="lemma">fmap_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#list_fmap_ext"><span class="id" title="lemma">list_fmap_ext</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">x</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#rank"><span class="id" title="definition">rank</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter_app"><span class="id" title="lemma">List.filter_app</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_false"><span class="id" title="abbreviation">bool_decide_false</span></a>; [<span class="id" title="tactic">rewrite</span> /=; <span class="id" title="var">lia</span>| ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#sorting.R"><span class="id" title="variable">R</span></a> <span class="id" title="var">x</span> <span class="id" title="var">L0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sorting.html#elem_of_StronglySorted_app"><span class="id" title="lemma">elem_of_StronglySorted_app</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_lookup_2"><span class="id" title="lemma">elem_of_list_lookup_2</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_singleton"><span class="id" title="lemma">elem_of_list_singleton</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hcont</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_spec_alt"><span class="id" title="lemma">strict_spec_alt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcont</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#sorting.TotalOrder0"><span class="id" title="variable">TotalOrder0</span></a> <span class="id" title="keyword">as</span> [[[? ?] <span class="id" title="var">Has</span>] ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#AntiSymm"><span class="id" title="class">AntiSymm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Has</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hcont</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">L'</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">L'0</span> <span class="id" title="var">L's</span> <span class="id" title="var">IH</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#rank"><span class="id" title="definition">rank</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_false"><span class="id" title="abbreviation">bool_decide_false</span></a>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">simpl</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [ ? ? ]. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">replace</span> (<span class="id" title="var">L'0</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">L's</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">L0</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">L'0</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><span class="id" title="var">L's</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">L0</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a>); <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#rank"><span class="id" title="definition">rank</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter_app"><span class="id" title="lemma">List.filter_app</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">List.filter</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="y:86" class="idref" href="#y:86"><span class="id" title="binder"><span id="y:87" class="id">y</span></span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#sorting.A"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#strict"><span class="id" title="definition">strict</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#sorting.R"><span class="id" title="variable">R</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#y:86"><span class="id" title="variable">y</span></a> <span class="id" title="var">L0</span>)) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">L'0</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) )<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> 1; [<span class="id" title="var">lia</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_true"><span class="id" title="abbreviation">bool_decide_true</span></a>; [<span class="id" title="var">done</span>|].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_spec_alt"><span class="id" title="lemma">strict_spec_alt</span></a>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--- <span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sorting.html#elem_of_StronglySorted_app"><span class="id" title="lemma">elem_of_StronglySorted_app</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">HS'</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_list_here"><span class="id" title="constructor">elem_of_list_here</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup_remove"><span class="id" title="lemma">NoDup_remove</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HU</span>  <span class="id" title="keyword">as</span> [? <span class="id" title="var">Hcont</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hcont</span>, <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#in_eq"><span class="id" title="lemma">in_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup_cons_iff"><span class="id" title="lemma">NoDup_cons_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">HU</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HS'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Sorting.Sorted.html#StronglySorted_inv"><span class="id" title="lemma">StronglySorted_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HS'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">HS'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="index_to_rank_nat_perm" class="idref" href="#index_to_rank_nat_perm"><span class="id" title="lemma">index_to_rank_nat_perm</span></a> (<a id="L:88" class="idref" href="#L:88"><span class="id" title="binder">L</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#sorting.A"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup"><span class="id" title="inductive">List.NoDup</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:88"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:88"><span class="id" title="variable">L</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">≡ₚ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank"><span class="id" title="definition">index_to_rank</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:88"><span class="id" title="variable">L</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">&lt;$&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:88"><span class="id" title="variable">L</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hnodup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank"><span class="id" title="definition">index_to_rank</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#list_fmap_compose"><span class="id" title="lemma">list_fmap_compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#fmap_perm"><span class="id" title="lemma">fmap_perm</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#list_access_perm"><span class="id" title="lemma">list_access_perm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#fmap_perm"><span class="id" title="lemma">fmap_perm</span></a>; <span class="id" title="var">last</span> (<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sorting.html#merge_sort_Permutation"><span class="id" title="lemma">merge_sort_Permutation</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#sorting.R"><span class="id" title="variable">R</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#list_fmap_ext"><span class="id" title="lemma">list_fmap_ext</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#rank"><span class="id" title="definition">rank</span></a> <span class="id" title="var">L</span>) (<a class="idref" href="tachis.tachis.examples.quicksort.html#rank"><span class="id" title="definition">rank</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sorting.html#merge_sort"><span class="id" title="definition">merge_sort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#sorting.R"><span class="id" title="variable">R</span></a> <span class="id" title="var">L</span>))); <span class="id" title="var">last</span> (<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#rank_to_sorted"><span class="id" title="lemma">rank_to_sorted</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sorting.html#merge_sort"><span class="id" title="definition">merge_sort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#sorting.R"><span class="id" title="variable">R</span></a> <span class="id" title="var">L</span>)); <span class="id" title="var">last</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Sorting.Permutation.html#Permutation_length"><span class="id" title="lemma">Permutation_length</span></a>, <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sorting.html#merge_sort_Permutation"><span class="id" title="lemma">merge_sort_Permutation</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank_nat_perm_sorted"><span class="id" title="lemma">index_to_rank_nat_perm_sorted</span></a>; <span class="id" title="var">last</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sorting.html#Sorted_merge_sort"><span class="id" title="lemma">Sorted_merge_sort</span></a>, <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#trichotomy_total"><span class="id" title="instance">trichotomy_total</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Sorting.Permutation.html#Permutation_NoDup"><span class="id" title="lemma">Permutation_NoDup</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hnodup</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sorting.html#merge_sort_Permutation"><span class="id" title="lemma">merge_sort_Permutation</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="fold_R_fin_perm" class="idref" href="#fold_R_fin_perm"><span class="id" title="lemma">fold_R_fin_perm</span></a> <a id="f:89" class="idref" href="#f:89"><span class="id" title="binder">f</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">(</span></a><a id="g:90" class="idref" href="#g:90"><span class="id" title="binder">g</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="L:91" class="idref" href="#L:91"><span class="id" title="binder">L</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#L:91"><span class="id" title="variable">L</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">≡ₚ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#g:90"><span class="id" title="variable">g</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:91"><span class="id" title="variable">L</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#f:89"><span class="id" title="variable">f</span></a>) 0%<span class="id" title="var">R</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:91"><span class="id" title="variable">L</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#f:89"><span class="id" title="variable">f</span></a>) 0%<span class="id" title="var">R</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#g:90"><span class="id" title="variable">g</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:91"><span class="id" title="variable">L</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">g</span> <span class="id" title="var">L</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_permutation"><span class="id" title="lemma">foldr_permutation</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#924fd3758233021bbb7af913c6a625ce"><span class="id" title="notation">(=)</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <span class="id" title="var">f</span>) 0%<span class="id" title="var">R</span> <span class="id" title="var">L</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <span class="id" title="var">g</span> <span class="id" title="var">L</span>) <span class="id" title="var">_</span> <span class="id" title="var">Hp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#sorting"><span class="id" title="section">sorting</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="qs_time" class="idref" href="#qs_time"><span class="id" title="section">qs_time</span></a>.<br/>
</div>

<div class="doc">
Defines the Quicksort recurrence relation 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Tight&nbsp;bounding&nbsp;argument&nbsp;necessitates&nbsp;the&nbsp;pivot&nbsp;take&nbsp;time&nbsp;An+B&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="tc_pivot_lin" class="idref" href="#tc_pivot_lin"><span class="id" title="definition">tc_pivot_lin</span></a> (<a id="A:92" class="idref" href="#A:92"><span class="id" title="binder">A</span></a> <a id="B:93" class="idref" href="#B:93"><span class="id" title="binder">B</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R"><span class="id" title="axiom">R</span></a>) (<a id="n:94" class="idref" href="#n:94"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R"><span class="id" title="axiom">R</span></a> := (<a class="idref" href="tachis.tachis.examples.quicksort.html#A:92"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#n:94"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#B:93"><span class="id" title="variable">B</span></a>)%<span class="id" title="var">R</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="tc_pivot_lin_nonneg" class="idref" href="#tc_pivot_lin_nonneg"><span class="id" title="definition">tc_pivot_lin_nonneg</span></a> <a id="A:95" class="idref" href="#A:95"><span class="id" title="binder">A</span></a> <a id="B:96" class="idref" href="#B:96"><span class="id" title="binder">B</span></a> <a id="n:97" class="idref" href="#n:97"><span class="id" title="binder">n</span></a> : (0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:95"><span class="id" title="variable">A</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> (0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#B:96"><span class="id" title="variable">B</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> (0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_pivot_lin"><span class="id" title="definition">tc_pivot_lin</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:95"><span class="id" title="variable">A</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#B:96"><span class="id" title="variable">B</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:97"><span class="id" title="variable">n</span></a>)%<span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#tc_pivot_lin"><span class="id" title="definition">tc_pivot_lin</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_le_le_0_compat"><span class="id" title="lemma">Rplus_le_le_0_compat</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="tachis.prelude.Reals_ext.html#Rmult_pos_nat_r"><span class="id" title="lemma">Rmult_pos_nat_r</span></a>; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="tc_base" class="idref" href="#tc_base"><span class="id" title="definition">tc_base</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R"><span class="id" title="axiom">R</span></a> := 1%<span class="id" title="var">R</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tc_base_nonneg" class="idref" href="#tc_base_nonneg"><span class="id" title="lemma">tc_base_nonneg</span></a> : (0%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_base"><span class="id" title="definition">tc_base</span></a>)%<span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#tc_base"><span class="id" title="definition">tc_base</span></a>. <span class="id" title="var">lra</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_base"><span class="id" title="definition">tc_base</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;tc_quicksort(len)&nbsp;=&nbsp;(1/len)&nbsp;+&nbsp;2&nbsp;*&nbsp;sum(i=0&nbsp;to&nbsp;len-1)(tc_quicksort&nbsp;i)&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="tc_quicksort" class="idref" href="#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> (<a id="A:98" class="idref" href="#A:98"><span class="id" title="binder">A</span></a> <a id="B:99" class="idref" href="#B:99"><span class="id" title="binder">B</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R"><span class="id" title="axiom">R</span></a>) (<a id="len:100" class="idref" href="#len:100"><span class="id" title="binder">len</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R"><span class="id" title="axiom">R</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (@<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Wf.html#Fix"><span class="id" title="definition">Fix</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Program.Wf.html#measure_wf"><span class="id" title="lemma">Wf.measure_wf</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.Wf_nat.html#lt_wf"><span class="id" title="lemma">lt_wf</span></a> (<span class="id" title="keyword">fun</span> <a id="x:101" class="idref" href="#x:101"><span class="id" title="binder"><span id="x:106" class="id">x</span></span></a> =&gt; <a class="idref" href="tachis.tachis.examples.quicksort.html#x:101"><span class="id" title="variable">x</span></a>)) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R"><span class="id" title="axiom">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="len:102" class="idref" href="#len:102"><span class="id" title="binder"><span id="len:107" class="id">len</span></span></a> <a id="qf_rec:103" class="idref" href="#qf_rec:103"><span class="id" title="binder"><span id="qf_rec:108" class="id">qf_rec</span></span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#len:102"><span class="id" title="variable">len</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0%<span class="id" title="var">nat</span>   =&gt; <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_base"><span class="id" title="definition">tc_base</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) =&gt; (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#tc_pivot_lin"><span class="id" title="definition">tc_pivot_lin</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#len:102"><span class="id" title="variable">len</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> 0%<span class="id" title="var">R</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="n:105" class="idref" href="#n:105"><span class="id" title="binder"><span id="n:110" class="id">n</span></span></a> =&gt; (<a class="idref" href="tachis.tachis.examples.quicksort.html#qf_rec:103"><span class="id" title="variable">qf_rec</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat"><span class="id" title="definition">fin_to_nat</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:105"><span class="id" title="variable">n</span></a>) <span class="id" title="var">_</span>)) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#fin_enum"><span class="id" title="definition">fin_enum</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#len:102"><span class="id" title="variable">len</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#len:102"><span class="id" title="variable">len</span></a> )%<span class="id" title="var">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <span class="id" title="var">len</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Program.Wf.html#MR"><span class="id" title="definition">Wf.MR</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat_lt"><span class="id" title="lemma">fin_to_nat_lt</span></a>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tc_quicksort_aux" class="idref" href="#tc_quicksort_aux"><span class="id" title="lemma">tc_quicksort_aux</span></a> <a id="A:111" class="idref" href="#A:111"><span class="id" title="binder">A</span></a> <a id="B:112" class="idref" href="#B:112"><span class="id" title="binder">B</span></a> <a id="len:113" class="idref" href="#len:113"><span class="id" title="binder">len</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:111"><span class="id" title="variable">A</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#B:112"><span class="id" title="variable">B</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#len:113"><span class="id" title="variable">len</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#len:113"><span class="id" title="variable">len</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0%<span class="id" title="var">nat</span>   =&gt; <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_base"><span class="id" title="definition">tc_base</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">_</span>) =&gt; (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#tc_pivot_lin"><span class="id" title="definition">tc_pivot_lin</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:111"><span class="id" title="variable">A</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#B:112"><span class="id" title="variable">B</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#len:113"><span class="id" title="variable">len</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> 0%<span class="id" title="var">R</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="n:115" class="idref" href="#n:115"><span class="id" title="binder">n</span></a> =&gt; <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:111"><span class="id" title="variable">A</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#B:112"><span class="id" title="variable">B</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat"><span class="id" title="definition">fin_to_nat</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:115"><span class="id" title="variable">n</span></a>)) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#fin_enum"><span class="id" title="definition">fin_enum</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#len:113"><span class="id" title="variable">len</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#len:113"><span class="id" title="variable">len</span></a>)%<span class="id" title="var">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#easy_fix_eq"><span class="id" title="lemma">easy_fix_eq</span></a>; <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;An&nbsp;alternative&nbsp;to&nbsp;proving&nbsp;all&nbsp;of&nbsp;that&nbsp;fin_enum&nbsp;stuff&nbsp;might&nbsp;be&nbsp;to&nbsp;just&nbsp;define<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;seq&nbsp;version&nbsp;directly&nbsp;in&nbsp;the&nbsp;refine&nbsp;using&nbsp;a&nbsp;dependent&nbsp;pattern&nbsp;match.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tc_quicksort_unfold" class="idref" href="#tc_quicksort_unfold"><span class="id" title="lemma">tc_quicksort_unfold</span></a> <a id="A:116" class="idref" href="#A:116"><span class="id" title="binder">A</span></a> <a id="B:117" class="idref" href="#B:117"><span class="id" title="binder">B</span></a> <a id="len:118" class="idref" href="#len:118"><span class="id" title="binder">len</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:116"><span class="id" title="variable">A</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#B:117"><span class="id" title="variable">B</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#len:118"><span class="id" title="variable">len</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#len:118"><span class="id" title="variable">len</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0%<span class="id" title="var">nat</span>   =&gt; <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_base"><span class="id" title="definition">tc_base</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">_</span>) =&gt; (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#tc_pivot_lin"><span class="id" title="definition">tc_pivot_lin</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:116"><span class="id" title="variable">A</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#B:117"><span class="id" title="variable">B</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#len:118"><span class="id" title="variable">len</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> 0%<span class="id" title="var">R</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="n:120" class="idref" href="#n:120"><span class="id" title="binder">n</span></a> =&gt; <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:116"><span class="id" title="variable">A</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#B:117"><span class="id" title="variable">B</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:120"><span class="id" title="variable">n</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a> 0%<span class="id" title="var">nat</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#len:118"><span class="id" title="variable">len</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#len:118"><span class="id" title="variable">len</span></a>)%<span class="id" title="var">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort_aux"><span class="id" title="lemma">tc_quicksort_aux</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">len</span>; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">len</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">N</span>; <span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">N</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">N'</span> <span class="id" title="var">IH</span>]; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#fin_enum"><span class="id" title="definition">fin_enum</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq_S"><span class="id" title="lemma">seq_S</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_snoc"><span class="id" title="lemma">foldr_snoc</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#fin_enum_snoc_rec"><span class="id" title="lemma">fin_enum_snoc_rec</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_snoc"><span class="id" title="lemma">foldr_snoc</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_comm_acc"><span class="id" title="lemma">foldr_comm_acc</span></a>; <span class="id" title="var">last</span> (<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lra</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_comm_acc"><span class="id" title="lemma">foldr_comm_acc</span></a>; <span class="id" title="var">last</span> (<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lra</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat_to_fin"><span class="id" title="lemma">fin_to_nat_to_fin</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map_map"><span class="id" title="lemma">map_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality"><span class="id" title="lemma">functional_extensionality</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="tachis.tachis.examples.quicksort.html#fin_inj_incr_to_nat"><span class="id" title="lemma">fin_inj_incr_to_nat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Transparent</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#fin_enum"><span class="id" title="definition">fin_enum</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tc_quicksort_0" class="idref" href="#tc_quicksort_0"><span class="id" title="lemma">tc_quicksort_0</span></a> <a id="A:121" class="idref" href="#A:121"><span class="id" title="binder">A</span></a> <a id="B:122" class="idref" href="#B:122"><span class="id" title="binder">B</span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:121"><span class="id" title="variable">A</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#B:122"><span class="id" title="variable">B</span></a> 0%<span class="id" title="var">nat</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_base"><span class="id" title="definition">tc_base</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort_unfold"><span class="id" title="lemma">tc_quicksort_unfold</span></a>. <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tc_quicksort_S" class="idref" href="#tc_quicksort_S"><span class="id" title="lemma">tc_quicksort_S</span></a> <a id="A:123" class="idref" href="#A:123"><span class="id" title="binder">A</span></a> <a id="B:124" class="idref" href="#B:124"><span class="id" title="binder">B</span></a> <a id="n:125" class="idref" href="#n:125"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:125"><span class="id" title="variable">n</span></a>)%<span class="id" title="var">nat</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:123"><span class="id" title="variable">A</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#B:124"><span class="id" title="variable">B</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:125"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#tc_pivot_lin"><span class="id" title="definition">tc_pivot_lin</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:123"><span class="id" title="variable">A</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#B:124"><span class="id" title="variable">B</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:125"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> 0 <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="i:126" class="idref" href="#i:126"><span class="id" title="binder">i</span></a> =&gt; ((<a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:123"><span class="id" title="variable">A</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#B:124"><span class="id" title="variable">B</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:126"><span class="id" title="variable">i</span></a>))%<span class="id" title="var">NNR</span>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a> 0%<span class="id" title="var">nat</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:125"><span class="id" title="variable">n</span></a>)%<span class="id" title="var">NNR</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#n:125"><span class="id" title="variable">n</span></a>)%<span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort_unfold"><span class="id" title="lemma">tc_quicksort_unfold</span></a>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; [<span class="id" title="var">lia</span>|<span class="id" title="var">done</span>]. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Prove&nbsp;this&nbsp;by&nbsp;strong&nbsp;induction&nbsp;now&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tc_quicksort_nonneg" class="idref" href="#tc_quicksort_nonneg"><span class="id" title="lemma">tc_quicksort_nonneg</span></a> <a id="A:127" class="idref" href="#A:127"><span class="id" title="binder">A</span></a> <a id="B:128" class="idref" href="#B:128"><span class="id" title="binder">B</span></a> <a id="n:129" class="idref" href="#n:129"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:127"><span class="id" title="variable">A</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> (0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#B:128"><span class="id" title="variable">B</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:127"><span class="id" title="variable">A</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#B:128"><span class="id" title="variable">B</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:129"><span class="id" title="variable">n</span></a>)%<span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HA</span> <span class="id" title="var">HB</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">n'</span> <span class="id" title="var">IH</span> ] <span class="id" title="keyword">using</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Wf.html#well_founded_induction"><span class="id" title="lemma">well_founded_induction</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.Wf_nat.html#lt_wf"><span class="id" title="lemma">lt_wf</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort_unfold"><span class="id" title="lemma">tc_quicksort_unfold</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n'</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">n'</span>]; [<span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_base_nonneg"><span class="id" title="lemma">tc_base_nonneg</span></a> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_le_le_0_compat"><span class="id" title="lemma">Rplus_le_le_0_compat</span></a>; [<span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_pivot_lin_nonneg"><span class="id" title="definition">tc_pivot_lin_nonneg</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span> | ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_le_pos"><span class="id" title="lemma">Rmult_le_pos</span></a>; [| <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rlt_le"><span class="id" title="lemma">Rlt_le</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rinv_0_lt_compat"><span class="id" title="lemma">Rinv_0_lt_compat</span></a>, <a class="idref" href="tachis.prelude.Reals_ext.html#pos_INR_S"><span class="id" title="lemma">pos_INR_S</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_le_pos"><span class="id" title="lemma">Rmult_le_pos</span></a>; [<span class="id" title="var">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n'</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">n''</span> <span class="id" title="var">IH'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /= <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort_0"><span class="id" title="lemma">tc_quicksort_0</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_0_r"><span class="id" title="lemma">Rplus_0_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_base_nonneg"><span class="id" title="lemma">tc_base_nonneg</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq_S"><span class="id" title="lemma">seq_S</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_snoc"><span class="id" title="lemma">foldr_snoc</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_comm_acc"><span class="id" title="lemma">foldr_comm_acc</span></a>; <span class="id" title="var">last</span> (<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lra</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_le_le_0_compat"><span class="id" title="lemma">Rplus_le_le_0_compat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">IH'</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Transparent</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_time"><span class="id" title="section">qs_time</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="qs_bound" class="idref" href="#qs_bound"><span class="id" title="section">qs_bound</span></a>.<br/>
</div>

<div class="doc">
Upper bound the tc_quicksort recurrence by the harmonic series 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tc_quicksort_bound_ind" class="idref" href="#tc_quicksort_bound_ind"><span class="id" title="lemma">tc_quicksort_bound_ind</span></a> <a id="n':130" class="idref" href="#n':130"><span class="id" title="binder">n'</span></a> (<a id="A:131" class="idref" href="#A:131"><span class="id" title="binder">A</span></a> <a id="B:132" class="idref" href="#B:132"><span class="id" title="binder">B</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R"><span class="id" title="axiom">R</span></a>) (<a id="HAB:133" class="idref" href="#HAB:133"><span class="id" title="binder">HAB</span></a> : ( 0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#fbdebc8c1a732d40499de973c18a9a13"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#B:132"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#fbdebc8c1a732d40499de973c18a9a13"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:131"><span class="id" title="variable">A</span></a>)%<span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:131"><span class="id" title="variable">A</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#B:132"><span class="id" title="variable">B</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n':130"><span class="id" title="variable">n'</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n':130"><span class="id" title="variable">n'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1)%<span class="id" title="var">nat</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">(</span></a>2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:131"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n':130"><span class="id" title="variable">n'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1)%<span class="id" title="var">nat</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:131"><span class="id" title="variable">A</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#B:132"><span class="id" title="variable">B</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n':130"><span class="id" title="variable">n'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#n':130"><span class="id" title="variable">n'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1)%<span class="id" title="var">nat</span> )%<span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">C</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rdiv_def"><span class="id" title="lemma">Rdiv_def</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etrans</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;Include&nbsp;the&nbsp;(B-A)/(n(n+1))&nbsp;term&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_le_compat_l"><span class="id" title="lemma">Rplus_le_compat_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rplus_0_l"><span class="id" title="lemma">Rplus_0_l</span></a> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_le_compat_r"><span class="id" title="lemma">Rplus_le_compat_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hinst</span>: ((<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">(</span></a><span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="var">A</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">(</span></a><span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> 0)%<span class="id" title="var">R</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coquelicot.saclay.inria.fr/html//Coquelicot.Rcomplements.html#Rle_div_l"><span class="id" title="lemma">Rcomplements.Rle_div_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rlt_gt"><span class="id" title="lemma">Rlt_gt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">P</span> := (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#pos_INR"><span class="id" title="lemma">pos_INR</span></a> <span class="id" title="var">n'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#S_INR"><span class="id" title="lemma">S_INR</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_lt_0_compat"><span class="id" title="lemma">Rmult_lt_0_compat</span></a>;<span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_0_l"><span class="id" title="lemma">Rmult_0_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rle_minus"><span class="id" title="lemma">Rle_minus</span></a>. <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hinst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;In&nbsp;this&nbsp;form,&nbsp;they&nbsp;should&nbsp;be&nbsp;equal&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Req_le"><span class="id" title="lemma">Req_le</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;n'=0,&nbsp;separate&nbsp;proof&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n'</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">n''</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort_0"><span class="id" title="lemma">tc_quicksort_0</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rinv_1"><span class="id" title="lemma">Rinv_1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" title="lemma">Rmult_1_r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_1_l"><span class="id" title="lemma">Rmult_1_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a"><span class="id" title="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> 2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">R</span> <span class="id" title="keyword">with</span> <span class="id" title="var">A</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#S_INR"><span class="id" title="lemma">S_INR</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#INR_0"><span class="id" title="lemma">INR_0</span></a>. <span class="id" title="var">lra</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rdiv_def"><span class="id" title="lemma">Rdiv_def</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort_unfold"><span class="id" title="lemma">tc_quicksort_unfold</span></a> /<a class="idref" href="tachis.tachis.examples.quicksort.html#tc_pivot_lin"><span class="id" title="definition">tc_pivot_lin</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#INR_1"><span class="id" title="lemma">INR_1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rdiv_1_r"><span class="id" title="lemma">Rdiv_1_r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_0_r"><span class="id" title="lemma">Rplus_0_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort_0"><span class="id" title="lemma">tc_quicksort_0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_plus_distr_r"><span class="id" title="lemma">Rmult_plus_distr_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#S_INR"><span class="id" title="lemma">S_INR</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#INR_0"><span class="id" title="lemma">INR_0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Get&nbsp;rid&nbsp;of&nbsp;some&nbsp;n+1&nbsp;denominators&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_eq_reg_r"><span class="id" title="lemma">Rmult_eq_reg_r</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1))); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add_1_r"><span class="id" title="lemma">Nat.add_1_r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#S_INR"><span class="id" title="lemma">S_INR</span></a>. <span class="id" title="tactic">pose</span> <span class="id" title="var">P</span>:= (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#pos_INR"><span class="id" title="lemma">pos_INR</span></a> <span class="id" title="var">n</span>); <span class="id" title="var">lra</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" title="lemma">Rmult_assoc</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rinv_l"><span class="id" title="lemma">Rinv_l</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add_1_r"><span class="id" title="lemma">Nat.add_1_r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#S_INR"><span class="id" title="lemma">S_INR</span></a>. <span class="id" title="tactic">pose</span> <span class="id" title="var">P</span>:= (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#pos_INR"><span class="id" title="lemma">pos_INR</span></a> <span class="id" title="var">n</span>); <span class="id" title="var">lra</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" title="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_plus_distr_r"><span class="id" title="lemma">Rmult_plus_distr_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" title="lemma">Rmult_assoc</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rinv_l"><span class="id" title="lemma">Rinv_l</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add_1_r"><span class="id" title="lemma">Nat.add_1_r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#S_INR"><span class="id" title="lemma">S_INR</span></a>. <span class="id" title="tactic">pose</span> <span class="id" title="var">P</span>:= (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#pos_INR"><span class="id" title="lemma">pos_INR</span></a> <span class="id" title="var">n</span>); <span class="id" title="var">lra</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" title="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rdiv_mult_distr"><span class="id" title="lemma">Rdiv_mult_distr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">(</span></a><span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="var">A</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1))%<span class="id" title="var">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">(</span></a><span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="var">A</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> <span class="id" title="var">n</span>)%<span class="id" title="var">R</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rdiv_def"><span class="id" title="lemma">Rdiv_def</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" title="lemma">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add_1_r"><span class="id" title="lemma">Nat.add_1_r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#S_INR"><span class="id" title="lemma">S_INR</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rinv_l"><span class="id" title="lemma">Rinv_l</span></a>; <span class="id" title="var">last</span> (<span class="id" title="tactic">pose</span> <span class="id" title="var">P</span> := (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#pos_INR"><span class="id" title="lemma">pos_INR</span></a> <span class="id" title="var">n</span>); <span class="id" title="var">lra</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Unfold&nbsp;C&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HeqC</span> <span class="id" title="var">Heqn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort_S"><span class="id" title="lemma">tc_quicksort_S</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Heqn</span> -<span class="id" title="var">HeqC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="keyword">Transparent</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Pull&nbsp;out&nbsp;one&nbsp;term&nbsp;from&nbsp;the&nbsp;series&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.NArith.BinNat.html#N.to_nat"><span class="id" title="definition">N.to_nat</span></a> 0) (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="i:134" class="idref" href="#i:134"><span class="id" title="binder"><span id="i:136" class="id">i</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><span class="id" title="var">C</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:134"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">)</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a> 0 <span class="id" title="var">n</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="var">C</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n''</span>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> 0%<span class="id" title="var">R</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="i:135" class="idref" href="#i:135"><span class="id" title="binder"><span id="i:137" class="id">i</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><span class="id" title="var">C</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:135"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">)</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a> 0 (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n''</span>)))<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">R</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq_S"><span class="id" title="lemma">seq_S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n''</span>)) /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_snoc"><span class="id" title="lemma">foldr_snoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_comm_acc"><span class="id" title="lemma">foldr_comm_acc</span></a>; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Transparent</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> 0%<span class="id" title="var">R</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="i:138" class="idref" href="#i:138"><span class="id" title="binder"><span id="i:139" class="id">i</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><span class="id" title="var">C</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:138"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">)</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a> 0 (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n''</span>)))) <span class="id" title="keyword">as</span> <span class="id" title="var">SR</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Remove&nbsp;n&nbsp;denominators&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<span class="id" title="var">n''</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1)) <span class="id" title="keyword">with</span> <span class="id" title="var">n</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_eq_reg_r"><span class="id" title="lemma">Rmult_eq_reg_r</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> <span class="id" title="var">n</span>)); <span class="id" title="var">last</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#not_0_INR"><span class="id" title="lemma">not_0_INR</span></a>; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_plus_distr_r"><span class="id" title="lemma">Rmult_plus_distr_r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_plus_distr_r"><span class="id" title="lemma">Rmult_plus_distr_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rdiv_def"><span class="id" title="lemma">Rdiv_def</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" title="lemma">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rinv_l"><span class="id" title="lemma">Rinv_l</span></a>; <span class="id" title="var">last</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#not_0_INR"><span class="id" title="lemma">not_0_INR</span></a>; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" title="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" title="lemma">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" title="lemma">Rmult_comm</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a"><span class="id" title="notation">/</span></a> <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" title="lemma">Rmult_assoc</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_plus_distr_r"><span class="id" title="lemma">Rmult_plus_distr_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" title="lemma">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rinv_l"><span class="id" title="lemma">Rinv_l</span></a>; <span class="id" title="var">last</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#not_0_INR"><span class="id" title="lemma">not_0_INR</span></a>; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" title="lemma">Rmult_1_r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" title="lemma">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rinv_l"><span class="id" title="lemma">Rinv_l</span></a>; <span class="id" title="var">last</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#not_0_INR"><span class="id" title="lemma">not_0_INR</span></a>; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" title="lemma">Rmult_1_r</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Collect&nbsp;C&nbsp;(S&nbsp;n'')&nbsp;on&nbsp;the&nbsp;left&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_eq_reg_l"><span class="id" title="lemma">Rplus_eq_reg_l</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:'-'_x"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#tc_pivot_lin"><span class="id" title="definition">tc_pivot_lin</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:'-'_x"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" title="lemma">Rplus_assoc</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_opp_l"><span class="id" title="lemma">Rplus_opp_l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rplus_0_l"><span class="id" title="lemma">Rplus_0_l</span></a> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" title="lemma">Rplus_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_eq_reg_r"><span class="id" title="lemma">Rplus_eq_reg_r</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:'-'_x"><span class="id" title="notation">(</span></a><span class="id" title="var">C</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n''</span>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:'-'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" title="lemma">Rplus_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><span class="id" title="var">C</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n''</span>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:'-'_x"><span class="id" title="notation">(</span></a><span class="id" title="var">C</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n''</span>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:'-'_x"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (0)%<span class="id" title="var">R</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_0_r"><span class="id" title="lemma">Rplus_0_r</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" title="lemma">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rplus_comm"><span class="id" title="lemma">Rplus_comm</span></a> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" title="lemma">Rplus_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" title="lemma">Ropp_mult_distr_l_reverse</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Ropp_mult_distr_r"><span class="id" title="lemma">Ropp_mult_distr_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" title="lemma">Rmult_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_plus_distr_r"><span class="id" title="lemma">Rmult_plus_distr_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:'-'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:'-'_x"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> 2)%<span class="id" title="var">R</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:'-'_x"><span class="id" title="notation">-(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n''</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:'-'_x"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">R</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#S_INR"><span class="id" title="lemma">S_INR</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add_1_r"><span class="id" title="lemma">Nat.add_1_r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#S_INR"><span class="id" title="lemma">S_INR</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqn</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#S_INR"><span class="id" title="lemma">S_INR</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#S_INR"><span class="id" title="lemma">S_INR</span></a>. <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Unfold&nbsp;C&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HeqC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort_S"><span class="id" title="lemma">tc_quicksort_S</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">HeqC</span> -<span class="id" title="var">HeqSR</span> /=.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Cancel&nbsp;the&nbsp;sums&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" title="lemma">Rmult_plus_distr_l</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:'-'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n''</span>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:'-'_x"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">(</span></a>2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <span class="id" title="var">SR</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n''</span>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> ((<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:'-'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> 2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:'-'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><span class="id" title="var">SR</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a>))%<span class="id" title="var">R</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Ropp_mult_distr_l"><span class="id" title="lemma">Ropp_mult_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Ropp_mult_distr_l"><span class="id" title="lemma">Ropp_mult_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" title="lemma">Rmult_comm</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n''</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" title="lemma">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" title="lemma">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rinv_l"><span class="id" title="lemma">Rinv_l</span></a>; [|<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#not_0_INR"><span class="id" title="lemma">not_0_INR</span></a>; <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#S_INR"><span class="id" title="lemma">S_INR</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#INR_0"><span class="id" title="lemma">INR_0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" title="lemma">Rplus_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <span class="id" title="var">SR</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <span class="id" title="var">SR</span>)%<span class="id" title="var">R</span> <span class="id" title="keyword">with</span> 0%<span class="id" title="var">R</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#S_INR"><span class="id" title="lemma">S_INR</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#INR_0"><span class="id" title="lemma">INR_0</span></a>. <span class="id" title="var">lra</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_0_r"><span class="id" title="lemma">Rplus_0_r</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Simplify&nbsp;out&nbsp;negatives*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Ropp_eq_reg"><span class="id" title="lemma">Ropp_eq_reg</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Ropp_plus_distr"><span class="id" title="lemma">Ropp_plus_distr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Ropp_involutive"><span class="id" title="lemma">Ropp_involutive</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Expand&nbsp;binomial&nbsp;to&nbsp;eliminate&nbsp;n^2&nbsp;term&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqn</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#tc_pivot_lin"><span class="id" title="definition">tc_pivot_lin</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">(</span></a><span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n''</span>))<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> <span class="id" title="var">B</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n''</span>))<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> ((<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">(</span></a><span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n''</span>))<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n''</span>))<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> <span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n''</span>))<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a>))%<span class="id" title="var">R</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#S_INR"><span class="id" title="lemma">S_INR</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n''</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" title="lemma">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Expand&nbsp;the&nbsp;remaining&nbsp;(S&nbsp;(S&nbsp;n''))&nbsp;terms&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#S_INR"><span class="id" title="lemma">S_INR</span></a> || <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#plus_INR"><span class="id" title="lemma">plus_INR</span></a> || <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#INR_0"><span class="id" title="lemma">INR_0</span></a> || <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#mult_INR"><span class="id" title="lemma">mult_INR</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tc_quicksort_bound_closed" class="idref" href="#tc_quicksort_bound_closed"><span class="id" title="lemma">tc_quicksort_bound_closed</span></a> <a id="A:140" class="idref" href="#A:140"><span class="id" title="binder">A</span></a> <a id="B:141" class="idref" href="#B:141"><span class="id" title="binder">B</span></a> <a id="n:142" class="idref" href="#n:142"><span class="id" title="binder">n</span></a> (<a id="HAB:143" class="idref" href="#HAB:143"><span class="id" title="binder">HAB</span></a> : (0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#fbdebc8c1a732d40499de973c18a9a13"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#B:141"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#fbdebc8c1a732d40499de973c18a9a13"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:140"><span class="id" title="variable">A</span></a>)%<span class="id" title="var">R</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:140"><span class="id" title="variable">A</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#B:141"><span class="id" title="variable">B</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:142"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#n:142"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1)%<span class="id" title="var">nat</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:140"><span class="id" title="variable">A</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#B:141"><span class="id" title="variable">B</span></a> 0%<span class="id" title="var">nat</span>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="i:144" class="idref" href="#i:144"><span class="id" title="binder">i</span></a> =&gt; (2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#A:140"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#i:144"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1)%<span class="id" title="var">nat</span>)%<span class="id" title="var">R</span>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a> 1%<span class="id" title="var">nat</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:142"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">n'</span> <span class="id" title="var">IH</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="keyword">Transparent</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#INR_1"><span class="id" title="lemma">INR_1</span></a>. <span class="id" title="var">lra</span>. <span class="id" title="keyword">Opaque</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etrans</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort_bound_ind"><span class="id" title="lemma">tc_quicksort_bound_ind</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq_S"><span class="id" title="lemma">seq_S</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_snoc"><span class="id" title="lemma">foldr_snoc</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_comm_acc"><span class="id" title="lemma">foldr_comm_acc</span></a>; <span class="id" title="var">last</span> (<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lra</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_le_compat_l"><span class="id" title="lemma">Rplus_le_compat_l</span></a>, <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Transparent</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_bound"><span class="id" title="section">qs_bound</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="qs_adv_cmp" class="idref" href="#qs_adv_cmp"><span class="id" title="section">qs_adv_cmp</span></a>.<br/>
</div>

<div class="doc">
Advanced composition for quicksort 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="A:145" class="idref" href="#A:145"><span class="id" title="binder">A</span></a>} (<a id="f:146" class="idref" href="#f:146"><span class="id" title="binder">f</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:145"><span class="id" title="variable">A</span></a>) `{<a id="H:149" class="idref" href="#H:149"><span class="id" title="binder">∀</span></a> <a id="x:147" class="idref" href="#x:147"><span class="id" title="binder"><span id="H:149" class="id">x</span></span></a> <a id="y:148" class="idref" href="#y:148"><span class="id" title="binder"><span id="H:149" class="id">y</span></span></a><a id="H:149" class="idref" href="#H:149"><span class="id" title="binder">,</span></a> <a id="H:149" class="idref" href="#H:149"><span class="id" title="binder">Decision</span></a> <a id="H:149" class="idref" href="#H:149"><span class="id" title="binder">(</span></a><a id="H:149" class="idref" href="#H:149"><span class="id" title="binder">f</span></a> <a id="H:149" class="idref" href="#H:149"><span class="id" title="binder">x</span></a> <a id="H:149" class="idref" href="#H:149"><span class="id" title="binder">y</span></a><a id="H:149" class="idref" href="#H:149"><span class="id" title="binder">)</span></a>} `{<a id="TotalOrder0:150" class="idref" href="#TotalOrder0:150"><span class="id" title="binder">!</span></a><a id="TotalOrder0:150" class="idref" href="#TotalOrder0:150"><span class="id" title="binder">TotalOrder</span></a> <a id="TotalOrder0:150" class="idref" href="#TotalOrder0:150"><span class="id" title="binder">f</span></a>} `{<a id="H0:151" class="idref" href="#H0:151"><span class="id" title="binder">Inhabited</span></a> <a id="H0:151" class="idref" href="#H0:151"><span class="id" title="binder">A</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Distribution,&nbsp;in&nbsp;a&nbsp;form&nbsp;which&nbsp;is&nbsp;easy&nbsp;to&nbsp;work&nbsp;with&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="tc_distr_def" class="idref" href="#tc_distr_def"><span class="id" title="definition">tc_distr_def</span></a> (<a id="L:152" class="idref" href="#L:152"><span class="id" title="binder">L</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_adv_cmp.A"><span class="id" title="variable">A</span></a>) (<a id="CA:153" class="idref" href="#CA:153"><span class="id" title="binder">CA</span></a> <a id="CB:154" class="idref" href="#CB:154"><span class="id" title="binder">CB</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R"><span class="id" title="axiom">R</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R"><span class="id" title="axiom">R</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <a id="index:155" class="idref" href="#index:155"><span class="id" title="binder">index</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:152"><span class="id" title="variable">L</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_base"><span class="id" title="definition">tc_base</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#CA:153"><span class="id" title="variable">CA</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#CB:154"><span class="id" title="variable">CB</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank"><span class="id" title="definition">index_to_rank</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_adv_cmp.f"><span class="id" title="variable">f</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:152"><span class="id" title="variable">L</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">))</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">index</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#CA:153"><span class="id" title="variable">CA</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#CB:154"><span class="id" title="variable">CB</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#reverse_order"><span class="id" title="definition">reverse_order</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:152"><span class="id" title="variable">L</span></a>)) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank"><span class="id" title="definition">index_to_rank</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_adv_cmp.f"><span class="id" title="variable">f</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:152"><span class="id" title="variable">L</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">))</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">index</span></a>)%<span class="id" title="var">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Distribution,&nbsp;in&nbsp;a&nbsp;form&nbsp;which&nbsp;typechecks&nbsp;with&nbsp;advanced&nbsp;composition&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="tc_distr" class="idref" href="#tc_distr"><span class="id" title="definition">tc_distr</span></a> (<a id="L:157" class="idref" href="#L:157"><span class="id" title="binder">L</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_adv_cmp.A"><span class="id" title="variable">A</span></a>) <a id="CA:158" class="idref" href="#CA:158"><span class="id" title="binder">CA</span></a> <a id="CB:159" class="idref" href="#CB:159"><span class="id" title="binder">CB</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:157"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1)))<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R"><span class="id" title="axiom">R</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#tc_distr_def"><span class="id" title="definition">tc_distr_def</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:157"><span class="id" title="variable">L</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#CA:158"><span class="id" title="variable">CA</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#CB:159"><span class="id" title="variable">CB</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat"><span class="id" title="definition">fin_to_nat</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tc_distr_nonneg" class="idref" href="#tc_distr_nonneg"><span class="id" title="lemma">tc_distr_nonneg</span></a> <a id="L:160" class="idref" href="#L:160"><span class="id" title="binder">L</span></a> <a id="CA:161" class="idref" href="#CA:161"><span class="id" title="binder">CA</span></a> <a id="CB:162" class="idref" href="#CB:162"><span class="id" title="binder">CB</span></a> <a id="i:163" class="idref" href="#i:163"><span class="id" title="binder">i</span></a> : (0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:160"><span class="id" title="variable">L</span></a>)%<span class="id" title="var">nat</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> (0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#CA:161"><span class="id" title="variable">CA</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> (0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#CB:162"><span class="id" title="variable">CB</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> (0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_distr"><span class="id" title="definition">tc_distr</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:160"><span class="id" title="variable">L</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#CA:161"><span class="id" title="variable">CA</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#CB:162"><span class="id" title="variable">CB</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:163"><span class="id" title="variable">i</span></a>)%<span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#tc_distr"><span class="id" title="definition">tc_distr</span></a> /<a class="idref" href="tachis.tachis.examples.quicksort.html#tc_distr_def"><span class="id" title="definition">tc_distr_def</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">L</span>; <span class="id" title="tactic">first</span> (<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_le_le_0_compat"><span class="id" title="lemma">Rplus_le_le_0_compat</span></a>; <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort_nonneg"><span class="id" title="lemma">tc_quicksort_nonneg</span></a>; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="foldr_reduction_1" class="idref" href="#foldr_reduction_1"><span class="id" title="lemma">foldr_reduction_1</span></a> (<a id="L:164" class="idref" href="#L:164"><span class="id" title="binder">L</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_adv_cmp.A"><span class="id" title="variable">A</span></a>) <a id="g:165" class="idref" href="#g:165"><span class="id" title="binder">g</span></a>  :<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup"><span class="id" title="inductive">List.NoDup</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:164"><span class="id" title="variable">L</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#g:165"><span class="id" title="variable">g</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank"><span class="id" title="definition">index_to_rank</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_adv_cmp.f"><span class="id" title="variable">f</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:164"><span class="id" title="variable">L</span></a>) 0 (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:164"><span class="id" title="variable">L</span></a>)))%<span class="id" title="var">R</span><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#g:165"><span class="id" title="variable">g</span></a>) 0 (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:164"><span class="id" title="variable">L</span></a>)))%<span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#fold_R_fin_perm"><span class="id" title="lemma">fold_R_fin_perm</span></a> <span class="id" title="var">_</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank"><span class="id" title="definition">index_to_rank</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_adv_cmp.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">L</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#foldr_map_cmp"><span class="id" title="lemma">foldr_map_cmp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank_nat_perm"><span class="id" title="lemma">index_to_rank_nat_perm</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="foldr_reduction_2" class="idref" href="#foldr_reduction_2"><span class="id" title="lemma">foldr_reduction_2</span></a> (<a id="L:166" class="idref" href="#L:166"><span class="id" title="binder">L</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_adv_cmp.A"><span class="id" title="variable">A</span></a>) <a id="g:167" class="idref" href="#g:167"><span class="id" title="binder">g</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#g:167"><span class="id" title="variable">g</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#reverse_order"><span class="id" title="definition">reverse_order</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:166"><span class="id" title="variable">L</span></a>))) 0%<span class="id" title="var">R</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:166"><span class="id" title="variable">L</span></a>)))%<span class="id" title="var">R</span><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#g:167"><span class="id" title="variable">g</span></a>) 0%<span class="id" title="var">R</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:166"><span class="id" title="variable">L</span></a>)))%<span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#fold_R_fin_perm"><span class="id" title="lemma">fold_R_fin_perm</span></a> <span class="id" title="var">_</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#reverse_order"><span class="id" title="definition">reverse_order</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#foldr_map_cmp"><span class="id" title="lemma">foldr_map_cmp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#reverse_perm"><span class="id" title="lemma">reverse_perm</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Advanced&nbsp;composition&nbsp;side&nbsp;condition:&nbsp;Turn&nbsp;the&nbsp;junk&nbsp;we&nbsp;get&nbsp;from&nbsp;the&nbsp;advanced&nbsp;composition&nbsp;rule&nbsp;back&nbsp;into&nbsp;the&nbsp;credit&nbsp;definition&nbsp;we&nbsp;have&nbsp;before&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tc_distr_equiv" class="idref" href="#tc_distr_equiv"><span class="id" title="lemma">tc_distr_equiv</span></a> <a id="L:168" class="idref" href="#L:168"><span class="id" title="binder">L</span></a> <a id="CA:169" class="idref" href="#CA:169"><span class="id" title="binder">CA</span></a> <a id="CB:170" class="idref" href="#CB:170"><span class="id" title="binder">CB</span></a> :<br/>
&nbsp;&nbsp;(0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:168"><span class="id" title="variable">L</span></a>)%<span class="id" title="var">nat</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;(0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#CA:169"><span class="id" title="variable">CA</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;(0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#CB:170"><span class="id" title="variable">CB</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup"><span class="id" title="inductive">List.NoDup</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:168"><span class="id" title="variable">L</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="tachis.prob.countable_sum.html#SeriesC"><span class="id" title="definition">SeriesC</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="n:171" class="idref" href="#n:171"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:168"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1)))<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> 1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:168"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1)) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_distr"><span class="id" title="definition">tc_distr</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:168"><span class="id" title="variable">L</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#CA:169"><span class="id" title="variable">CA</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#CB:170"><span class="id" title="variable">CB</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:171"><span class="id" title="variable">n</span></a>))%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> 0 (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="n:172" class="idref" href="#n:172"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#CA:169"><span class="id" title="variable">CA</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#CB:170"><span class="id" title="variable">CB</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:172"><span class="id" title="variable">n</span></a>) (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:168"><span class="id" title="variable">L</span></a>))) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:168"><span class="id" title="variable">L</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlength</span> ? ? <span class="id" title="var">Hunique</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hlength_nz</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> 0%<span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rlt_not_eq"><span class="id" title="lemma">Rlt_not_eq</span></a>. <span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#INR_0"><span class="id" title="lemma">INR_0</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#lt_INR"><span class="id" title="lemma">lt_INR</span></a>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;1.&nbsp;Simplify&nbsp;everything&nbsp;that&nbsp;we&nbsp;can,&nbsp;and&nbsp;get&nbsp;rid&nbsp;of&nbsp;the&nbsp;/&nbsp;(S&nbsp;length&nbsp;xs')&nbsp;terms&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_eq_reg_r"><span class="id" title="lemma">Rmult_eq_reg_r</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>)); <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Cancel&nbsp;on&nbsp;the&nbsp;RHS&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rdiv_def"><span class="id" title="lemma">Rdiv_def</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" title="lemma">Rmult_assoc</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rinv_l"><span class="id" title="lemma">Rinv_l</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" title="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Cancel&nbsp;on&nbsp;the&nbsp;LHS&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" title="lemma">Rmult_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.prob.countable_sum.html#SeriesC_scal_l"><span class="id" title="lemma">SeriesC_scal_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" title="lemma">Rmult_assoc</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_1_l"><span class="id" title="lemma">Rmult_1_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a"><span class="id" title="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1))<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">R</span> <span class="id" title="keyword">with</span> 1%<span class="id" title="var">R</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1))) <span class="id" title="keyword">with</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rinv_r"><span class="id" title="lemma">Rinv_r</span></a>; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_1_l"><span class="id" title="lemma">Rmult_1_l</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;2.&nbsp;Convert&nbsp;the&nbsp;series&nbsp;into&nbsp;a&nbsp;foldr,&nbsp;simpl&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.prob.countable_sum.html#SeriesC_finite_foldr"><span class="id" title="lemma">SeriesC_finite_foldr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#tc_distr"><span class="id" title="definition">tc_distr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#tc_distr_def"><span class="id" title="definition">tc_distr_def</span></a> <span class="id" title="var">L</span> <span class="id" title="var">CA</span> <span class="id" title="var">CB</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat"><span class="id" title="definition">fin_to_nat</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">)</span></a>) 0%<span class="id" title="var">R</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#enum"><span class="id" title="method">enum</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1))))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span>  (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_distr_def"><span class="id" title="definition">tc_distr_def</span></a> <span class="id" title="var">L</span> <span class="id" title="var">CA</span> <span class="id" title="var">CB</span>) 0%<span class="id" title="var">R</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>)));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">remember</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#tc_distr_def"><span class="id" title="definition">tc_distr_def</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">g</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1))) <span class="id" title="keyword">as</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">l</span>; <span class="id" title="var">last</span> (<span class="id" title="var">simplify_eq</span>; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#index_space_snoc"><span class="id" title="lemma">index_space_snoc</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_app"><span class="id" title="definition">foldr_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#enum"><span class="id" title="method">enum</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="keyword">Transparent</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#enum"><span class="id" title="method">enum</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#foldr_plus_comm_acc"><span class="id" title="lemma">foldr_plus_comm_acc</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_0_r"><span class="id" title="lemma">Rplus_0_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#enum"><span class="id" title="method">enum</span></a> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#fin_finite"><span class="id" title="instance">fin_finite</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#fin_enum_snoc_rec"><span class="id" title="lemma">fin_enum_snoc_rec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_app"><span class="id" title="definition">foldr_app</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat_to_fin"><span class="id" title="lemma">fin_to_nat_to_fin</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#foldr_plus_comm_acc"><span class="id" title="lemma">foldr_plus_comm_acc</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">R</span>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_0_r"><span class="id" title="lemma">Rplus_0_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#foldr_map_cmp"><span class="id" title="lemma">foldr_map_cmp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_ext"><span class="id" title="lemma">foldr_ext</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#fin_inj_incr_to_nat"><span class="id" title="lemma">fin_inj_incr_to_nat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;3.&nbsp;Split&nbsp;the&nbsp;distr&nbsp;series&nbsp;into&nbsp;two&nbsp;sums&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_distr_def"><span class="id" title="definition">tc_distr_def</span></a> <span class="id" title="var">L</span> <span class="id" title="var">CA</span> <span class="id" title="var">CB</span>) 0%<span class="id" title="var">R</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> <span class="id" title="var">CA</span> <span class="id" title="var">CB</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank"><span class="id" title="definition">index_to_rank</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_adv_cmp.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">L</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">)</span></a>) 0%<span class="id" title="var">R</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>)) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> <span class="id" title="var">CA</span> <span class="id" title="var">CB</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#reverse_order"><span class="id" title="definition">reverse_order</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>))<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank"><span class="id" title="definition">index_to_rank</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_adv_cmp.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">L</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">)</span></a>) 0%<span class="id" title="var">R</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>)))%<span class="id" title="var">R</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#tc_distr_def"><span class="id" title="definition">tc_distr_def</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">L</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">L'</span> <span class="id" title="var">LS</span>]; <span class="id" title="tactic">first</span> (<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">lra</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">L'</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">LS</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">HeqL</span> <span class="id" title="var">L'</span> <span class="id" title="var">LS</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> <span class="id" title="var">CA</span> <span class="id" title="var">CB</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank"><span class="id" title="definition">index_to_rank</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_adv_cmp.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">L</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">f1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> <span class="id" title="var">CA</span> <span class="id" title="var">CB</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#reverse_order"><span class="id" title="definition">reverse_order</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>)) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank"><span class="id" title="definition">index_to_rank</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_adv_cmp.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">L</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">f2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Program.Basics.html#compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span>  (<span class="id" title="keyword">fun</span> <a id="i:173" class="idref" href="#i:173"><span class="id" title="binder"><span id="i:175" class="id">i</span></span></a> =&gt; (<span class="id" title="keyword">fun</span> <a id="r:174" class="idref" href="#r:174"><span class="id" title="binder"><span id="r:176" class="id">r</span></span></a> =&gt; <span class="id" title="var">f1</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:173"><span class="id" title="variable">i</span></a> 0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> <span class="id" title="var">f2</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:173"><span class="id" title="variable">i</span></a> 0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#r:174"><span class="id" title="variable">r</span></a>)%<span class="id" title="var">R</span>); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality"><span class="id" title="lemma">functional_extensionality</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality"><span class="id" title="lemma">functional_extensionality</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqf1</span> <span class="id" title="var">Heqf2</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rplus_comm"><span class="id" title="lemma">Rplus_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">L</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hf1</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="i:177" class="idref" href="#i:177"><span class="id" title="binder"><span id="i:179" class="id">i</span></span></a> <a id="r:178" class="idref" href="#r:178"><span class="id" title="binder"><span id="r:180" class="id">r</span></span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> (<span class="id" title="var">f1</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:177"><span class="id" title="variable">i</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#r:178"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#r:178"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> <span class="id" title="var">f1</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:177"><span class="id" title="variable">i</span></a> 0)%<span class="id" title="var">R</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqf1</span> /=; <span class="id" title="var">lra</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hf2</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="i:181" class="idref" href="#i:181"><span class="id" title="binder"><span id="i:183" class="id">i</span></span></a> <a id="r:182" class="idref" href="#r:182"><span class="id" title="binder"><span id="r:184" class="id">r</span></span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> (<span class="id" title="var">f2</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:181"><span class="id" title="variable">i</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#r:182"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#r:182"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> <span class="id" title="var">f2</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:181"><span class="id" title="variable">i</span></a> 0)%<span class="id" title="var">R</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqf2</span> /=; <span class="id" title="var">lra</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">LL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Heqf1</span> <span class="id" title="var">Heqf2</span> <span class="id" title="var">HeqLL</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">LL</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">LL0</span> <span class="id" title="var">LL'</span> <span class="id" title="var">IH</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">IH</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hf1</span> <span class="id" title="var">Hf2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;4.&nbsp;Rewrite&nbsp;the&nbsp;reversed&nbsp;sum&nbsp;and&nbsp;combine&nbsp;to&nbsp;eliminate&nbsp;the&nbsp;factor&nbsp;of&nbsp;2&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#foldr_reduction_1"><span class="id" title="lemma">foldr_reduction_1</span></a>); [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#foldr_reduction_1"><span class="id" title="lemma">foldr_reduction_1</span></a>); [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#foldr_reduction_2"><span class="id" title="lemma">foldr_reduction_2</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;5.&nbsp;Combine&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_fmap"><span class="id" title="lemma">foldr_fmap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lra</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Transparent</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_adv_cmp"><span class="id" title="section">qs_adv_cmp</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="list" class="idref" href="#list"><span class="id" title="section">list</span></a>.<br/>
</div>

<div class="doc">
Ported list library to count comparisons 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="list_nil" class="idref" href="#list_nil"><span class="id" title="definition">list_nil</span></a> := <a class="idref" href="tachis.prob_lang.notation.html#NONE"><span class="id" title="abbreviation">NONE</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="c43cad0ba89369719e7ff5aa274fc2ca" class="idref" href="#c43cad0ba89369719e7ff5aa274fc2ca"><span class="id" title="notation">&quot;</span></a>[ ]" := (<a class="idref" href="tachis.tachis.examples.quicksort.html#list_nil"><span class="id" title="definition">list_nil</span></a>) (<span class="id" title="var">format</span> "[ ]") : <span class="id" title="var">expr_scope</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="list_cons" class="idref" href="#list_cons"><span class="id" title="definition">list_cons</span></a> : <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> := <a class="idref" href="tachis.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">λ</span></a><a class="idref" href="tachis.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">:</span></a> "elem" "list"<a class="idref" href="tachis.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.prob_lang.notation.html#SOME"><span class="id" title="abbreviation">SOME</span></a> <a class="idref" href="tachis.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">(</span></a>"elem"<a class="idref" href="tachis.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">,</span></a> "list"<a class="idref" href="tachis.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Infix</span> <a id="list.::expr_scope:x_'::'_x" class="idref" href="#list.::expr_scope:x_'::'_x"><span class="id" title="notation">&quot;</span></a>::" := <a class="idref" href="tachis.tachis.examples.quicksort.html#list_cons"><span class="id" title="definition">list_cons</span></a> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 60, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">expr_scope</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="431539b718f7383b826bc59636e6fc85" class="idref" href="#431539b718f7383b826bc59636e6fc85"><span class="id" title="notation">&quot;</span></a>[ x ]" := (<a class="idref" href="tachis.tachis.examples.quicksort.html#list_cons"><span class="id" title="definition">list_cons</span></a> <span class="id" title="var">x</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#list_nil"><span class="id" title="definition">list_nil</span></a>) (<span class="id" title="var">format</span> "[ x ]") : <span class="id" title="var">expr_scope</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="872a8d6310aa53fb9917820a579e7c77" class="idref" href="#872a8d6310aa53fb9917820a579e7c77"><span class="id" title="notation">&quot;</span></a>[ x ; y ; .. ; z ]" := (<a class="idref" href="tachis.tachis.examples.quicksort.html#list_cons"><span class="id" title="definition">list_cons</span></a> <span class="id" title="var">x</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#list_cons"><span class="id" title="definition">list_cons</span></a> <span class="id" title="var">y</span> .. (<a class="idref" href="tachis.tachis.examples.quicksort.html#list_cons"><span class="id" title="definition">list_cons</span></a> <span class="id" title="var">z</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#list_nil"><span class="id" title="definition">list_nil</span></a>) ..)) : <span class="id" title="var">expr_scope</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="list_filter" class="idref" href="#list_filter"><span class="id" title="definition">list_filter</span></a> : <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#b655cc6b0c09a3d45e15582d945b2696"><span class="id" title="notation">rec</span></a><a class="idref" href="tachis.prob_lang.notation.html#b655cc6b0c09a3d45e15582d945b2696"><span class="id" title="notation">:</span></a> "list_filter" "f" "l" <a class="idref" href="tachis.prob_lang.notation.html#b655cc6b0c09a3d45e15582d945b2696"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">match</span></a><a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">:</span></a> "l" <a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">with</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">SOME</span></a> "a" <a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">=&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "r" <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> "list_filter" "f" (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.Snd"><span class="id" title="constructor">Snd</span></a> "a") <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a><a class="idref" href="tachis.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">:</span></a> "f" (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.Fst"><span class="id" title="constructor">Fst</span></a> "a")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a>  <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.Fst"><span class="id" title="constructor">Fst</span></a> "a" <a class="idref" href="tachis.tachis.examples.quicksort.html#list.::expr_scope:x_'::'_x"><span class="id" title="notation">::</span></a> "r"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a>  "r"<a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">|</span></a> <a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">NONE</span></a> <a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">=&gt;</span></a> <a class="idref" href="tachis.prob_lang.notation.html#NONE"><span class="id" title="abbreviation">NONE</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">end</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="list_length" class="idref" href="#list_length"><span class="id" title="definition">list_length</span></a> : <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#3b4611ead68c65413f980c1d4a390696"><span class="id" title="notation">rec</span></a><a class="idref" href="tachis.prob_lang.notation.html#3b4611ead68c65413f980c1d4a390696"><span class="id" title="notation">:</span></a> "list_length" "l" <a class="idref" href="tachis.prob_lang.notation.html#3b4611ead68c65413f980c1d4a390696"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">match</span></a><a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">:</span></a> "l" <a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">with</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">SOME</span></a> "a" <a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">=&gt;</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1 <a class="idref" href="tachis.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a> <a class="idref" href="tachis.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">(</span></a>"list_length" (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.Snd"><span class="id" title="constructor">Snd</span></a> "a")<a class="idref" href="tachis.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">|</span></a> <a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">NONE</span></a> <a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">=&gt;</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">end</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="list_remove_nth" class="idref" href="#list_remove_nth"><span class="id" title="definition">list_remove_nth</span></a> : <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#b655cc6b0c09a3d45e15582d945b2696"><span class="id" title="notation">rec</span></a><a class="idref" href="tachis.prob_lang.notation.html#b655cc6b0c09a3d45e15582d945b2696"><span class="id" title="notation">:</span></a> "list_remove_nth" "l" "i" <a class="idref" href="tachis.prob_lang.notation.html#b655cc6b0c09a3d45e15582d945b2696"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">match</span></a><a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">:</span></a> "l" <a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">with</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">SOME</span></a> "a" <a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">=&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "head" <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.Fst"><span class="id" title="constructor">Fst</span></a> "a" <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "tail" <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.Snd"><span class="id" title="constructor">Snd</span></a> "a" <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a><a class="idref" href="tachis.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">:</span></a> "i" <a class="idref" href="tachis.prob_lang.notation.html#268bceb185e8402e5a254d7b9bacc674"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="tachis.prob_lang.notation.html#SOME"><span class="id" title="abbreviation">SOME</span></a> <a class="idref" href="tachis.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">(</span></a>"head"<a class="idref" href="tachis.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">,</span></a> "tail"<a class="idref" href="tachis.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "r" <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> "list_remove_nth" "tail" ("i" <a class="idref" href="tachis.prob_lang.notation.html#::expr_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1) <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">match</span></a><a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">:</span></a> "r" <a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">with</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">SOME</span></a> "b" <a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">=&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "head'" <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.Fst"><span class="id" title="constructor">Fst</span></a> "b" <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "tail'" <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.Snd"><span class="id" title="constructor">Snd</span></a> "b" <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#SOME"><span class="id" title="abbreviation">SOME</span></a> <a class="idref" href="tachis.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">(</span></a>"head'"<a class="idref" href="tachis.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">(</span></a>"head" <a class="idref" href="tachis.tachis.examples.quicksort.html#list.::expr_scope:x_'::'_x"><span class="id" title="notation">::</span></a> "tail'"<a class="idref" href="tachis.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">|</span></a> <a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">NONE</span></a> <a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">=&gt;</span></a> <a class="idref" href="tachis.prob_lang.notation.html#NONE"><span class="id" title="abbreviation">NONE</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">end</span></a><a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">|</span></a> <a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">NONE</span></a> <a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">=&gt;</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#list_nil"><span class="id" title="definition">list_nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#4b2026d407855375f7c3da6974fb71a2"><span class="id" title="notation">end</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="list_append" class="idref" href="#list_append"><span class="id" title="definition">list_append</span></a> : <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#b655cc6b0c09a3d45e15582d945b2696"><span class="id" title="notation">rec</span></a><a class="idref" href="tachis.prob_lang.notation.html#b655cc6b0c09a3d45e15582d945b2696"><span class="id" title="notation">:</span></a> "list_append" "l" "r" <a class="idref" href="tachis.prob_lang.notation.html#b655cc6b0c09a3d45e15582d945b2696"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#a5dc98fcec8b0ae0c09320eefe48d17d"><span class="id" title="notation">match</span></a><a class="idref" href="tachis.prob_lang.notation.html#a5dc98fcec8b0ae0c09320eefe48d17d"><span class="id" title="notation">:</span></a> "l" <a class="idref" href="tachis.prob_lang.notation.html#a5dc98fcec8b0ae0c09320eefe48d17d"><span class="id" title="notation">with</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#a5dc98fcec8b0ae0c09320eefe48d17d"><span class="id" title="notation">NONE</span></a> <a class="idref" href="tachis.prob_lang.notation.html#a5dc98fcec8b0ae0c09320eefe48d17d"><span class="id" title="notation">=&gt;</span></a> "r"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#a5dc98fcec8b0ae0c09320eefe48d17d"><span class="id" title="notation">|</span></a> <a class="idref" href="tachis.prob_lang.notation.html#a5dc98fcec8b0ae0c09320eefe48d17d"><span class="id" title="notation">SOME</span></a> "p" <a class="idref" href="tachis.prob_lang.notation.html#a5dc98fcec8b0ae0c09320eefe48d17d"><span class="id" title="notation">=&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "h" <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.Fst"><span class="id" title="constructor">Fst</span></a> "p" <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "t" <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.Snd"><span class="id" title="constructor">Snd</span></a> "p" <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"h" <a class="idref" href="tachis.tachis.examples.quicksort.html#list.::expr_scope:x_'::'_x"><span class="id" title="notation">::</span></a> "list_append" "t" "r"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#a5dc98fcec8b0ae0c09320eefe48d17d"><span class="id" title="notation">end</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="list_remove_nth_unsafe" class="idref" href="#list_remove_nth_unsafe"><span class="id" title="definition">list_remove_nth_unsafe</span></a> : <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">λ</span></a><a class="idref" href="tachis.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">:</span></a>"l" "n"<a class="idref" href="tachis.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#a6aade80b42bcfcd5f70ea4affa7e487"><span class="id" title="notation">match</span></a><a class="idref" href="tachis.prob_lang.notation.html#a6aade80b42bcfcd5f70ea4affa7e487"><span class="id" title="notation">:</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#list_remove_nth"><span class="id" title="definition">list_remove_nth</span></a> "l" "n" <a class="idref" href="tachis.prob_lang.notation.html#a6aade80b42bcfcd5f70ea4affa7e487"><span class="id" title="notation">with</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#a6aade80b42bcfcd5f70ea4affa7e487"><span class="id" title="notation">|</span></a> <a class="idref" href="tachis.prob_lang.notation.html#a6aade80b42bcfcd5f70ea4affa7e487"><span class="id" title="notation">NONE</span></a> <a class="idref" href="tachis.prob_lang.notation.html#a6aade80b42bcfcd5f70ea4affa7e487"><span class="id" title="notation">=&gt;</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="tachis.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#a6aade80b42bcfcd5f70ea4affa7e487"><span class="id" title="notation">|</span></a> <a class="idref" href="tachis.prob_lang.notation.html#a6aade80b42bcfcd5f70ea4affa7e487"><span class="id" title="notation">SOME</span></a> "v" <a class="idref" href="tachis.prob_lang.notation.html#a6aade80b42bcfcd5f70ea4affa7e487"><span class="id" title="notation">=&gt;</span></a> "v"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#a6aade80b42bcfcd5f70ea4affa7e487"><span class="id" title="notation">end</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="partition" class="idref" href="#partition"><span class="id" title="definition">partition</span></a> : <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.expr"><span class="id" title="inductive">expr</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">λ</span></a><a class="idref" href="tachis.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">:</span></a> "cmp"<a class="idref" href="tachis.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#3d489cbe8f13619f2070e081d1ecd1f6"><span class="id" title="notation">λ</span></a><a class="idref" href="tachis.prob_lang.notation.html#3d489cbe8f13619f2070e081d1ecd1f6"><span class="id" title="notation">:</span></a>"l" "e"<a class="idref" href="tachis.prob_lang.notation.html#3d489cbe8f13619f2070e081d1ecd1f6"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "f" <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">λ</span></a><a class="idref" href="tachis.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">:</span></a>"x"<a class="idref" href="tachis.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">,</span></a> "cmp" "e" "x"<a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">)</span></a> <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#list_filter"><span class="id" title="definition">list_filter</span></a> (<a class="idref" href="tachis.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">λ</span></a><a class="idref" href="tachis.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">:</span></a>"x"<a class="idref" href="tachis.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.prob_lang.notation.html#248e4724632d387f5b93ebbd08ad48f7"><span class="id" title="notation">~</span></a> <a class="idref" href="tachis.prob_lang.notation.html#248e4724632d387f5b93ebbd08ad48f7"><span class="id" title="notation">(</span></a>"f" "x"<a class="idref" href="tachis.prob_lang.notation.html#248e4724632d387f5b93ebbd08ad48f7"><span class="id" title="notation">)</span></a> ) "l"<a class="idref" href="tachis.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#list_filter"><span class="id" title="definition">list_filter</span></a> "f" "l"<a class="idref" href="tachis.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="qs" class="idref" href="#qs"><span class="id" title="definition">qs</span></a> : <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">λ</span></a><a class="idref" href="tachis.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">:</span></a> "cmp"<a class="idref" href="tachis.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#906ea9e6f897046b3c4410ec24b8ddef"><span class="id" title="notation">rec</span></a><a class="idref" href="tachis.prob_lang.notation.html#906ea9e6f897046b3c4410ec24b8ddef"><span class="id" title="notation">:</span></a> "qs" "l" <a class="idref" href="tachis.prob_lang.notation.html#906ea9e6f897046b3c4410ec24b8ddef"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "n" <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#list_length"><span class="id" title="definition">list_length</span></a> "l" <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a><a class="idref" href="tachis.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">:</span></a> "n" <a class="idref" href="tachis.prob_lang.notation.html#::expr_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1 <a class="idref" href="tachis.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> "l" <a class="idref" href="tachis.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "ip" <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="tachis.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="tachis.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">(</span></a>"n" <a class="idref" href="tachis.prob_lang.notation.html#::expr_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1<a class="idref" href="tachis.prob_lang.notation.html#::expr_scope:'rand'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="tachis.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">let</span></a><a class="idref" href="tachis.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">(</span></a>"p"<a class="idref" href="tachis.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">,</span></a> "r"<a class="idref" href="tachis.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">)</span></a> <a class="idref" href="tachis.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">:=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#list_remove_nth_unsafe"><span class="id" title="definition">list_remove_nth_unsafe</span></a> "l" "ip" <a class="idref" href="tachis.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">let</span></a><a class="idref" href="tachis.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">(</span></a>"le"<a class="idref" href="tachis.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">,</span></a> "gt"<a class="idref" href="tachis.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">)</span></a> <a class="idref" href="tachis.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">:=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#partition"><span class="id" title="definition">partition</span></a> "cmp" "r" "p" <a class="idref" href="tachis.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">let</span></a><a class="idref" href="tachis.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">(</span></a>"les"<a class="idref" href="tachis.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">,</span></a> "gts"<a class="idref" href="tachis.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">)</span></a> <a class="idref" href="tachis.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">:=</span></a> <a class="idref" href="tachis.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">(</span></a>"qs" "le"<a class="idref" href="tachis.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">,</span></a> "qs" "gt"<a class="idref" href="tachis.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">)</span></a> <a class="idref" href="tachis.prob_lang.notation.html#6582bc55109100c0672072c9d8fbbf98"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#list_append"><span class="id" title="definition">list_append</span></a> "les" (<a class="idref" href="tachis.tachis.examples.quicksort.html#list_cons"><span class="id" title="definition">list_cons</span></a> "p" "gts").<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="inject_list" class="idref" href="#inject_list"><span class="id" title="definition">inject_list</span></a> `{<a id="Inject0:186" class="idref" href="#Inject0:186"><span class="id" title="binder">!</span></a><a id="Inject0:186" class="idref" href="#Inject0:186"><span class="id" title="binder">Inject</span></a> <a id="A:185" class="idref" href="#A:185"><span class="id" title="binder"><span id="Inject0:186" class="id">A</span></span></a> <a id="Inject0:186" class="idref" href="#Inject0:186"><span class="id" title="binder">val</span></a>} (<a id="xs:187" class="idref" href="#xs:187"><span class="id" title="binder">xs</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:185"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#xs:187"><span class="id" title="variable">xs</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="tachis.prob_lang.notation.html#NONEV"><span class="id" title="abbreviation">NONEV</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">xs'</span> =&gt; <a class="idref" href="tachis.prob_lang.notation.html#SOMEV"><span class="id" title="abbreviation">SOMEV</span></a> <a class="idref" href="tachis.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">((</span></a><a class="idref" href="tachis.common.inject.html#inject"><span class="id" title="method">inject</span></a> <span class="id" title="var">x</span><a class="idref" href="tachis.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">),</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#inject_list:188"><span class="id" title="definition">inject_list</span></a> <span class="id" title="var">xs'</span><a class="idref" href="tachis.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Program Instance</span> <a id="Inject_list" class="idref" href="#Inject_list"><span class="id" title="instance">Inject_list</span></a> `{<a id="Inject0:191" class="idref" href="#Inject0:191"><span class="id" title="binder">!</span></a><a id="Inject0:191" class="idref" href="#Inject0:191"><span class="id" title="binder">Inject</span></a> <a id="A:190" class="idref" href="#A:190"><span class="id" title="binder"><span id="Inject0:191" class="id">A</span></span></a> <a id="Inject0:191" class="idref" href="#Inject0:191"><span class="id" title="binder">val</span></a>} : <a class="idref" href="tachis.common.inject.html#Inject"><span class="id" title="class">Inject</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:190"><span class="id" title="variable">A</span></a>) <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="tachis.common.inject.html#inject"><span class="id" title="method">inject</span></a> := <a class="idref" href="tachis.tachis.examples.quicksort.html#inject_list"><span class="id" title="definition">inject_list</span></a> |}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? [] <span class="id" title="var">xs</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">xs</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">x</span> <span class="id" title="var">xs</span> <span class="id" title="var">IH</span>]; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> []; <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> []; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 1|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1 <span class="id" title="keyword">as</span> [<span class="id" title="var">H'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#inj"><span class="id" title="definition">inj</span></a> <span class="id" title="var">_</span>)|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `[<a id="Inject0:193" class="idref" href="#Inject0:193"><span class="id" title="binder">!</span></a><a id="Inject0:193" class="idref" href="#Inject0:193"><span class="id" title="binder">Inject</span></a> <a id="A:192" class="idref" href="#A:192"><span class="id" title="binder"><span id="Inject0:193" class="id">A</span></span></a> <a id="Inject0:193" class="idref" href="#Inject0:193"><span class="id" title="binder">val</span></a>].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="is_list" class="idref" href="#is_list"><span class="id" title="definition">is_list</span></a> (<a id="l:194" class="idref" href="#l:194"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#list.A"><span class="id" title="variable">A</span></a>) (<a id="v:195" class="idref" href="#v:195"><span class="id" title="binder">v</span></a> : <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:194"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="tachis.tachis.examples.quicksort.html#v:195"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.prob_lang.notation.html#NONEV"><span class="id" title="abbreviation">NONEV</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><span class="id" title="var">l'</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="lv:198" class="idref" href="#lv:198"><span class="id" title="binder">lv</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#v:195"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.prob_lang.notation.html#SOMEV"><span class="id" title="abbreviation">SOMEV</span></a> <a class="idref" href="tachis.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">((</span></a><a class="idref" href="tachis.common.inject.html#inject"><span class="id" title="method">inject</span></a> <span class="id" title="var">a</span><a class="idref" href="tachis.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">),</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#lv:198"><span class="id" title="variable">lv</span></a><a class="idref" href="tachis.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#is_list:196"><span class="id" title="definition">is_list</span></a> <span class="id" title="var">l'</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#lv:198"><span class="id" title="variable">lv</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="is_list_inject" class="idref" href="#is_list_inject"><span class="id" title="lemma">is_list_inject</span></a> <a id="xs:199" class="idref" href="#xs:199"><span class="id" title="binder">xs</span></a> <a id="v:200" class="idref" href="#v:200"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#xs:199"><span class="id" title="variable">xs</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#v:200"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">↔</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#v:200"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.common.inject.html#inject"><span class="id" title="method">inject</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#xs:199"><span class="id" title="variable">xs</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">xs</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">x</span> <span class="id" title="var">xs</span> <span class="id" title="var">IH</span>]; [<span class="id" title="var">done</span>|]. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> 1 <span class="id" title="keyword">as</span> (? &amp; -&gt; &amp; ?). <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> -&gt;. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span>|]. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="list.list_specs" class="idref" href="#list.list_specs"><span class="id" title="section">list_specs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="tachisGS0:202" class="idref" href="#tachisGS0:202"><span class="id" title="binder">!</span></a><a id="tachisGS0:202" class="idref" href="#tachisGS0:202"><span class="id" title="binder">tachisGS</span></a> <a id="04b30a0dfd81ed0f4796958cc8a58857" class="idref" href="#04b30a0dfd81ed0f4796958cc8a58857"><span class="id" title="binder"><span id="tachisGS0:202" class="id">Σ</span></span></a> <a id="tachisGS0:202" class="idref" href="#tachisGS0:202"><span class="id" title="binder">CostTick</span></a>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_list_nil" class="idref" href="#wp_list_nil"><span class="id" title="lemma">wp_list_nil</span></a> <a id="E:203" class="idref" href="#E:203"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#::bi_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#list_nil"><span class="id" title="definition">list_nil</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">@</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#E:203"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a id="v:204" class="idref" href="#v:204"><span class="id" title="binder">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#v:204"><span class="id" title="variable">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#v:204"><span class="id" title="variable">v</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "_ HΦ". <span class="id" title="tactic">unfold</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#list_nil"><span class="id" title="definition">list_nil</span></a>. <span class="id" title="var">wp_pure</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "HΦ". <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_list_cons" class="idref" href="#wp_list_cons"><span class="id" title="lemma">wp_list_cons</span></a> <a id="a:205" class="idref" href="#a:205"><span class="id" title="binder">a</span></a> <a id="l:206" class="idref" href="#l:206"><span class="id" title="binder">l</span></a> <a id="lv:207" class="idref" href="#lv:207"><span class="id" title="binder">lv</span></a> <a id="E:208" class="idref" href="#E:208"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:206"><span class="id" title="variable">l</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#lv:207"><span class="id" title="variable">lv</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#list_cons"><span class="id" title="definition">list_cons</span></a> (<a class="idref" href="tachis.common.inject.html#inject"><span class="id" title="method">inject</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#a:205"><span class="id" title="variable">a</span></a>) <a class="idref" href="tachis.tachis.examples.quicksort.html#lv:207"><span class="id" title="variable">lv</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">@</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#E:208"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a id="v:209" class="idref" href="#v:209"><span class="id" title="binder">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#v:209"><span class="id" title="variable">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#a:205"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#l:206"><span class="id" title="variable">l</span></a>) <a class="idref" href="tachis.tachis.examples.quicksort.html#v:209"><span class="id" title="variable">v</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "% HΦ". <span class="id" title="var">wp_lam</span>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HΦ". <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_list_length" class="idref" href="#wp_list_length"><span class="id" title="lemma">wp_list_length</span></a> <a id="E:210" class="idref" href="#E:210"><span class="id" title="binder">E</span></a> <a id="l:211" class="idref" href="#l:211"><span class="id" title="binder">l</span></a> <a id="lv:212" class="idref" href="#lv:212"><span class="id" title="binder">lv</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:211"><span class="id" title="variable">l</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#lv:212"><span class="id" title="variable">lv</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#list_length"><span class="id" title="definition">list_length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#lv:212"><span class="id" title="variable">lv</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">@</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#E:210"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a id="v:213" class="idref" href="#v:213"><span class="id" title="binder">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#v:213"><span class="id" title="variable">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#v:213"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:211"><span class="id" title="variable">l</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "Ha HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">l'</span>] "IH" <span class="id" title="keyword">forall</span> (<span class="id" title="var">lv</span> <span class="id" title="var">Φ</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Ha" <span class="id" title="keyword">as</span> %<span class="id" title="var">Ha</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">wp_rec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_match</span>. <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#bc9fd2481486dc1ddc28ccbc3ddae226"><span class="id" title="notation">(</span></a>"HΦ" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#bc9fd2481486dc1ddc28ccbc3ddae226"><span class="id" title="notation">$!</span></a> 0%<span class="id" title="var">nat</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#bc9fd2481486dc1ddc28ccbc3ddae226"><span class="id" title="notation">)</span></a>; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">wp_rec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lv'</span> [<span class="id" title="var">Hlv</span> <span class="id" title="var">Hlcoh</span>]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_match</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_proj</span>. <span class="id" title="var">wp_bind</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#list_length"><span class="id" title="definition">list_length</span></a> <span class="id" title="var">_</span>); <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> ("IH"); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iNext</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_op</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.add_1_l"><span class="id" title="lemma">Z.add_1_l</span></a> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_succ"><span class="id" title="lemma">Nat2Z.inj_succ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_remove_nth" class="idref" href="#wp_remove_nth"><span class="id" title="lemma">wp_remove_nth</span></a> <a id="E:214" class="idref" href="#E:214"><span class="id" title="binder">E</span></a> (<a id="l:215" class="idref" href="#l:215"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#list.A"><span class="id" title="variable">A</span></a>) <a id="lv:216" class="idref" href="#lv:216"><span class="id" title="binder">lv</span></a> (<a id="i:217" class="idref" href="#i:217"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:215"><span class="id" title="variable">l</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#lv:216"><span class="id" title="variable">lv</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:217"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:215"><span class="id" title="variable">l</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#list_remove_nth"><span class="id" title="definition">list_remove_nth</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#lv:216"><span class="id" title="variable">lv</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#i:217"><span class="id" title="variable">i</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">@</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#E:214"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a id="v:218" class="idref" href="#v:218"><span class="id" title="binder">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#v:218"><span class="id" title="variable">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="e:219" class="idref" href="#e:219"><span class="id" title="binder">e</span></a> <a id="lv':220" class="idref" href="#lv':220"><span class="id" title="binder">lv'</span></a> <a id="l1:221" class="idref" href="#l1:221"><span class="id" title="binder">l1</span></a> <a id="l2:222" class="idref" href="#l2:222"><span class="id" title="binder">l2</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#l:215"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l1:221"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#e:219"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l2:222"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l1:221"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:217"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#v:218"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.prob_lang.notation.html#SOMEV"><span class="id" title="abbreviation">SOMEV</span></a> <a class="idref" href="tachis.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">((</span></a><a class="idref" href="tachis.common.inject.html#inject"><span class="id" title="method">inject</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#e:219"><span class="id" title="variable">e</span></a><a class="idref" href="tachis.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">),</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#lv':220"><span class="id" title="variable">lv'</span></a><a class="idref" href="tachis.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#l1:221"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l2:222"><span class="id" title="variable">l2</span></a>) <a class="idref" href="tachis.tachis.examples.quicksort.html#lv':220"><span class="id" title="variable">lv'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "Ha Hφ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">l'</span>] "IH" <span class="id" title="keyword">forall</span> (<span class="id" title="var">i</span> <span class="id" title="var">lv</span> <span class="id" title="var">Φ</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Ha" <span class="id" title="keyword">as</span> "(%Hl &amp; %Hi)"; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">wp_rec</span>; <span class="id" title="var">wp_let</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hl</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lv'</span> [<span class="id" title="var">Hlv</span> <span class="id" title="var">Hlcoh</span>]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_match</span>. <span class="id" title="var">wp_pures</span>. <span class="id" title="var">case_bool_decide</span>; <span class="id" title="var">wp_pures</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iApply</span> "Hφ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">a</span>, (<a class="idref" href="tachis.common.inject.html#inject"><span class="id" title="method">inject</span></a> <span class="id" title="var">l'</span>), <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>, <span class="id" title="var">l'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#is_list_inject"><span class="id" title="lemma">is_list_inject</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlcoh</span> <span class="id" title="keyword">as</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#is_list_inject"><span class="id" title="lemma">is_list_inject</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> ((<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> <span class="id" title="var">l'</span> <span class="id" title="var">lv'</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">l'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Haux</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hi</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_bind</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#list_remove_nth"><span class="id" title="definition">list_remove_nth</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rminus_0_r"><span class="id" title="lemma">Rminus_0_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#bc9fd2481486dc1ddc28ccbc3ddae226"><span class="id" title="notation">(</span></a>"IH" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#bc9fd2481486dc1ddc28ccbc3ddae226"><span class="id" title="notation">$!</span></a> <span class="id" title="var">i</span> <span class="id" title="var">lv'</span> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#bc9fd2481486dc1ddc28ccbc3ddae226"><span class="id" title="notation">)</span></a>; [<span class="id" title="tactic">eauto</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iNext</span>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">v</span> (<span class="id" title="var">e</span> &amp; <span class="id" title="var">v'</span> &amp; <span class="id" title="var">l1</span> &amp; <span class="id" title="var">l2</span> &amp; (-&gt; &amp; <span class="id" title="var">Hlen</span> &amp; -&gt; &amp; <span class="id" title="var">Hil</span>))); <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_bind</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#list_cons"><span class="id" title="definition">list_cons</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="var">iApply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#wp_list_cons"><span class="id" title="lemma">wp_list_cons</span></a>; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;" (<span class="id" title="var">v</span> <span class="id" title="var">Hcons</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "Hφ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">e</span>, (<a class="idref" href="tachis.common.inject.html#inject"><span class="id" title="method">inject</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l1</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">l2</span>)), (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l1</span>), <span class="id" title="var">l2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#cons_length"><span class="id" title="definition">cons_length</span></a> <span class="id" title="var">Hlen</span> // |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#is_list_inject"><span class="id" title="lemma">is_list_inject</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcons</span> <span class="id" title="keyword">as</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#is_list_inject"><span class="id" title="lemma">is_list_inject</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_list_append" class="idref" href="#wp_list_append"><span class="id" title="lemma">wp_list_append</span></a> <a id="E:223" class="idref" href="#E:223"><span class="id" title="binder">E</span></a> <a id="l:224" class="idref" href="#l:224"><span class="id" title="binder">l</span></a> <a id="lM:225" class="idref" href="#lM:225"><span class="id" title="binder">lM</span></a> <a id="r:226" class="idref" href="#r:226"><span class="id" title="binder">r</span></a> <a id="rM:227" class="idref" href="#rM:227"><span class="id" title="binder">rM</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#lM:225"><span class="id" title="variable">lM</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:224"><span class="id" title="variable">l</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#rM:227"><span class="id" title="variable">rM</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#r:226"><span class="id" title="variable">r</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#list_append"><span class="id" title="definition">list_append</span></a> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:224"><span class="id" title="variable">l</span></a>) (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#r:226"><span class="id" title="variable">r</span></a>) <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">@</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#E:223"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a id="v:228" class="idref" href="#v:228"><span class="id" title="binder">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#v:228"><span class="id" title="variable">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#lM:225"><span class="id" title="variable">lM</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#rM:227"><span class="id" title="variable">rM</span></a>) <a class="idref" href="tachis.tachis.examples.quicksort.html#v:228"><span class="id" title="variable">v</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "[%Hl %Hr] HΦ". <span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#list_append"><span class="id" title="definition">list_append</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> <span class="id" title="var">lM</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">lM</span>] "IH" <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span> <span class="id" title="var">r</span> <span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Φ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="var">wp_pures</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hl</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">l'</span> [<span class="id" title="var">Hl'eq</span> <span class="id" title="var">Hl'</span>]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 12 <span class="id" title="var">wp_pure</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_bind</span> (((<a class="idref" href="tachis.prob_lang.notation.html#b655cc6b0c09a3d45e15582d945b2696"><span class="id" title="notation">rec</span></a><a class="idref" href="tachis.prob_lang.notation.html#b655cc6b0c09a3d45e15582d945b2696"><span class="id" title="notation">:</span></a> "list_append" <span class="id" title="var">_</span> <span class="id" title="var">_</span><a class="idref" href="tachis.prob_lang.notation.html#b655cc6b0c09a3d45e15582d945b2696"><span class="id" title="notation">:=</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">V</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "IH"; [<span class="id" title="var">done</span>..|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;" (<span class="id" title="var">v</span> <span class="id" title="var">Hv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">wp_apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#wp_list_cons"><span class="id" title="lemma">wp_list_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_list_filter" class="idref" href="#wp_list_filter"><span class="id" title="lemma">wp_list_filter</span></a> (<a id="l:229" class="idref" href="#l:229"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#list.A"><span class="id" title="variable">A</span></a>) (<a id="P:230" class="idref" href="#P:230"><span class="id" title="binder">P</span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#list.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) (<a id="f:231" class="idref" href="#f:231"><span class="id" title="binder">f</span></a> <a id="lv:232" class="idref" href="#lv:232"><span class="id" title="binder">lv</span></a> : <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) <a id="E:233" class="idref" href="#E:233"><span class="id" title="binder">E</span></a> <a id="k:234" class="idref" href="#k:234"><span class="id" title="binder">k</span></a> (<a id="Hk:235" class="idref" href="#Hk:235"><span class="id" title="binder">Hk</span></a> : (0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#k:234"><span class="id" title="variable">k</span></a>)%<span class="id" title="var">R</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">∀</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">(</span></a><a id="x:236" class="idref" href="#x:236"><span class="id" title="binder">x</span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#list.A"><span class="id" title="variable">A</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">),</span></a> <a class="idref" href="tachis.bi.weakestpre.html#6758bfb0570afaad5b863e74dae14d00"><span class="id" title="notation">{{{</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#k:234"><span class="id" title="variable">k</span></a> <a class="idref" href="tachis.bi.weakestpre.html#6758bfb0570afaad5b863e74dae14d00"><span class="id" title="notation">}}}</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#f:231"><span class="id" title="variable">f</span></a> (<a class="idref" href="tachis.common.inject.html#inject"><span class="id" title="method">inject</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:236"><span class="id" title="variable">x</span></a>) <a class="idref" href="tachis.bi.weakestpre.html#6758bfb0570afaad5b863e74dae14d00"><span class="id" title="notation">@</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#E:233"><span class="id" title="variable">E</span></a> <a class="idref" href="tachis.bi.weakestpre.html#6758bfb0570afaad5b863e74dae14d00"><span class="id" title="notation">{{{</span></a> <a id="w:237" class="idref" href="#w:237"><span class="id" title="binder">w</span></a><a class="idref" href="tachis.bi.weakestpre.html#6758bfb0570afaad5b863e74dae14d00"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.bi.weakestpre.html#6758bfb0570afaad5b863e74dae14d00"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#w:237"><span class="id" title="variable">w</span></a><a class="idref" href="tachis.bi.weakestpre.html#6758bfb0570afaad5b863e74dae14d00"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#w:237"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.common.inject.html#inject"><span class="id" title="method">inject</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#P:230"><span class="id" title="variable">P</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:236"><span class="id" title="variable">x</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="tachis.bi.weakestpre.html#6758bfb0570afaad5b863e74dae14d00"><span class="id" title="notation">}}}</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:229"><span class="id" title="variable">l</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#lv:232"><span class="id" title="variable">lv</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#k:234"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:229"><span class="id" title="variable">l</span></a><a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">)</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#list_filter"><span class="id" title="definition">list_filter</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#f:231"><span class="id" title="variable">f</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#lv:232"><span class="id" title="variable">lv</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">@</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#E:233"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a id="rv:238" class="idref" href="#rv:238"><span class="id" title="binder">rv</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#rv:238"><span class="id" title="variable">rv</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">List.filter</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#P:230"><span class="id" title="variable">P</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:229"><span class="id" title="variable">l</span></a>) <a class="idref" href="tachis.tachis.examples.quicksort.html#rv:238"><span class="id" title="variable">rv</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "(#Hf &amp; %Hil &amp; H⧖) HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [ | <span class="id" title="var">h</span> <span class="id" title="var">t</span>] "IH" <span class="id" title="keyword">forall</span> (<span class="id" title="var">lv</span> <span class="id" title="var">Hil</span> <span class="id" title="var">Φ</span>); <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hil</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#list_filter"><span class="id" title="definition">list_filter</span></a>; <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HΦ"; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hil</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lv'</span> &amp; -&gt; &amp; <span class="id" title="var">Hil</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#list_filter"><span class="id" title="definition">list_filter</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 7 (<span class="id" title="var">wp_pure</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#list_filter"><span class="id" title="definition">list_filter</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <span class="id" title="var">k</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">(</span></a><span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">t</span><a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">I</span> <span class="id" title="keyword">with</span> "[H⧖]" <span class="id" title="keyword">as</span> "(H⧖ &amp; H⧖IH)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#cons_length"><span class="id" title="definition">cons_length</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#S_INR"><span class="id" title="lemma">S_INR</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" title="lemma">Rmult_plus_distr_l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" title="lemma">Rmult_1_r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rplus_comm"><span class="id" title="lemma">Rplus_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="tachis.tachis.expected_time_credits.html#etc_split"><span class="id" title="lemma">etc_split</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_le_pos"><span class="id" title="lemma">Rmult_le_pos</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#pos_INR"><span class="id" title="lemma">pos_INR</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"IH" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[//] H⧖IH"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">rv</span>) "%Hilp"; <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hf" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">w</span>) "-&gt;".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">P</span> <span class="id" title="var">h</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">HP</span>; <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">wp_apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#wp_list_cons"><span class="id" title="lemma">wp_list_cons</span></a>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">v</span>) "%Hil'".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HΦ"; <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HP</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hil'</span>; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iApply</span> "HΦ"; <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HP</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_remove_nth_unsafe" class="idref" href="#wp_remove_nth_unsafe"><span class="id" title="lemma">wp_remove_nth_unsafe</span></a> <a id="E:239" class="idref" href="#E:239"><span class="id" title="binder">E</span></a> (<a id="l:240" class="idref" href="#l:240"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#list.A"><span class="id" title="variable">A</span></a>) (<a id="lv:241" class="idref" href="#lv:241"><span class="id" title="binder">lv</span></a> : <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) (<a id="i:242" class="idref" href="#i:242"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:240"><span class="id" title="variable">l</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#lv:241"><span class="id" title="variable">lv</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:242"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:240"><span class="id" title="variable">l</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#list_remove_nth_unsafe"><span class="id" title="definition">list_remove_nth_unsafe</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#lv:241"><span class="id" title="variable">lv</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#i:242"><span class="id" title="variable">i</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">@</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#E:239"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a id="v:243" class="idref" href="#v:243"><span class="id" title="binder">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#v:243"><span class="id" title="variable">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="e:244" class="idref" href="#e:244"><span class="id" title="binder">e</span></a> <a id="lv':245" class="idref" href="#lv':245"><span class="id" title="binder">lv'</span></a> <a id="l1:246" class="idref" href="#l1:246"><span class="id" title="binder">l1</span></a> <a id="l2:247" class="idref" href="#l2:247"><span class="id" title="binder">l2</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:240"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l1:246"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#e:244"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l2:247"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l1:246"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:242"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#v:243"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">((</span></a><a class="idref" href="tachis.common.inject.html#inject"><span class="id" title="method">inject</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#e:244"><span class="id" title="variable">e</span></a><a class="idref" href="tachis.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">),</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#lv':245"><span class="id" title="variable">lv'</span></a><a class="idref" href="tachis.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)</span></a>%<span class="id" title="var">V</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#l1:246"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l2:247"><span class="id" title="variable">l2</span></a>) <a class="idref" href="tachis.tachis.examples.quicksort.html#lv':245"><span class="id" title="variable">lv'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (φ) "(%llv &amp; %Hi) hφ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#list_remove_nth_unsafe"><span class="id" title="definition">list_remove_nth_unsafe</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#wp_remove_nth"><span class="id" title="lemma">wp_remove_nth</span></a> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?(?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?)) ; <span class="id" title="tactic">subst</span>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "hφ". <span class="id" title="var">iModIntro</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>,<span class="id" title="var">_</span>,<span class="id" title="var">_</span>,<span class="id" title="var">_</span>. <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#list.list_specs"><span class="id" title="section">list_specs</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="list.sorting" class="idref" href="#list.sorting"><span class="id" title="section">sorting</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `[<a id="Inject1:248" class="idref" href="#Inject1:248"><span class="id" title="binder">!</span></a><a id="Inject1:248" class="idref" href="#Inject1:248"><span class="id" title="binder">Inject</span></a> <a id="Inject1:248" class="idref" href="#Inject1:248"><span class="id" title="binder">A</span></a> <a id="Inject1:248" class="idref" href="#Inject1:248"><span class="id" title="binder">val</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:249" class="idref" href="#H:249"><span class="id" title="binder">Inhabited</span></a> <a id="H:249" class="idref" href="#H:249"><span class="id" title="binder">A</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="f:250" class="idref" href="#f:250"><span class="id" title="binder">f</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#list.A"><span class="id" title="variable">A</span></a>) `{<a id="H0:253" class="idref" href="#H0:253"><span class="id" title="binder">∀</span></a> <a id="x:251" class="idref" href="#x:251"><span class="id" title="binder"><span id="H0:253" class="id">x</span></span></a> <a id="y:252" class="idref" href="#y:252"><span class="id" title="binder"><span id="H0:253" class="id">y</span></span></a><a id="H0:253" class="idref" href="#H0:253"><span class="id" title="binder">,</span></a> <a id="H0:253" class="idref" href="#H0:253"><span class="id" title="binder">Decision</span></a> <a id="H0:253" class="idref" href="#H0:253"><span class="id" title="binder">(</span></a><a id="H0:253" class="idref" href="#H0:253"><span class="id" title="binder">f</span></a> <a id="H0:253" class="idref" href="#H0:253"><span class="id" title="binder">x</span></a> <a id="H0:253" class="idref" href="#H0:253"><span class="id" title="binder">y</span></a><a id="H0:253" class="idref" href="#H0:253"><span class="id" title="binder">)</span></a>} `{<a id="TotalOrder0:254" class="idref" href="#TotalOrder0:254"><span class="id" title="binder">!</span></a><a id="TotalOrder0:254" class="idref" href="#TotalOrder0:254"><span class="id" title="binder">TotalOrder</span></a> <a id="TotalOrder0:254" class="idref" href="#TotalOrder0:254"><span class="id" title="binder">f</span></a>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local Definition</span> <a id="sorted" class="idref" href="#sorted"><span class="id" title="definition">sorted</span></a> := (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Sorting.Sorted.html#StronglySorted"><span class="id" title="inductive">StronglySorted</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#list.sorting.f"><span class="id" title="variable">f</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Fact</span> <a id="sorted_append" class="idref" href="#sorted_append"><span class="id" title="lemma">sorted_append</span></a> <a id="pre:255" class="idref" href="#pre:255"><span class="id" title="binder">pre</span></a> <a id="post:256" class="idref" href="#post:256"><span class="id" title="binder">post</span></a> <a id="p:257" class="idref" href="#p:257"><span class="id" title="binder">p</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#sorted"><span class="id" title="definition">sorted</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#pre:255"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#sorted"><span class="id" title="definition">sorted</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#post:256"><span class="id" title="variable">post</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:258" class="idref" href="#x:258"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:258"><span class="id" title="variable">x</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#pre:255"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#list.sorting.f"><span class="id" title="variable">f</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:258"><span class="id" title="variable">x</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#p:257"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">))</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:259" class="idref" href="#x:259"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:259"><span class="id" title="variable">x</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#post:256"><span class="id" title="variable">post</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#list.sorting.f"><span class="id" title="variable">f</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#p:257"><span class="id" title="variable">p</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:259"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">))</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#sorted"><span class="id" title="definition">sorted</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#pre:255"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#p:257"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#post:256"><span class="id" title="variable">post</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Spre</span> <span class="id" title="var">Spost</span> <span class="id" title="var">ppre</span> <span class="id" title="var">ppost</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">pre</span> =&gt; /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Sorting.Sorted.html#SSorted_cons"><span class="id" title="constructor">SSorted_cons</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">List.Forall_forall</span></a> =&gt; // ; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Sorting.Sorted.html#SSorted_cons"><span class="id" title="constructor">SSorted_cons</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">List.Forall_forall</span></a> =&gt; // ; [| <span class="id" title="tactic">clear</span> <span class="id" title="var">IHpre</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHpre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Sorting.Sorted.html#StronglySorted_inv"><span class="id" title="lemma">StronglySorted_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Spre</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">Spre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">ppre</span>. <span class="id" title="var">set_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">xppp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#in_app_or"><span class="id" title="lemma">in_app_or</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">xppp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">x_pre</span> | <span class="id" title="var">x_post</span>] ; <span class="id" title="tactic">clear</span> <span class="id" title="var">xppp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Sorting.Sorted.html#StronglySorted_inv"><span class="id" title="lemma">StronglySorted_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Spre</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Spre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">List.Forall_forall</span></a> <span class="id" title="var">_</span> <span class="id" title="var">pre</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#in_inv"><span class="id" title="lemma">in_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x_post</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x_post</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">ppre</span>, <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#in_eq"><span class="id" title="lemma">in_eq</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> <span class="id" title="var">ppre</span> <span class="id" title="keyword">with</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HTO</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#TotalOrder"><span class="id" title="class">TotalOrder</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#list.sorting.f"><span class="id" title="variable">f</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">HTO</span>) <span class="id" title="keyword">as</span> [[[? <span class="id" title="var">Htr</span>] ?] ? ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Classes.RelationClasses.html#Transitive"><span class="id" title="class">Transitive</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*  <span class="id" title="tactic">eapply</span> <span class="id" title="var">ppre</span>, <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#in_eq"><span class="id" title="lemma">in_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">eapply</span> <span class="id" title="var">ppost</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#list.sorting"><span class="id" title="section">sorting</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#list"><span class="id" title="section">list</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="program" class="idref" href="#program"><span class="id" title="section">program</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="tachisGS0:261" class="idref" href="#tachisGS0:261"><span class="id" title="binder">!</span></a><a id="tachisGS0:261" class="idref" href="#tachisGS0:261"><span class="id" title="binder">tachisGS</span></a> <a id="c9a0948a92a9e84510dbb11a94ab3120" class="idref" href="#c9a0948a92a9e84510dbb11a94ab3120"><span class="id" title="binder"><span id="tachisGS0:261" class="id">Σ</span></span></a> <a id="tachisGS0:261" class="idref" href="#tachisGS0:261"><span class="id" title="binder">CostTick</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `[<a id="Inject0:263" class="idref" href="#Inject0:263"><span class="id" title="binder">!</span></a><a id="Inject0:263" class="idref" href="#Inject0:263"><span class="id" title="binder">Inject</span></a> <a id="A:262" class="idref" href="#A:262"><span class="id" title="binder"><span id="Inject0:263" class="id">A</span></span></a> <a id="Inject0:263" class="idref" href="#Inject0:263"><span class="id" title="binder">val</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:264" class="idref" href="#H:264"><span class="id" title="binder">Inhabited</span></a> <a id="H:264" class="idref" href="#H:264"><span class="id" title="binder">A</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="f:265" class="idref" href="#f:265"><span class="id" title="binder">f</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#program.A"><span class="id" title="variable">A</span></a>) `{<a id="H0:268" class="idref" href="#H0:268"><span class="id" title="binder">∀</span></a> <a id="x:266" class="idref" href="#x:266"><span class="id" title="binder"><span id="H0:268" class="id">x</span></span></a> <a id="y:267" class="idref" href="#y:267"><span class="id" title="binder"><span id="H0:268" class="id">y</span></span></a><a id="H0:268" class="idref" href="#H0:268"><span class="id" title="binder">,</span></a> <a id="H0:268" class="idref" href="#H0:268"><span class="id" title="binder">Decision</span></a> <a id="H0:268" class="idref" href="#H0:268"><span class="id" title="binder">(</span></a><a id="H0:268" class="idref" href="#H0:268"><span class="id" title="binder">f</span></a> <a id="H0:268" class="idref" href="#H0:268"><span class="id" title="binder">x</span></a> <a id="H0:268" class="idref" href="#H0:268"><span class="id" title="binder">y</span></a><a id="H0:268" class="idref" href="#H0:268"><span class="id" title="binder">)</span></a>} `{<a id="TotalOrder0:269" class="idref" href="#TotalOrder0:269"><span class="id" title="binder">!</span></a><a id="TotalOrder0:269" class="idref" href="#TotalOrder0:269"><span class="id" title="binder">TotalOrder</span></a> <a id="TotalOrder0:269" class="idref" href="#TotalOrder0:269"><span class="id" title="binder">f</span></a>}.<br/>

<br/>
</div>

<div class="doc">
Verifing the number of comparisons done by quicksort 
</div>
<div class="code">
&nbsp;&nbsp;<span class="comment">(*&nbsp;Proofs&nbsp;augmented&nbsp;from&nbsp;examples/quicksort.v&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="qs_time_bound" class="idref" href="#qs_time_bound"><span class="id" title="lemma">qs_time_bound</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="xs:270" class="idref" href="#xs:270"><span class="id" title="binder">xs</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#program.A"><span class="id" title="variable">A</span></a>) (<a id="l:271" class="idref" href="#l:271"><span class="id" title="binder">l</span></a> : <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="cmp:272" class="idref" href="#cmp:272"><span class="id" title="binder">cmp</span></a> : <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) (<a id="k:273" class="idref" href="#k:273"><span class="id" title="binder">k</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R"><span class="id" title="axiom">R</span></a>) (<a id="Hcmp_nonneg:274" class="idref" href="#Hcmp_nonneg:274"><span class="id" title="binder">Hcmp_nonneg</span></a> : (0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#k:273"><span class="id" title="variable">k</span></a>)%<span class="id" title="var">R</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">{{{</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> (2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#k:273"><span class="id" title="variable">k</span></a>) 0 (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#xs:270"><span class="id" title="variable">xs</span></a>)<a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#xs:270"><span class="id" title="variable">xs</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:271"><span class="id" title="variable">l</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup"><span class="id" title="inductive">List.NoDup</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#xs:270"><span class="id" title="variable">xs</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">∀</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">(</span></a><a id="x:275" class="idref" href="#x:275"><span class="id" title="binder">x</span></a> <a id="y:276" class="idref" href="#y:276"><span class="id" title="binder">y</span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#program.A"><span class="id" title="variable">A</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">),</span></a> <a class="idref" href="tachis.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">{{{</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#k:273"><span class="id" title="variable">k</span></a> <a class="idref" href="tachis.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">}}}</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#cmp:272"><span class="id" title="variable">cmp</span></a> (<a class="idref" href="tachis.common.inject.html#inject"><span class="id" title="method">inject</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:275"><span class="id" title="variable">x</span></a>) (<a class="idref" href="tachis.common.inject.html#inject"><span class="id" title="method">inject</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#y:276"><span class="id" title="variable">y</span></a>)  <a class="idref" href="tachis.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">{{{</span></a> <a id="w:277" class="idref" href="#w:277"><span class="id" title="binder">w</span></a><a class="idref" href="tachis.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#w:277"><span class="id" title="variable">w</span></a><a class="idref" href="tachis.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#w:277"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.common.inject.html#inject"><span class="id" title="method">inject</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#program.f"><span class="id" title="variable">f</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:275"><span class="id" title="variable">x</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#y:276"><span class="id" title="variable">y</span></a>))<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a>  <a class="idref" href="tachis.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">}}}</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">)</span></a> <a class="idref" href="tachis.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#qs"><span class="id" title="definition">qs</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#cmp:272"><span class="id" title="variable">cmp</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:271"><span class="id" title="variable">l</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">{{{</span></a> <a id="v:278" class="idref" href="#v:278"><span class="id" title="binder">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#v:278"><span class="id" title="variable">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="xs':279" class="idref" href="#xs':279"><span class="id" title="binder">xs'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#xs':279"><span class="id" title="variable">xs'</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#v:278"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#xs':279"><span class="id" title="variable">xs'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">≡ₚ</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#xs:270"><span class="id" title="variable">xs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#sorted"><span class="id" title="definition">sorted</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#program.f"><span class="id" title="variable">f</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#xs':279"><span class="id" title="variable">xs'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="tachis.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#qs"><span class="id" title="definition">qs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">xs</span> <span class="id" title="var">l</span> <span class="id" title="var">cmp</span> <span class="id" title="var">k</span> <span class="id" title="var">Hcmp_nonneg</span> <span class="id" title="var">Φ</span>) "HA1 hφ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="var">wp_pure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iLöb</span> <span class="id" title="keyword">as</span> "Hqs" <span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> <span class="id" title="var">l</span> <span class="id" title="var">Φ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "HA1" <span class="id" title="keyword">as</span> "(H⧖ &amp; %hl &amp; %hnd &amp; #Hcmp_spec)".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_bind</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#list_length"><span class="id" title="definition">list_length</span></a> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#wp_list_length"><span class="id" title="lemma">wp_list_length</span></a>; [<span class="id" title="tactic">eauto</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">n</span>) "-&gt;".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Base&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">wp_pures</span>; <span class="id" title="var">iModIntro</span>. <span class="id" title="var">iApply</span> "hφ". <span class="id" title="tactic">destruct</span> <span class="id" title="var">xs</span>; [ |<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Pick&nbsp;a&nbsp;pivot&nbsp;index&nbsp;at&nbsp;random,&nbsp;using&nbsp;advanced&nbsp;composition&nbsp;on&nbsp;the&nbsp;(2&nbsp;*&nbsp;...)&nbsp;term*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort_unfold"><span class="id" title="lemma">tc_quicksort_unfold</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#tc_pivot_lin"><span class="id" title="definition">tc_pivot_lin</span></a> (2<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a><span class="id" title="var">k</span>) 0 (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">xs</span>)<a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">(</span></a>2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> 0 (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="n0:280" class="idref" href="#n0:280"><span class="id" title="binder"><span id="n0:281" class="id">n0</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> (2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <span class="id" title="var">k</span>) 0 <a class="idref" href="tachis.tachis.examples.quicksort.html#n0:280"><span class="id" title="variable">n0</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a> 0 (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">xs</span>))) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">xs</span><a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> "[H⧖]" <span class="id" title="keyword">as</span> "[H⧖lin H⧖Amp]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">xs</span> <span class="id" title="keyword">as</span> [|? ?]; <span class="id" title="tactic">first</span> (<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="tachis.tachis.expected_time_credits.html#etc_split"><span class="id" title="lemma">etc_split</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_pivot_lin_nonneg"><span class="id" title="definition">tc_pivot_lin_nonneg</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coquelicot.saclay.inria.fr/html//Coquelicot.Rcomplements.html#Rdiv_le_0_compat"><span class="id" title="lemma">Rcomplements.Rdiv_le_0_compat</span></a>; <span class="id" title="var">last</span> (<span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#INR_0"><span class="id" title="lemma">INR_0</span></a>; <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#lt_INR"><span class="id" title="lemma">lt_INR</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_le_pos"><span class="id" title="lemma">Rmult_le_pos</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">xs</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">W</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">HeqW</span> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">W</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">W'</span> <span class="id" title="var">IHW</span>]; [<span class="id" title="tactic">simpl</span>; <span class="id" title="var">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq_S"><span class="id" title="lemma">seq_S</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_app"><span class="id" title="definition">foldr_app</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_comm_acc"><span class="id" title="lemma">foldr_comm_acc</span></a>; <span class="id" title="var">last</span> (<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lra</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_le_le_0_compat"><span class="id" title="lemma">Rplus_le_le_0_compat</span></a>; [<span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort_nonneg"><span class="id" title="lemma">tc_quicksort_nonneg</span></a>|]; <span class="id" title="tactic">try</span> <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.ert_rules.html#wp_couple_rand_adv_comp'"><span class="id" title="lemma">wp_couple_rand_adv_comp'</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#tc_distr"><span class="id" title="definition">tc_distr</span></a> <span class="id" title="var">_</span> <span class="id" title="var">xs</span> (2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <span class="id" title="var">k</span>) 0%<span class="id" title="var">R</span>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_distr_nonneg"><span class="id" title="lemma">tc_distr_nonneg</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lra</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /= <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_distr_equiv"><span class="id" title="lemma">tc_distr_equiv</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lra</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rplus_0_l"><span class="id" title="lemma">Rplus_0_l</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#index_space_unfold"><span class="id" title="lemma">index_space_unfold</span></a>. <span class="id" title="var">done</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">ip</span>) "H⧖"...<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;pop&nbsp;the&nbsp;pivot&nbsp;from&nbsp;xs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#wp_remove_nth_unsafe"><span class="id" title="lemma">wp_remove_nth_unsafe</span></a> <span class="id" title="var">_</span> <span class="id" title="var">xs</span> <span class="id" title="var">l</span> <span class="id" title="var">ip</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#Nat.lt_le_trans"><span class="id" title="lemma">Nat.lt_le_trans</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat_lt"><span class="id" title="lemma">fin_to_nat_lt</span></a> <span class="id" title="var">ip</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">simpl</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">xs</span> =&gt; /=; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">lia</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">v</span>) "[%xp [%ap [%xsL [%xsR (%Hxs &amp; %Hip &amp; -&gt; &amp; %Hap )]]]]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> (2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <span class="id" title="var">k</span>) 0 (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank"><span class="id" title="definition">index_to_rank</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#program.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">xs</span> <span class="id" title="var">ip</span>)<a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort"><span class="id" title="definition">tc_quicksort</span></a> (2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <span class="id" title="var">k</span>) 0 (<a class="idref" href="tachis.tachis.examples.quicksort.html#reverse_order"><span class="id" title="definition">reverse_order</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">xs</span>)) (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank"><span class="id" title="definition">index_to_rank</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#program.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">xs</span> <span class="id" title="var">ip</span>))<a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> "[H⧖]" <span class="id" title="keyword">as</span> "[H⧖L H⧖R]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iApply</span> <a class="idref" href="tachis.tachis.expected_time_credits.html#etc_split"><span class="id" title="lemma">etc_split</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort_nonneg"><span class="id" title="lemma">tc_quicksort_nonneg</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#tc_quicksort_nonneg"><span class="id" title="lemma">tc_quicksort_nonneg</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#tc_distr"><span class="id" title="definition">tc_distr</span></a> /<a class="idref" href="tachis.tachis.examples.quicksort.html#tc_distr_def"><span class="id" title="definition">tc_distr_def</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">xs</span>; <span class="id" title="tactic">first</span> (<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">(</span></a><span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">xs</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a><a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">(</span></a><span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">xs</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a><a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">I</span> <span class="id" title="keyword">with</span> "[H⧖lin]" <span class="id" title="keyword">as</span> "[H⧖Filt1 H⧖Filt2]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#tc_pivot_lin"><span class="id" title="definition">tc_pivot_lin</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="tachis.tachis.expected_time_credits.html#etc_split"><span class="id" title="lemma">etc_split</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_le_pos"><span class="id" title="lemma">Rmult_le_pos</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lra</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#pos_INR"><span class="id" title="lemma">pos_INR</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_le_pos"><span class="id" title="lemma">Rmult_le_pos</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lra</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#pos_INR"><span class="id" title="lemma">pos_INR</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iApply</span> <a class="idref" href="tachis.tachis.expected_time_credits.html#etc_irrel"><span class="id" title="lemma">etc_irrel</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_0_r"><span class="id" title="lemma">Rplus_0_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">((</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#wp_list_filter"><span class="id" title="lemma">wp_list_filter</span></a> (<span class="id" title="var">xsL</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">xsR</span>) (<span class="id" title="keyword">fun</span> <a id="x:282" class="idref" href="#x:282"><span class="id" title="binder"><span id="x:283" class="id">x</span></span></a> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#program.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">xp</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:282"><span class="id" title="variable">x</span></a>)) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">k</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[H⧖Filt1]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iSplitR</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> (<span class="id" title="var">x</span> ψ) "!&gt; H⧖ Hψ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hcmp_spec" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "H⧖"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iSplitR</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.expected_time_credits.html#etc_weaken"><span class="id" title="lemma">etc_weaken</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_le_pos"><span class="id" title="lemma">Rmult_le_pos</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lra</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#pos_INR"><span class="id" title="lemma">pos_INR</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_le_compat_l"><span class="id" title="lemma">Rmult_le_compat_l</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hxs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#le_INR"><span class="id" title="lemma">le_INR</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">rv</span>) "%Hrv".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">((</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#wp_list_filter"><span class="id" title="lemma">wp_list_filter</span></a> (<span class="id" title="var">xsL</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">xsR</span>) (<span class="id" title="keyword">fun</span> <a id="x:284" class="idref" href="#x:284"><span class="id" title="binder"><span id="x:285" class="id">x</span></span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#program.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">xp</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:284"><span class="id" title="variable">x</span></a>)) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">k</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[H⧖Filt2]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iSplitR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> (<span class="id" title="var">x</span> ψ) "!&gt; H⧖ Hψ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="var">wp_pure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hcmp_spec" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "H⧖"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "-&gt;".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>; <span class="id" title="var">iApply</span> "Hψ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iSplitR</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.expected_time_credits.html#etc_weaken"><span class="id" title="lemma">etc_weaken</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_le_pos"><span class="id" title="lemma">Rmult_le_pos</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lra</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#pos_INR"><span class="id" title="lemma">pos_INR</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_le_compat_l"><span class="id" title="lemma">Rmult_le_compat_l</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hxs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#le_INR"><span class="id" title="lemma">le_INR</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">lv</span>) "%Hlv".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 9 <span class="id" title="var">wp_pure</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"Hqs" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">List.filter</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">xsL</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">xsR</span>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="var">rv</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "[H⧖R]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iClear</span> "Hqs".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span>; [|<span class="id" title="var">iSplit</span>; [|<span class="id" title="var">iSplit</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4: { <span class="id" title="var">iApply</span> "Hcmp_spec". }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3: { <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup_filter"><span class="id" title="lemma">List.NoDup_filter</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup_remove_1"><span class="id" title="lemma">NoDup_remove_1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hxs</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: { <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hrv</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="tachis.tachis.expected_time_credits.html#etc_irrel"><span class="id" title="lemma">etc_irrel</span></a>; [|<span class="id" title="var">iFrame</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#reverse_order"><span class="id" title="definition">reverse_order</span></a> /<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq_length"><span class="id" title="lemma">seq_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank"><span class="id" title="definition">index_to_rank</span></a> /<a class="idref" href="tachis.tachis.examples.quicksort.html#rank"><span class="id" title="definition">rank</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {14}<span class="id" title="var">Hxs</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add_sub_eq_l"><span class="id" title="lemma">Nat.add_sub_eq_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> (@<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">List.filter</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#program.A"><span class="id" title="variable">A</span></a> (<span class="id" title="keyword">fun</span> <a id="y:286" class="idref" href="#y:286"><span class="id" title="binder"><span id="y:288" class="id">y</span></span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#program.A"><span class="id" title="variable">A</span></a> =&gt; @<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#strict"><span class="id" title="definition">strict</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#program.f"><span class="id" title="variable">f</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#y:286"><span class="id" title="variable">y</span></a> <span class="id" title="var">_</span>) <span class="id" title="var">_</span>) <span class="id" title="var">_</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">List.filter</span></a> (<a class="idref" href="tachis.prob.distribution.html#53797020b35359960f059fea5400d198"><span class="id" title="notation">∽</span></a> <a class="idref" href="tachis.prob.distribution.html#53797020b35359960f059fea5400d198"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="x:287" class="idref" href="#x:287"><span class="id" title="binder"><span id="x:289" class="id">x</span></span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#program.A"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#program.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">xp</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:287"><span class="id" title="variable">x</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">)</span></a><a class="idref" href="tachis.prob.distribution.html#53797020b35359960f059fea5400d198"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">P</span> (<span class="id" title="var">xsL</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">xsR</span>))); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter_app"><span class="id" title="lemma">List.filter_app</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span>(@<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_false_2"><span class="id" title="lemma">bool_decide_eq_false_2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (@<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#lookup_total"><span class="id" title="definition">lookup_total</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">xp</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">rewrite</span> {2}<span class="id" title="var">Hxs</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#list_lookup_total_middle"><span class="id" title="lemma">list_lookup_total_middle</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hcont</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_ne"><span class="id" title="lemma">strict_ne</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcont</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Htotal</span>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#TotalOrder"><span class="id" title="class">TotalOrder</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#program.f"><span class="id" title="variable">f</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htotal</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">Hrefl</span> <span class="id" title="var">Htrans</span>] <span class="id" title="var">Hanti</span>] <span class="id" title="var">Htrich</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter_ext_in"><span class="id" title="lemma">filter_ext_in</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_not"><span class="id" title="lemma">bool_decide_not</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_ext"><span class="id" title="lemma">bool_decide_ext</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {2}<span class="id" title="var">Hxs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#list_lookup_total_middle"><span class="id" title="lemma">list_lookup_total_middle</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_spec_alt"><span class="id" title="lemma">strict_spec_alt</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">xp</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hxs</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup_remove_2"><span class="id" title="lemma">NoDup_remove_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#in_or_app"><span class="id" title="lemma">in_or_app</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Htrich</span> <span class="id" title="var">a</span> <span class="id" title="var">xp</span>) <span class="id" title="keyword">as</span> [? | [? | ?]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_include"><span class="id" title="lemma">strict_include</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">exfalso</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hf</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_include"><span class="id" title="lemma">strict_include</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [ ? <span class="id" title="var">Hk</span> ] ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hk</span>, <span class="id" title="var">Hanti</span>; <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter_ext_in"><span class="id" title="lemma">filter_ext_in</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_not"><span class="id" title="lemma">bool_decide_not</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_ext"><span class="id" title="lemma">bool_decide_ext</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {2}<span class="id" title="var">Hxs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#list_lookup_total_middle"><span class="id" title="lemma">list_lookup_total_middle</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_spec_alt"><span class="id" title="lemma">strict_spec_alt</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hk</span> : <span class="id" title="var">xp</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hxs</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup_remove_2"><span class="id" title="lemma">NoDup_remove_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#in_or_app"><span class="id" title="lemma">in_or_app</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Htrich</span> <span class="id" title="var">a</span> <span class="id" title="var">xp</span>) <span class="id" title="keyword">as</span> [? | [? | ?] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_include"><span class="id" title="lemma">strict_include</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">exfalso</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hf</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_include"><span class="id" title="lemma">strict_include</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [ ? ? ] ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hk</span>, <span class="id" title="var">Hanti</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter_length"><span class="id" title="lemma">List.filter_length</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="x:290" class="idref" href="#x:290"><span class="id" title="binder"><span id="x:291" class="id"><span id="x:292" class="id">x</span></span></span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#program.A"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#program.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">xp</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:290"><span class="id" title="variable">x</span></a>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hxs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">lR</span>) "(% &amp; % &amp; %Hp1 &amp; %)".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"Hqs" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">List.filter</span></a> (<span class="id" title="keyword">fun</span> <a id="x:293" class="idref" href="#x:293"><span class="id" title="binder"><span id="x:294" class="id">x</span></span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#program.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">xp</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:293"><span class="id" title="variable">x</span></a>))) (<span class="id" title="var">xsL</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">xsR</span>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="var">lv</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "[H⧖L]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iClear</span> "Hqs".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span>; [|<span class="id" title="var">iSplit</span>; [|<span class="id" title="var">iSplit</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4: { <span class="id" title="var">iApply</span> "Hcmp_spec". }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3: { <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup_filter"><span class="id" title="lemma">List.NoDup_filter</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup_remove_1"><span class="id" title="lemma">NoDup_remove_1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hxs</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: { <span class="id" title="var">iPureIntro</span>. <span class="id" title="var">done</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iApply</span> <a class="idref" href="tachis.tachis.expected_time_credits.html#etc_irrel"><span class="id" title="lemma">etc_irrel</span></a>; [|<span class="id" title="var">iFrame</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank"><span class="id" title="definition">index_to_rank</span></a> /<a class="idref" href="tachis.tachis.examples.quicksort.html#rank"><span class="id" title="definition">rank</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {13}<span class="id" title="var">Hxs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter_app"><span class="id" title="lemma">List.filter_app</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span>(@<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_false_2"><span class="id" title="lemma">bool_decide_eq_false_2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (@<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#lookup_total"><span class="id" title="definition">lookup_total</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">xp</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">rewrite</span> {2}<span class="id" title="var">Hxs</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#list_lookup_total_middle"><span class="id" title="lemma">list_lookup_total_middle</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hcont</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_ne"><span class="id" title="lemma">strict_ne</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcont</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Htotal</span>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#TotalOrder"><span class="id" title="class">TotalOrder</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#program.f"><span class="id" title="variable">f</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htotal</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">Hrefl</span> <span class="id" title="var">Htrans</span>] <span class="id" title="var">Hanti</span>] <span class="id" title="var">Htrich</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter_ext_in"><span class="id" title="lemma">filter_ext_in</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_not"><span class="id" title="lemma">bool_decide_not</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_ext"><span class="id" title="lemma">bool_decide_ext</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {2}<span class="id" title="var">Hxs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#list_lookup_total_middle"><span class="id" title="lemma">list_lookup_total_middle</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_spec_alt"><span class="id" title="lemma">strict_spec_alt</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hk</span> : <span class="id" title="var">xp</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hxs</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup_remove_2"><span class="id" title="lemma">NoDup_remove_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#in_or_app"><span class="id" title="lemma">in_or_app</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> [ ? <span class="id" title="var">Hf</span> ] ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hf</span>, <span class="id" title="var">Hanti</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Htrich</span> <span class="id" title="var">a</span> <span class="id" title="var">xp</span>) <span class="id" title="keyword">as</span> [? | [? | ?] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_include"><span class="id" title="lemma">strict_include</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_include"><span class="id" title="lemma">strict_include</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter_ext_in"><span class="id" title="lemma">filter_ext_in</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_not"><span class="id" title="lemma">bool_decide_not</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_ext"><span class="id" title="lemma">bool_decide_ext</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {2}<span class="id" title="var">Hxs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#list_lookup_total_middle"><span class="id" title="lemma">list_lookup_total_middle</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_spec_alt"><span class="id" title="lemma">strict_spec_alt</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hk</span> : <span class="id" title="var">xp</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hxs</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup_remove_2"><span class="id" title="lemma">NoDup_remove_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#in_or_app"><span class="id" title="lemma">in_or_app</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> [ ? ? ] ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hk</span>, <span class="id" title="var">Hanti</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Htrich</span> <span class="id" title="var">a</span> <span class="id" title="var">xp</span>) <span class="id" title="keyword">as</span> [? | [? | ?] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_include"><span class="id" title="lemma">strict_include</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hf</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_include"><span class="id" title="lemma">strict_include</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">lL</span>) "(% &amp; % &amp; %Hp2 &amp; %)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iClear</span> "Hqs".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#wp_list_cons"><span class="id" title="lemma">wp_list_cons</span></a> =&gt; //; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">p_xs_gt_s</span> <span class="id" title="var">h_p_xs_gt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#wp_list_append"><span class="id" title="lemma">wp_list_append</span></a> =&gt; //. <span class="id" title="var">iIntros</span> "!&gt;" (<span class="id" title="var">xs_le_p_gt_s</span> <span class="id" title="var">L</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "hφ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Sorting.Permutation.html#Permutation_app_comm"><span class="id" title="lemma">Permutation_app_comm</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Sorting.Permutation.html#Permutation_app_comm"><span class="id" title="lemma">Permutation_app_comm</span></a> <span class="id" title="var">xsL</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hp1</span> <span class="id" title="var">Hp2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Sorting.Permutation.html#Permutation_app_comm"><span class="id" title="lemma">Permutation_app_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">xsL</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">xsR</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">LL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">LL</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">L0</span> <span class="id" title="var">LL'</span> <span class="id" title="var">IH</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#program.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">xp</span> <span class="id" title="var">L0</span>)); <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">IH</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Sorting.Permutation.html#Permutation_app_comm"><span class="id" title="lemma">Permutation_app_comm</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Sorting.Permutation.html#Permutation_app_comm"><span class="id" title="lemma">Permutation_app_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#sorted_append"><span class="id" title="lemma">sorted_append</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> ? <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hp2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter_In"><span class="id" title="lemma">filter_In</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [? <span class="id" title="var">Hdec</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Bool.Bool.html#negb_true_iff"><span class="id" title="lemma">negb_true_iff</span></a>, <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_false_1"><span class="id" title="lemma">bool_decide_eq_false_1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HT</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#Total"><span class="id" title="class">Total</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#program.f"><span class="id" title="variable">f</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#trichotomy_total"><span class="id" title="instance">trichotomy_total</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">HT</span> <span class="id" title="var">x</span> <span class="id" title="var">xp</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hdec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> ? <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hp1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter_In"><span class="id" title="lemma">filter_In</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [? <span class="id" title="var">Hdec</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_true_1"><span class="id" title="lemma">bool_decide_eq_true_1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#program"><span class="id" title="section">program</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="qs_ent" class="idref" href="#qs_ent"><span class="id" title="section">qs_ent</span></a>.<br/>
</div>

<div class="doc">
Defines the recurrence relation for Quicksort entropy 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;tc_quicksort(len)&nbsp;=&nbsp;(1/len)&nbsp;+&nbsp;2&nbsp;*&nbsp;sum(i=0&nbsp;to&nbsp;len-1)(tc_quicksort&nbsp;i)&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="ec_quicksort" class="idref" href="#ec_quicksort"><span class="id" title="definition">ec_quicksort</span></a>  (<a id="len:295" class="idref" href="#len:295"><span class="id" title="binder">len</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R"><span class="id" title="axiom">R</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (@<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Wf.html#Fix"><span class="id" title="definition">Fix</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Program.Wf.html#measure_wf"><span class="id" title="lemma">Wf.measure_wf</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.Wf_nat.html#lt_wf"><span class="id" title="lemma">lt_wf</span></a> (<span class="id" title="keyword">fun</span> <a id="x:296" class="idref" href="#x:296"><span class="id" title="binder"><span id="x:301" class="id">x</span></span></a> =&gt; <a class="idref" href="tachis.tachis.examples.quicksort.html#x:296"><span class="id" title="variable">x</span></a>)) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R"><span class="id" title="axiom">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="len:297" class="idref" href="#len:297"><span class="id" title="binder"><span id="len:302" class="id">len</span></span></a> <a id="qf_rec:298" class="idref" href="#qf_rec:298"><span class="id" title="binder"><span id="qf_rec:303" class="id">qf_rec</span></span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#len:297"><span class="id" title="variable">len</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0%<span class="id" title="var">nat</span>   =&gt; 0%<span class="id" title="var">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) =&gt; (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rpower.html#Rlog"><span class="id" title="definition">Rlog</span></a> 2 <a class="idref" href="tachis.tachis.examples.quicksort.html#len:297"><span class="id" title="variable">len</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> 0%<span class="id" title="var">R</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="n:300" class="idref" href="#n:300"><span class="id" title="binder"><span id="n:305" class="id">n</span></span></a> =&gt; (<a class="idref" href="tachis.tachis.examples.quicksort.html#qf_rec:298"><span class="id" title="variable">qf_rec</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat"><span class="id" title="definition">fin_to_nat</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:300"><span class="id" title="variable">n</span></a>) <span class="id" title="var">_</span>)) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#fin_enum"><span class="id" title="definition">fin_enum</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#len:297"><span class="id" title="variable">len</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#len:297"><span class="id" title="variable">len</span></a> )%<span class="id" title="var">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <span class="id" title="var">len</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Program.Wf.html#MR"><span class="id" title="definition">Wf.MR</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat_lt"><span class="id" title="lemma">fin_to_nat_lt</span></a>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ec_quicksort_aux" class="idref" href="#ec_quicksort_aux"><span class="id" title="lemma">ec_quicksort_aux</span></a> <a id="len:306" class="idref" href="#len:306"><span class="id" title="binder">len</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort"><span class="id" title="definition">ec_quicksort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#len:306"><span class="id" title="variable">len</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#len:306"><span class="id" title="variable">len</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0%<span class="id" title="var">nat</span>   =&gt; 0%<span class="id" title="var">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">_</span>) =&gt; (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rpower.html#Rlog"><span class="id" title="definition">Rlog</span></a> 2 <a class="idref" href="tachis.tachis.examples.quicksort.html#len:306"><span class="id" title="variable">len</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> 0%<span class="id" title="var">R</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="n:308" class="idref" href="#n:308"><span class="id" title="binder">n</span></a> =&gt; <a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort"><span class="id" title="definition">ec_quicksort</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat"><span class="id" title="definition">fin_to_nat</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:308"><span class="id" title="variable">n</span></a>)) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#fin_enum"><span class="id" title="definition">fin_enum</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#len:306"><span class="id" title="variable">len</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#len:306"><span class="id" title="variable">len</span></a>)%<span class="id" title="var">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort"><span class="id" title="definition">ec_quicksort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#easy_fix_eq"><span class="id" title="lemma">easy_fix_eq</span></a>. <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ec_quicksort_unfold" class="idref" href="#ec_quicksort_unfold"><span class="id" title="lemma">ec_quicksort_unfold</span></a> <a id="len:309" class="idref" href="#len:309"><span class="id" title="binder">len</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort"><span class="id" title="definition">ec_quicksort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#len:309"><span class="id" title="variable">len</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#len:309"><span class="id" title="variable">len</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0%<span class="id" title="var">nat</span>   =&gt; 0%<span class="id" title="var">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">_</span>) =&gt; (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rpower.html#Rlog"><span class="id" title="definition">Rlog</span></a> 2 <a class="idref" href="tachis.tachis.examples.quicksort.html#len:309"><span class="id" title="variable">len</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> 0%<span class="id" title="var">R</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="n:311" class="idref" href="#n:311"><span class="id" title="binder">n</span></a> =&gt; <a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort"><span class="id" title="definition">ec_quicksort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:311"><span class="id" title="variable">n</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a> 0%<span class="id" title="var">nat</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#len:309"><span class="id" title="variable">len</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#len:309"><span class="id" title="variable">len</span></a>)%<span class="id" title="var">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort_aux"><span class="id" title="lemma">ec_quicksort_aux</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">len</span>; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">len</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">N</span>; <span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">N</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">N'</span> <span class="id" title="var">IH</span>]; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#fin_enum"><span class="id" title="definition">fin_enum</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq_S"><span class="id" title="lemma">seq_S</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_snoc"><span class="id" title="lemma">foldr_snoc</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#fin_enum_snoc_rec"><span class="id" title="lemma">fin_enum_snoc_rec</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_snoc"><span class="id" title="lemma">foldr_snoc</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_comm_acc"><span class="id" title="lemma">foldr_comm_acc</span></a>; <span class="id" title="var">last</span> (<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lra</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_comm_acc"><span class="id" title="lemma">foldr_comm_acc</span></a>; <span class="id" title="var">last</span> (<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lra</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat_to_fin"><span class="id" title="lemma">fin_to_nat_to_fin</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map_map"><span class="id" title="lemma">map_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality"><span class="id" title="lemma">functional_extensionality</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="tachis.tachis.examples.quicksort.html#fin_inj_incr_to_nat"><span class="id" title="lemma">fin_inj_incr_to_nat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Transparent</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#fin_enum"><span class="id" title="definition">fin_enum</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort"><span class="id" title="definition">ec_quicksort</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ec_quicksort_0" class="idref" href="#ec_quicksort_0"><span class="id" title="lemma">ec_quicksort_0</span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort"><span class="id" title="definition">ec_quicksort</span></a> 0%<span class="id" title="var">nat</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0%<span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort_unfold"><span class="id" title="lemma">ec_quicksort_unfold</span></a>. <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ec_quicksort_S" class="idref" href="#ec_quicksort_S"><span class="id" title="lemma">ec_quicksort_S</span></a> <a id="n:312" class="idref" href="#n:312"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:312"><span class="id" title="variable">n</span></a>)%<span class="id" title="var">nat</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort"><span class="id" title="definition">ec_quicksort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:312"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rpower.html#Rlog"><span class="id" title="definition">Rlog</span></a> 2 <a class="idref" href="tachis.tachis.examples.quicksort.html#n:312"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> 0 <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="i:313" class="idref" href="#i:313"><span class="id" title="binder">i</span></a> =&gt; ((<a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort"><span class="id" title="definition">ec_quicksort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:313"><span class="id" title="variable">i</span></a>))%<span class="id" title="var">NNR</span>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a> 0%<span class="id" title="var">nat</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:312"><span class="id" title="variable">n</span></a>)%<span class="id" title="var">NNR</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#n:312"><span class="id" title="variable">n</span></a>)%<span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort_unfold"><span class="id" title="lemma">ec_quicksort_unfold</span></a>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; [<span class="id" title="var">lia</span>|]. <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ec_quicksort_nonneg" class="idref" href="#ec_quicksort_nonneg"><span class="id" title="lemma">ec_quicksort_nonneg</span></a> <a id="n:314" class="idref" href="#n:314"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort"><span class="id" title="definition">ec_quicksort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:314"><span class="id" title="variable">n</span></a>)%<span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">n'</span> <span class="id" title="var">IH</span> ] <span class="id" title="keyword">using</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Wf.html#well_founded_induction"><span class="id" title="lemma">well_founded_induction</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.Wf_nat.html#lt_wf"><span class="id" title="lemma">lt_wf</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort_unfold"><span class="id" title="lemma">ec_quicksort_unfold</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n'</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">n'</span>]; [<span class="id" title="var">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_le_le_0_compat"><span class="id" title="lemma">Rplus_le_le_0_compat</span></a>; [ <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#Rlog_pos"><span class="id" title="lemma">Rlog_pos</span></a>; <span class="id" title="var">lra</span> | ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_le_pos"><span class="id" title="lemma">Rmult_le_pos</span></a>; [| <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rlt_le"><span class="id" title="lemma">Rlt_le</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rinv_0_lt_compat"><span class="id" title="lemma">Rinv_0_lt_compat</span></a>, <a class="idref" href="tachis.prelude.Reals_ext.html#pos_INR_S"><span class="id" title="lemma">pos_INR_S</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_le_pos"><span class="id" title="lemma">Rmult_le_pos</span></a>; [<span class="id" title="var">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n'</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">n''</span> <span class="id" title="var">IH'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /= <a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort_0"><span class="id" title="lemma">ec_quicksort_0</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_0_r"><span class="id" title="lemma">Rplus_0_r</span></a>. <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq_S"><span class="id" title="lemma">seq_S</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_snoc"><span class="id" title="lemma">foldr_snoc</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_comm_acc"><span class="id" title="lemma">foldr_comm_acc</span></a>; <span class="id" title="var">last</span> (<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lra</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_le_le_0_compat"><span class="id" title="lemma">Rplus_le_le_0_compat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">IH'</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Transparent</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_ent"><span class="id" title="section">qs_ent</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="ent_list" class="idref" href="#ent_list"><span class="id" title="section">ent_list</span></a>.<br/>
</div>

<div class="doc">
Entropy calculations for list helper functions 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;None&nbsp;of&nbsp;these&nbsp;are&nbsp;interesting,&nbsp;they&nbsp;should&nbsp;all&nbsp;consume&nbsp;0&nbsp;entropy&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Program Definition</span> <a id="CostEntropy_2" class="idref" href="#CostEntropy_2"><span class="id" title="definition">CostEntropy_2</span></a> := <a class="idref" href="tachis.tachis.cost_models.html#CostEntropy"><span class="id" title="definition">CostEntropy</span></a> 2 <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">lra</span>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="tachisGS0:316" class="idref" href="#tachisGS0:316"><span class="id" title="binder">!</span></a><a id="tachisGS0:316" class="idref" href="#tachisGS0:316"><span class="id" title="binder">tachisGS</span></a> <a id="073dbce7dc52d362f026b80380eb7f09" class="idref" href="#073dbce7dc52d362f026b80380eb7f09"><span class="id" title="binder"><span id="tachisGS0:316" class="id">Σ</span></span></a> <a id="tachisGS0:316" class="idref" href="#tachisGS0:316"><span class="id" title="binder">CostEntropy_2</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `[<a id="Inject0:318" class="idref" href="#Inject0:318"><span class="id" title="binder">!</span></a><a id="Inject0:318" class="idref" href="#Inject0:318"><span class="id" title="binder">Inject</span></a> <a id="A:317" class="idref" href="#A:317"><span class="id" title="binder"><span id="Inject0:318" class="id">A</span></span></a> <a id="Inject0:318" class="idref" href="#Inject0:318"><span class="id" title="binder">val</span></a>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_list_nil_ent" class="idref" href="#wp_list_nil_ent"><span class="id" title="lemma">wp_list_nil_ent</span></a> <a id="E:319" class="idref" href="#E:319"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#::bi_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#list_nil"><span class="id" title="definition">list_nil</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">@</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#E:319"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a id="v:320" class="idref" href="#v:320"><span class="id" title="binder">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#v:320"><span class="id" title="variable">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#v:320"><span class="id" title="variable">v</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "_ HΦ". <span class="id" title="tactic">unfold</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#list_nil"><span class="id" title="definition">list_nil</span></a>. <span class="id" title="var">wp_pure</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "HΦ". <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_list_cons_ent" class="idref" href="#wp_list_cons_ent"><span class="id" title="lemma">wp_list_cons_ent</span></a> <a id="a:321" class="idref" href="#a:321"><span class="id" title="binder">a</span></a> <a id="l:322" class="idref" href="#l:322"><span class="id" title="binder">l</span></a> <a id="lv:323" class="idref" href="#lv:323"><span class="id" title="binder">lv</span></a> <a id="E:324" class="idref" href="#E:324"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:322"><span class="id" title="variable">l</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#lv:323"><span class="id" title="variable">lv</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#list_cons"><span class="id" title="definition">list_cons</span></a> (<a class="idref" href="tachis.common.inject.html#inject"><span class="id" title="method">inject</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#a:321"><span class="id" title="variable">a</span></a>) <a class="idref" href="tachis.tachis.examples.quicksort.html#lv:323"><span class="id" title="variable">lv</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">@</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#E:324"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a id="v:325" class="idref" href="#v:325"><span class="id" title="binder">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#v:325"><span class="id" title="variable">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#a:321"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#l:322"><span class="id" title="variable">l</span></a>) <a class="idref" href="tachis.tachis.examples.quicksort.html#v:325"><span class="id" title="variable">v</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "% HΦ". <span class="id" title="var">wp_lam</span>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HΦ". <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_list_length_ent" class="idref" href="#wp_list_length_ent"><span class="id" title="lemma">wp_list_length_ent</span></a> <a id="E:326" class="idref" href="#E:326"><span class="id" title="binder">E</span></a> <a id="l:327" class="idref" href="#l:327"><span class="id" title="binder">l</span></a> <a id="lv:328" class="idref" href="#lv:328"><span class="id" title="binder">lv</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:327"><span class="id" title="variable">l</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#lv:328"><span class="id" title="variable">lv</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#list_length"><span class="id" title="definition">list_length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#lv:328"><span class="id" title="variable">lv</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">@</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#E:326"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a id="v:329" class="idref" href="#v:329"><span class="id" title="binder">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#v:329"><span class="id" title="variable">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#v:329"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:327"><span class="id" title="variable">l</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "Ha HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">l'</span>] "IH" <span class="id" title="keyword">forall</span> (<span class="id" title="var">lv</span> <span class="id" title="var">Φ</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Ha" <span class="id" title="keyword">as</span> %<span class="id" title="var">Ha</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">wp_rec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_match</span>. <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#bc9fd2481486dc1ddc28ccbc3ddae226"><span class="id" title="notation">(</span></a>"HΦ" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#bc9fd2481486dc1ddc28ccbc3ddae226"><span class="id" title="notation">$!</span></a> 0%<span class="id" title="var">nat</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#bc9fd2481486dc1ddc28ccbc3ddae226"><span class="id" title="notation">)</span></a>; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">wp_rec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lv'</span> [<span class="id" title="var">Hlv</span> <span class="id" title="var">Hlcoh</span>]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_match</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_proj</span>. <span class="id" title="var">wp_bind</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#list_length"><span class="id" title="definition">list_length</span></a> <span class="id" title="var">_</span>); <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> ("IH"); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iNext</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_op</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.add_1_l"><span class="id" title="lemma">Z.add_1_l</span></a> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_succ"><span class="id" title="lemma">Nat2Z.inj_succ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_remove_nth_ent" class="idref" href="#wp_remove_nth_ent"><span class="id" title="lemma">wp_remove_nth_ent</span></a> <a id="E:330" class="idref" href="#E:330"><span class="id" title="binder">E</span></a> (<a id="l:331" class="idref" href="#l:331"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#ent_list.A"><span class="id" title="variable">A</span></a>) <a id="lv:332" class="idref" href="#lv:332"><span class="id" title="binder">lv</span></a> (<a id="i:333" class="idref" href="#i:333"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:331"><span class="id" title="variable">l</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#lv:332"><span class="id" title="variable">lv</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:333"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:331"><span class="id" title="variable">l</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#list_remove_nth"><span class="id" title="definition">list_remove_nth</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#lv:332"><span class="id" title="variable">lv</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#i:333"><span class="id" title="variable">i</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">@</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#E:330"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a id="v:334" class="idref" href="#v:334"><span class="id" title="binder">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#v:334"><span class="id" title="variable">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="e:335" class="idref" href="#e:335"><span class="id" title="binder">e</span></a> <a id="lv':336" class="idref" href="#lv':336"><span class="id" title="binder">lv'</span></a> <a id="l1:337" class="idref" href="#l1:337"><span class="id" title="binder">l1</span></a> <a id="l2:338" class="idref" href="#l2:338"><span class="id" title="binder">l2</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#l:331"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l1:337"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#e:335"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l2:338"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l1:337"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:333"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#v:334"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.prob_lang.notation.html#SOMEV"><span class="id" title="abbreviation">SOMEV</span></a> <a class="idref" href="tachis.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">((</span></a><a class="idref" href="tachis.common.inject.html#inject"><span class="id" title="method">inject</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#e:335"><span class="id" title="variable">e</span></a><a class="idref" href="tachis.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">),</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#lv':336"><span class="id" title="variable">lv'</span></a><a class="idref" href="tachis.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#l1:337"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l2:338"><span class="id" title="variable">l2</span></a>) <a class="idref" href="tachis.tachis.examples.quicksort.html#lv':336"><span class="id" title="variable">lv'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "Ha Hφ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">l'</span>] "IH" <span class="id" title="keyword">forall</span> (<span class="id" title="var">i</span> <span class="id" title="var">lv</span> <span class="id" title="var">Φ</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Ha" <span class="id" title="keyword">as</span> "(%Hl &amp; %Hi)"; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">wp_rec</span>; <span class="id" title="var">wp_let</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hl</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lv'</span> [<span class="id" title="var">Hlv</span> <span class="id" title="var">Hlcoh</span>]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_match</span>. <span class="id" title="var">wp_pures</span>. <span class="id" title="var">case_bool_decide</span>; <span class="id" title="var">wp_pures</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iApply</span> "Hφ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">a</span>, (<a class="idref" href="tachis.common.inject.html#inject"><span class="id" title="method">inject</span></a> <span class="id" title="var">l'</span>), <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>, <span class="id" title="var">l'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#is_list_inject"><span class="id" title="lemma">is_list_inject</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlcoh</span> <span class="id" title="keyword">as</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#is_list_inject"><span class="id" title="lemma">is_list_inject</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> ((<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> <span class="id" title="var">l'</span> <span class="id" title="var">lv'</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">l'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Haux</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hi</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_bind</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#list_remove_nth"><span class="id" title="definition">list_remove_nth</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rminus_0_r"><span class="id" title="lemma">Rminus_0_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#bc9fd2481486dc1ddc28ccbc3ddae226"><span class="id" title="notation">(</span></a>"IH" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#bc9fd2481486dc1ddc28ccbc3ddae226"><span class="id" title="notation">$!</span></a> <span class="id" title="var">i</span> <span class="id" title="var">lv'</span> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#bc9fd2481486dc1ddc28ccbc3ddae226"><span class="id" title="notation">)</span></a>; [<span class="id" title="tactic">eauto</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iNext</span>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">v</span> (<span class="id" title="var">e</span> &amp; <span class="id" title="var">v'</span> &amp; <span class="id" title="var">l1</span> &amp; <span class="id" title="var">l2</span> &amp; (-&gt; &amp; <span class="id" title="var">Hlen</span> &amp; -&gt; &amp; <span class="id" title="var">Hil</span>))); <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_bind</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#list_cons"><span class="id" title="definition">list_cons</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="var">iApply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#wp_list_cons_ent"><span class="id" title="lemma">wp_list_cons_ent</span></a>; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;" (<span class="id" title="var">v</span> <span class="id" title="var">Hcons</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "Hφ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">e</span>, (<a class="idref" href="tachis.common.inject.html#inject"><span class="id" title="method">inject</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l1</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">l2</span>)), (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l1</span>), <span class="id" title="var">l2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#cons_length"><span class="id" title="definition">cons_length</span></a> <span class="id" title="var">Hlen</span> // |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#is_list_inject"><span class="id" title="lemma">is_list_inject</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcons</span> <span class="id" title="keyword">as</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#is_list_inject"><span class="id" title="lemma">is_list_inject</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_list_append_ent" class="idref" href="#wp_list_append_ent"><span class="id" title="lemma">wp_list_append_ent</span></a> <a id="E:339" class="idref" href="#E:339"><span class="id" title="binder">E</span></a> <a id="l:340" class="idref" href="#l:340"><span class="id" title="binder">l</span></a> <a id="lM:341" class="idref" href="#lM:341"><span class="id" title="binder">lM</span></a> <a id="r:342" class="idref" href="#r:342"><span class="id" title="binder">r</span></a> <a id="rM:343" class="idref" href="#rM:343"><span class="id" title="binder">rM</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#lM:341"><span class="id" title="variable">lM</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:340"><span class="id" title="variable">l</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#rM:343"><span class="id" title="variable">rM</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#r:342"><span class="id" title="variable">r</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#list_append"><span class="id" title="definition">list_append</span></a> (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:340"><span class="id" title="variable">l</span></a>) (<a class="idref" href="tachis.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#r:342"><span class="id" title="variable">r</span></a>) <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">@</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#E:339"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a id="v:344" class="idref" href="#v:344"><span class="id" title="binder">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#v:344"><span class="id" title="variable">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#lM:341"><span class="id" title="variable">lM</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#rM:343"><span class="id" title="variable">rM</span></a>) <a class="idref" href="tachis.tachis.examples.quicksort.html#v:344"><span class="id" title="variable">v</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "[%Hl %Hr] HΦ". <span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#list_append"><span class="id" title="definition">list_append</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> <span class="id" title="var">lM</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">lM</span>] "IH" <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span> <span class="id" title="var">r</span> <span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Φ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="var">wp_pures</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hl</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">l'</span> [<span class="id" title="var">Hl'eq</span> <span class="id" title="var">Hl'</span>]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 12 <span class="id" title="var">wp_pure</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_bind</span> (((<a class="idref" href="tachis.prob_lang.notation.html#b655cc6b0c09a3d45e15582d945b2696"><span class="id" title="notation">rec</span></a><a class="idref" href="tachis.prob_lang.notation.html#b655cc6b0c09a3d45e15582d945b2696"><span class="id" title="notation">:</span></a> "list_append" <span class="id" title="var">_</span> <span class="id" title="var">_</span><a class="idref" href="tachis.prob_lang.notation.html#b655cc6b0c09a3d45e15582d945b2696"><span class="id" title="notation">:=</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">V</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "IH"; [<span class="id" title="var">done</span>..|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;" (<span class="id" title="var">v</span> <span class="id" title="var">Hv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">wp_apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#wp_list_cons_ent"><span class="id" title="lemma">wp_list_cons_ent</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Since&nbsp;we&nbsp;eventually&nbsp;want&nbsp;to&nbsp;obtain&nbsp;a&nbsp;O(n)&nbsp;bound,&nbsp;we&nbsp;will<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;only&nbsp;consider&nbsp;comparison&nbsp;functions&nbsp;which&nbsp;consume&nbsp;zero&nbsp;entropy.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_list_filter_ent" class="idref" href="#wp_list_filter_ent"><span class="id" title="lemma">wp_list_filter_ent</span></a> (<a id="l:345" class="idref" href="#l:345"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#ent_list.A"><span class="id" title="variable">A</span></a>) (<a id="P:346" class="idref" href="#P:346"><span class="id" title="binder">P</span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#ent_list.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) (<a id="f:347" class="idref" href="#f:347"><span class="id" title="binder">f</span></a> <a id="lv:348" class="idref" href="#lv:348"><span class="id" title="binder">lv</span></a> : <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) <a id="E:349" class="idref" href="#E:349"><span class="id" title="binder">E</span></a> <a id="k:350" class="idref" href="#k:350"><span class="id" title="binder">k</span></a> (<a id="Hk:351" class="idref" href="#Hk:351"><span class="id" title="binder">Hk</span></a> : (0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#k:350"><span class="id" title="variable">k</span></a>)%<span class="id" title="var">R</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">∀</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">(</span></a><a id="x:352" class="idref" href="#x:352"><span class="id" title="binder">x</span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#ent_list.A"><span class="id" title="variable">A</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">),</span></a> <a class="idref" href="tachis.bi.weakestpre.html#6758bfb0570afaad5b863e74dae14d00"><span class="id" title="notation">{{{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#::type_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a>  <a class="idref" href="tachis.bi.weakestpre.html#6758bfb0570afaad5b863e74dae14d00"><span class="id" title="notation">}}}</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#f:347"><span class="id" title="variable">f</span></a> (<a class="idref" href="tachis.common.inject.html#inject"><span class="id" title="method">inject</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:352"><span class="id" title="variable">x</span></a>) <a class="idref" href="tachis.bi.weakestpre.html#6758bfb0570afaad5b863e74dae14d00"><span class="id" title="notation">@</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#E:349"><span class="id" title="variable">E</span></a> <a class="idref" href="tachis.bi.weakestpre.html#6758bfb0570afaad5b863e74dae14d00"><span class="id" title="notation">{{{</span></a> <a id="w:353" class="idref" href="#w:353"><span class="id" title="binder">w</span></a><a class="idref" href="tachis.bi.weakestpre.html#6758bfb0570afaad5b863e74dae14d00"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.bi.weakestpre.html#6758bfb0570afaad5b863e74dae14d00"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#w:353"><span class="id" title="variable">w</span></a><a class="idref" href="tachis.bi.weakestpre.html#6758bfb0570afaad5b863e74dae14d00"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#w:353"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.common.inject.html#inject"><span class="id" title="method">inject</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#P:346"><span class="id" title="variable">P</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:352"><span class="id" title="variable">x</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="tachis.bi.weakestpre.html#6758bfb0570afaad5b863e74dae14d00"><span class="id" title="notation">}}}</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:345"><span class="id" title="variable">l</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#lv:348"><span class="id" title="variable">lv</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#list_filter"><span class="id" title="definition">list_filter</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#f:347"><span class="id" title="variable">f</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#lv:348"><span class="id" title="variable">lv</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">@</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#E:349"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a id="rv:354" class="idref" href="#rv:354"><span class="id" title="binder">rv</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#rv:354"><span class="id" title="variable">rv</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">List.filter</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#P:346"><span class="id" title="variable">P</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:345"><span class="id" title="variable">l</span></a>) <a class="idref" href="tachis.tachis.examples.quicksort.html#rv:354"><span class="id" title="variable">rv</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "(#Hf &amp; %Hil) HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [ | <span class="id" title="var">h</span> <span class="id" title="var">t</span>] "IH" <span class="id" title="keyword">forall</span> (<span class="id" title="var">lv</span> <span class="id" title="var">Hil</span> <span class="id" title="var">Φ</span>); <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hil</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#list_filter"><span class="id" title="definition">list_filter</span></a>; <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HΦ"; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hil</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lv'</span> &amp; -&gt; &amp; <span class="id" title="var">Hil</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#list_filter"><span class="id" title="definition">list_filter</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 7 (<span class="id" title="var">wp_pure</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#list_filter"><span class="id" title="definition">list_filter</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"IH" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[//]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">rv</span>) "%Hilp"; <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hf" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">w</span>) "-&gt;".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">P</span> <span class="id" title="var">h</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">HP</span>; <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">wp_apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#wp_list_cons_ent"><span class="id" title="lemma">wp_list_cons_ent</span></a>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">v</span>) "%Hil'".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HΦ"; <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HP</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hil'</span>; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iApply</span> "HΦ"; <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HP</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_remove_nth_unsafe_ent" class="idref" href="#wp_remove_nth_unsafe_ent"><span class="id" title="lemma">wp_remove_nth_unsafe_ent</span></a> <a id="E:355" class="idref" href="#E:355"><span class="id" title="binder">E</span></a> (<a id="l:356" class="idref" href="#l:356"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#ent_list.A"><span class="id" title="variable">A</span></a>) (<a id="lv:357" class="idref" href="#lv:357"><span class="id" title="binder">lv</span></a> : <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) (<a id="i:358" class="idref" href="#i:358"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:356"><span class="id" title="variable">l</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#lv:357"><span class="id" title="variable">lv</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:358"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:356"><span class="id" title="variable">l</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#list_remove_nth_unsafe"><span class="id" title="definition">list_remove_nth_unsafe</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#lv:357"><span class="id" title="variable">lv</span></a> <a class="idref" href="tachis.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#i:358"><span class="id" title="variable">i</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">@</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#E:355"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">{{{</span></a> <a id="v:359" class="idref" href="#v:359"><span class="id" title="binder">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#v:359"><span class="id" title="variable">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="e:360" class="idref" href="#e:360"><span class="id" title="binder">e</span></a> <a id="lv':361" class="idref" href="#lv':361"><span class="id" title="binder">lv'</span></a> <a id="l1:362" class="idref" href="#l1:362"><span class="id" title="binder">l1</span></a> <a id="l2:363" class="idref" href="#l2:363"><span class="id" title="binder">l2</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:356"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l1:362"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#e:360"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l2:363"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l1:362"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:358"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#v:359"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">((</span></a><a class="idref" href="tachis.common.inject.html#inject"><span class="id" title="method">inject</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#e:360"><span class="id" title="variable">e</span></a><a class="idref" href="tachis.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">),</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#lv':361"><span class="id" title="variable">lv'</span></a><a class="idref" href="tachis.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)</span></a>%<span class="id" title="var">V</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#l1:362"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l2:363"><span class="id" title="variable">l2</span></a>) <a class="idref" href="tachis.tachis.examples.quicksort.html#lv':361"><span class="id" title="variable">lv'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="tachis.bi.weakestpre.html#dc7101858ef3a8f8398e14946db8cb25"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (φ) "(%llv &amp; %Hi) hφ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#list_remove_nth_unsafe"><span class="id" title="definition">list_remove_nth_unsafe</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#wp_remove_nth_ent"><span class="id" title="lemma">wp_remove_nth_ent</span></a> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?(?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?)) ; <span class="id" title="tactic">subst</span>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "hφ". <span class="id" title="var">iModIntro</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>,<span class="id" title="var">_</span>,<span class="id" title="var">_</span>,<span class="id" title="var">_</span>. <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#ent_list"><span class="id" title="section">ent_list</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="qs_adv_cmp_ent" class="idref" href="#qs_adv_cmp_ent"><span class="id" title="section">qs_adv_cmp_ent</span></a>.<br/>
</div>

<div class="doc">
Advanced composition for quicksort entropy 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="A:364" class="idref" href="#A:364"><span class="id" title="binder">A</span></a>} (<a id="f:365" class="idref" href="#f:365"><span class="id" title="binder">f</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#A:364"><span class="id" title="variable">A</span></a>) `{<a id="H:368" class="idref" href="#H:368"><span class="id" title="binder">∀</span></a> <a id="x:366" class="idref" href="#x:366"><span class="id" title="binder"><span id="H:368" class="id">x</span></span></a> <a id="y:367" class="idref" href="#y:367"><span class="id" title="binder"><span id="H:368" class="id">y</span></span></a><a id="H:368" class="idref" href="#H:368"><span class="id" title="binder">,</span></a> <a id="H:368" class="idref" href="#H:368"><span class="id" title="binder">Decision</span></a> <a id="H:368" class="idref" href="#H:368"><span class="id" title="binder">(</span></a><a id="H:368" class="idref" href="#H:368"><span class="id" title="binder">f</span></a> <a id="H:368" class="idref" href="#H:368"><span class="id" title="binder">x</span></a> <a id="H:368" class="idref" href="#H:368"><span class="id" title="binder">y</span></a><a id="H:368" class="idref" href="#H:368"><span class="id" title="binder">)</span></a>} `{<a id="TotalOrder0:369" class="idref" href="#TotalOrder0:369"><span class="id" title="binder">!</span></a><a id="TotalOrder0:369" class="idref" href="#TotalOrder0:369"><span class="id" title="binder">TotalOrder</span></a> <a id="TotalOrder0:369" class="idref" href="#TotalOrder0:369"><span class="id" title="binder">f</span></a>} `{<a id="H0:370" class="idref" href="#H0:370"><span class="id" title="binder">Inhabited</span></a> <a id="H0:370" class="idref" href="#H0:370"><span class="id" title="binder">A</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `[<a id="Inject0:371" class="idref" href="#Inject0:371"><span class="id" title="binder">!</span></a><a id="Inject0:371" class="idref" href="#Inject0:371"><span class="id" title="binder">Inject</span></a> <a id="Inject0:371" class="idref" href="#Inject0:371"><span class="id" title="binder">A</span></a> <a id="Inject0:371" class="idref" href="#Inject0:371"><span class="id" title="binder">val</span></a>].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="ec_distr_def" class="idref" href="#ec_distr_def"><span class="id" title="definition">ec_distr_def</span></a> (<a id="L:372" class="idref" href="#L:372"><span class="id" title="binder">L</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_adv_cmp_ent.A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R"><span class="id" title="axiom">R</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <a id="index:373" class="idref" href="#index:373"><span class="id" title="binder">index</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:372"><span class="id" title="variable">L</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; 0%<span class="id" title="var">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort"><span class="id" title="definition">ec_quicksort</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank"><span class="id" title="definition">index_to_rank</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_adv_cmp_ent.f"><span class="id" title="variable">f</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:372"><span class="id" title="variable">L</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">))</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">index</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort"><span class="id" title="definition">ec_quicksort</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#reverse_order"><span class="id" title="definition">reverse_order</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:372"><span class="id" title="variable">L</span></a>)) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank"><span class="id" title="definition">index_to_rank</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_adv_cmp_ent.f"><span class="id" title="variable">f</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:372"><span class="id" title="variable">L</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">))</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">index</span></a>)%<span class="id" title="var">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Distribution,&nbsp;in&nbsp;a&nbsp;form&nbsp;which&nbsp;typechecks&nbsp;with&nbsp;advanced&nbsp;composition&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="ec_distr" class="idref" href="#ec_distr"><span class="id" title="definition">ec_distr</span></a> (<a id="L:375" class="idref" href="#L:375"><span class="id" title="binder">L</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_adv_cmp_ent.A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:375"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1)))<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R"><span class="id" title="axiom">R</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#ec_distr_def"><span class="id" title="definition">ec_distr_def</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:375"><span class="id" title="variable">L</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat"><span class="id" title="definition">fin_to_nat</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ec_distr_nonneg" class="idref" href="#ec_distr_nonneg"><span class="id" title="lemma">ec_distr_nonneg</span></a> <a id="L:376" class="idref" href="#L:376"><span class="id" title="binder">L</span></a> <a id="i:377" class="idref" href="#i:377"><span class="id" title="binder">i</span></a> : (0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:376"><span class="id" title="variable">L</span></a>)%<span class="id" title="var">nat</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> (0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#ec_distr"><span class="id" title="definition">ec_distr</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:376"><span class="id" title="variable">L</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:377"><span class="id" title="variable">i</span></a>)%<span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#tc_distr"><span class="id" title="definition">tc_distr</span></a> /<a class="idref" href="tachis.tachis.examples.quicksort.html#tc_distr_def"><span class="id" title="definition">tc_distr_def</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">L</span>; <span class="id" title="tactic">first</span> (<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_le_le_0_compat"><span class="id" title="lemma">Rplus_le_le_0_compat</span></a>; <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort_nonneg"><span class="id" title="lemma">ec_quicksort_nonneg</span></a>; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Advanced&nbsp;composition&nbsp;side&nbsp;condition:&nbsp;Turn&nbsp;the&nbsp;junk&nbsp;we&nbsp;get&nbsp;from&nbsp;the&nbsp;advanced&nbsp;composition&nbsp;rule&nbsp;back&nbsp;into&nbsp;the&nbsp;credit&nbsp;definition&nbsp;we&nbsp;have&nbsp;before&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ec_distr_equiv" class="idref" href="#ec_distr_equiv"><span class="id" title="lemma">ec_distr_equiv</span></a> <a id="L:378" class="idref" href="#L:378"><span class="id" title="binder">L</span></a> :<br/>
&nbsp;&nbsp;(0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:378"><span class="id" title="variable">L</span></a>)%<span class="id" title="var">nat</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup"><span class="id" title="inductive">List.NoDup</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:378"><span class="id" title="variable">L</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="tachis.prob.countable_sum.html#SeriesC"><span class="id" title="definition">SeriesC</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="n:379" class="idref" href="#n:379"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:378"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1)))<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> 1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:378"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1)) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#ec_distr"><span class="id" title="definition">ec_distr</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:378"><span class="id" title="variable">L</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:379"><span class="id" title="variable">n</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> 0 (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="n:380" class="idref" href="#n:380"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort"><span class="id" title="definition">ec_quicksort</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#n:380"><span class="id" title="variable">n</span></a>) (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:378"><span class="id" title="variable">L</span></a>))) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#L:378"><span class="id" title="variable">L</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlength</span> <span class="id" title="var">Hunique</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hlength_nz</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> 0%<span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rlt_not_eq"><span class="id" title="lemma">Rlt_not_eq</span></a>. <span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#INR_0"><span class="id" title="lemma">INR_0</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#lt_INR"><span class="id" title="lemma">lt_INR</span></a>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;1.&nbsp;Simplify&nbsp;the&nbsp;division&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.prob.countable_sum.html#SeriesC_scal_l"><span class="id" title="lemma">SeriesC_scal_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rdiv_def"><span class="id" title="lemma">Rdiv_def</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" title="lemma">Rmult_comm</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rmult_1_l"><span class="id" title="lemma">Rmult_1_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>)); <span class="id" title="var">last</span> (<span class="id" title="tactic">f_equal</span>; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rmult_le_compat_r"><span class="id" title="lemma">Rmult_le_compat_r</span></a>; <span class="id" title="tactic">first</span> (<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rlt_le"><span class="id" title="lemma">Rlt_le</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rinv_0_lt_compat"><span class="id" title="lemma">Rinv_0_lt_compat</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#lt_0_INR"><span class="id" title="lemma">lt_0_INR</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;2.&nbsp;Convert&nbsp;the&nbsp;series&nbsp;into&nbsp;a&nbsp;foldr,&nbsp;simpl&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.prob.countable_sum.html#SeriesC_finite_foldr"><span class="id" title="lemma">SeriesC_finite_foldr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#ec_distr"><span class="id" title="definition">ec_distr</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#ec_distr_def"><span class="id" title="definition">ec_distr_def</span></a> <span class="id" title="var">L</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat"><span class="id" title="definition">fin_to_nat</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">)</span></a>) 0%<span class="id" title="var">R</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#enum"><span class="id" title="method">enum</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin"><span class="id" title="abbreviation">fin</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1))))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#ec_distr_def"><span class="id" title="definition">ec_distr_def</span></a> <span class="id" title="var">L</span> ) 0%<span class="id" title="var">R</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>)));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">remember</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#ec_distr_def"><span class="id" title="definition">ec_distr_def</span></a> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">g</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1))) <span class="id" title="keyword">as</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">l</span>; <span class="id" title="var">last</span> (<span class="id" title="var">simplify_eq</span>; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#index_space_snoc"><span class="id" title="lemma">index_space_snoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_app"><span class="id" title="definition">foldr_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#enum"><span class="id" title="method">enum</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="keyword">Transparent</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#enum"><span class="id" title="method">enum</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#foldr_plus_comm_acc"><span class="id" title="lemma">foldr_plus_comm_acc</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_0_r"><span class="id" title="lemma">Rplus_0_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#enum"><span class="id" title="method">enum</span></a> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#fin_finite"><span class="id" title="instance">fin_finite</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#fin_enum_snoc_rec"><span class="id" title="lemma">fin_enum_snoc_rec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_app"><span class="id" title="definition">foldr_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat_to_fin"><span class="id" title="lemma">fin_to_nat_to_fin</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#foldr_plus_comm_acc"><span class="id" title="lemma">foldr_plus_comm_acc</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">R</span>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_0_r"><span class="id" title="lemma">Rplus_0_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#foldr_map_cmp"><span class="id" title="lemma">foldr_map_cmp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_ext"><span class="id" title="lemma">foldr_ext</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#fin_inj_incr_to_nat"><span class="id" title="lemma">fin_inj_incr_to_nat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;3.&nbsp;Split&nbsp;the&nbsp;distr&nbsp;series&nbsp;into&nbsp;two&nbsp;sums&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#ec_distr_def"><span class="id" title="definition">ec_distr_def</span></a> <span class="id" title="var">L</span>) 0%<span class="id" title="var">R</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort"><span class="id" title="definition">ec_quicksort</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank"><span class="id" title="definition">index_to_rank</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_adv_cmp_ent.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">L</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">)</span></a>) 0%<span class="id" title="var">R</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>)) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort"><span class="id" title="definition">ec_quicksort</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#reverse_order"><span class="id" title="definition">reverse_order</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>))<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank"><span class="id" title="definition">index_to_rank</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_adv_cmp_ent.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">L</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">)</span></a>) 0%<span class="id" title="var">R</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>)))%<span class="id" title="var">R</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#ec_distr_def"><span class="id" title="definition">ec_distr_def</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">L</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">L'</span> <span class="id" title="var">LS</span>]; <span class="id" title="tactic">first</span> (<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">lra</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">L'</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">LS</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">HeqL</span> <span class="id" title="var">L'</span> <span class="id" title="var">LS</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort"><span class="id" title="definition">ec_quicksort</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank"><span class="id" title="definition">index_to_rank</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_adv_cmp_ent.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">L</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">f1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort"><span class="id" title="definition">ec_quicksort</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#reverse_order"><span class="id" title="definition">reverse_order</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>)) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank"><span class="id" title="definition">index_to_rank</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_adv_cmp_ent.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">L</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">f2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Program.Basics.html#compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Rplus"><span class="id" title="axiom">Rplus</span></a> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span>  (<span class="id" title="keyword">fun</span> <a id="i:381" class="idref" href="#i:381"><span class="id" title="binder"><span id="i:383" class="id">i</span></span></a> =&gt; (<span class="id" title="keyword">fun</span> <a id="r:382" class="idref" href="#r:382"><span class="id" title="binder"><span id="r:384" class="id">r</span></span></a> =&gt; <span class="id" title="var">f1</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:381"><span class="id" title="variable">i</span></a> 0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> <span class="id" title="var">f2</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:381"><span class="id" title="variable">i</span></a> 0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#r:382"><span class="id" title="variable">r</span></a>)%<span class="id" title="var">R</span>); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality"><span class="id" title="lemma">functional_extensionality</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality"><span class="id" title="lemma">functional_extensionality</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqf1</span> <span class="id" title="var">Heqf2</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#Rplus_comm"><span class="id" title="lemma">Rplus_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">L</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hf1</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="i:385" class="idref" href="#i:385"><span class="id" title="binder"><span id="i:387" class="id">i</span></span></a> <a id="r:386" class="idref" href="#r:386"><span class="id" title="binder"><span id="r:388" class="id">r</span></span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> (<span class="id" title="var">f1</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:385"><span class="id" title="variable">i</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#r:386"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#r:386"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> <span class="id" title="var">f1</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:385"><span class="id" title="variable">i</span></a> 0)%<span class="id" title="var">R</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqf1</span> /=; <span class="id" title="var">lra</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hf2</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="i:389" class="idref" href="#i:389"><span class="id" title="binder"><span id="i:391" class="id">i</span></span></a> <a id="r:390" class="idref" href="#r:390"><span class="id" title="binder"><span id="r:392" class="id">r</span></span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> (<span class="id" title="var">f2</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:389"><span class="id" title="variable">i</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#r:390"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#r:390"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> <span class="id" title="var">f2</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#i:389"><span class="id" title="variable">i</span></a> 0)%<span class="id" title="var">R</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqf2</span> /=; <span class="id" title="var">lra</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">L</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">LL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Heqf1</span> <span class="id" title="var">Heqf2</span> <span class="id" title="var">HeqLL</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">LL</span> <span class="id" title="keyword">as</span> [|? ? <span class="id" title="var">IH</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">IH</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hf1</span> <span class="id" title="var">Hf2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;4.&nbsp;Rewrite&nbsp;the&nbsp;reversed&nbsp;sum&nbsp;and&nbsp;combine&nbsp;to&nbsp;eliminate&nbsp;the&nbsp;factor&nbsp;of&nbsp;2&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#foldr_reduction_1"><span class="id" title="lemma">foldr_reduction_1</span></a>); [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#foldr_reduction_1"><span class="id" title="lemma">foldr_reduction_1</span></a>); [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (@<a class="idref" href="tachis.tachis.examples.quicksort.html#foldr_reduction_2"><span class="id" title="lemma">foldr_reduction_2</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_adv_cmp_ent.H"><span class="id" title="variable">H</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_adv_cmp_ent.TotalOrder0"><span class="id" title="variable">TotalOrder0</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_adv_cmp_ent.H0"><span class="id" title="variable">H0</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;5.&nbsp;Combine&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr_fmap"><span class="id" title="lemma">foldr_fmap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Transparent</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#qs_adv_cmp_ent"><span class="id" title="section">qs_adv_cmp_ent</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="program_ent" class="idref" href="#program_ent"><span class="id" title="section">program_ent</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="tachisGS0:394" class="idref" href="#tachisGS0:394"><span class="id" title="binder">!</span></a><a id="tachisGS0:394" class="idref" href="#tachisGS0:394"><span class="id" title="binder">tachisGS</span></a> <a id="8e219060b53830f6dfc6422059fcb8fb" class="idref" href="#8e219060b53830f6dfc6422059fcb8fb"><span class="id" title="binder"><span id="tachisGS0:394" class="id">Σ</span></span></a> <a id="tachisGS0:394" class="idref" href="#tachisGS0:394"><span class="id" title="binder">CostEntropy_2</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `[<a id="Inject0:396" class="idref" href="#Inject0:396"><span class="id" title="binder">!</span></a><a id="Inject0:396" class="idref" href="#Inject0:396"><span class="id" title="binder">Inject</span></a> <a id="A:395" class="idref" href="#A:395"><span class="id" title="binder"><span id="Inject0:396" class="id">A</span></span></a> <a id="Inject0:396" class="idref" href="#Inject0:396"><span class="id" title="binder">val</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:397" class="idref" href="#H:397"><span class="id" title="binder">Inhabited</span></a> <a id="H:397" class="idref" href="#H:397"><span class="id" title="binder">A</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="f:398" class="idref" href="#f:398"><span class="id" title="binder">f</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#program_ent.A"><span class="id" title="variable">A</span></a>) `{<a id="H0:401" class="idref" href="#H0:401"><span class="id" title="binder">∀</span></a> <a id="x:399" class="idref" href="#x:399"><span class="id" title="binder"><span id="H0:401" class="id">x</span></span></a> <a id="y:400" class="idref" href="#y:400"><span class="id" title="binder"><span id="H0:401" class="id">y</span></span></a><a id="H0:401" class="idref" href="#H0:401"><span class="id" title="binder">,</span></a> <a id="H0:401" class="idref" href="#H0:401"><span class="id" title="binder">Decision</span></a> <a id="H0:401" class="idref" href="#H0:401"><span class="id" title="binder">(</span></a><a id="H0:401" class="idref" href="#H0:401"><span class="id" title="binder">f</span></a> <a id="H0:401" class="idref" href="#H0:401"><span class="id" title="binder">x</span></a> <a id="H0:401" class="idref" href="#H0:401"><span class="id" title="binder">y</span></a><a id="H0:401" class="idref" href="#H0:401"><span class="id" title="binder">)</span></a>} `{<a id="TotalOrder0:402" class="idref" href="#TotalOrder0:402"><span class="id" title="binder">!</span></a><a id="TotalOrder0:402" class="idref" href="#TotalOrder0:402"><span class="id" title="binder">TotalOrder</span></a> <a id="TotalOrder0:402" class="idref" href="#TotalOrder0:402"><span class="id" title="binder">f</span></a>}.<br/>

<br/>
</div>

<div class="doc">
Verifing the expected entropy of quicksort 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="qs_ent_bound" class="idref" href="#qs_ent_bound"><span class="id" title="lemma">qs_ent_bound</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="xs:403" class="idref" href="#xs:403"><span class="id" title="binder">xs</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#program_ent.A"><span class="id" title="variable">A</span></a>) (<a id="l:404" class="idref" href="#l:404"><span class="id" title="binder">l</span></a> : <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) (<a id="cmp:405" class="idref" href="#cmp:405"><span class="id" title="binder">cmp</span></a> : <a class="idref" href="tachis.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">{{{</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort"><span class="id" title="definition">ec_quicksort</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#xs:403"><span class="id" title="variable">xs</span></a>)<a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#xs:403"><span class="id" title="variable">xs</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:404"><span class="id" title="variable">l</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup"><span class="id" title="inductive">List.NoDup</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#xs:403"><span class="id" title="variable">xs</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">∀</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">(</span></a><a id="x:406" class="idref" href="#x:406"><span class="id" title="binder">x</span></a> <a id="y:407" class="idref" href="#y:407"><span class="id" title="binder">y</span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#program_ent.A"><span class="id" title="variable">A</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">),</span></a> <a class="idref" href="tachis.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">{{{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#::type_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a>  <a class="idref" href="tachis.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">}}}</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#cmp:405"><span class="id" title="variable">cmp</span></a> (<a class="idref" href="tachis.common.inject.html#inject"><span class="id" title="method">inject</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:406"><span class="id" title="variable">x</span></a>) (<a class="idref" href="tachis.common.inject.html#inject"><span class="id" title="method">inject</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#y:407"><span class="id" title="variable">y</span></a>)  <a class="idref" href="tachis.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">{{{</span></a> <a id="w:408" class="idref" href="#w:408"><span class="id" title="binder">w</span></a><a class="idref" href="tachis.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#w:408"><span class="id" title="variable">w</span></a><a class="idref" href="tachis.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#w:408"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="tachis.common.inject.html#inject"><span class="id" title="method">inject</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#program_ent.f"><span class="id" title="variable">f</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:406"><span class="id" title="variable">x</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#y:407"><span class="id" title="variable">y</span></a>))<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a>  <a class="idref" href="tachis.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">}}}</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">)</span></a> <a class="idref" href="tachis.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.examples.quicksort.html#qs"><span class="id" title="definition">qs</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#cmp:405"><span class="id" title="variable">cmp</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#l:404"><span class="id" title="variable">l</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">{{{</span></a> <a id="v:409" class="idref" href="#v:409"><span class="id" title="binder">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">,</span></a> <a class="idref" href="tachis.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">RET</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#v:409"><span class="id" title="variable">v</span></a><a class="idref" href="tachis.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="xs':410" class="idref" href="#xs':410"><span class="id" title="binder">xs'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#is_list"><span class="id" title="definition">is_list</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#xs':410"><span class="id" title="variable">xs'</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#v:409"><span class="id" title="variable">v</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="tachis.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#qs"><span class="id" title="definition">qs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">xs</span> <span class="id" title="var">l</span> <span class="id" title="var">cmp</span> <span class="id" title="var">Φ</span>) "HA1 hφ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="var">wp_pure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iLöb</span> <span class="id" title="keyword">as</span> "Hqs" <span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> <span class="id" title="var">l</span> <span class="id" title="var">Φ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "HA1" <span class="id" title="keyword">as</span> "(H⧖ &amp; %hl &amp; %hnd &amp; #Hcmp_spec)".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_bind</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#list_length"><span class="id" title="definition">list_length</span></a> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#wp_list_length_ent"><span class="id" title="lemma">wp_list_length_ent</span></a>; [<span class="id" title="tactic">eauto</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">n</span>) "-&gt;".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Base&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">wp_pures</span>; <span class="id" title="var">iModIntro</span>. <span class="id" title="var">iApply</span> "hφ". <span class="id" title="tactic">destruct</span> <span class="id" title="var">xs</span>; [ |<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>. <span class="id" title="tactic">auto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort_unfold"><span class="id" title="lemma">ec_quicksort_unfold</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rpower.html#Rlog"><span class="id" title="definition">Rlog</span></a> 2 <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad"><span class="id" title="notation">+</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">R</span> <span class="id" title="keyword">as</span> <span class="id" title="var">K</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.ert_rules.html#wp_couple_rand_adv_comp_strong'"><span class="id" title="lemma">wp_couple_rand_adv_comp_strong'</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">K</span> (<a class="idref" href="tachis.tachis.examples.quicksort.html#ec_distr"><span class="id" title="definition">ec_distr</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#program_ent.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">xs</span>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[H⧖]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#ec_distr_nonneg"><span class="id" title="lemma">ec_distr_nonneg</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lra</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="keyword">Opaque</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= <span class="id" title="var">HeqK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Transparent</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.Raxioms.html#INR"><span class="id" title="definition">INR</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Rplus_le_compat"><span class="id" title="lemma">Rplus_le_compat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Reals.RIneq.html#Req_le"><span class="id" title="lemma">Req_le</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hxs_len</span> : 1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">xs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">xs</span>); <span class="id" title="var">last</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_0"><span class="id" title="lemma">Nat2Z.inj_0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> 1%<span class="id" title="var">Z</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> 1%<span class="id" title="var">nat</span>); <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_sub"><span class="id" title="lemma">Nat2Z.inj_sub</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.ZArith.Znat.html#Zabs2Nat.id"><span class="id" title="lemma">Zabs2Nat.id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#ec_distr_equiv"><span class="id" title="lemma">ec_distr_equiv</span></a>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lra</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">xs</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">ip</span>) "H⧖"...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">HeqK</span> <span class="id" title="var">K</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;pop&nbsp;the&nbsp;pivot&nbsp;from&nbsp;xs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#wp_remove_nth_unsafe_ent"><span class="id" title="lemma">wp_remove_nth_unsafe_ent</span></a> <span class="id" title="var">_</span> <span class="id" title="var">xs</span> <span class="id" title="var">l</span> <span class="id" title="var">ip</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#Nat.lt_le_trans"><span class="id" title="lemma">Nat.lt_le_trans</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin.html#fin_to_nat_lt"><span class="id" title="lemma">fin_to_nat_lt</span></a> <span class="id" title="var">ip</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">simpl</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">xs</span> =&gt; /=; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">lia</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">v</span>) "[%xp [%ap [%xsL [%xsR (%Hxs &amp; %Hip &amp; -&gt; &amp; %Hap )]]]]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort"><span class="id" title="definition">ec_quicksort</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank"><span class="id" title="definition">index_to_rank</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#program_ent.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">xs</span> <span class="id" title="var">ip</span>)<a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">⧖</span></a> <a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">(</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort"><span class="id" title="definition">ec_quicksort</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#reverse_order"><span class="id" title="definition">reverse_order</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> <span class="id" title="var">xs</span>)) (<a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank"><span class="id" title="definition">index_to_rank</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#program_ent.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">xs</span> <span class="id" title="var">ip</span>))<a class="idref" href="tachis.tachis.expected_time_credits.html#52856f65edf933975cc15fd14c408e31"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> "[H⧖]" <span class="id" title="keyword">as</span> "[H⧖L H⧖R]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iApply</span> <a class="idref" href="tachis.tachis.expected_time_credits.html#etc_split"><span class="id" title="lemma">etc_split</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort_nonneg"><span class="id" title="lemma">ec_quicksort_nonneg</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#ec_quicksort_nonneg"><span class="id" title="lemma">ec_quicksort_nonneg</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#ec_distr"><span class="id" title="definition">ec_distr</span></a> /<a class="idref" href="tachis.tachis.examples.quicksort.html#ec_distr_def"><span class="id" title="definition">ec_distr_def</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">xs</span>; <span class="id" title="tactic">first</span> (<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;x&nbsp;and&nbsp;xp&nbsp;might&nbsp;be&nbsp;flipped&nbsp;here&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">((</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#wp_list_filter_ent"><span class="id" title="lemma">wp_list_filter_ent</span></a> (<span class="id" title="var">xsL</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">xsR</span>) (<span class="id" title="keyword">fun</span> <a id="x:411" class="idref" href="#x:411"><span class="id" title="binder"><span id="x:412" class="id">x</span></span></a> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#program_ent.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">xp</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:411"><span class="id" title="variable">x</span></a>)) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> 1%<span class="id" title="var">R</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iSplitR</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">x</span> ψ) "!&gt; H⧖ Hψ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hcmp_spec" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "H⧖"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">rv</span>) "%Hrv".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">((</span></a><a class="idref" href="tachis.tachis.examples.quicksort.html#wp_list_filter_ent"><span class="id" title="lemma">wp_list_filter_ent</span></a> (<span class="id" title="var">xsL</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">xsR</span>) (<span class="id" title="keyword">fun</span> <a id="x:413" class="idref" href="#x:413"><span class="id" title="binder"><span id="x:414" class="id">x</span></span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#program_ent.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">xp</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:413"><span class="id" title="variable">x</span></a>)) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> 1%<span class="id" title="var">R</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iSplitR</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">x</span> ψ) "!&gt; H⧖ Hψ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="var">wp_pure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hcmp_spec" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "H⧖"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "-&gt;".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>; <span class="id" title="var">iApply</span> "Hψ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">lv</span>) "%Hlv".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 9 <span class="id" title="var">wp_pure</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"Hqs" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">List.filter</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">xsL</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">xsR</span>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="var">rv</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "[H⧖R]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iClear</span> "Hqs".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span>; [|<span class="id" title="var">iSplit</span>; [|<span class="id" title="var">iSplit</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4: { <span class="id" title="var">iApply</span> "Hcmp_spec". }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3: { <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup_filter"><span class="id" title="lemma">List.NoDup_filter</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup_remove_1"><span class="id" title="lemma">NoDup_remove_1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hxs</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: { <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hrv</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="tachis.tachis.expected_time_credits.html#etc_irrel"><span class="id" title="lemma">etc_irrel</span></a>; [|<span class="id" title="var">iFrame</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#reverse_order"><span class="id" title="definition">reverse_order</span></a> /<a class="idref" href="tachis.tachis.examples.quicksort.html#index_space"><span class="id" title="definition">index_space</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#seq_length"><span class="id" title="lemma">seq_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank"><span class="id" title="definition">index_to_rank</span></a> /<a class="idref" href="tachis.tachis.examples.quicksort.html#rank"><span class="id" title="definition">rank</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {14}<span class="id" title="var">Hxs</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add_sub_eq_l"><span class="id" title="lemma">Nat.add_sub_eq_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> (@<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">List.filter</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#program_ent.A"><span class="id" title="variable">A</span></a> (<span class="id" title="keyword">fun</span> <a id="y:415" class="idref" href="#y:415"><span class="id" title="binder"><span id="y:417" class="id">y</span></span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#program_ent.A"><span class="id" title="variable">A</span></a> =&gt; @<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#strict"><span class="id" title="definition">strict</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#program_ent.f"><span class="id" title="variable">f</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#y:415"><span class="id" title="variable">y</span></a> <span class="id" title="var">_</span>) <span class="id" title="var">_</span>) <span class="id" title="var">_</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#length"><span class="id" title="abbreviation">length</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">List.filter</span></a> (<a class="idref" href="tachis.prob.distribution.html#53797020b35359960f059fea5400d198"><span class="id" title="notation">∽</span></a> <a class="idref" href="tachis.prob.distribution.html#53797020b35359960f059fea5400d198"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="x:416" class="idref" href="#x:416"><span class="id" title="binder"><span id="x:418" class="id">x</span></span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#program_ent.A"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#program_ent.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">xp</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:416"><span class="id" title="variable">x</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">)</span></a><a class="idref" href="tachis.prob.distribution.html#53797020b35359960f059fea5400d198"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">P</span> (<span class="id" title="var">xsL</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">xsR</span>))); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter_app"><span class="id" title="lemma">List.filter_app</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span>(@<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_false_2"><span class="id" title="lemma">bool_decide_eq_false_2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (@<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#lookup_total"><span class="id" title="definition">lookup_total</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">xp</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">rewrite</span> {2}<span class="id" title="var">Hxs</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#list_lookup_total_middle"><span class="id" title="lemma">list_lookup_total_middle</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hcont</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_ne"><span class="id" title="lemma">strict_ne</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcont</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Htotal</span>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#TotalOrder"><span class="id" title="class">TotalOrder</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#program_ent.f"><span class="id" title="variable">f</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htotal</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">Hrefl</span> <span class="id" title="var">Htrans</span>] <span class="id" title="var">Hanti</span>] <span class="id" title="var">Htrich</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter_ext_in"><span class="id" title="lemma">filter_ext_in</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_not"><span class="id" title="lemma">bool_decide_not</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_ext"><span class="id" title="lemma">bool_decide_ext</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {2}<span class="id" title="var">Hxs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#list_lookup_total_middle"><span class="id" title="lemma">list_lookup_total_middle</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_spec_alt"><span class="id" title="lemma">strict_spec_alt</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hk</span> : <span class="id" title="var">xp</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hxs</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup_remove_2"><span class="id" title="lemma">NoDup_remove_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#in_or_app"><span class="id" title="lemma">in_or_app</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Htrich</span> <span class="id" title="var">a</span> <span class="id" title="var">xp</span>) <span class="id" title="keyword">as</span> [? | [? | ?] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_include"><span class="id" title="lemma">strict_include</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">exfalso</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hf</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_include"><span class="id" title="lemma">strict_include</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [ ? ? ] ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hk</span>, <span class="id" title="var">Hanti</span>; <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter_ext_in"><span class="id" title="lemma">filter_ext_in</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_not"><span class="id" title="lemma">bool_decide_not</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_ext"><span class="id" title="lemma">bool_decide_ext</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {2}<span class="id" title="var">Hxs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#list_lookup_total_middle"><span class="id" title="lemma">list_lookup_total_middle</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_spec_alt"><span class="id" title="lemma">strict_spec_alt</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hk</span> : <span class="id" title="var">xp</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hxs</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup_remove_2"><span class="id" title="lemma">NoDup_remove_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#in_or_app"><span class="id" title="lemma">in_or_app</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Htrich</span> <span class="id" title="var">a</span> <span class="id" title="var">xp</span>) <span class="id" title="keyword">as</span> [? | [? | ?] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_include"><span class="id" title="lemma">strict_include</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">exfalso</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hf</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_include"><span class="id" title="lemma">strict_include</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [ ? ? ] ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hk</span>, <span class="id" title="var">Hanti</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter_length"><span class="id" title="lemma">List.filter_length</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="x:419" class="idref" href="#x:419"><span class="id" title="binder"><span id="x:420" class="id"><span id="x:421" class="id">x</span></span></span></a> : <a class="idref" href="tachis.tachis.examples.quicksort.html#program_ent.A"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#program_ent.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">xp</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:419"><span class="id" title="variable">x</span></a>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hxs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">lR</span>) "(% &amp; %)".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"Hqs" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">List.filter</span></a> (<span class="id" title="keyword">fun</span> <a id="x:422" class="idref" href="#x:422"><span class="id" title="binder"><span id="x:423" class="id">x</span></span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="tachis.tachis.examples.quicksort.html#program_ent.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">xp</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#x:422"><span class="id" title="variable">x</span></a>))) (<span class="id" title="var">xsL</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">xsR</span>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="var">lv</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "[H⧖L]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iClear</span> "Hqs".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span>; [|<span class="id" title="var">iSplit</span>; [|<span class="id" title="var">iSplit</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4: { <span class="id" title="var">iApply</span> "Hcmp_spec". }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3: { <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup_filter"><span class="id" title="lemma">List.NoDup_filter</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup_remove_1"><span class="id" title="lemma">NoDup_remove_1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hxs</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: { <span class="id" title="var">iPureIntro</span>. <span class="id" title="var">done</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iApply</span> <a class="idref" href="tachis.tachis.expected_time_credits.html#etc_irrel"><span class="id" title="lemma">etc_irrel</span></a>; [|<span class="id" title="var">iFrame</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="tachis.tachis.examples.quicksort.html#index_to_rank"><span class="id" title="definition">index_to_rank</span></a> /<a class="idref" href="tachis.tachis.examples.quicksort.html#rank"><span class="id" title="definition">rank</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {13}<span class="id" title="var">Hxs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter_app"><span class="id" title="lemma">List.filter_app</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span>(@<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_eq_false_2"><span class="id" title="lemma">bool_decide_eq_false_2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (@<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#lookup_total"><span class="id" title="definition">lookup_total</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">xp</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">rewrite</span> {2}<span class="id" title="var">Hxs</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#list_lookup_total_middle"><span class="id" title="lemma">list_lookup_total_middle</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hcont</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_ne"><span class="id" title="lemma">strict_ne</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcont</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Htotal</span>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#TotalOrder"><span class="id" title="class">TotalOrder</span></a> <a class="idref" href="tachis.tachis.examples.quicksort.html#program_ent.f"><span class="id" title="variable">f</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htotal</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">Hrefl</span> <span class="id" title="var">Htrans</span>] <span class="id" title="var">Hanti</span>] <span class="id" title="var">Htrich</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter_ext_in"><span class="id" title="lemma">filter_ext_in</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_not"><span class="id" title="lemma">bool_decide_not</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_ext"><span class="id" title="lemma">bool_decide_ext</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {2}<span class="id" title="var">Hxs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#list_lookup_total_middle"><span class="id" title="lemma">list_lookup_total_middle</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_spec_alt"><span class="id" title="lemma">strict_spec_alt</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hk</span> : <span class="id" title="var">xp</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hxs</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup_remove_2"><span class="id" title="lemma">NoDup_remove_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#in_or_app"><span class="id" title="lemma">in_or_app</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> [ ? ? ] ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hk</span>, <span class="id" title="var">Hanti</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Htrich</span> <span class="id" title="var">a</span> <span class="id" title="var">xp</span>) <span class="id" title="keyword">as</span> [? | [? | ?] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_include"><span class="id" title="lemma">strict_include</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hf</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_include"><span class="id" title="lemma">strict_include</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#filter_ext_in"><span class="id" title="lemma">filter_ext_in</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_not"><span class="id" title="lemma">bool_decide_not</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide_ext"><span class="id" title="lemma">bool_decide_ext</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {2}<span class="id" title="var">Hxs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#list_lookup_total_middle"><span class="id" title="lemma">list_lookup_total_middle</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_spec_alt"><span class="id" title="lemma">strict_spec_alt</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hk</span> : <span class="id" title="var">xp</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hxs</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#NoDup_remove_2"><span class="id" title="lemma">NoDup_remove_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#in_or_app"><span class="id" title="lemma">in_or_app</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> [ ? ? ] ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hk</span>, <span class="id" title="var">Hanti</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Htrich</span> <span class="id" title="var">a</span> <span class="id" title="var">xp</span>) <span class="id" title="keyword">as</span> [? | [? | ?] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_include"><span class="id" title="lemma">strict_include</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hf</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.orders.html#strict_include"><span class="id" title="lemma">strict_include</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">lL</span>) "(% &amp; %)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iClear</span> "Hqs".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#wp_list_cons_ent"><span class="id" title="lemma">wp_list_cons_ent</span></a> =&gt; //; <span class="id" title="var">iIntros</span> (<span class="id" title="var">p_xs_gt_s</span> <span class="id" title="var">h_p_xs_gt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#wp_list_append_ent"><span class="id" title="lemma">wp_list_append_ent</span></a> =&gt; //. <span class="id" title="var">iIntros</span> "!&gt;" (<span class="id" title="var">xs_le_p_gt_s</span> <span class="id" title="var">L</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "hφ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="tachis.tachis.examples.quicksort.html#program_ent"><span class="id" title="section">program_ent</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/coq-community/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
