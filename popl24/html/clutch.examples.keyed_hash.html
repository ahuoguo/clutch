<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resources/config.js"></script>
<script type="text/javascript" src="resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">clutch.examples.keyed_hash</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="clutch.clutch.html#"><span class="id" title="library">clutch</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch.examples</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="clutch.examples.hash.html#"><span class="id" title="library">hash</span></a>.<br/>

<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Default</span> <span class="id" title="keyword">Proof</span> <span class="id" title="var">Using</span> "Type*".<br/>

<br/>
<span class="comment">(*&nbsp;A&nbsp;wrapper&nbsp;around&nbsp;the&nbsp;tape&nbsp;hash&nbsp;that&nbsp;gives&nbsp;an&nbsp;interface&nbsp;where&nbsp;the&nbsp;hashing&nbsp;function&nbsp;now&nbsp;takes&nbsp;as&nbsp;input<br/>
&nbsp;&nbsp;&nbsp;a&nbsp;key&nbsp;k&nbsp;and&nbsp;a&nbsp;value&nbsp;v&nbsp;to&nbsp;be&nbsp;hashed.&nbsp;Different&nbsp;keys&nbsp;yield&nbsp;different&nbsp;hashes,&nbsp;and&nbsp;the&nbsp;library<br/>
&nbsp;&nbsp;&nbsp;splits&nbsp;up&nbsp;ownership&nbsp;along&nbsp;keys.<br/>
<br/>
&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;implemented&nbsp;by&nbsp;actually&nbsp;just&nbsp;having&nbsp;a&nbsp;single&nbsp;hash&nbsp;function,<br/>
&nbsp;&nbsp;&nbsp;and&nbsp;on&nbsp;input&nbsp;k&nbsp;and&nbsp;v,&nbsp;we&nbsp;convert&nbsp;the&nbsp;pair&nbsp;(k,&nbsp;v)&nbsp;to&nbsp;a&nbsp;single&nbsp;integer&nbsp;that&nbsp;is&nbsp;then<br/>
&nbsp;&nbsp;&nbsp;hashed.<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="keyed_hash" class="idref" href="#keyed_hash"><span class="id" title="section">keyed_hash</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;we&nbsp;assume&nbsp;the&nbsp;key&nbsp;space&nbsp;/&nbsp;value&nbsp;space&nbsp;are&nbsp;integers&nbsp;in&nbsp;the&nbsp;range<br/>
&nbsp;&nbsp;{0,&nbsp;...,&nbsp;2^n_k&nbsp;-&nbsp;1}&nbsp;and&nbsp;{0,&nbsp;...,&nbsp;2^n_v}&nbsp;for&nbsp;some&nbsp;natural&nbsp;numbers&nbsp;n_k<br/>
&nbsp;&nbsp;and&nbsp;n_v.&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="MAX_KEYS_POW:1" class="idref" href="#MAX_KEYS_POW:1"><span class="id" title="binder">MAX_KEYS_POW</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="MAX_VALS_POW:2" class="idref" href="#MAX_VALS_POW:2"><span class="id" title="binder">MAX_VALS_POW</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="MAX_KEYS" class="idref" href="#MAX_KEYS"><span class="id" title="definition">MAX_KEYS</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.pow"><span class="id" title="definition">Nat.pow</span></a> 2 <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_KEYS_POW"><span class="id" title="variable">MAX_KEYS_POW</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="MAX_VALS" class="idref" href="#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.pow"><span class="id" title="definition">Nat.pow</span></a> 2 <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_VALS_POW"><span class="id" title="variable">MAX_VALS_POW</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="MAX_KEYS_Z" class="idref" href="#MAX_KEYS_Z"><span class="id" title="definition">MAX_KEYS_Z</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.pow"><span class="id" title="definition">Z.pow</span></a> 2 <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_KEYS_POW"><span class="id" title="variable">MAX_KEYS_POW</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="MAX_VALS_Z" class="idref" href="#MAX_VALS_Z"><span class="id" title="definition">MAX_VALS_Z</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.pow"><span class="id" title="definition">Z.pow</span></a> 2 <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_VALS_POW"><span class="id" title="variable">MAX_VALS_POW</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="MAX_HASH_DOM" class="idref" href="#MAX_HASH_DOM"><span class="id" title="definition">MAX_HASH_DOM</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> := (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.pow"><span class="id" title="definition">Nat.pow</span></a> 2 (<a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_KEYS_POW"><span class="id" title="variable">MAX_KEYS_POW</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_VALS_POW"><span class="id" title="variable">MAX_VALS_POW</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="enc" class="idref" href="#enc"><span class="id" title="definition">enc</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">:</span></a> "k" "v"<a class="idref" href="clutch.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">(</span></a>"k" <a class="idref" href="clutch.prob_lang.notation.html#c8ef8bd228df80dd6e55e6a5753e9aee"><span class="id" title="notation">≪</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_VALS_POW"><span class="id" title="variable">MAX_VALS_POW</span></a><a class="idref" href="clutch.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a> "v".<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="enc_gallina" class="idref" href="#enc_gallina"><span class="id" title="definition">enc_gallina</span></a> (<a id="k:3" class="idref" href="#k:3"><span class="id" title="binder">k</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="v:4" class="idref" href="#v:4"><span class="id" title="binder">v</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.shiftl"><span class="id" title="definition">Nat.shiftl</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:3"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_VALS_POW"><span class="id" title="variable">MAX_VALS_POW</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v:4"><span class="id" title="variable">v</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="val_of_enc_gallina" class="idref" href="#val_of_enc_gallina"><span class="id" title="definition">val_of_enc_gallina</span></a> (<a id="x:5" class="idref" href="#x:5"><span class="id" title="binder">x</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#x:5"><span class="id" title="variable">x</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">mod</span><span class="id" title="notation">`</span> <span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.pow"><span class="id" title="definition">Nat.pow</span></a> 2 <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_VALS_POW"><span class="id" title="variable">MAX_VALS_POW</span></a><span class="id" title="notation">)</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="key_of_enc_gallina" class="idref" href="#key_of_enc_gallina"><span class="id" title="definition">key_of_enc_gallina</span></a> (<a id="x:6" class="idref" href="#x:6"><span class="id" title="binder">x</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.shiftr"><span class="id" title="definition">Nat.shiftr</span></a> (<a class="idref" href="clutch.examples.keyed_hash.html#x:6"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#val_of_enc_gallina"><span class="id" title="definition">val_of_enc_gallina</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#x:6"><span class="id" title="variable">x</span></a>) <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_VALS_POW"><span class="id" title="variable">MAX_VALS_POW</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="pow2_nonzero" class="idref" href="#pow2_nonzero"><span class="id" title="lemma">pow2_nonzero</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:7" class="idref" href="#x:7"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> 2 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#x:7"><span class="id" title="variable">x</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">x</span> =&gt; /=; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="not_in_key" class="idref" href="#not_in_key"><span class="id" title="definition">not_in_key</span></a> <a id="x:8" class="idref" href="#x:8"><span class="id" title="binder">x</span></a> <a id="k:9" class="idref" href="#k:9"><span class="id" title="binder">k</span></a> : <span class="id" title="keyword">Prop</span> := (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="v:10" class="idref" href="#v:10"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:9"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v:10"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#x:8"><span class="id" title="variable">x</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="val_of_enc_gallina_spec1" class="idref" href="#val_of_enc_gallina_spec1"><span class="id" title="lemma">val_of_enc_gallina_spec1</span></a> <a id="k:11" class="idref" href="#k:11"><span class="id" title="binder">k</span></a> <a id="v:12" class="idref" href="#v:12"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#v:12"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#val_of_enc_gallina"><span class="id" title="definition">val_of_enc_gallina</span></a> (<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:11"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v:12"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v:12"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.keyed_hash.html#val_of_enc_gallina"><span class="id" title="definition">val_of_enc_gallina</span></a> /<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a>/<a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.shiftr_div_pow2"><span class="id" title="lemma">Nat.shiftr_div_pow2</span></a> ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.shiftl_mul_pow2"><span class="id" title="lemma">Nat.shiftl_mul_pow2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="clutch.examples.keyed_hash.html#pow2_nonzero"><span class="id" title="lemma">pow2_nonzero</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_VALS_POW"><span class="id" title="variable">MAX_VALS_POW</span></a>) =&gt; ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.mod_add"><span class="id" title="lemma">Nat.mod_add</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.mod_small"><span class="id" title="lemma">Nat.mod_small</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="val_of_enc_gallina_spec2" class="idref" href="#val_of_enc_gallina_spec2"><span class="id" title="lemma">val_of_enc_gallina_spec2</span></a> (<a id="x:13" class="idref" href="#x:13"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#val_of_enc_gallina"><span class="id" title="definition">val_of_enc_gallina</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#x:13"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="clutch.examples.keyed_hash.html#pow2_nonzero"><span class="id" title="lemma">pow2_nonzero</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_VALS_POW"><span class="id" title="variable">MAX_VALS_POW</span></a>) =&gt; ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<span class="id" title="var">x</span> <span class="id" title="notation">`</span><span class="id" title="notation">mod</span><span class="id" title="notation">`</span> <span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.pow"><span class="id" title="definition">Nat.pow</span></a> 2 <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_VALS_POW"><span class="id" title="variable">MAX_VALS_POW</span></a><span class="id" title="notation">)</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.pow"><span class="id" title="definition">Nat.pow</span></a> 2 <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_VALS_POW"><span class="id" title="variable">MAX_VALS_POW</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.keyed_hash.html#val_of_enc_gallina"><span class="id" title="definition">val_of_enc_gallina</span></a>/<a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a>. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.mod_upper_bound"><span class="id" title="lemma">Nat.mod_upper_bound</span></a>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="key_of_enc_gallina_spec1" class="idref" href="#key_of_enc_gallina_spec1"><span class="id" title="lemma">key_of_enc_gallina_spec1</span></a> (<a id="x:14" class="idref" href="#x:14"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="k:15" class="idref" href="#k:15"><span class="id" title="binder">k</span></a> <a id="v:16" class="idref" href="#v:16"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#v:16"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#key_of_enc_gallina"><span class="id" title="definition">key_of_enc_gallina</span></a> (<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:15"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v:16"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:15"><span class="id" title="variable">k</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.keyed_hash.html#key_of_enc_gallina"><span class="id" title="definition">key_of_enc_gallina</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#val_of_enc_gallina_spec1"><span class="id" title="lemma">val_of_enc_gallina_spec1</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a>/<a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.add_sub"><span class="id" title="lemma">Nat.add_sub</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.shiftr_shiftl_r"><span class="id" title="lemma">Nat.shiftr_shiftl_r</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_VALS_POW"><span class="id" title="variable">MAX_VALS_POW</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_VALS_POW"><span class="id" title="variable">MAX_VALS_POW</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0) <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.shiftr_0_r"><span class="id" title="lemma">Nat.shiftr_0_r</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Nat_div_sub_mod" class="idref" href="#Nat_div_sub_mod"><span class="id" title="lemma">Nat_div_sub_mod</span></a> <a id="x:17" class="idref" href="#x:17"><span class="id" title="binder">x</span></a> <a id="k:18" class="idref" href="#k:18"><span class="id" title="binder">k</span></a> :<br/>
&nbsp;&nbsp;&nbsp;0 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:18"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#x:17"><span class="id" title="variable">x</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">div</span><span class="id" title="notation">`</span> <a class="idref" href="clutch.examples.keyed_hash.html#k:18"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.keyed_hash.html#x:17"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#x:17"><span class="id" title="variable">x</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">mod</span><span class="id" title="notation">`</span> <a class="idref" href="clutch.examples.keyed_hash.html#k:18"><span class="id" title="variable">k</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">`</span><span class="id" title="notation">div</span><span class="id" title="notation">`</span> <a class="idref" href="clutch.examples.keyed_hash.html#k:18"><span class="id" title="variable">k</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.mod_eq"><span class="id" title="lemma">Nat.mod_eq</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> <span class="id" title="var">x</span> <span class="id" title="notation">`</span><span class="id" title="notation">div</span><span class="id" title="notation">`</span> <span class="id" title="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">with</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> <span class="id" title="var">x</span> <span class="id" title="notation">`</span><span class="id" title="notation">div</span><span class="id" title="notation">`</span> <span class="id" title="var">k</span>); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">remember</span> (<span class="id" title="var">x</span> <span class="id" title="notation">`</span><span class="id" title="notation">div</span><span class="id" title="notation">`</span> <span class="id" title="var">k</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">y</span>. <span class="id" title="tactic">cut</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> <span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="var">x</span>); <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqy</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.mul_div_le"><span class="id" title="lemma">Nat.mul_div_le</span></a>; <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.mul_comm"><span class="id" title="lemma">Nat.mul_comm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.div_mul"><span class="id" title="lemma">Nat.div_mul</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="enc_gallina_inv" class="idref" href="#enc_gallina_inv"><span class="id" title="lemma">enc_gallina_inv</span></a> <a id="x:19" class="idref" href="#x:19"><span class="id" title="binder">x</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a> (<a class="idref" href="clutch.examples.keyed_hash.html#key_of_enc_gallina"><span class="id" title="definition">key_of_enc_gallina</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#x:19"><span class="id" title="variable">x</span></a>) (<a class="idref" href="clutch.examples.keyed_hash.html#val_of_enc_gallina"><span class="id" title="definition">val_of_enc_gallina</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#x:19"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#x:19"><span class="id" title="variable">x</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a>/<a class="idref" href="clutch.examples.keyed_hash.html#key_of_enc_gallina"><span class="id" title="definition">key_of_enc_gallina</span></a>/<a class="idref" href="clutch.examples.keyed_hash.html#val_of_enc_gallina"><span class="id" title="definition">val_of_enc_gallina</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.shiftr_div_pow2"><span class="id" title="lemma">Nat.shiftr_div_pow2</span></a> ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.shiftl_mul_pow2"><span class="id" title="lemma">Nat.shiftl_mul_pow2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {1}(<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.div_mod_eq"><span class="id" title="lemma">Nat.div_mod_eq</span></a> <span class="id" title="var">x</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.pow"><span class="id" title="definition">Nat.pow</span></a> 2 <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_VALS_POW"><span class="id" title="variable">MAX_VALS_POW</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.mul_comm"><span class="id" title="lemma">Nat.mul_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.examples.keyed_hash.html#Nat_div_sub_mod"><span class="id" title="lemma">Nat_div_sub_mod</span></a> //. <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.examples.keyed_hash.html#pow2_nonzero"><span class="id" title="lemma">pow2_nonzero</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="enc_gallina_mono1" class="idref" href="#enc_gallina_mono1"><span class="id" title="lemma">enc_gallina_mono1</span></a> <a id="k1:20" class="idref" href="#k1:20"><span class="id" title="binder">k1</span></a> <a id="k2:21" class="idref" href="#k2:21"><span class="id" title="binder">k2</span></a> <a id="v1:22" class="idref" href="#v1:22"><span class="id" title="binder">v1</span></a> <a id="v2:23" class="idref" href="#v2:23"><span class="id" title="binder">v2</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#k1:20"><span class="id" title="variable">k1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k2:21"><span class="id" title="variable">k2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v1:22"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v2:23"><span class="id" title="variable">v2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k1:20"><span class="id" title="variable">k1</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v1:22"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k2:21"><span class="id" title="variable">k2</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v2:23"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlt</span> <span class="id" title="var">Hle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.shiftr_div_pow2"><span class="id" title="lemma">Nat.shiftr_div_pow2</span></a> ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.shiftl_mul_pow2"><span class="id" title="lemma">Nat.shiftl_mul_pow2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="clutch.examples.keyed_hash.html#pow2_nonzero"><span class="id" title="lemma">pow2_nonzero</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_VALS_POW"><span class="id" title="variable">MAX_VALS_POW</span></a>) =&gt; <span class="id" title="var">Hnz</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (2 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_VALS_POW"><span class="id" title="variable">MAX_VALS_POW</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<span class="id" title="var">k1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> <span class="id" title="var">z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">k2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> <span class="id" title="var">z</span>); <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.Mult.html#mult_lt_compat_r_stt"><span class="id" title="definition">Mult.mult_lt_compat_r_stt</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="enc_gallina_mono2" class="idref" href="#enc_gallina_mono2"><span class="id" title="lemma">enc_gallina_mono2</span></a> <a id="k1:24" class="idref" href="#k1:24"><span class="id" title="binder">k1</span></a> <a id="k2:25" class="idref" href="#k2:25"><span class="id" title="binder">k2</span></a> <a id="v1:26" class="idref" href="#v1:26"><span class="id" title="binder">v1</span></a> <a id="v2:27" class="idref" href="#v2:27"><span class="id" title="binder">v2</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#k1:24"><span class="id" title="variable">k1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k2:25"><span class="id" title="variable">k2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v1:26"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v2:27"><span class="id" title="variable">v2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k1:24"><span class="id" title="variable">k1</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v1:26"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k2:25"><span class="id" title="variable">k2</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v2:27"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlt</span> <span class="id" title="var">Hle1</span> <span class="id" title="var">Hle2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="clutch.examples.keyed_hash.html#pow2_nonzero"><span class="id" title="lemma">pow2_nonzero</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_VALS_POW"><span class="id" title="variable">MAX_VALS_POW</span></a>) =&gt; <span class="id" title="var">Hnz</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.shiftr_div_pow2"><span class="id" title="lemma">Nat.shiftr_div_pow2</span></a> ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.shiftl_mul_pow2"><span class="id" title="lemma">Nat.shiftl_mul_pow2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.lt_le_trans"><span class="id" title="lemma">Nat.lt_le_trans</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">k2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_VALS_POW"><span class="id" title="variable">MAX_VALS_POW</span></a>)); <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.lt_le_trans"><span class="id" title="lemma">Nat.lt_le_trans</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">(</span></a><span class="id" title="var">k1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_VALS_POW"><span class="id" title="variable">MAX_VALS_POW</span></a>)); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.mul_le_mono_r"><span class="id" title="lemma">Nat.mul_le_mono_r</span></a>; <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hle1</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="enc_gallina_mono2_inv" class="idref" href="#enc_gallina_mono2_inv"><span class="id" title="lemma">enc_gallina_mono2_inv</span></a> <a id="k1:28" class="idref" href="#k1:28"><span class="id" title="binder">k1</span></a> <a id="k2:29" class="idref" href="#k2:29"><span class="id" title="binder">k2</span></a> <a id="v1:30" class="idref" href="#v1:30"><span class="id" title="binder">v1</span></a> <a id="v2:31" class="idref" href="#v2:31"><span class="id" title="binder">v2</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k1:28"><span class="id" title="variable">k1</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v1:30"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k2:29"><span class="id" title="variable">k2</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v2:31"><span class="id" title="variable">v2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#v1:30"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#v2:31"><span class="id" title="variable">v2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#k1:28"><span class="id" title="variable">k1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k2:29"><span class="id" title="variable">k2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Henc</span> <span class="id" title="var">Hle1</span> <span class="id" title="var">Hle2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">k2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">k1</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hlt</span>|]; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_mono2"><span class="id" title="lemma">enc_gallina_mono2</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hlt</span> <span class="id" title="var">Hle2</span> <span class="id" title="var">Hle1</span>). <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="enc_gallina_inj" class="idref" href="#enc_gallina_inj"><span class="id" title="lemma">enc_gallina_inj</span></a> <a id="k1:32" class="idref" href="#k1:32"><span class="id" title="binder">k1</span></a> <a id="k2:33" class="idref" href="#k2:33"><span class="id" title="binder">k2</span></a> <a id="v1:34" class="idref" href="#v1:34"><span class="id" title="binder">v1</span></a> <a id="v2:35" class="idref" href="#v2:35"><span class="id" title="binder">v2</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k1:32"><span class="id" title="variable">k1</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v1:34"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k2:33"><span class="id" title="variable">k2</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v2:35"><span class="id" title="variable">v2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#v1:34"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#v2:35"><span class="id" title="variable">v2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#k1:32"><span class="id" title="variable">k1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k2:33"><span class="id" title="variable">k2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v1:34"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v2:35"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Henc</span> <span class="id" title="var">Hle1</span> <span class="id" title="var">Hle2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">k1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">k2</span>) <span class="id" title="keyword">as</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.le_antisymm"><span class="id" title="lemma">Nat.le_antisymm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">eapply</span> (<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_mono2_inv"><span class="id" title="lemma">enc_gallina_mono2_inv</span></a> <span class="id" title="var">k1</span> <span class="id" title="var">k2</span> <span class="id" title="var">v1</span> <span class="id" title="var">v2</span>); <span class="id" title="tactic">eauto</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">eapply</span> (<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_mono2_inv"><span class="id" title="lemma">enc_gallina_mono2_inv</span></a> <span class="id" title="var">k2</span> <span class="id" title="var">k1</span> <span class="id" title="var">v2</span> <span class="id" title="var">v1</span>); <span class="id" title="tactic">eauto</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Henc</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="enc_hits_max" class="idref" href="#enc_hits_max"><span class="id" title="lemma">enc_hits_max</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_KEYS"><span class="id" title="definition">MAX_KEYS</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_HASH_DOM"><span class="id" title="definition">MAX_HASH_DOM</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a>/<a class="idref" href="clutch.examples.keyed_hash.html#MAX_HASH_DOM"><span class="id" title="definition">MAX_HASH_DOM</span></a>/<a class="idref" href="clutch.examples.keyed_hash.html#MAX_KEYS"><span class="id" title="definition">MAX_KEYS</span></a>/<a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.shiftr_div_pow2"><span class="id" title="lemma">Nat.shiftr_div_pow2</span></a> ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.shiftl_mul_pow2"><span class="id" title="lemma">Nat.shiftl_mul_pow2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.pow_add_r"><span class="id" title="lemma">Nat.pow_add_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="clutch.examples.keyed_hash.html#pow2_nonzero"><span class="id" title="lemma">pow2_nonzero</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_VALS_POW"><span class="id" title="variable">MAX_VALS_POW</span></a>) =&gt; ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="clutch.examples.keyed_hash.html#pow2_nonzero"><span class="id" title="lemma">pow2_nonzero</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_KEYS_POW"><span class="id" title="variable">MAX_KEYS_POW</span></a>) =&gt; ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (2 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_KEYS_POW"><span class="id" title="variable">MAX_KEYS_POW</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a>2 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_KEYS_POW"><span class="id" title="variable">MAX_KEYS_POW</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsub1</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="key_of_enc_gallina_spec2" class="idref" href="#key_of_enc_gallina_spec2"><span class="id" title="lemma">key_of_enc_gallina_spec2</span></a> (<a id="x:36" class="idref" href="#x:36"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#x:36"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_HASH_DOM"><span class="id" title="definition">MAX_HASH_DOM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#key_of_enc_gallina"><span class="id" title="definition">key_of_enc_gallina</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#x:36"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_KEYS"><span class="id" title="definition">MAX_KEYS</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_mono2_inv"><span class="id" title="lemma">enc_gallina_mono2_inv</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="clutch.examples.keyed_hash.html#val_of_enc_gallina"><span class="id" title="definition">val_of_enc_gallina</span></a> <span class="id" title="var">x</span>) (<a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="clutch.examples.keyed_hash.html#val_of_enc_gallina_spec2"><span class="id" title="lemma">val_of_enc_gallina_spec2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_inv"><span class="id" title="lemma">enc_gallina_inv</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#enc_hits_max"><span class="id" title="lemma">enc_hits_max</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="enc_gallina_range" class="idref" href="#enc_gallina_range"><span class="id" title="lemma">enc_gallina_range</span></a> <a id="k:37" class="idref" href="#k:37"><span class="id" title="binder">k</span></a> <a id="v:38" class="idref" href="#v:38"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#k:37"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_KEYS"><span class="id" title="definition">MAX_KEYS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#v:38"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:37"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v:38"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_HASH_DOM"><span class="id" title="definition">MAX_HASH_DOM</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a>/<a class="idref" href="clutch.examples.keyed_hash.html#MAX_KEYS"><span class="id" title="definition">MAX_KEYS</span></a>/<a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a>/<a class="idref" href="clutch.examples.keyed_hash.html#MAX_HASH_DOM"><span class="id" title="definition">MAX_HASH_DOM</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.shiftl_mul_pow2"><span class="id" title="lemma">Nat.shiftl_mul_pow2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hsub_le</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="a:41" class="idref" href="#a:41"><span class="id" title="binder">a</span></a> <a id="b:42" class="idref" href="#b:42"><span class="id" title="binder">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#b:40"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#a:39"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="clutch.examples.keyed_hash.html#b:40"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#a:39"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#b:40"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hsub</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:44" class="idref" href="#x:44"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#x:43"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="clutch.examples.keyed_hash.html#x:43"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#x:43"><span class="id" title="variable">x</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlt1</span> <span class="id" title="var">Hlt2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="clutch.examples.keyed_hash.html#pow2_nonzero"><span class="id" title="lemma">pow2_nonzero</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_VALS_POW"><span class="id" title="variable">MAX_VALS_POW</span></a>) =&gt; ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="clutch.examples.keyed_hash.html#pow2_nonzero"><span class="id" title="lemma">pow2_nonzero</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_KEYS_POW"><span class="id" title="variable">MAX_KEYS_POW</span></a>) =&gt; ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hsub_le</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlt1</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hsub_le</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlt2</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<span class="id" title="var">Hsub</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.examples.keyed_hash.html#pow2_nonzero"><span class="id" title="lemma">pow2_nonzero</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.pow_add_r"><span class="id" title="lemma">Nat.pow_add_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.le_lt_trans"><span class="id" title="lemma">Nat.le_lt_trans</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">(</span></a>2 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_KEYS_POW"><span class="id" title="variable">MAX_KEYS_POW</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_VALS_POW"><span class="id" title="variable">MAX_VALS_POW</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a>2 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_VALS_POW"><span class="id" title="variable">MAX_VALS_POW</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hcompat</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="a:49" class="idref" href="#a:49"><span class="id" title="binder">a</span></a> <a id="b:50" class="idref" href="#b:50"><span class="id" title="binder">b</span></a> <a id="c:51" class="idref" href="#c:51"><span class="id" title="binder">c</span></a> <a id="d:52" class="idref" href="#d:52"><span class="id" title="binder">d</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#a:45"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#b:46"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#c:47"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#d:48"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#a:45"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#c:47"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#b:46"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#d:48"><span class="id" title="variable">d</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hcompat</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.mul_le_mono_r"><span class="id" title="lemma">Nat.mul_le_mono_r</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (2 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_KEYS_POW"><span class="id" title="variable">MAX_KEYS_POW</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a>2 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_KEYS_POW"><span class="id" title="variable">MAX_KEYS_POW</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsub1</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="init_keyed_hash" class="idref" href="#init_keyed_hash"><span class="id" title="definition">init_keyed_hash</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">:</span></a> "_"<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "f" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.examples.hash.html#init_hash"><span class="id" title="definition">init_hash</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.keyed_hash.html#MAX_HASH_DOM"><span class="id" title="definition">MAX_HASH_DOM</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#3d489cbe8f13619f2070e081d1ecd1f6"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#3d489cbe8f13619f2070e081d1ecd1f6"><span class="id" title="notation">:</span></a> "k" "v"<a class="idref" href="clutch.prob_lang.notation.html#3d489cbe8f13619f2070e081d1ecd1f6"><span class="id" title="notation">,</span></a> "f" (<a class="idref" href="clutch.examples.keyed_hash.html#enc"><span class="id" title="definition">enc</span></a> "k" "v")<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="clutchRGS0:54" class="idref" href="#clutchRGS0:54"><span class="id" title="binder">!</span></a><a id="clutchRGS0:54" class="idref" href="#clutchRGS0:54"><span class="id" title="binder">clutchRGS</span></a> <a id="clutchRGS0:54" class="idref" href="#clutchRGS0:54"><span class="id" title="binder">Σ</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_enc_spec" class="idref" href="#wp_enc_spec"><span class="id" title="lemma">wp_enc_spec</span></a> (<a id="k:55" class="idref" href="#k:55"><span class="id" title="binder">k</span></a> <a id="v:56" class="idref" href="#v:56"><span class="id" title="binder">v</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="E:57" class="idref" href="#E:57"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">⌜</span> <a class="idref" href="clutch.examples.keyed_hash.html#k:55"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_KEYS"><span class="id" title="definition">MAX_KEYS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v:56"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8.html#3ccab6e0e5cec5d8305913b11c2aa678"><span class="id" title="notation">≤</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a> <span class="id" title="notation">⌝</span> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#enc"><span class="id" title="definition">enc</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.keyed_hash.html#k:55"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.keyed_hash.html#v:56"><span class="id" title="variable">v</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.examples.keyed_hash.html#E:57"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">(</span><a id="n:58" class="idref" href="#n:58"><span class="id" title="binder">n</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><span class="id" title="notation">),</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.keyed_hash.html#n:58"><span class="id" title="variable">n</span></a><span class="id" title="notation">;</span> <span class="id" title="notation">⌜</span> <a class="idref" href="clutch.examples.keyed_hash.html#n:58"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:55"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v:56"><span class="id" title="variable">v</span></a> <span class="id" title="notation">⌝</span> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.keyed_hash.html#enc"><span class="id" title="definition">enc</span></a>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "%Hdom HΦ". <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.shiftl_mul_pow2"><span class="id" title="lemma">Z.shiftl_mul_pow2</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSpecialize</span> <span class="id" title="notation">(</span>"HΦ" <span class="id" title="notation">$!</span> <span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a> <span class="id" title="var">k</span> <span class="id" title="var">v</span>))<span class="id" title="notation">))</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.shiftl_mul_pow2"><span class="id" title="lemma">Nat.shiftl_mul_pow2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.id"><span class="id" title="lemma">Nat2Z.id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_add"><span class="id" title="lemma">Nat2Z.inj_add</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_mul"><span class="id" title="lemma">Nat2Z.inj_mul</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_pow"><span class="id" title="lemma">Nat2Z.inj_pow</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HΦ". <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="fin_hash_dom_space" class="idref" href="#fin_hash_dom_space"><span class="id" title="definition">fin_hash_dom_space</span></a> : <span class="id" title="keyword">Type</span> := <span class="id" title="abbreviation">fin</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="clutch.examples.keyed_hash.html#MAX_HASH_DOM"><span class="id" title="definition">MAX_HASH_DOM</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="fin_key_space" class="idref" href="#fin_key_space"><span class="id" title="definition">fin_key_space</span></a> : <span class="id" title="keyword">Type</span> := <span class="id" title="abbreviation">fin</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="clutch.examples.keyed_hash.html#MAX_KEYS"><span class="id" title="definition">MAX_KEYS</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="fin_val_space" class="idref" href="#fin_val_space"><span class="id" title="definition">fin_val_space</span></a> : <span class="id" title="keyword">Type</span> := <span class="id" title="abbreviation">fin</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;Instance&nbsp;finite_fin_val_space&nbsp;:&nbsp;Finite&nbsp;(fin_val_space).<br/>
&nbsp;&nbsp;Proof.&nbsp;apply&nbsp;_.&nbsp;Qed.<br/>
&nbsp;&nbsp;Instance&nbsp;finite_fin_key_space&nbsp;:&nbsp;Finite&nbsp;(fin_key_space).<br/>
&nbsp;&nbsp;Proof.&nbsp;apply&nbsp;_.&nbsp;Qed.<br/>
&nbsp;&nbsp;Instance&nbsp;finite_fin_hash_dom_space&nbsp;:&nbsp;Finite&nbsp;(fin_hash_dom_space).<br/>
&nbsp;&nbsp;Proof.&nbsp;apply&nbsp;_.&nbsp;Qed.<br/>
&nbsp;&nbsp;&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="GHOST_MAP:59" class="idref" href="#GHOST_MAP:59"><span class="id" title="binder">GHOST_MAP</span></a>: <span class="id" title="class">ghost_mapG</span> <a class="idref" href="clutch.examples.keyed_hash.html#23e38b6148d439587bec160bff8e568b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#fin_hash_dom_space"><span class="id" title="definition">fin_hash_dom_space</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="fin_to_nat_S_le" class="idref" href="#fin_to_nat_S_le"><span class="id" title="lemma">fin_to_nat_S_le</span></a> <a id="n:60" class="idref" href="#n:60"><span class="id" title="binder">n</span></a> (<a id="i:61" class="idref" href="#i:61"><span class="id" title="binder">i</span></a>: <span class="id" title="abbreviation">fin</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#n:60"><span class="id" title="variable">n</span></a>)) : <a class="idref" href="clutch.examples.keyed_hash.html#i:61"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#n:60"><span class="id" title="variable">n</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="lemma">fin_to_nat_lt</span> <span class="id" title="var">i</span>). <span class="id" title="var">lia</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="enc_gallina_fin" class="idref" href="#enc_gallina_fin"><span class="id" title="definition">enc_gallina_fin</span></a> (<a id="k:62" class="idref" href="#k:62"><span class="id" title="binder">k</span></a> : <a class="idref" href="clutch.examples.keyed_hash.html#fin_key_space"><span class="id" title="definition">fin_key_space</span></a>) (<a id="v:63" class="idref" href="#v:63"><span class="id" title="binder">v</span></a>: <a class="idref" href="clutch.examples.keyed_hash.html#fin_val_space"><span class="id" title="definition">fin_val_space</span></a>) : <a class="idref" href="clutch.examples.keyed_hash.html#fin_hash_dom_space"><span class="id" title="definition">fin_hash_dom_space</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (@<span class="id" title="abbreviation">nat_to_fin</span> (<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a> (<span class="id" title="definition">fin_to_nat</span> <span class="id" title="var">k</span>) (<span class="id" title="definition">fin_to_nat</span> <span class="id" title="var">v</span>)) <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">abstract</span> (<span class="id" title="tactic">apply</span> (<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_range"><span class="id" title="lemma">enc_gallina_range</span></a>); <span class="id" title="tactic">apply</span> <span class="id" title="lemma">fin_to_nat_lt</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="key_of_enc_gallina_fin" class="idref" href="#key_of_enc_gallina_fin"><span class="id" title="definition">key_of_enc_gallina_fin</span></a> (<a id="x:64" class="idref" href="#x:64"><span class="id" title="binder">x</span></a>: <a class="idref" href="clutch.examples.keyed_hash.html#fin_hash_dom_space"><span class="id" title="definition">fin_hash_dom_space</span></a>) : <a class="idref" href="clutch.examples.keyed_hash.html#fin_key_space"><span class="id" title="definition">fin_key_space</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (@<span class="id" title="abbreviation">nat_to_fin</span> (<a class="idref" href="clutch.examples.keyed_hash.html#key_of_enc_gallina"><span class="id" title="definition">key_of_enc_gallina</span></a> <span class="id" title="var">x</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">abstract</span> (<span class="id" title="tactic">cut</span> (<a class="idref" href="clutch.examples.keyed_hash.html#key_of_enc_gallina"><span class="id" title="definition">key_of_enc_gallina</span></a> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_KEYS"><span class="id" title="definition">MAX_KEYS</span></a>); <span class="id" title="tactic">first</span> <span class="id" title="var">lia</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.examples.keyed_hash.html#key_of_enc_gallina_spec2"><span class="id" title="lemma">key_of_enc_gallina_spec2</span></a>; <span class="id" title="tactic">specialize</span> (<span class="id" title="lemma">fin_to_nat_lt</span> <span class="id" title="var">x</span>); <span class="id" title="var">lia</span>; <span class="id" title="tactic">auto</span>). }<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="val_of_enc_gallina_fin" class="idref" href="#val_of_enc_gallina_fin"><span class="id" title="definition">val_of_enc_gallina_fin</span></a> (<a id="x:65" class="idref" href="#x:65"><span class="id" title="binder">x</span></a>: <a class="idref" href="clutch.examples.keyed_hash.html#fin_hash_dom_space"><span class="id" title="definition">fin_hash_dom_space</span></a>) : <a class="idref" href="clutch.examples.keyed_hash.html#fin_val_space"><span class="id" title="definition">fin_val_space</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (@<span class="id" title="abbreviation">nat_to_fin</span> (<a class="idref" href="clutch.examples.keyed_hash.html#val_of_enc_gallina"><span class="id" title="definition">val_of_enc_gallina</span></a> <span class="id" title="var">x</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">abstract</span> (<span class="id" title="tactic">cut</span> (<a class="idref" href="clutch.examples.keyed_hash.html#val_of_enc_gallina"><span class="id" title="definition">val_of_enc_gallina</span></a> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a>); <span class="id" title="tactic">first</span> <span class="id" title="var">lia</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.examples.keyed_hash.html#val_of_enc_gallina_spec2"><span class="id" title="lemma">val_of_enc_gallina_spec2</span></a>; <span class="id" title="var">lia</span>; <span class="id" title="tactic">auto</span>). }<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="enc_gallina_fin_inv" class="idref" href="#enc_gallina_fin_inv"><span class="id" title="lemma">enc_gallina_fin_inv</span></a> <a id="x:66" class="idref" href="#x:66"><span class="id" title="binder">x</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin"><span class="id" title="definition">enc_gallina_fin</span></a> (<a class="idref" href="clutch.examples.keyed_hash.html#key_of_enc_gallina_fin"><span class="id" title="definition">key_of_enc_gallina_fin</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#x:66"><span class="id" title="variable">x</span></a>) (<a class="idref" href="clutch.examples.keyed_hash.html#val_of_enc_gallina_fin"><span class="id" title="definition">val_of_enc_gallina_fin</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#x:66"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#x:66"><span class="id" title="variable">x</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin"><span class="id" title="definition">enc_gallina_fin</span></a>/<a class="idref" href="clutch.examples.keyed_hash.html#key_of_enc_gallina_fin"><span class="id" title="definition">key_of_enc_gallina_fin</span></a>/<a class="idref" href="clutch.examples.keyed_hash.html#val_of_enc_gallina_fin"><span class="id" title="definition">val_of_enc_gallina_fin</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="definition">inj</span> <span class="id" title="definition">fin_to_nat</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<span class="id" title="lemma">fin_to_nat_to_fin</span> <a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_inv"><span class="id" title="lemma">enc_gallina_inv</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="enc_gallina_fin_inj" class="idref" href="#enc_gallina_fin_inj"><span class="id" title="lemma">enc_gallina_fin_inj</span></a> <a id="k1:67" class="idref" href="#k1:67"><span class="id" title="binder">k1</span></a> <a id="k2:68" class="idref" href="#k2:68"><span class="id" title="binder">k2</span></a> <a id="v1:69" class="idref" href="#v1:69"><span class="id" title="binder">v1</span></a> <a id="v2:70" class="idref" href="#v2:70"><span class="id" title="binder">v2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin"><span class="id" title="definition">enc_gallina_fin</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k1:67"><span class="id" title="variable">k1</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v1:69"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin"><span class="id" title="definition">enc_gallina_fin</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k2:68"><span class="id" title="variable">k2</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v2:70"><span class="id" title="variable">v2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#k1:67"><span class="id" title="variable">k1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k2:68"><span class="id" title="variable">k2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v1:69"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v2:70"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin"><span class="id" title="definition">enc_gallina_fin</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hfeq</span>%(<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#f_equal"><span class="id" title="lemma">f_equal</span></a> <span class="id" title="definition">fin_to_nat</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<span class="id" title="lemma">fin_to_nat_to_fin</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfeq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_inj"><span class="id" title="lemma">enc_gallina_inj</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfeq</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="clutch.examples.keyed_hash.html#fin_to_nat_S_le"><span class="id" title="lemma">fin_to_nat_S_le</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">apply</span> (<span class="id" title="definition">inj</span> <span class="id" title="definition">fin_to_nat</span>); <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="khashN" class="idref" href="#khashN"><span class="id" title="definition">khashN</span></a> := <span class="id" title="definition">nroot</span><span class="id" title="notation">.@</span>"khash".<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="ghost_phys_dom" class="idref" href="#ghost_phys_dom"><span class="id" title="definition">ghost_phys_dom</span></a> (<a id="mphys:71" class="idref" href="#mphys:71"><span class="id" title="binder">mphys</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) (<a id="mghost:72" class="idref" href="#mghost:72"><span class="id" title="binder">mghost</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="clutch.examples.keyed_hash.html#fin_hash_dom_space"><span class="id" title="definition">fin_hash_dom_space</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:73" class="idref" href="#x:73"><span class="id" title="binder">x</span></a> <a id="b:74" class="idref" href="#b:74"><span class="id" title="binder">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#mphys:71"><span class="id" title="variable">mphys</span></a> <span class="id" title="notation">!!</span> <span class="id" title="notation">(</span><span class="id" title="definition">fin_to_nat</span> <a class="idref" href="clutch.examples.keyed_hash.html#x:73"><span class="id" title="variable">x</span></a><span class="id" title="notation">)</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#b:74"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#mghost:72"><span class="id" title="variable">mghost</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="clutch.examples.keyed_hash.html#x:73"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#b:74"><span class="id" title="variable">b</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:75" class="idref" href="#x:75"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#mphys:71"><span class="id" title="variable">mphys</span></a> <span class="id" title="notation">!!</span> <span class="id" title="notation">(</span><span class="id" title="definition">fin_to_nat</span> <a class="idref" href="clutch.examples.keyed_hash.html#x:75"><span class="id" title="variable">x</span></a><span class="id" title="notation">)</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#mghost:72"><span class="id" title="variable">mghost</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="clutch.examples.keyed_hash.html#x:75"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="keyed_hash_auth_pure" class="idref" href="#keyed_hash_auth_pure"><span class="id" title="definition">keyed_hash_auth_pure</span></a> <a id="f:76" class="idref" href="#f:76"><span class="id" title="binder">f</span></a> <a id="f0:77" class="idref" href="#f0:77"><span class="id" title="binder">f0</span></a> (<a id="mphys:78" class="idref" href="#mphys:78"><span class="id" title="binder">mphys</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) (<a id="mghost:79" class="idref" href="#mghost:79"><span class="id" title="binder">mghost</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="clutch.examples.keyed_hash.html#fin_hash_dom_space"><span class="id" title="definition">fin_hash_dom_space</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="abbreviation">iProp</span> <a class="idref" href="clutch.examples.keyed_hash.html#23e38b6148d439587bec160bff8e568b"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⌜</span> <a class="idref" href="clutch.examples.keyed_hash.html#f:76"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">:</span></a> "k" "v"<a class="idref" href="clutch.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#f0:77"><span class="id" title="variable">f0</span></a> (<a class="idref" href="clutch.examples.keyed_hash.html#enc"><span class="id" title="definition">enc</span></a> "k" "v"))%<span class="id" title="var">V</span> <span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⌜</span> <a class="idref" href="clutch.examples.keyed_hash.html#ghost_phys_dom"><span class="id" title="definition">ghost_phys_dom</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#mphys:78"><span class="id" title="variable">mphys</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#mghost:79"><span class="id" title="variable">mghost</span></a> <span class="id" title="notation">⌝</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="keyed_hash_auth" class="idref" href="#keyed_hash_auth"><span class="id" title="definition">keyed_hash_auth</span></a> (<a id="2540cce7e074641a324ba140701e38bb" class="idref" href="#2540cce7e074641a324ba140701e38bb"><span class="id" title="binder">γ</span></a> : <span class="id" title="definition">gname</span>) (<a id="f:81" class="idref" href="#f:81"><span class="id" title="binder">f</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="clutch.examples.keyed_hash.html#23e38b6148d439587bec160bff8e568b"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="notation">(</span><a id="f0:82" class="idref" href="#f0:82"><span class="id" title="binder">f0</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) (<a id="mphys:83" class="idref" href="#mphys:83"><span class="id" title="binder">mphys</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) (<a id="mghost:84" class="idref" href="#mghost:84"><span class="id" title="binder">mghost</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="clutch.examples.keyed_hash.html#fin_hash_dom_space"><span class="id" title="definition">fin_hash_dom_space</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)<span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash_auth_pure"><span class="id" title="definition">keyed_hash_auth_pure</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#f:81"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#f0:82"><span class="id" title="variable">f0</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#mphys:83"><span class="id" title="variable">mphys</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#mghost:84"><span class="id" title="variable">mghost</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">ghost_map_auth</span> <a class="idref" href="clutch.examples.keyed_hash.html#2540cce7e074641a324ba140701e38bb"><span class="id" title="variable">γ</span></a> 1 <a class="idref" href="clutch.examples.keyed_hash.html#mghost:84"><span class="id" title="variable">mghost</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.hash.html#hashfun"><span class="id" title="definition">hashfun</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_HASH_DOM"><span class="id" title="definition">MAX_HASH_DOM</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#f0:82"><span class="id" title="variable">f0</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#mphys:83"><span class="id" title="variable">mphys</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="skeyed_hash_auth" class="idref" href="#skeyed_hash_auth"><span class="id" title="definition">skeyed_hash_auth</span></a> (<a id="febd9495ea1b3e44b095e7239de0fb3c" class="idref" href="#febd9495ea1b3e44b095e7239de0fb3c"><span class="id" title="binder">γ</span></a> : <span class="id" title="definition">gname</span>) (<a id="f:86" class="idref" href="#f:86"><span class="id" title="binder">f</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="clutch.examples.keyed_hash.html#23e38b6148d439587bec160bff8e568b"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="notation">(</span><a id="f0:87" class="idref" href="#f0:87"><span class="id" title="binder">f0</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) (<a id="mphys:88" class="idref" href="#mphys:88"><span class="id" title="binder">mphys</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) (<a id="mghost:89" class="idref" href="#mghost:89"><span class="id" title="binder">mghost</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="clutch.examples.keyed_hash.html#fin_hash_dom_space"><span class="id" title="definition">fin_hash_dom_space</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)<span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash_auth_pure"><span class="id" title="definition">keyed_hash_auth_pure</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#f:86"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#f0:87"><span class="id" title="variable">f0</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#mphys:88"><span class="id" title="variable">mphys</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#mghost:89"><span class="id" title="variable">mghost</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">ghost_map_auth</span> <a class="idref" href="clutch.examples.keyed_hash.html#febd9495ea1b3e44b095e7239de0fb3c"><span class="id" title="variable">γ</span></a> 1 <a class="idref" href="clutch.examples.keyed_hash.html#mghost:89"><span class="id" title="variable">mghost</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.hash.html#shashfun"><span class="id" title="definition">shashfun</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_HASH_DOM"><span class="id" title="definition">MAX_HASH_DOM</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#f0:87"><span class="id" title="variable">f0</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#mphys:88"><span class="id" title="variable">mphys</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="keyed_hash.timeless_spec" class="idref" href="#keyed_hash.timeless_spec"><span class="id" title="section">timeless_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Existing Instance</span> <span class="id" title="var">timeless_shashfun</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="timeless_skeyed_hash_auth" class="idref" href="#timeless_skeyed_hash_auth"><span class="id" title="lemma">timeless_skeyed_hash_auth</span></a> <a id="e48600694e6ab927ce5636c5f6d81a25" class="idref" href="#e48600694e6ab927ce5636c5f6d81a25"><span class="id" title="binder">γ</span></a> <a id="f:91" class="idref" href="#f:91"><span class="id" title="binder">f</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="class">Timeless</span> (<a class="idref" href="clutch.examples.keyed_hash.html#skeyed_hash_auth"><span class="id" title="definition">skeyed_hash_auth</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#e48600694e6ab927ce5636c5f6d81a25"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#f:91"><span class="id" title="variable">f</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">_</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.timeless_spec"><span class="id" title="section">timeless_spec</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Existing Instance</span> <span class="id" title="var">timeless_hashfun</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="timeless_keyed_hash_auth" class="idref" href="#timeless_keyed_hash_auth"><span class="id" title="instance">timeless_keyed_hash_auth</span></a> <a id="57608b72201cefb11357061912b1f8c7" class="idref" href="#57608b72201cefb11357061912b1f8c7"><span class="id" title="binder">γ</span></a> <a id="f:93" class="idref" href="#f:93"><span class="id" title="binder">f</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="class">Timeless</span> (<a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash_auth"><span class="id" title="definition">keyed_hash_auth</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#57608b72201cefb11357061912b1f8c7"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#f:93"><span class="id" title="variable">f</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">_</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;Definition&nbsp;is_keyed_hash&nbsp;γ&nbsp;f&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;inv&nbsp;khashN&nbsp;(keyed_hash_auth&nbsp;γ&nbsp;f).<br/>
&nbsp;&nbsp;&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;This&nbsp;encoding&nbsp;is&nbsp;annoying&nbsp;to&nbsp;work&nbsp;with&nbsp;because&nbsp;we&nbsp;don't&nbsp;have&nbsp;good&nbsp;lemmas&nbsp;for<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"set&nbsp;products"&nbsp;and&nbsp;big_sepS&nbsp;over&nbsp;such&nbsp;products.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;Definition&nbsp;khashfun_own&nbsp;γ&nbsp;k&nbsp;(m&nbsp;:&nbsp;gmap&nbsp;nat&nbsp;bool)&nbsp;:&nbsp;iProp&nbsp;Σ&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;⌜&nbsp;∀&nbsp;x,&nbsp;x&nbsp;∈&nbsp;dom&nbsp;m&nbsp;→&nbsp;x&nbsp;&lt;=&nbsp;MAX_VALS&nbsp;⌝&nbsp;∗<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode">∗</span> <span class="inlinecode"><span class="id" title="tactic">set</span></span>&nbsp;v&nbsp;∈&nbsp;fin_to_set&nbsp;(fin_val_space),&nbsp;(enc_gallina_fin&nbsp;k&nbsp;v)&nbsp;↪<span class="inlinecode"><span class="id" title="var">γ</span></span>&nbsp;(m&nbsp;!!&nbsp;(fin_to_nat&nbsp;v)).<br/>
&nbsp;&nbsp;&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="not_in_key_fin" class="idref" href="#not_in_key_fin"><span class="id" title="definition">not_in_key_fin</span></a> <a id="x:94" class="idref" href="#x:94"><span class="id" title="binder">x</span></a> <a id="k:95" class="idref" href="#k:95"><span class="id" title="binder">k</span></a> : <span class="id" title="keyword">Prop</span> := (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="v:96" class="idref" href="#v:96"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin"><span class="id" title="definition">enc_gallina_fin</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:95"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v:96"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#x:94"><span class="id" title="variable">x</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="not_in_key_fin_spec" class="idref" href="#not_in_key_fin_spec"><span class="id" title="lemma">not_in_key_fin_spec</span></a> <a id="x:97" class="idref" href="#x:97"><span class="id" title="binder">x</span></a> <a id="k:98" class="idref" href="#k:98"><span class="id" title="binder">k</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#k:98"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#key_of_enc_gallina_fin"><span class="id" title="definition">key_of_enc_gallina_fin</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#x:97"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#not_in_key_fin"><span class="id" title="definition">not_in_key_fin</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#x:97"><span class="id" title="variable">x</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:98"><span class="id" title="variable">k</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hneq</span> (<span class="id" title="var">v</span>&amp;<span class="id" title="var">Henc</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">Hneq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Henc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin"><span class="id" title="definition">enc_gallina_fin</span></a>/<a class="idref" href="clutch.examples.keyed_hash.html#key_of_enc_gallina_fin"><span class="id" title="definition">key_of_enc_gallina_fin</span></a>/<a class="idref" href="clutch.examples.keyed_hash.html#val_of_enc_gallina_fin"><span class="id" title="definition">val_of_enc_gallina_fin</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="definition">inj</span> <span class="id" title="definition">fin_to_nat</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<span class="id" title="lemma">fin_to_nat_to_fin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.examples.keyed_hash.html#key_of_enc_gallina_spec1"><span class="id" title="lemma">key_of_enc_gallina_spec1</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="lemma">fin_to_nat_lt</span> <span class="id" title="var">v</span>); <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;This&nbsp;encoding&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;the&nbsp;above&nbsp;in&nbsp;some&nbsp;sense&nbsp;but&nbsp;ends&nbsp;up&nbsp;being&nbsp;more&nbsp;workable<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;absence&nbsp;of&nbsp;the&nbsp;above&nbsp;lemmas;&nbsp;I&nbsp;learned&nbsp;this&nbsp;trick&nbsp;from&nbsp;an&nbsp;encoding&nbsp;Upamanyu&nbsp;Sharma&nbsp;used<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;used&nbsp;for&nbsp;representing&nbsp;"shards"&nbsp;of&nbsp;a&nbsp;key&nbsp;value&nbsp;store's&nbsp;key&nbsp;space,&nbsp;which&nbsp;is&nbsp;essentially&nbsp;equivalent<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;the&nbsp;problem&nbsp;here.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="khashfun_own" class="idref" href="#khashfun_own"><span class="id" title="definition">khashfun_own</span></a> <a id="717391c227d9af368cac98a6addc3531" class="idref" href="#717391c227d9af368cac98a6addc3531"><span class="id" title="binder">γ</span></a> <a id="k:100" class="idref" href="#k:100"><span class="id" title="binder">k</span></a> (<a id="m:101" class="idref" href="#m:101"><span class="id" title="binder">m</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="clutch.examples.keyed_hash.html#23e38b6148d439587bec160bff8e568b"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⌜</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:102" class="idref" href="#x:102"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#x:102"><span class="id" title="variable">x</span></a> <span class="id" title="notation">∈</span> <span class="id" title="definition">dom</span> <a class="idref" href="clutch.examples.keyed_hash.html#m:101"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#x:102"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a> <span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">[∗</span> <span class="id" title="notation">set</span><span class="id" title="notation">]</span> <a id="kv:103" class="idref" href="#kv:103"><span class="id" title="binder">kv</span></a> <span class="id" title="notation">∈</span> <span class="id" title="definition">fin_to_set</span> (<a class="idref" href="clutch.examples.keyed_hash.html#fin_hash_dom_space"><span class="id" title="definition">fin_hash_dom_space</span></a>)<span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <a id="v:104" class="idref" href="#v:104"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">⌜</span> <a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin"><span class="id" title="definition">enc_gallina_fin</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:100"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v:104"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#kv:103"><span class="id" title="variable">kv</span></a> <span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.keyed_hash.html#kv:103"><span class="id" title="variable">kv</span></a> <span class="id" title="notation">↪[</span><a class="idref" href="clutch.examples.keyed_hash.html#717391c227d9af368cac98a6addc3531"><span class="id" title="variable">γ</span></a><span class="id" title="notation">]</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.keyed_hash.html#m:101"><span class="id" title="variable">m</span></a> <span class="id" title="notation">!!</span> <span class="id" title="notation">(</span><span class="id" title="definition">fin_to_nat</span> <a class="idref" href="clutch.examples.keyed_hash.html#v:104"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span><span class="id" title="notation">)</span><span class="id" title="notation">)</span> <span class="id" title="notation">∨</span> <span class="id" title="notation">⌜</span> <a class="idref" href="clutch.examples.keyed_hash.html#not_in_key_fin"><span class="id" title="definition">not_in_key_fin</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#kv:103"><span class="id" title="variable">kv</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:100"><span class="id" title="variable">k</span></a> <span class="id" title="notation">⌝</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="keyed_hash_ghost_init_split" class="idref" href="#keyed_hash_ghost_init_split"><span class="id" title="lemma">keyed_hash_ghost_init_split</span></a> <a id="da4f020d368f7feffd2a0ef429e7da14" class="idref" href="#da4f020d368f7feffd2a0ef429e7da14"><span class="id" title="binder">γ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">map</span><span class="id" title="notation">]</span> <a id="k:106" class="idref" href="#k:106"><span class="id" title="binder">k</span></a><span class="id" title="notation">↦</span><a id="v:107" class="idref" href="#v:107"><span class="id" title="binder">v</span></a> <span class="id" title="notation">∈</span> <span class="id" title="definition">gset_to_gmap</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> (<span class="id" title="definition">fin_to_set</span> <a class="idref" href="clutch.examples.keyed_hash.html#fin_hash_dom_space"><span class="id" title="definition">fin_hash_dom_space</span></a>)<span class="id" title="notation">,</span> <a class="idref" href="clutch.examples.keyed_hash.html#k:106"><span class="id" title="variable">k</span></a> <span class="id" title="notation">↪[</span><a class="idref" href="clutch.examples.keyed_hash.html#da4f020d368f7feffd2a0ef429e7da14"><span class="id" title="variable">γ</span></a><span class="id" title="notation">]</span> <a class="idref" href="clutch.examples.keyed_hash.html#v:107"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="notation">[∗</span> <span class="id" title="notation">set</span><span class="id" title="notation">]</span> <a id="k:108" class="idref" href="#k:108"><span class="id" title="binder">k</span></a> <span class="id" title="notation">∈</span> <span class="id" title="definition">fin_to_set</span> <a class="idref" href="clutch.examples.keyed_hash.html#fin_key_space"><span class="id" title="definition">fin_key_space</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own"><span class="id" title="definition">khashfun_own</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#da4f020d368f7feffd2a0ef429e7da14"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:108"><span class="id" title="variable">k</span></a> <span class="id" title="notation">∅</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own"><span class="id" title="definition">khashfun_own</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hfrags".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="lemma">big_sepS_sep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">rewrite</span> /<span class="id" title="definition">set_Forall</span>. <span class="id" title="tactic">intros</span> ???. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_empty_L</span>. <span class="id" title="var">set_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="lemma">big_sepS_sepS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;This&nbsp;proof&nbsp;is&nbsp;similar&nbsp;to&nbsp;one&nbsp;Ralf&nbsp;Jung&nbsp;developed&nbsp;for&nbsp;the&nbsp;above&nbsp;mentioned&nbsp;kv&nbsp;store's<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ghost&nbsp;state&nbsp;initialization&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<span class="id" title="notation">[∗</span> <span class="id" title="notation">map</span><span class="id" title="notation">]</span> <a id="k:111" class="idref" href="#k:111"><span class="id" title="binder">k</span></a><span class="id" title="notation">↦</span><a id="v:112" class="idref" href="#v:112"><span class="id" title="binder">v</span></a> <span class="id" title="notation">∈</span> <span class="id" title="definition">gset_to_gmap</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> (<span class="id" title="definition">fin_to_set</span> <a class="idref" href="clutch.examples.keyed_hash.html#fin_hash_dom_space"><span class="id" title="definition">fin_hash_dom_space</span></a>)<span class="id" title="notation">,</span> <a class="idref" href="clutch.examples.keyed_hash.html#k:109"><span class="id" title="variable">k</span></a> <span class="id" title="notation">↪[</span><span class="id" title="var">γ</span><span class="id" title="notation">]</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>)%<span class="id" title="var">I</span> <span class="id" title="keyword">with</span> "[Hfrags]"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> "H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepM_impl</span> <span class="id" title="notation">with</span> "Hfrags"<span class="id" title="notation">)</span>. <span class="id" title="var">iIntros</span> "!&gt;" (<span class="id" title="var">k</span> <span class="id" title="var">x</span> <span class="id" title="var">Hlookup</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_gset_to_gmap_Some</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlookup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hlookup</span> <span class="id" title="keyword">as</span> (?&amp;-&gt;). <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepM_dom</span> <span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_gset_to_gmap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepS_impl</span> <span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;" (<span class="id" title="var">x</span> <span class="id" title="var">Hin</span>) "Hx".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">big_sepS_delete</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="clutch.examples.keyed_hash.html#key_of_enc_gallina_fin"><span class="id" title="definition">key_of_enc_gallina_fin</span></a> <span class="id" title="var">x</span>)); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_fin_to_set</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "Hx".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iLeft</span>. <span class="id" title="var">iExists</span> (<a class="idref" href="clutch.examples.keyed_hash.html#val_of_enc_gallina_fin"><span class="id" title="definition">val_of_enc_gallina_fin</span></a> <span class="id" title="var">x</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="method">lookup_empty</span> //. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin_inv"><span class="id" title="lemma">enc_gallina_fin_inv</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iApply</span> <span class="id" title="lemma">big_sepS_intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!#" (<span class="id" title="var">k</span> [<span class="id" title="var">Hk</span> <span class="id" title="var">Hne</span>]%<span class="id" title="method">elem_of_difference</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iRight</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_unfold</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.examples.keyed_hash.html#not_in_key_fin_spec"><span class="id" title="lemma">not_in_key_fin_spec</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ghost_phys_dom_init" class="idref" href="#ghost_phys_dom_init"><span class="id" title="lemma">ghost_phys_dom_init</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#ghost_phys_dom"><span class="id" title="definition">ghost_phys_dom</span></a> <span class="id" title="notation">∅</span> (<span class="id" title="definition">gset_to_gmap</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> (<span class="id" title="definition">fin_to_set</span> <a class="idref" href="clutch.examples.keyed_hash.html#fin_hash_dom_space"><span class="id" title="definition">fin_hash_dom_space</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> ??; <span class="id" title="tactic">rewrite</span> <span class="id" title="method">lookup_empty</span>; <span class="id" title="tactic">inversion</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> ? <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_gset_to_gmap_Some</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_fin_to_set</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_init_keyed_hash" class="idref" href="#wp_init_keyed_hash"><span class="id" title="lemma">wp_init_keyed_hash</span></a> <a id="E:113" class="idref" href="#E:113"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">True</span> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#init_keyed_hash"><span class="id" title="definition">init_keyed_hash</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.examples.keyed_hash.html#E:113"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">(</span><a id="f:114" class="idref" href="#f:114"><span class="id" title="binder">f</span></a>: <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a><span class="id" title="notation">),</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.examples.keyed_hash.html#f:114"><span class="id" title="variable">f</span></a><span class="id" title="notation">;</span> <span class="id" title="notation">∃</span> <a id="06b13392bac259df7cb5e4de02578c63" class="idref" href="#06b13392bac259df7cb5e4de02578c63"><span class="id" title="binder">γ</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash_auth"><span class="id" title="definition">keyed_hash_auth</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#06b13392bac259df7cb5e4de02578c63"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#f:114"><span class="id" title="variable">f</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">[∗</span> <span class="id" title="notation">set</span><span class="id" title="notation">]</span> <a id="k:116" class="idref" href="#k:116"><span class="id" title="binder">k</span></a> <span class="id" title="notation">∈</span> <span class="id" title="definition">fin_to_set</span> (<a class="idref" href="clutch.examples.keyed_hash.html#fin_key_space"><span class="id" title="definition">fin_key_space</span></a>)<span class="id" title="notation">,</span> <a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own"><span class="id" title="definition">khashfun_own</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#06b13392bac259df7cb5e4de02578c63"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:116"><span class="id" title="variable">k</span></a> <span class="id" title="notation">∅</span> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "_ HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.keyed_hash.html#init_keyed_hash"><span class="id" title="definition">init_keyed_hash</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.hash.html#wp_init_hash"><span class="id" title="lemma">wp_init_hash</span></a> <span class="id" title="notation">with</span> "[//]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">f0</span>) "Hf0".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">m</span> := <span class="id" title="definition">gset_to_gmap</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> (<span class="id" title="definition">fin_to_set</span> (<a class="idref" href="clutch.examples.keyed_hash.html#fin_hash_dom_space"><span class="id" title="definition">fin_hash_dom_space</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <span class="id" title="record">gmap</span> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<span class="id" title="lemma">ghost_map_alloc</span> <span class="id" title="var">m</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">γ</span>) "(Hauth&amp;Hfrags)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">γ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "Hf0 Hauth".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iPureIntro</span>; <span class="id" title="var">split_and</span>!; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="clutch.examples.keyed_hash.html#ghost_phys_dom_init"><span class="id" title="lemma">ghost_phys_dom_init</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iApply</span> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash_ghost_init_split"><span class="id" title="lemma">keyed_hash_ghost_init_split</span></a>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_init_keyed_hash" class="idref" href="#spec_init_keyed_hash"><span class="id" title="lemma">spec_init_keyed_hash</span></a> <a id="E:117" class="idref" href="#E:117"><span class="id" title="binder">E</span></a> <a id="K:118" class="idref" href="#K:118"><span class="id" title="binder">K</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.examples.keyed_hash.html#E:117"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#K:118"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.examples.keyed_hash.html#init_keyed_hash"><span class="id" title="definition">init_keyed_hash</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>) <span class="id" title="notation">={</span><a class="idref" href="clutch.examples.keyed_hash.html#E:117"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="f:119" class="idref" href="#f:119"><span class="id" title="binder">f</span></a> <a id="aa4d080a08b41151ea64a59a1e1f1bfb" class="idref" href="#aa4d080a08b41151ea64a59a1e1f1bfb"><span class="id" title="binder">γ</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#K:118"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#f:119"><span class="id" title="variable">f</span></a>) <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.keyed_hash.html#skeyed_hash_auth"><span class="id" title="definition">skeyed_hash_auth</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#aa4d080a08b41151ea64a59a1e1f1bfb"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#f:119"><span class="id" title="variable">f</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">[∗</span> <span class="id" title="notation">set</span><span class="id" title="notation">]</span> <a id="k:121" class="idref" href="#k:121"><span class="id" title="binder">k</span></a> <span class="id" title="notation">∈</span> <span class="id" title="definition">fin_to_set</span> (<a class="idref" href="clutch.examples.keyed_hash.html#fin_key_space"><span class="id" title="definition">fin_key_space</span></a>)<span class="id" title="notation">,</span> <a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own"><span class="id" title="definition">khashfun_own</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#aa4d080a08b41151ea64a59a1e1f1bfb"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:121"><span class="id" title="variable">k</span></a> <span class="id" title="notation">∅</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "HK".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.keyed_hash.html#init_keyed_hash"><span class="id" title="definition">init_keyed_hash</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_bind</span> (<a class="idref" href="clutch.examples.hash.html#init_hash"><span class="id" title="definition">init_hash</span></a> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.hash.html#spec_init_hash"><span class="id" title="lemma">spec_init_hash</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">f0</span>) "(HK&amp;Hf0)"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">m</span> := <span class="id" title="definition">gset_to_gmap</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> (<span class="id" title="definition">fin_to_set</span> (<a class="idref" href="clutch.examples.keyed_hash.html#fin_hash_dom_space"><span class="id" title="definition">fin_hash_dom_space</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <span class="id" title="record">gmap</span> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<span class="id" title="lemma">ghost_map_alloc</span> <span class="id" title="var">m</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">γ</span>) "(Hauth&amp;Hfrags)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">γ</span>. <span class="id" title="var">iFrame</span> "HK".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "Hf0 Hauth".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iPureIntro</span>; <span class="id" title="var">split_and</span>!; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="clutch.examples.keyed_hash.html#ghost_phys_dom_init"><span class="id" title="lemma">ghost_phys_dom_init</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iApply</span> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash_ghost_init_split"><span class="id" title="lemma">keyed_hash_ghost_init_split</span></a>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="khashfun_own_acc_assign_hash" class="idref" href="#khashfun_own_acc_assign_hash"><span class="id" title="lemma">khashfun_own_acc_assign_hash</span></a> <a id="fffaca014efcbf7b341406673b169f4b" class="idref" href="#fffaca014efcbf7b341406673b169f4b"><span class="id" title="binder">γ</span></a> <a id="k:123" class="idref" href="#k:123"><span class="id" title="binder">k</span></a> <a id="v:124" class="idref" href="#v:124"><span class="id" title="binder">v</span></a> <a id="m:125" class="idref" href="#m:125"><span class="id" title="binder">m</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own"><span class="id" title="definition">khashfun_own</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#fffaca014efcbf7b341406673b169f4b"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:123"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#m:125"><span class="id" title="variable">m</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin"><span class="id" title="definition">enc_gallina_fin</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:123"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v:124"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">↪[</span><a class="idref" href="clutch.examples.keyed_hash.html#fffaca014efcbf7b341406673b169f4b"><span class="id" title="variable">γ</span></a><span class="id" title="notation">]</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.keyed_hash.html#m:125"><span class="id" title="variable">m</span></a> <span class="id" title="notation">!!</span> <span class="id" title="notation">(</span><span class="id" title="definition">fin_to_nat</span> <a class="idref" href="clutch.examples.keyed_hash.html#v:124"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span><span class="id" title="notation">)</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="b:126" class="idref" href="#b:126"><span class="id" title="binder">b</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin"><span class="id" title="definition">enc_gallina_fin</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:123"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v:124"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">↪[</span><a class="idref" href="clutch.examples.keyed_hash.html#fffaca014efcbf7b341406673b169f4b"><span class="id" title="variable">γ</span></a><span class="id" title="notation">]</span> <span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#b:126"><span class="id" title="variable">b</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own"><span class="id" title="definition">khashfun_own</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#fffaca014efcbf7b341406673b169f4b"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:123"><span class="id" title="variable">k</span></a> (<span class="id" title="notation">&lt;[</span><span class="id" title="definition">fin_to_nat</span> <a class="idref" href="clutch.examples.keyed_hash.html#v:124"><span class="id" title="variable">v</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="clutch.examples.keyed_hash.html#b:126"><span class="id" title="variable">b</span></a><span class="id" title="notation">]&gt;</span><span class="id" title="notation">m</span>)<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "(%Hdom&amp;Hk)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">big_sepS_delete</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin"><span class="id" title="definition">enc_gallina_fin</span></a> <span class="id" title="var">k</span> <span class="id" title="var">v</span>)); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_fin_to_set</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hk" <span class="id" title="keyword">as</span> "(Hkv&amp;Hrest)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "Hkv".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iDestruct</span> "Hkv" <span class="id" title="keyword">as</span> "[Hleft|%Hbad]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iDestruct</span> "Hleft" <span class="id" title="keyword">as</span> (? <span class="id" title="var">Heq</span>) "H". <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin_inj"><span class="id" title="lemma">enc_gallina_fin_inj</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Heq1</span>&amp;<span class="id" title="var">Heq2</span>). <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExFalso</span>. <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hbad</span>. <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">b</span>) "Hkv". <span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iPureIntro</span>. <span class="id" title="var">set_unfold</span>. <span class="id" title="tactic">intros</span> ? [?|?]; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.examples.keyed_hash.html#fin_to_nat_S_le"><span class="id" title="lemma">fin_to_nat_S_le</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<span class="id" title="lemma">big_sepS_delete</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin"><span class="id" title="definition">enc_gallina_fin</span></a> <span class="id" title="var">k</span> <span class="id" title="var">v</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_fin_to_set</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "Hkv".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iLeft</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert</span> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepS_mono</span> <span class="id" title="notation">with</span> "Hrest"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> (<span class="id" title="var">x</span> [<span class="id" title="var">Hx</span> <span class="id" title="var">Hne</span>]%<span class="id" title="method">elem_of_difference</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_unfold</span>. <span class="id" title="var">iIntros</span> "H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "H" <span class="id" title="keyword">as</span> "[Hleft|Hright]"; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> (<span class="id" title="var">iRight</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hleft" <span class="id" title="keyword">as</span> (? <span class="id" title="var">Heq</span>) "Hx". <span class="id" title="var">iLeft</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="definition">inj</span> <span class="id" title="definition">fin_to_nat</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="khashfun_own_acc_lookup" class="idref" href="#khashfun_own_acc_lookup"><span class="id" title="lemma">khashfun_own_acc_lookup</span></a> <a id="dd79130268fd3cff6f1450e6ae65f5d9" class="idref" href="#dd79130268fd3cff6f1450e6ae65f5d9"><span class="id" title="binder">γ</span></a> <a id="k:128" class="idref" href="#k:128"><span class="id" title="binder">k</span></a> <a id="v:129" class="idref" href="#v:129"><span class="id" title="binder">v</span></a> <a id="m:130" class="idref" href="#m:130"><span class="id" title="binder">m</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own"><span class="id" title="definition">khashfun_own</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#dd79130268fd3cff6f1450e6ae65f5d9"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:128"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#m:130"><span class="id" title="variable">m</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin"><span class="id" title="definition">enc_gallina_fin</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:128"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v:129"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">↪[</span><a class="idref" href="clutch.examples.keyed_hash.html#dd79130268fd3cff6f1450e6ae65f5d9"><span class="id" title="variable">γ</span></a><span class="id" title="notation">]</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.keyed_hash.html#m:130"><span class="id" title="variable">m</span></a> <span class="id" title="notation">!!</span> <span class="id" title="notation">(</span><span class="id" title="definition">fin_to_nat</span> <a class="idref" href="clutch.examples.keyed_hash.html#v:129"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span><span class="id" title="notation">)</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">(</span><a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin"><span class="id" title="definition">enc_gallina_fin</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:128"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v:129"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">↪[</span><a class="idref" href="clutch.examples.keyed_hash.html#dd79130268fd3cff6f1450e6ae65f5d9"><span class="id" title="variable">γ</span></a><span class="id" title="notation">]</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.keyed_hash.html#m:130"><span class="id" title="variable">m</span></a> <span class="id" title="notation">!!</span> <span class="id" title="notation">(</span><span class="id" title="definition">fin_to_nat</span> <a class="idref" href="clutch.examples.keyed_hash.html#v:129"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own"><span class="id" title="definition">khashfun_own</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#dd79130268fd3cff6f1450e6ae65f5d9"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:128"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#m:130"><span class="id" title="variable">m</span></a><span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "(%Hdom&amp;Hk)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">big_sepS_delete</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin"><span class="id" title="definition">enc_gallina_fin</span></a> <span class="id" title="var">k</span> <span class="id" title="var">v</span>)); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_fin_to_set</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hk" <span class="id" title="keyword">as</span> "(Hkv&amp;Hrest)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "Hkv".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iDestruct</span> "Hkv" <span class="id" title="keyword">as</span> "[Hleft|%Hbad]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iDestruct</span> "Hleft" <span class="id" title="keyword">as</span> (? <span class="id" title="var">Heq</span>) "H". <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin_inj"><span class="id" title="lemma">enc_gallina_fin_inj</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Heq1</span>&amp;<span class="id" title="var">Heq2</span>). <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExFalso</span>. <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hbad</span>. <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hkv". <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">iApply</span> <span class="id" title="lemma">big_sepS_delete</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_fin_to_set</span>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iLeft</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;move&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="impl_couplable_wand" class="idref" href="#impl_couplable_wand"><span class="id" title="lemma">impl_couplable_wand</span></a> (<a id="P:131" class="idref" href="#P:131"><span class="id" title="binder">P</span></a> <a id="Q:132" class="idref" href="#Q:132"><span class="id" title="binder">Q</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="clutch.examples.keyed_hash.html#23e38b6148d439587bec160bff8e568b"><span class="id" title="variable">Σ</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.hash.html#impl_couplable"><span class="id" title="definition">impl_couplable</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#P:131"><span class="id" title="variable">P</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="b:133" class="idref" href="#b:133"><span class="id" title="binder">b</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.examples.keyed_hash.html#P:131"><span class="id" title="variable">P</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#b:133"><span class="id" title="variable">b</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="clutch.examples.keyed_hash.html#Q:132"><span class="id" title="variable">Q</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#b:133"><span class="id" title="variable">b</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.hash.html#impl_couplable"><span class="id" title="definition">impl_couplable</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#Q:132"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.hash.html#impl_couplable"><span class="id" title="definition">impl_couplable</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> 1 <span class="id" title="keyword">as</span> (<span class="id" title="var">α</span> <span class="id" title="var">bs</span>) "(Hα&amp;HP)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "HPQ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">α</span>, <span class="id" title="var">bs</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iIntros</span> (?) "H". <span class="id" title="var">iApply</span> "HPQ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HP". <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;move&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_couplable_wand" class="idref" href="#spec_couplable_wand"><span class="id" title="lemma">spec_couplable_wand</span></a> (<a id="P:134" class="idref" href="#P:134"><span class="id" title="binder">P</span></a> <a id="Q:135" class="idref" href="#Q:135"><span class="id" title="binder">Q</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="clutch.examples.keyed_hash.html#23e38b6148d439587bec160bff8e568b"><span class="id" title="variable">Σ</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.hash.html#spec_couplable"><span class="id" title="definition">spec_couplable</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#P:134"><span class="id" title="variable">P</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="b:136" class="idref" href="#b:136"><span class="id" title="binder">b</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.examples.keyed_hash.html#P:134"><span class="id" title="variable">P</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#b:136"><span class="id" title="variable">b</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="clutch.examples.keyed_hash.html#Q:135"><span class="id" title="variable">Q</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#b:136"><span class="id" title="variable">b</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.hash.html#spec_couplable"><span class="id" title="definition">spec_couplable</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#Q:135"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> 1 <span class="id" title="keyword">as</span> (<span class="id" title="var">α</span> <span class="id" title="var">bs</span>) "(Hα&amp;HP)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "HPQ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">α</span>, <span class="id" title="var">bs</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iIntros</span> (?) "H". <span class="id" title="var">iApply</span> "HPQ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HP". <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ghost_phys_dom_insert" class="idref" href="#ghost_phys_dom_insert"><span class="id" title="lemma">ghost_phys_dom_insert</span></a> <a id="x:137" class="idref" href="#x:137"><span class="id" title="binder">x</span></a> <a id="b:138" class="idref" href="#b:138"><span class="id" title="binder">b</span></a> <a id="mphys:139" class="idref" href="#mphys:139"><span class="id" title="binder">mphys</span></a> <a id="mghost:140" class="idref" href="#mghost:140"><span class="id" title="binder">mghost</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#ghost_phys_dom"><span class="id" title="definition">ghost_phys_dom</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#mphys:139"><span class="id" title="variable">mphys</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#mghost:140"><span class="id" title="variable">mghost</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#ghost_phys_dom"><span class="id" title="definition">ghost_phys_dom</span></a> (<span class="id" title="notation">&lt;[</span><span class="id" title="definition">fin_to_nat</span> <a class="idref" href="clutch.examples.keyed_hash.html#x:137"><span class="id" title="variable">x</span></a> <span class="id" title="notation">:=</span><a class="idref" href="clutch.examples.keyed_hash.html#b:138"><span class="id" title="variable">b</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">mphys</span>) (<span class="id" title="notation">&lt;[</span><a class="idref" href="clutch.examples.keyed_hash.html#x:137"><span class="id" title="variable">x</span></a> <span class="id" title="notation">:=</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#b:138"><span class="id" title="variable">b</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">mghost</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> (?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x'</span> <span class="id" title="var">b'</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">x'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> ?<span class="id" title="lemma">lookup_insert</span> // =&gt; -&gt; //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<span class="id" title="lemma">lookup_insert_ne</span> //; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">intros</span> ?%(<span class="id" title="definition">inj</span> <span class="id" title="definition">fin_to_nat</span>); <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x'</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">x'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> ?<span class="id" title="lemma">lookup_insert</span> // =&gt; -&gt; //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<span class="id" title="lemma">lookup_insert_ne</span> //; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">intros</span> ?%(<span class="id" title="definition">inj</span> <span class="id" title="definition">fin_to_nat</span>); <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ghost_phys_dom_rev" class="idref" href="#ghost_phys_dom_rev"><span class="id" title="lemma">ghost_phys_dom_rev</span></a> <a id="mphys:141" class="idref" href="#mphys:141"><span class="id" title="binder">mphys</span></a> <a id="mghost:142" class="idref" href="#mghost:142"><span class="id" title="binder">mghost</span></a> <a id="x:143" class="idref" href="#x:143"><span class="id" title="binder">x</span></a> <a id="ob:144" class="idref" href="#ob:144"><span class="id" title="binder">ob</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#ghost_phys_dom"><span class="id" title="definition">ghost_phys_dom</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#mphys:141"><span class="id" title="variable">mphys</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#mghost:142"><span class="id" title="variable">mghost</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#mghost:142"><span class="id" title="variable">mghost</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="clutch.examples.keyed_hash.html#x:143"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#ob:144"><span class="id" title="variable">ob</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#mphys:141"><span class="id" title="variable">mphys</span></a> <span class="id" title="notation">!!</span> <span class="id" title="notation">(</span><span class="id" title="definition">fin_to_nat</span> <a class="idref" href="clutch.examples.keyed_hash.html#x:143"><span class="id" title="variable">x</span></a><span class="id" title="notation">)</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#ob:144"><span class="id" title="variable">ob</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> (<span class="id" title="var">Hdom1</span>&amp;<span class="id" title="var">Hdom2</span>) <span class="id" title="var">Hlook_ghost</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ob</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">b'</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">mphys</span> <span class="id" title="notation">!!</span> <span class="id" title="notation">(</span><span class="id" title="definition">fin_to_nat</span> <span class="id" title="var">x</span><span class="id" title="notation">)</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlook_phys</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hdom2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlook_phys</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlook_phys</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlook_ghost</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlook_ghost</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">Hdom1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlook_phys</span>. <span class="id" title="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">mphys</span> <span class="id" title="notation">!!</span> <span class="id" title="notation">(</span><span class="id" title="definition">fin_to_nat</span> <span class="id" title="var">x</span><span class="id" title="notation">)</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlook_phys</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hdom1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlook_phys</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlook_phys</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlook_ghost</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlook_ghost</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">Hdom2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlook_phys</span>. <span class="id" title="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="khashfun_own_couplable" class="idref" href="#khashfun_own_couplable"><span class="id" title="lemma">khashfun_own_couplable</span></a> <a id="c501a78f10278dea9b54b9fb2afce891" class="idref" href="#c501a78f10278dea9b54b9fb2afce891"><span class="id" title="binder">γ</span></a> <a id="k:146" class="idref" href="#k:146"><span class="id" title="binder">k</span></a> <a id="f:147" class="idref" href="#f:147"><span class="id" title="binder">f</span></a> <a id="m:148" class="idref" href="#m:148"><span class="id" title="binder">m</span></a> <a id="v:149" class="idref" href="#v:149"><span class="id" title="binder">v</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#v:149"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#m:148"><span class="id" title="variable">m</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="clutch.examples.keyed_hash.html#v:149"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash_auth"><span class="id" title="definition">keyed_hash_auth</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#c501a78f10278dea9b54b9fb2afce891"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#f:147"><span class="id" title="variable">f</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own"><span class="id" title="definition">khashfun_own</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#c501a78f10278dea9b54b9fb2afce891"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:146"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#m:148"><span class="id" title="variable">m</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="clutch.examples.hash.html#impl_couplable"><span class="id" title="definition">impl_couplable</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="b:150" class="idref" href="#b:150"><span class="id" title="binder">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="notation">|==&gt;</span> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash_auth"><span class="id" title="definition">keyed_hash_auth</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#c501a78f10278dea9b54b9fb2afce891"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#f:147"><span class="id" title="variable">f</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own"><span class="id" title="definition">khashfun_own</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#c501a78f10278dea9b54b9fb2afce891"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:146"><span class="id" title="variable">k</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="clutch.examples.keyed_hash.html#v:149"><span class="id" title="variable">v</span></a><span class="id" title="notation">:=</span><a class="idref" href="clutch.examples.keyed_hash.html#b:150"><span class="id" title="variable">b</span></a><span class="id" title="notation">]&gt;</span><span class="id" title="notation">m</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hmax</span> <span class="id" title="var">Hlookup</span>) "Hhash Hk".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hmax'</span>: <span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">v'</span> := <span class="id" title="abbreviation">nat_to_fin</span> <span class="id" title="var">Hmax'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#fin_val_space"><span class="id" title="definition">fin_val_space</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hhash" <span class="id" title="keyword">as</span> (??? (<span class="id" title="var">Heq1</span>&amp;<span class="id" title="var">Hdom1</span>&amp;<span class="id" title="var">Hdom2</span>)) "(Hauth&amp;H)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">x</span> := <a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin"><span class="id" title="definition">enc_gallina_fin</span></a> <span class="id" title="var">k</span> <span class="id" title="var">v'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own_acc_assign_hash"><span class="id" title="lemma">khashfun_own_acc_assign_hash</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">v'</span> <span class="id" title="notation">with</span> "Hk"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "(Hpts&amp;Hclo')".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">ghost_map_lookup</span> <span class="id" title="notation">with</span> "[$] [$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hlook</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">m</span> <span class="id" title="notation">!!</span> <span class="id" title="definition">fin_to_nat</span> <span class="id" title="var">v'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hnone</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">fin_to_nat_to_fin</span> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hnone</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlook</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.hash.html#hashfun_couplable"><span class="id" title="lemma">hashfun_couplable</span></a> (<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin"><span class="id" title="definition">enc_gallina_fin</span></a> <span class="id" title="var">k</span> <span class="id" title="var">v'</span>) <span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.examples.keyed_hash.html#fin_to_nat_S_le"><span class="id" title="lemma">fin_to_nat_S_le</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.examples.keyed_hash.html#ghost_phys_dom_rev"><span class="id" title="lemma">ghost_phys_dom_rev</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.keyed_hash.html#impl_couplable_wand"><span class="id" title="lemma">impl_couplable_wand</span></a> <span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">b</span>) "Hhash".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><span class="id" title="lemma">ghost_map_update</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">b</span>) <span class="id" title="notation">with</span> "[$] [$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "(Hauth&amp;Hpts)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span>"Hclo'" <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hk".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "Hhash Hauth".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="var">iPureIntro</span>; <span class="id" title="var">split_and</span>!; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.examples.keyed_hash.html#ghost_phys_dom_insert"><span class="id" title="lemma">ghost_phys_dom_insert</span></a>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">v'</span> <span class="id" title="lemma">fin_to_nat_to_fin</span> //.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="khashfun_own_spec_couplable" class="idref" href="#khashfun_own_spec_couplable"><span class="id" title="lemma">khashfun_own_spec_couplable</span></a> <a id="09e4cefb71fb1f70cc6e6d515cdfc9fd" class="idref" href="#09e4cefb71fb1f70cc6e6d515cdfc9fd"><span class="id" title="binder">γ</span></a> <a id="k:152" class="idref" href="#k:152"><span class="id" title="binder">k</span></a> <a id="f:153" class="idref" href="#f:153"><span class="id" title="binder">f</span></a> <a id="m:154" class="idref" href="#m:154"><span class="id" title="binder">m</span></a> <a id="v:155" class="idref" href="#v:155"><span class="id" title="binder">v</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#v:155"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#m:154"><span class="id" title="variable">m</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="clutch.examples.keyed_hash.html#v:155"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#skeyed_hash_auth"><span class="id" title="definition">skeyed_hash_auth</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#09e4cefb71fb1f70cc6e6d515cdfc9fd"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#f:153"><span class="id" title="variable">f</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own"><span class="id" title="definition">khashfun_own</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#09e4cefb71fb1f70cc6e6d515cdfc9fd"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:152"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#m:154"><span class="id" title="variable">m</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="clutch.examples.hash.html#spec_couplable"><span class="id" title="definition">spec_couplable</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="b:156" class="idref" href="#b:156"><span class="id" title="binder">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="notation">|==&gt;</span> <a class="idref" href="clutch.examples.keyed_hash.html#skeyed_hash_auth"><span class="id" title="definition">skeyed_hash_auth</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#09e4cefb71fb1f70cc6e6d515cdfc9fd"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#f:153"><span class="id" title="variable">f</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own"><span class="id" title="definition">khashfun_own</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#09e4cefb71fb1f70cc6e6d515cdfc9fd"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:152"><span class="id" title="variable">k</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="clutch.examples.keyed_hash.html#v:155"><span class="id" title="variable">v</span></a><span class="id" title="notation">:=</span><a class="idref" href="clutch.examples.keyed_hash.html#b:156"><span class="id" title="variable">b</span></a><span class="id" title="notation">]&gt;</span><span class="id" title="notation">m</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hmax</span> <span class="id" title="var">Hlookup</span>) "Hhash Hk".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hmax'</span>: <span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">v'</span> := <span class="id" title="abbreviation">nat_to_fin</span> <span class="id" title="var">Hmax'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#fin_val_space"><span class="id" title="definition">fin_val_space</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hhash" <span class="id" title="keyword">as</span> (??? (<span class="id" title="var">Heq1</span>&amp;<span class="id" title="var">Hdom1</span>&amp;<span class="id" title="var">Hdom2</span>)) "(Hauth&amp;H)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">x</span> := <a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin"><span class="id" title="definition">enc_gallina_fin</span></a> <span class="id" title="var">k</span> <span class="id" title="var">v'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own_acc_assign_hash"><span class="id" title="lemma">khashfun_own_acc_assign_hash</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">v'</span> <span class="id" title="notation">with</span> "Hk"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "(Hpts&amp;Hclo')".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">ghost_map_lookup</span> <span class="id" title="notation">with</span> "[$] [$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hlook</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">m</span> <span class="id" title="notation">!!</span> <span class="id" title="definition">fin_to_nat</span> <span class="id" title="var">v'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hnone</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">fin_to_nat_to_fin</span> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hnone</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlook</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.hash.html#shashfun_couplable"><span class="id" title="lemma">shashfun_couplable</span></a> (<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin"><span class="id" title="definition">enc_gallina_fin</span></a> <span class="id" title="var">k</span> <span class="id" title="var">v'</span>) <span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.examples.keyed_hash.html#fin_to_nat_S_le"><span class="id" title="lemma">fin_to_nat_S_le</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.examples.keyed_hash.html#ghost_phys_dom_rev"><span class="id" title="lemma">ghost_phys_dom_rev</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.keyed_hash.html#spec_couplable_wand"><span class="id" title="lemma">spec_couplable_wand</span></a> <span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">b</span>) "Hhash".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><span class="id" title="lemma">ghost_map_update</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">b</span>) <span class="id" title="notation">with</span> "[$] [$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "(Hauth&amp;Hpts)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span>"Hclo'" <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hk".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "Hhash Hauth".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="var">iPureIntro</span>; <span class="id" title="var">split_and</span>!; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.examples.keyed_hash.html#ghost_phys_dom_insert"><span class="id" title="lemma">ghost_phys_dom_insert</span></a>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">v'</span> <span class="id" title="lemma">fin_to_nat_to_fin</span> //.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_khashfun_prev" class="idref" href="#wp_khashfun_prev"><span class="id" title="lemma">wp_khashfun_prev</span></a> <a id="E:157" class="idref" href="#E:157"><span class="id" title="binder">E</span></a> <a id="f:158" class="idref" href="#f:158"><span class="id" title="binder">f</span></a> <a id="m:159" class="idref" href="#m:159"><span class="id" title="binder">m</span></a> <a id="k:160" class="idref" href="#k:160"><span class="id" title="binder">k</span></a> (<a id="v:161" class="idref" href="#v:161"><span class="id" title="binder">v</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="246ecb9c96cdf986fce284b8feeaf1b7" class="idref" href="#246ecb9c96cdf986fce284b8feeaf1b7"><span class="id" title="binder">γ</span></a> (<a id="b:163" class="idref" href="#b:163"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#m:159"><span class="id" title="variable">m</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="clutch.examples.keyed_hash.html#v:161"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#b:163"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash_auth"><span class="id" title="definition">keyed_hash_auth</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#246ecb9c96cdf986fce284b8feeaf1b7"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#f:158"><span class="id" title="variable">f</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own"><span class="id" title="definition">khashfun_own</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#246ecb9c96cdf986fce284b8feeaf1b7"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:160"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#m:159"><span class="id" title="variable">m</span></a> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#f:158"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.keyed_hash.html#k:160"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.keyed_hash.html#v:161"><span class="id" title="variable">v</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.examples.keyed_hash.html#E:157"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.keyed_hash.html#b:163"><span class="id" title="variable">b</span></a><span class="id" title="notation">;</span> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash_auth"><span class="id" title="definition">keyed_hash_auth</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#246ecb9c96cdf986fce284b8feeaf1b7"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#f:158"><span class="id" title="variable">f</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own"><span class="id" title="definition">khashfun_own</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#246ecb9c96cdf986fce284b8feeaf1b7"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:160"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#m:159"><span class="id" title="variable">m</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hlookup</span> <span class="id" title="var">Φ</span>) "(H&amp;Hown) HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "H" <span class="id" title="keyword">as</span> (??? (<span class="id" title="var">Heq1</span>&amp;<span class="id" title="var">Hdom1</span>&amp;<span class="id" title="var">Hdom2</span>)) "(Hauth&amp;H)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq1</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.keyed_hash.html#enc"><span class="id" title="definition">enc</span></a>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<span class="id" title="notation">⌜</span> <span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a> <span class="id" title="notation">⌝</span>)%<span class="id" title="var">I</span> <span class="id" title="keyword">as</span> "%Hmax'".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iDestruct</span> "Hown" <span class="id" title="keyword">as</span> "(%Hdom&amp;_)". <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_dom_2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlookup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hdom</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlookup</span>. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">v'</span> := <span class="id" title="abbreviation">nat_to_fin</span> <span class="id" title="var">Hmax'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#fin_val_space"><span class="id" title="definition">fin_val_space</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a><span class="id" title="var">k</span> <span class="id" title="notation">≪</span> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_VALS_POW"><span class="id" title="variable">MAX_VALS_POW</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> <span class="id" title="var">v</span><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">with</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a><span class="id" title="definition">fin_to_nat</span> (<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin"><span class="id" title="definition">enc_gallina_fin</span></a> <span class="id" title="var">k</span> <span class="id" title="var">v'</span>)<a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin"><span class="id" title="definition">enc_gallina_fin</span></a> ?<span class="id" title="lemma">fin_to_nat_to_fin</span> /<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.shiftl_mul_pow2"><span class="id" title="lemma">Nat.shiftl_mul_pow2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.shiftl_mul_pow2"><span class="id" title="lemma">Z.shiftl_mul_pow2</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_add"><span class="id" title="lemma">Nat2Z.inj_add</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_mul"><span class="id" title="lemma">Nat2Z.inj_mul</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_pow"><span class="id" title="lemma">Nat2Z.inj_pow</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own_acc_lookup"><span class="id" title="lemma">khashfun_own_acc_lookup</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">v'</span> <span class="id" title="notation">with</span> "Hown"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "(Hkv&amp;Hclo)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">ghost_map_lookup</span> <span class="id" title="notation">with</span> "[$] [$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hlook</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.examples.keyed_hash.html#ghost_phys_dom_rev"><span class="id" title="lemma">ghost_phys_dom_rev</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlook</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.hash.html#wp_hashfun_prev"><span class="id" title="lemma">wp_hashfun_prev</span></a> <span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlook</span>. <span class="id" title="tactic">rewrite</span> ?<span class="id" title="lemma">fin_to_nat_to_fin</span> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HΦ". <span class="id" title="var">iSplitL</span> "Hauth H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "Hclo". <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_khashfun_prev" class="idref" href="#spec_khashfun_prev"><span class="id" title="lemma">spec_khashfun_prev</span></a> <a id="E:164" class="idref" href="#E:164"><span class="id" title="binder">E</span></a> <a id="K:165" class="idref" href="#K:165"><span class="id" title="binder">K</span></a> <a id="f:166" class="idref" href="#f:166"><span class="id" title="binder">f</span></a> <a id="m:167" class="idref" href="#m:167"><span class="id" title="binder">m</span></a> <a id="k:168" class="idref" href="#k:168"><span class="id" title="binder">k</span></a> (<a id="v:169" class="idref" href="#v:169"><span class="id" title="binder">v</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="7a87cbfe844bac6ae6b9098dbf9fa92a" class="idref" href="#7a87cbfe844bac6ae6b9098dbf9fa92a"><span class="id" title="binder">γ</span></a> (<a id="b:171" class="idref" href="#b:171"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#m:167"><span class="id" title="variable">m</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="clutch.examples.keyed_hash.html#v:169"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#b:171"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.examples.keyed_hash.html#E:164"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#skeyed_hash_auth"><span class="id" title="definition">skeyed_hash_auth</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#7a87cbfe844bac6ae6b9098dbf9fa92a"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#f:166"><span class="id" title="variable">f</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own"><span class="id" title="definition">khashfun_own</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#7a87cbfe844bac6ae6b9098dbf9fa92a"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:168"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#m:167"><span class="id" title="variable">m</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#K:165"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.examples.keyed_hash.html#f:166"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.keyed_hash.html#k:168"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.keyed_hash.html#v:169"><span class="id" title="variable">v</span></a>) <span class="id" title="notation">={</span><a class="idref" href="clutch.examples.keyed_hash.html#E:164"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#K:165"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.keyed_hash.html#b:171"><span class="id" title="variable">b</span></a>) <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.keyed_hash.html#skeyed_hash_auth"><span class="id" title="definition">skeyed_hash_auth</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#7a87cbfe844bac6ae6b9098dbf9fa92a"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#f:166"><span class="id" title="variable">f</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own"><span class="id" title="definition">khashfun_own</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#7a87cbfe844bac6ae6b9098dbf9fa92a"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:168"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#m:167"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hlookup</span> ?) "Hauth Hown HK".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hauth" <span class="id" title="keyword">as</span> (??? (<span class="id" title="var">Heq1</span>&amp;<span class="id" title="var">Hdom1</span>&amp;<span class="id" title="var">Hdom2</span>)) "(Hauth&amp;H)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq1</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.keyed_hash.html#enc"><span class="id" title="definition">enc</span></a>. <span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<span class="id" title="notation">⌜</span> <span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a> <span class="id" title="notation">⌝</span>)%<span class="id" title="var">I</span> <span class="id" title="keyword">as</span> "%Hmax'".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iDestruct</span> "Hown" <span class="id" title="keyword">as</span> "(%Hdom&amp;_)". <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_dom_2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlookup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hdom</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlookup</span>. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">v'</span> := <span class="id" title="abbreviation">nat_to_fin</span> <span class="id" title="var">Hmax'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#fin_val_space"><span class="id" title="definition">fin_val_space</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a><span class="id" title="var">k</span> <span class="id" title="notation">≪</span> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash.MAX_VALS_POW"><span class="id" title="variable">MAX_VALS_POW</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> <span class="id" title="var">v</span><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">with</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a><span class="id" title="definition">fin_to_nat</span> (<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin"><span class="id" title="definition">enc_gallina_fin</span></a> <span class="id" title="var">k</span> <span class="id" title="var">v'</span>)<a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina_fin"><span class="id" title="definition">enc_gallina_fin</span></a> ?<span class="id" title="lemma">fin_to_nat_to_fin</span> /<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.keyed_hash.html#enc_gallina"><span class="id" title="definition">enc_gallina</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.shiftl_mul_pow2"><span class="id" title="lemma">Nat.shiftl_mul_pow2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.shiftl_mul_pow2"><span class="id" title="lemma">Z.shiftl_mul_pow2</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_add"><span class="id" title="lemma">Nat2Z.inj_add</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_mul"><span class="id" title="lemma">Nat2Z.inj_mul</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_pow"><span class="id" title="lemma">Nat2Z.inj_pow</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own_acc_lookup"><span class="id" title="lemma">khashfun_own_acc_lookup</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">v'</span> <span class="id" title="notation">with</span> "Hown"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "(Hkv&amp;Hclo)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">ghost_map_lookup</span> <span class="id" title="notation">with</span> "[$] [$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hlook</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.examples.keyed_hash.html#ghost_phys_dom_rev"><span class="id" title="lemma">ghost_phys_dom_rev</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlook</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.hash.html#spec_hashfun_prev"><span class="id" title="lemma">spec_hashfun_prev</span></a> <span class="id" title="notation">with</span> "H HK"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "(HK&amp;H)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlook</span>. <span class="id" title="tactic">rewrite</span> ?<span class="id" title="lemma">fin_to_nat_to_fin</span> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "Hauth H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "Hclo". <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Actually&nbsp;this&nbsp;is&nbsp;not&nbsp;true:&nbsp;if&nbsp;v&nbsp;is&nbsp;out&nbsp;of&nbsp;range&nbsp;it&nbsp;can&nbsp;be&nbsp;as&nbsp;if<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;you're&nbsp;hashing&nbsp;a&nbsp;differnt&nbsp;value&nbsp;with&nbsp;some&nbsp;other&nbsp;key!&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_khashfun_out_of_range" class="idref" href="#wp_khashfun_out_of_range"><span class="id" title="lemma">wp_khashfun_out_of_range</span></a> <a id="E:172" class="idref" href="#E:172"><span class="id" title="binder">E</span></a> <a id="f:173" class="idref" href="#f:173"><span class="id" title="binder">f</span></a> <a id="k:174" class="idref" href="#k:174"><span class="id" title="binder">k</span></a> <a id="m:175" class="idref" href="#m:175"><span class="id" title="binder">m</span></a> (<a id="v:176" class="idref" href="#v:176"><span class="id" title="binder">v</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) <a id="d3619922e9ded78cca017f7b15aea92e" class="idref" href="#d3619922e9ded78cca017f7b15aea92e"><span class="id" title="binder">γ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.examples.keyed_hash.html#v:176"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">∨</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#MAX_VALS"><span class="id" title="definition">MAX_VALS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#v:176"><span class="id" title="variable">v</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash_auth"><span class="id" title="definition">keyed_hash_auth</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#d3619922e9ded78cca017f7b15aea92e"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#f:173"><span class="id" title="variable">f</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own"><span class="id" title="definition">khashfun_own</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#d3619922e9ded78cca017f7b15aea92e"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:174"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#m:175"><span class="id" title="variable">m</span></a> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#f:173"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.keyed_hash.html#k:174"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.keyed_hash.html#v:176"><span class="id" title="variable">v</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.examples.keyed_hash.html#E:172"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><span class="id" title="notation">;</span> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash_auth"><span class="id" title="definition">keyed_hash_auth</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#d3619922e9ded78cca017f7b15aea92e"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#f:173"><span class="id" title="variable">f</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own"><span class="id" title="definition">khashfun_own</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#d3619922e9ded78cca017f7b15aea92e"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#k:174"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#m:175"><span class="id" title="variable">m</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Abort</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash"><span class="id" title="section">keyed_hash</span></a>.<br/>

<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/coq-community/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
