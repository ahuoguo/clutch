<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resources/config.js"></script>
<script type="text/javascript" src="resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">clutch.lib.map</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="clutch.clutch.html#"><span class="id" title="library">clutch</span></a>.<br/>

<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Default</span> <span class="id" title="keyword">Proof</span> <span class="id" title="var">Using</span> "Type*".<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="map" class="idref" href="#map"><span class="id" title="section">map</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;Simple&nbsp;map&nbsp;as&nbsp;an&nbsp;associative&nbsp;linked&nbsp;list,&nbsp;based&nbsp;on&nbsp;the&nbsp;examples<br/>
&nbsp;&nbsp;&nbsp;from&nbsp;the&nbsp;transfinite&nbsp;Iris&nbsp;repo&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="find_list" class="idref" href="#find_list"><span class="id" title="definition">find_list</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.notation.html#b655cc6b0c09a3d45e15582d945b2696"><span class="id" title="notation">rec</span></a><a class="idref" href="clutch.prob_lang.notation.html#b655cc6b0c09a3d45e15582d945b2696"><span class="id" title="notation">:</span></a> "find" "h" "k" <a class="idref" href="clutch.prob_lang.notation.html#b655cc6b0c09a3d45e15582d945b2696"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#a5dc98fcec8b0ae0c09320eefe48d17d"><span class="id" title="notation">match</span></a><a class="idref" href="clutch.prob_lang.notation.html#a5dc98fcec8b0ae0c09320eefe48d17d"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.prob_lang.notation.html#569b74bc432a2b233b93ae1b45418e26"><span class="id" title="notation">!</span></a>"h" <a class="idref" href="clutch.prob_lang.notation.html#a5dc98fcec8b0ae0c09320eefe48d17d"><span class="id" title="notation">with</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#a5dc98fcec8b0ae0c09320eefe48d17d"><span class="id" title="notation">NONE</span></a> <a class="idref" href="clutch.prob_lang.notation.html#a5dc98fcec8b0ae0c09320eefe48d17d"><span class="id" title="notation">=&gt;</span></a> <a class="idref" href="clutch.prob_lang.notation.html#NONE"><span class="id" title="abbreviation">NONE</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#a5dc98fcec8b0ae0c09320eefe48d17d"><span class="id" title="notation">|</span></a> <a class="idref" href="clutch.prob_lang.notation.html#a5dc98fcec8b0ae0c09320eefe48d17d"><span class="id" title="notation">SOME</span></a> "p" <a class="idref" href="clutch.prob_lang.notation.html#a5dc98fcec8b0ae0c09320eefe48d17d"><span class="id" title="notation">=&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "kv" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Fst"><span class="id" title="constructor">Fst</span></a> "p" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "next" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Snd"><span class="id" title="constructor">Snd</span></a> "p" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a><a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.prob_lang.notation.html#268bceb185e8402e5a254d7b9bacc674"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Fst"><span class="id" title="constructor">Fst</span></a> "kv"<a class="idref" href="clutch.prob_lang.notation.html#268bceb185e8402e5a254d7b9bacc674"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#268bceb185e8402e5a254d7b9bacc674"><span class="id" title="notation">=</span></a> "k" <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="clutch.prob_lang.notation.html#SOME"><span class="id" title="abbreviation">SOME</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Snd"><span class="id" title="constructor">Snd</span></a> "kv") <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> "find" "next" "k"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#a5dc98fcec8b0ae0c09320eefe48d17d"><span class="id" title="notation">end</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="cons_list" class="idref" href="#cons_list"><span class="id" title="definition">cons_list</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">:</span></a> "h" "v"<a class="idref" href="clutch.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">ref</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#SOME"><span class="id" title="abbreviation">SOME</span></a> <a class="idref" href="clutch.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">(</span></a>"v"<a class="idref" href="clutch.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">,</span></a> "h"<a class="idref" href="clutch.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">)</span></a><a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="init_list" class="idref" href="#init_list"><span class="id" title="definition">init_list</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">:</span></a><span class="id" title="notation">&lt;&gt;</span><a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">ref</span></a> <a class="idref" href="clutch.prob_lang.notation.html#NONE"><span class="id" title="abbreviation">NONE</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="clutchRGS0:2" class="idref" href="#clutchRGS0:2"><span class="id" title="binder">!</span></a><a id="clutchRGS0:2" class="idref" href="#clutchRGS0:2"><span class="id" title="binder">clutchRGS</span></a> <a id="clutchRGS0:2" class="idref" href="#clutchRGS0:2"><span class="id" title="binder">Σ</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Impl&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="assoc_list" class="idref" href="#assoc_list"><span class="id" title="definition">assoc_list</span></a> (<a id="l:3" class="idref" href="#l:3"><span class="id" title="binder">l</span></a> : <a class="idref" href="clutch.prob_lang.locations.html#loc"><span class="id" title="record">loc</span></a>) (<a id="vs:4" class="idref" href="#vs:4"><span class="id" title="binder">vs</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>)) : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="clutch.lib.map.html#c7eff69ea92bdcd1ab19ed88c893074b"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="clutch.lib.map.html#vs:4"><span class="id" title="variable">vs</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> =&gt; <a class="idref" href="clutch.lib.map.html#l:3"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.rel_logic.primitive_laws.html#db9bde1508f348dd1f9d24e9d4ead804"><span class="id" title="notation">↦</span></a> <a class="idref" href="clutch.prob_lang.notation.html#NONEV"><span class="id" title="abbreviation">NONEV</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">vs</span> =&gt; <span class="id" title="notation">∃</span> <span class="id" title="notation">(</span><a id="l':7" class="idref" href="#l':7"><span class="id" title="binder">l'</span></a> : <a class="idref" href="clutch.prob_lang.locations.html#loc"><span class="id" title="record">loc</span></a><span class="id" title="notation">),</span> <a class="idref" href="clutch.lib.map.html#l:3"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.rel_logic.primitive_laws.html#db9bde1508f348dd1f9d24e9d4ead804"><span class="id" title="notation">↦</span></a> <a class="idref" href="clutch.prob_lang.notation.html#SOMEV"><span class="id" title="abbreviation">SOMEV</span></a> <a class="idref" href="clutch.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">((</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><span class="id" title="var">k</span><a class="idref" href="clutch.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="clutch.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">),</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#l':7"><span class="id" title="variable">l'</span></a><a class="idref" href="clutch.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.lib.map.html#assoc_list:5"><span class="id" title="definition">assoc_list</span></a> <a class="idref" href="clutch.lib.map.html#l':7"><span class="id" title="variable">l'</span></a> <a class="idref" href="clutch.lib.map.html#vs:4"><span class="id" title="variable">vs</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Spec/ghost&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="assoc_slist" class="idref" href="#assoc_slist"><span class="id" title="definition">assoc_slist</span></a> (<a id="l:8" class="idref" href="#l:8"><span class="id" title="binder">l</span></a> : <a class="idref" href="clutch.prob_lang.locations.html#loc"><span class="id" title="record">loc</span></a>) (<a id="vs:9" class="idref" href="#vs:9"><span class="id" title="binder">vs</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>)) : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="clutch.lib.map.html#c7eff69ea92bdcd1ab19ed88c893074b"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="clutch.lib.map.html#vs:9"><span class="id" title="variable">vs</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> =&gt; <a class="idref" href="clutch.lib.map.html#l:8"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.rel_logic.spec_ra.html#0326014f985dcbdf069e6962e826748b"><span class="id" title="notation">↦ₛ</span></a> <a class="idref" href="clutch.prob_lang.notation.html#NONEV"><span class="id" title="abbreviation">NONEV</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">vs</span> =&gt; <span class="id" title="notation">∃</span> <span class="id" title="notation">(</span><a id="l':12" class="idref" href="#l':12"><span class="id" title="binder">l'</span></a> : <a class="idref" href="clutch.prob_lang.locations.html#loc"><span class="id" title="record">loc</span></a><span class="id" title="notation">),</span> <a class="idref" href="clutch.lib.map.html#l:8"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.rel_logic.spec_ra.html#0326014f985dcbdf069e6962e826748b"><span class="id" title="notation">↦ₛ</span></a> <a class="idref" href="clutch.prob_lang.notation.html#SOMEV"><span class="id" title="abbreviation">SOMEV</span></a> <a class="idref" href="clutch.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">((</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><span class="id" title="var">k</span><a class="idref" href="clutch.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="clutch.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">),</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#l':12"><span class="id" title="variable">l'</span></a><a class="idref" href="clutch.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.lib.map.html#assoc_slist:10"><span class="id" title="definition">assoc_slist</span></a> <a class="idref" href="clutch.lib.map.html#l':12"><span class="id" title="variable">l'</span></a> <a class="idref" href="clutch.lib.map.html#vs:9"><span class="id" title="variable">vs</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="timeless_assoc_list" class="idref" href="#timeless_assoc_list"><span class="id" title="instance">timeless_assoc_list</span></a> <a id="l:13" class="idref" href="#l:13"><span class="id" title="binder">l</span></a> <a id="vs:14" class="idref" href="#vs:14"><span class="id" title="binder">vs</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="class">Timeless</span> (<a class="idref" href="clutch.lib.map.html#assoc_list"><span class="id" title="definition">assoc_list</span></a> <a class="idref" href="clutch.lib.map.html#l:13"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.lib.map.html#vs:14"><span class="id" title="variable">vs</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">revert</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">vs</span> <span class="id" title="keyword">as</span> [| (?&amp;?)] =&gt; <span class="id" title="var">l</span> /=; <span class="id" title="tactic">apply</span> <span class="id" title="var">_</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="timeless_assoc_slist" class="idref" href="#timeless_assoc_slist"><span class="id" title="instance">timeless_assoc_slist</span></a> <a id="l:15" class="idref" href="#l:15"><span class="id" title="binder">l</span></a> <a id="vs:16" class="idref" href="#vs:16"><span class="id" title="binder">vs</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="class">Timeless</span> (<a class="idref" href="clutch.lib.map.html#assoc_slist"><span class="id" title="definition">assoc_slist</span></a> <a class="idref" href="clutch.lib.map.html#l:15"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.lib.map.html#vs:16"><span class="id" title="variable">vs</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">revert</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">vs</span> <span class="id" title="keyword">as</span> [| (?&amp;?)] =&gt; <span class="id" title="var">l</span> /=; <span class="id" title="tactic">apply</span> <span class="id" title="var">_</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_init_list" class="idref" href="#wp_init_list"><span class="id" title="lemma">wp_init_list</span></a> <a id="E:17" class="idref" href="#E:17"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">True</span> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.map.html#init_list"><span class="id" title="definition">init_list</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.lib.map.html#E:17"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a id="l:18" class="idref" href="#l:18"><span class="id" title="binder">l</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitLoc"><span class="id" title="constructor">LitLoc</span></a> <a class="idref" href="clutch.lib.map.html#l:18"><span class="id" title="variable">l</span></a>)<span class="id" title="notation">;</span> <a class="idref" href="clutch.lib.map.html#assoc_list"><span class="id" title="definition">assoc_list</span></a> <a class="idref" href="clutch.lib.map.html#l:18"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "_ HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.map.html#init_list"><span class="id" title="definition">init_list</span></a>. <span class="id" title="var">wp_pures</span>. <span class="id" title="var">wp_alloc</span> <span class="id" title="var">l</span>. <span class="id" title="var">iModIntro</span>. <span class="id" title="var">iApply</span> "HΦ". <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_init_list" class="idref" href="#spec_init_list"><span class="id" title="lemma">spec_init_list</span></a> <a id="E:19" class="idref" href="#E:19"><span class="id" title="binder">E</span></a> <a id="K:20" class="idref" href="#K:20"><span class="id" title="binder">K</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.lib.map.html#E:19"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.lib.map.html#K:20"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.lib.map.html#init_list"><span class="id" title="definition">init_list</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>) <span class="id" title="notation">={</span><a class="idref" href="clutch.lib.map.html#E:19"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <span class="id" title="notation">∃</span> <span class="id" title="notation">(</span><a id="l:21" class="idref" href="#l:21"><span class="id" title="binder">l</span></a>: <a class="idref" href="clutch.prob_lang.locations.html#loc"><span class="id" title="record">loc</span></a><span class="id" title="notation">),</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.lib.map.html#K:20"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#l:21"><span class="id" title="variable">l</span></a>) <span class="id" title="notation">∗</span> <a class="idref" href="clutch.lib.map.html#assoc_slist"><span class="id" title="definition">assoc_slist</span></a> <a class="idref" href="clutch.lib.map.html#l:21"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.map.html#init_list"><span class="id" title="definition">init_list</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_alloc</span> <span class="id" title="keyword">as</span> <span class="id" title="var">l</span> "Hl".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_cons_list" class="idref" href="#wp_cons_list"><span class="id" title="lemma">wp_cons_list</span></a> <a id="E:22" class="idref" href="#E:22"><span class="id" title="binder">E</span></a> <a id="l:23" class="idref" href="#l:23"><span class="id" title="binder">l</span></a> <a id="vs:24" class="idref" href="#vs:24"><span class="id" title="binder">vs</span></a> (<a id="k:25" class="idref" href="#k:25"><span class="id" title="binder">k</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="v:26" class="idref" href="#v:26"><span class="id" title="binder">v</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a class="idref" href="clutch.lib.map.html#assoc_list"><span class="id" title="definition">assoc_list</span></a> <a class="idref" href="clutch.lib.map.html#l:23"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.lib.map.html#vs:24"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.map.html#cons_list"><span class="id" title="definition">cons_list</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#l:23"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#k:25"><span class="id" title="variable">k</span></a><a class="idref" href="clutch.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.lib.map.html#v:26"><span class="id" title="variable">v</span></a><a class="idref" href="clutch.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)</span></a>%<span class="id" title="var">V</span> <span class="id" title="notation">@</span> <a class="idref" href="clutch.lib.map.html#E:22"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a id="l':27" class="idref" href="#l':27"><span class="id" title="binder">l'</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitLoc"><span class="id" title="constructor">LitLoc</span></a> <a class="idref" href="clutch.lib.map.html#l':27"><span class="id" title="variable">l'</span></a>)<span class="id" title="notation">;</span> <a class="idref" href="clutch.lib.map.html#assoc_list"><span class="id" title="definition">assoc_list</span></a> <a class="idref" href="clutch.lib.map.html#l':27"><span class="id" title="variable">l'</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.lib.map.html#k:25"><span class="id" title="variable">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.lib.map.html#v:26"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="clutch.lib.map.html#vs:24"><span class="id" title="variable">vs</span></a>) <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "H HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.map.html#cons_list"><span class="id" title="definition">cons_list</span></a>. <span class="id" title="var">wp_pures</span>. <span class="id" title="var">wp_alloc</span> <span class="id" title="var">l'</span> <span class="id" title="keyword">as</span> "H'". <span class="id" title="var">iModIntro</span>. <span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">l</span>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_cons_list" class="idref" href="#spec_cons_list"><span class="id" title="lemma">spec_cons_list</span></a> <a id="E:28" class="idref" href="#E:28"><span class="id" title="binder">E</span></a> <a id="K:29" class="idref" href="#K:29"><span class="id" title="binder">K</span></a> <a id="l:30" class="idref" href="#l:30"><span class="id" title="binder">l</span></a> <a id="vs:31" class="idref" href="#vs:31"><span class="id" title="binder">vs</span></a> (<a id="k:32" class="idref" href="#k:32"><span class="id" title="binder">k</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="v:33" class="idref" href="#v:33"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.lib.map.html#E:28"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.map.html#assoc_slist"><span class="id" title="definition">assoc_slist</span></a> <a class="idref" href="clutch.lib.map.html#l:30"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.lib.map.html#vs:31"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.lib.map.html#K:29"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.lib.map.html#cons_list"><span class="id" title="definition">cons_list</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#l:30"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#k:32"><span class="id" title="variable">k</span></a><a class="idref" href="clutch.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.lib.map.html#v:33"><span class="id" title="variable">v</span></a><a class="idref" href="clutch.prob_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)</span></a>%<span class="id" title="var">V</span>) <span class="id" title="notation">={</span><a class="idref" href="clutch.lib.map.html#E:28"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="notation">(</span><a id="l:34" class="idref" href="#l:34"><span class="id" title="binder">l</span></a>: <a class="idref" href="clutch.prob_lang.locations.html#loc"><span class="id" title="record">loc</span></a><span class="id" title="notation">),</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.lib.map.html#K:29"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#l:34"><span class="id" title="variable">l</span></a>) <span class="id" title="notation">∗</span> <a class="idref" href="clutch.lib.map.html#assoc_slist"><span class="id" title="definition">assoc_slist</span></a> <a class="idref" href="clutch.lib.map.html#l:34"><span class="id" title="variable">l</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.lib.map.html#k:32"><span class="id" title="variable">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.lib.map.html#v:33"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="clutch.lib.map.html#vs:31"><span class="id" title="variable">vs</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "H Hr".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.map.html#cons_list"><span class="id" title="definition">cons_list</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_alloc</span> <span class="id" title="keyword">as</span> <span class="id" title="var">l'</span> "Hl".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="find_list_gallina" class="idref" href="#find_list_gallina"><span class="id" title="definition">find_list_gallina</span></a> (<a id="vs:35" class="idref" href="#vs:35"><span class="id" title="binder">vs</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>)) (<a id="k:36" class="idref" href="#k:36"><span class="id" title="binder">k</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="clutch.lib.map.html#vs:35"><span class="id" title="variable">vs</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">k'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">vs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <span class="id" title="definition">bool_decide</span> (<span class="id" title="var">k'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.lib.map.html#k:36"><span class="id" title="variable">k</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.map.html#find_list_gallina:37"><span class="id" title="definition">find_list_gallina</span></a> <a class="idref" href="clutch.lib.map.html#vs:35"><span class="id" title="variable">vs</span></a> <a class="idref" href="clutch.lib.map.html#k:36"><span class="id" title="variable">k</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="opt_to_val" class="idref" href="#opt_to_val"><span class="id" title="definition">opt_to_val</span></a> (<a id="ov:39" class="idref" href="#ov:39"><span class="id" title="binder">ov</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="clutch.lib.map.html#ov:39"><span class="id" title="variable">ov</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v</span> =&gt; <a class="idref" href="clutch.prob_lang.notation.html#SOMEV"><span class="id" title="abbreviation">SOMEV</span></a> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="clutch.prob_lang.notation.html#NONEV"><span class="id" title="abbreviation">NONEV</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_find_list" class="idref" href="#wp_find_list"><span class="id" title="lemma">wp_find_list</span></a> <a id="E:41" class="idref" href="#E:41"><span class="id" title="binder">E</span></a> <a id="l:42" class="idref" href="#l:42"><span class="id" title="binder">l</span></a> <a id="vs:43" class="idref" href="#vs:43"><span class="id" title="binder">vs</span></a> (<a id="k:44" class="idref" href="#k:44"><span class="id" title="binder">k</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a class="idref" href="clutch.lib.map.html#assoc_list"><span class="id" title="definition">assoc_list</span></a> <a class="idref" href="clutch.lib.map.html#l:42"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.lib.map.html#vs:43"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.map.html#find_list"><span class="id" title="definition">find_list</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#l:42"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#k:44"><span class="id" title="variable">k</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.lib.map.html#E:41"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a id="v:45" class="idref" href="#v:45"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.lib.map.html#v:45"><span class="id" title="variable">v</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.map.html#assoc_list"><span class="id" title="definition">assoc_list</span></a> <a class="idref" href="clutch.lib.map.html#l:42"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.lib.map.html#vs:43"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">⌜</span> <a class="idref" href="clutch.lib.map.html#v:45"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.lib.map.html#opt_to_val"><span class="id" title="definition">opt_to_val</span></a> (<a class="idref" href="clutch.lib.map.html#find_list_gallina"><span class="id" title="definition">find_list_gallina</span></a> <a class="idref" href="clutch.lib.map.html#vs:43"><span class="id" title="variable">vs</span></a> <a class="idref" href="clutch.lib.map.html#k:44"><span class="id" title="variable">k</span></a>) <span class="id" title="notation">⌝</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "Hassoc HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.map.html#find_list"><span class="id" title="definition">find_list</span></a>. <span class="id" title="var">iInduction</span> <span class="id" title="var">vs</span> <span class="id" title="keyword">as</span> [|(<span class="id" title="var">k'</span>, <span class="id" title="var">v'</span>) <span class="id" title="var">vs</span>] "IH" <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">wp_pures</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.map.html#assoc_list"><span class="id" title="definition">assoc_list</span></a>. <span class="id" title="var">wp_load</span>. <span class="id" title="var">wp_pures</span>. <span class="id" title="var">iModIntro</span>. <span class="id" title="var">iApply</span> "HΦ"; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">wp_pures</span>. <span class="id" title="var">iDestruct</span> "Hassoc" <span class="id" title="keyword">as</span> (?) "(Hl&amp;Hassoc)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_load</span>. <span class="id" title="var">wp_pures</span>. <span class="id" title="var">case_bool_decide</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hcase</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">wp_pures</span>. <span class="id" title="var">iApply</span> "HΦ". <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="abbreviation">bool_decide_true</span> //; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcase</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iSplit</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">wp_pure</span>. <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span>"IH" <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span>. <span class="id" title="var">iNext</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">v</span>) "Hfind". <span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iEval</span> <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="abbreviation">bool_decide_false</span> //; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hfind" <span class="id" title="keyword">as</span> "(?&amp;$)". <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_find_list_Z" class="idref" href="#wp_find_list_Z"><span class="id" title="lemma">wp_find_list_Z</span></a> <a id="E:46" class="idref" href="#E:46"><span class="id" title="binder">E</span></a> <a id="l:47" class="idref" href="#l:47"><span class="id" title="binder">l</span></a> <a id="vs:48" class="idref" href="#vs:48"><span class="id" title="binder">vs</span></a> (<a id="z:49" class="idref" href="#z:49"><span class="id" title="binder">z</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a class="idref" href="clutch.lib.map.html#assoc_list"><span class="id" title="definition">assoc_list</span></a> <a class="idref" href="clutch.lib.map.html#l:47"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.lib.map.html#vs:48"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.map.html#find_list"><span class="id" title="definition">find_list</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#l:47"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#z:49"><span class="id" title="variable">z</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.lib.map.html#E:46"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a id="v:50" class="idref" href="#v:50"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.lib.map.html#v:50"><span class="id" title="variable">v</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.map.html#assoc_list"><span class="id" title="definition">assoc_list</span></a> <a class="idref" href="clutch.lib.map.html#l:47"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.lib.map.html#vs:48"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">⌜</span> <a class="idref" href="clutch.lib.map.html#v:50"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <span class="id" title="definition">bool_decide</span> (<a class="idref" href="clutch.lib.map.html#z:49"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> 0)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.map.html#opt_to_val"><span class="id" title="definition">opt_to_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="clutch.lib.map.html#opt_to_val"><span class="id" title="definition">opt_to_val</span></a> (<a class="idref" href="clutch.lib.map.html#find_list_gallina"><span class="id" title="definition">find_list_gallina</span></a> <a class="idref" href="clutch.lib.map.html#vs:48"><span class="id" title="variable">vs</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.lib.map.html#z:49"><span class="id" title="variable">z</span></a>)) <span class="id" title="notation">⌝</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "Hassoc HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.map.html#find_list"><span class="id" title="definition">find_list</span></a>. <span class="id" title="var">iInduction</span> <span class="id" title="var">vs</span> <span class="id" title="keyword">as</span> [|(<span class="id" title="var">k'</span>, <span class="id" title="var">v'</span>) <span class="id" title="var">vs</span>] "IH" <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">wp_pures</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.map.html#assoc_list"><span class="id" title="definition">assoc_list</span></a>. <span class="id" title="var">wp_load</span>. <span class="id" title="var">wp_pures</span>. <span class="id" title="var">iModIntro</span>. <span class="id" title="var">iApply</span> "HΦ"; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /=. <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">bool_decide</span> <span class="id" title="var">_</span>) =&gt; //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">wp_pures</span>. <span class="id" title="var">iDestruct</span> "Hassoc" <span class="id" title="keyword">as</span> (?) "(Hl&amp;Hassoc)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_load</span>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">bool_decide</span> (<a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><span class="id" title="var">k'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><span class="id" title="var">z</span>)) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hbool</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">bool_decide_eq_true_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbool</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="var">iApply</span> "HΦ". <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hbool</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="abbreviation">bool_decide_false</span> //; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="abbreviation">bool_decide_true</span> //; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iSplit</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">wp_pure</span>. <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span>"IH" <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span>. <span class="id" title="var">iNext</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">v</span>) "Hfind". <span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">bool_decide_eq_false_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbool</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iEval</span> (<span class="id" title="tactic">simpl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iDestruct</span> "Hfind" <span class="id" title="keyword">as</span> "(?&amp;$)". <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="abbreviation">bool_decide_false</span> (<span class="id" title="var">k'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span>)); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hbool</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.Znat.html#Z2Nat.id"><span class="id" title="lemma">Z2Nat.id</span></a>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hfind" <span class="id" title="keyword">as</span> "(?&amp;$)". <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_find_list" class="idref" href="#spec_find_list"><span class="id" title="lemma">spec_find_list</span></a> <a id="E:51" class="idref" href="#E:51"><span class="id" title="binder">E</span></a> <a id="K:52" class="idref" href="#K:52"><span class="id" title="binder">K</span></a> <a id="l:53" class="idref" href="#l:53"><span class="id" title="binder">l</span></a> <a id="vs:54" class="idref" href="#vs:54"><span class="id" title="binder">vs</span></a> (<a id="k:55" class="idref" href="#k:55"><span class="id" title="binder">k</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.lib.map.html#E:51"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.map.html#assoc_slist"><span class="id" title="definition">assoc_slist</span></a> <a class="idref" href="clutch.lib.map.html#l:53"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.lib.map.html#vs:54"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.lib.map.html#K:52"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.lib.map.html#find_list"><span class="id" title="definition">find_list</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#l:53"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#k:55"><span class="id" title="variable">k</span></a>) <span class="id" title="notation">={</span><a class="idref" href="clutch.lib.map.html#E:51"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.lib.map.html#K:52"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.lib.map.html#opt_to_val"><span class="id" title="definition">opt_to_val</span></a> (<a class="idref" href="clutch.lib.map.html#find_list_gallina"><span class="id" title="definition">find_list_gallina</span></a> <a class="idref" href="clutch.lib.map.html#vs:54"><span class="id" title="variable">vs</span></a> <a class="idref" href="clutch.lib.map.html#k:55"><span class="id" title="variable">k</span></a>)) <span class="id" title="notation">∗</span> <a class="idref" href="clutch.lib.map.html#assoc_slist"><span class="id" title="definition">assoc_slist</span></a> <a class="idref" href="clutch.lib.map.html#l:53"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.lib.map.html#vs:54"><span class="id" title="variable">vs</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "H Hr".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.map.html#find_list"><span class="id" title="definition">find_list</span></a>. <span class="id" title="var">iInduction</span> <span class="id" title="var">vs</span> <span class="id" title="keyword">as</span> [|(<span class="id" title="var">k'</span>, <span class="id" title="var">v'</span>) <span class="id" title="var">vs</span>] "IH" <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">tp_pures</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.map.html#assoc_list"><span class="id" title="definition">assoc_list</span></a>. <span class="id" title="var">tp_load</span>. <span class="id" title="var">tp_pures</span>. <span class="id" title="var">iModIntro</span>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">tp_pures</span>. <span class="id" title="var">iDestruct</span> "H" <span class="id" title="keyword">as</span> (?) "(Hl&amp;Hassoc)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_load</span>. <span class="id" title="var">tp_pures</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">solve_vals_compare_safe</span>. <span class="id" title="var">case_bool_decide</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hcase</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">tp_pures</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="abbreviation">bool_decide_true</span> //; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcase</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iFrame</span> "Hr". <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">tp_pure</span>. <span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"IH" <span class="id" title="notation">with</span> "[$Hassoc] [$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "(?&amp;?)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iEval</span> <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="abbreviation">bool_decide_false</span> //; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="var">iModIntro</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_find_list_Z" class="idref" href="#spec_find_list_Z"><span class="id" title="lemma">spec_find_list_Z</span></a> <a id="E:56" class="idref" href="#E:56"><span class="id" title="binder">E</span></a> <a id="K:57" class="idref" href="#K:57"><span class="id" title="binder">K</span></a> <a id="l:58" class="idref" href="#l:58"><span class="id" title="binder">l</span></a> <a id="vs:59" class="idref" href="#vs:59"><span class="id" title="binder">vs</span></a> (<a id="z:60" class="idref" href="#z:60"><span class="id" title="binder">z</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.lib.map.html#E:56"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.map.html#assoc_slist"><span class="id" title="definition">assoc_slist</span></a> <a class="idref" href="clutch.lib.map.html#l:58"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.lib.map.html#vs:59"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.lib.map.html#K:57"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.lib.map.html#find_list"><span class="id" title="definition">find_list</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#l:58"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#z:60"><span class="id" title="variable">z</span></a>) <span class="id" title="notation">={</span><a class="idref" href="clutch.lib.map.html#E:56"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.lib.map.html#K:57"><span class="id" title="variable">K</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <span class="id" title="definition">bool_decide</span> (<a class="idref" href="clutch.lib.map.html#z:60"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> 0)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.map.html#opt_to_val"><span class="id" title="definition">opt_to_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="clutch.lib.map.html#opt_to_val"><span class="id" title="definition">opt_to_val</span></a> (<a class="idref" href="clutch.lib.map.html#find_list_gallina"><span class="id" title="definition">find_list_gallina</span></a> <a class="idref" href="clutch.lib.map.html#vs:59"><span class="id" title="variable">vs</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.lib.map.html#z:60"><span class="id" title="variable">z</span></a>))) <span class="id" title="notation">∗</span> <a class="idref" href="clutch.lib.map.html#assoc_slist"><span class="id" title="definition">assoc_slist</span></a> <a class="idref" href="clutch.lib.map.html#l:58"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.lib.map.html#vs:59"><span class="id" title="variable">vs</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "H Hr".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.map.html#find_list"><span class="id" title="definition">find_list</span></a>. <span class="id" title="var">iInduction</span> <span class="id" title="var">vs</span> <span class="id" title="keyword">as</span> [|(<span class="id" title="var">k'</span>, <span class="id" title="var">v'</span>) <span class="id" title="var">vs</span>] "IH" <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">tp_pures</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.map.html#assoc_list"><span class="id" title="definition">assoc_list</span></a>. <span class="id" title="var">tp_load</span>. <span class="id" title="var">tp_pures</span>. <span class="id" title="var">iModIntro</span>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /=. <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">bool_decide</span> <span class="id" title="var">_</span>) =&gt; //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">tp_pures</span>. <span class="id" title="var">iDestruct</span> "H" <span class="id" title="keyword">as</span> (?) "(Hl&amp;Hassoc)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_load</span>. <span class="id" title="var">tp_pures</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">solve_vals_compare_safe</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">bool_decide</span> (<a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><span class="id" title="var">k'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><span class="id" title="var">z</span>)) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hbool</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">bool_decide_eq_true_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbool</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hbool</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="abbreviation">bool_decide_false</span> //; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="abbreviation">bool_decide_true</span> //; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">tp_pure</span>. <span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"IH" <span class="id" title="notation">with</span> "[$Hassoc] [$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "(?&amp;?)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">bool_decide_eq_false_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbool</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iEval</span> (<span class="id" title="tactic">simpl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iFrame</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="abbreviation">bool_decide_false</span> (<span class="id" title="var">k'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span>)); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hbool</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.Znat.html#Z2Nat.id"><span class="id" title="lemma">Z2Nat.id</span></a>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="var">iModIntro</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="init_map" class="idref" href="#init_map"><span class="id" title="definition">init_map</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">:</span></a> <span class="id" title="notation">&lt;&gt;</span><a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">ref</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.lib.map.html#init_list"><span class="id" title="definition">init_list</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a><a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="get" class="idref" href="#get"><span class="id" title="definition">get</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">:</span></a> "m" "k"<a class="idref" href="clutch.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.lib.map.html#find_list"><span class="id" title="definition">find_list</span></a> <a class="idref" href="clutch.prob_lang.notation.html#569b74bc432a2b233b93ae1b45418e26"><span class="id" title="notation">!</span></a>"m" "k".<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="set" class="idref" href="#set"><span class="id" title="definition">set</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">:</span></a> "m" "k" "v"<a class="idref" href="clutch.prob_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">,</span></a> "m" <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&lt;-'_x"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="clutch.lib.map.html#cons_list"><span class="id" title="definition">cons_list</span></a> <a class="idref" href="clutch.prob_lang.notation.html#569b74bc432a2b233b93ae1b45418e26"><span class="id" title="notation">!</span></a>"m" <a class="idref" href="clutch.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">(</span></a>"k"<a class="idref" href="clutch.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">,</span></a> "v"<a class="idref" href="clutch.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="map_list" class="idref" href="#map_list"><span class="id" title="definition">map_list</span></a> <a id="lm:61" class="idref" href="#lm:61"><span class="id" title="binder">lm</span></a> (<a id="m:62" class="idref" href="#m:62"><span class="id" title="binder">m</span></a>: <span class="id" title="record">gmap</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="clutch.lib.map.html#c7eff69ea92bdcd1ab19ed88c893074b"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="notation">(</span><a id="lv:63" class="idref" href="#lv:63"><span class="id" title="binder">lv</span></a> : <a class="idref" href="clutch.prob_lang.locations.html#loc"><span class="id" title="record">loc</span></a>) <a id="vs:64" class="idref" href="#vs:64"><span class="id" title="binder">vs</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.lib.map.html#lm:61"><span class="id" title="variable">lm</span></a> <a class="idref" href="clutch.rel_logic.primitive_laws.html#db9bde1508f348dd1f9d24e9d4ead804"><span class="id" title="notation">↦</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#lv:63"><span class="id" title="variable">lv</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">⌜</span> <span class="id" title="definition">list_to_map</span> <a class="idref" href="clutch.lib.map.html#vs:64"><span class="id" title="variable">vs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.lib.map.html#m:62"><span class="id" title="variable">m</span></a> <span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.lib.map.html#assoc_list"><span class="id" title="definition">assoc_list</span></a> <a class="idref" href="clutch.lib.map.html#lv:63"><span class="id" title="variable">lv</span></a> <a class="idref" href="clutch.lib.map.html#vs:64"><span class="id" title="variable">vs</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="map_slist" class="idref" href="#map_slist"><span class="id" title="definition">map_slist</span></a> <a id="lm:65" class="idref" href="#lm:65"><span class="id" title="binder">lm</span></a> (<a id="m:66" class="idref" href="#m:66"><span class="id" title="binder">m</span></a>: <span class="id" title="record">gmap</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="clutch.lib.map.html#c7eff69ea92bdcd1ab19ed88c893074b"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="notation">(</span><a id="lv:67" class="idref" href="#lv:67"><span class="id" title="binder">lv</span></a> : <a class="idref" href="clutch.prob_lang.locations.html#loc"><span class="id" title="record">loc</span></a>) <a id="vs:68" class="idref" href="#vs:68"><span class="id" title="binder">vs</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.lib.map.html#lm:65"><span class="id" title="variable">lm</span></a> <a class="idref" href="clutch.rel_logic.spec_ra.html#0326014f985dcbdf069e6962e826748b"><span class="id" title="notation">↦ₛ</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#lv:67"><span class="id" title="variable">lv</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">⌜</span> <span class="id" title="definition">list_to_map</span> <a class="idref" href="clutch.lib.map.html#vs:68"><span class="id" title="variable">vs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.lib.map.html#m:66"><span class="id" title="variable">m</span></a> <span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.lib.map.html#assoc_slist"><span class="id" title="definition">assoc_slist</span></a> <a class="idref" href="clutch.lib.map.html#lv:67"><span class="id" title="variable">lv</span></a> <a class="idref" href="clutch.lib.map.html#vs:68"><span class="id" title="variable">vs</span></a>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="timeless_map_list" class="idref" href="#timeless_map_list"><span class="id" title="instance">timeless_map_list</span></a> <a id="l:69" class="idref" href="#l:69"><span class="id" title="binder">l</span></a> <a id="m:70" class="idref" href="#m:70"><span class="id" title="binder">m</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="class">Timeless</span> (<a class="idref" href="clutch.lib.map.html#map_list"><span class="id" title="definition">map_list</span></a> <a class="idref" href="clutch.lib.map.html#l:69"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.lib.map.html#m:70"><span class="id" title="variable">m</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">_</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="timeless_map_slist" class="idref" href="#timeless_map_slist"><span class="id" title="instance">timeless_map_slist</span></a> <a id="l:71" class="idref" href="#l:71"><span class="id" title="binder">l</span></a> <a id="m:72" class="idref" href="#m:72"><span class="id" title="binder">m</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="class">Timeless</span> (<a class="idref" href="clutch.lib.map.html#map_slist"><span class="id" title="definition">map_slist</span></a> <a class="idref" href="clutch.lib.map.html#l:71"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.lib.map.html#m:72"><span class="id" title="variable">m</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">_</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_init_map" class="idref" href="#wp_init_map"><span class="id" title="lemma">wp_init_map</span></a> <a id="E:73" class="idref" href="#E:73"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">True</span> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.map.html#init_map"><span class="id" title="definition">init_map</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.lib.map.html#E:73"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a id="l:74" class="idref" href="#l:74"><span class="id" title="binder">l</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitV"><span class="id" title="constructor">LitV</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitLoc"><span class="id" title="constructor">LitLoc</span></a> <a class="idref" href="clutch.lib.map.html#l:74"><span class="id" title="variable">l</span></a>)<span class="id" title="notation">;</span> <a class="idref" href="clutch.lib.map.html#map_list"><span class="id" title="definition">map_list</span></a> <a class="idref" href="clutch.lib.map.html#l:74"><span class="id" title="variable">l</span></a> <span class="id" title="notation">∅</span> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "_ HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.map.html#init_map"><span class="id" title="definition">init_map</span></a>. <span class="id" title="var">wp_pures</span>. <span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.lib.map.html#wp_init_list"><span class="id" title="lemma">wp_init_list</span></a> <span class="id" title="notation">with</span> "[//]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">l</span>) "Halloc". <span class="id" title="var">wp_alloc</span> <span class="id" title="var">lm</span>. <span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_init_map" class="idref" href="#spec_init_map"><span class="id" title="lemma">spec_init_map</span></a> <a id="E:75" class="idref" href="#E:75"><span class="id" title="binder">E</span></a> <a id="K:76" class="idref" href="#K:76"><span class="id" title="binder">K</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.lib.map.html#E:75"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.lib.map.html#K:76"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.lib.map.html#init_map"><span class="id" title="definition">init_map</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>) <span class="id" title="notation">={</span><a class="idref" href="clutch.lib.map.html#E:75"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <span class="id" title="notation">∃</span> <span class="id" title="notation">(</span><a id="l:77" class="idref" href="#l:77"><span class="id" title="binder">l</span></a>: <a class="idref" href="clutch.prob_lang.locations.html#loc"><span class="id" title="record">loc</span></a><span class="id" title="notation">),</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.lib.map.html#K:76"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#l:77"><span class="id" title="variable">l</span></a>) <span class="id" title="notation">∗</span> <a class="idref" href="clutch.lib.map.html#map_slist"><span class="id" title="definition">map_slist</span></a> <a class="idref" href="clutch.lib.map.html#l:77"><span class="id" title="variable">l</span></a> <span class="id" title="notation">∅</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.map.html#init_map"><span class="id" title="definition">init_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_bind</span> (<a class="idref" href="clutch.lib.map.html#init_list"><span class="id" title="definition">init_list</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.lib.map.html#spec_init_list"><span class="id" title="lemma">spec_init_list</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">l</span>) "(HK&amp;Halloc)"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iEval</span> (<span class="id" title="tactic">rewrite</span> -<a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a> /=) <span class="id" title="tactic">in</span> "HK".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_alloc</span> <span class="id" title="keyword">as</span> <span class="id" title="var">lm</span> "Hl".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="find_list_gallina_map_lookup" class="idref" href="#find_list_gallina_map_lookup"><span class="id" title="lemma">find_list_gallina_map_lookup</span></a> <a id="vs:78" class="idref" href="#vs:78"><span class="id" title="binder">vs</span></a> (<a id="m:79" class="idref" href="#m:79"><span class="id" title="binder">m</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) <a id="n:80" class="idref" href="#n:80"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">list_to_map</span> <a class="idref" href="clutch.lib.map.html#vs:78"><span class="id" title="variable">vs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.lib.map.html#m:79"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.map.html#find_list_gallina"><span class="id" title="definition">find_list_gallina</span></a> <a class="idref" href="clutch.lib.map.html#vs:78"><span class="id" title="variable">vs</span></a> <a class="idref" href="clutch.lib.map.html#n:80"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.lib.map.html#m:79"><span class="id" title="variable">m</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="clutch.lib.map.html#n:80"><span class="id" title="variable">n</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">m</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">vs</span> <span class="id" title="keyword">as</span> [| (<span class="id" title="var">k</span>, <span class="id" title="var">v</span>) <span class="id" title="var">vs</span> <span class="id" title="var">IH</span>] =&gt; <span class="id" title="var">m</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /=. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">list_to_map_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert</span> /= <span class="id" title="abbreviation">bool_decide_true</span> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //= <span class="id" title="abbreviation">bool_decide_false</span> //. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_get" class="idref" href="#wp_get"><span class="id" title="lemma">wp_get</span></a> <a id="E:81" class="idref" href="#E:81"><span class="id" title="binder">E</span></a> <a id="lm:82" class="idref" href="#lm:82"><span class="id" title="binder">lm</span></a> <a id="m:83" class="idref" href="#m:83"><span class="id" title="binder">m</span></a> (<a id="n:84" class="idref" href="#n:84"><span class="id" title="binder">n</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a class="idref" href="clutch.lib.map.html#map_list"><span class="id" title="definition">map_list</span></a> <a class="idref" href="clutch.lib.map.html#lm:82"><span class="id" title="variable">lm</span></a> <a class="idref" href="clutch.lib.map.html#m:83"><span class="id" title="variable">m</span></a> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.map.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#lm:82"><span class="id" title="variable">lm</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#n:84"><span class="id" title="variable">n</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.lib.map.html#E:81"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a id="res:85" class="idref" href="#res:85"><span class="id" title="binder">res</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.lib.map.html#res:85"><span class="id" title="variable">res</span></a><span class="id" title="notation">;</span> <a class="idref" href="clutch.lib.map.html#map_list"><span class="id" title="definition">map_list</span></a> <a class="idref" href="clutch.lib.map.html#lm:82"><span class="id" title="variable">lm</span></a> <a class="idref" href="clutch.lib.map.html#m:83"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">⌜</span> <a class="idref" href="clutch.lib.map.html#res:85"><span class="id" title="variable">res</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.lib.map.html#opt_to_val"><span class="id" title="definition">opt_to_val</span></a> (<a class="idref" href="clutch.lib.map.html#m:83"><span class="id" title="variable">m</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="clutch.lib.map.html#n:84"><span class="id" title="variable">n</span></a>) <span class="id" title="notation">⌝</span> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "Hm HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.map.html#get"><span class="id" title="definition">get</span></a>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hm" <span class="id" title="keyword">as</span> (<span class="id" title="var">ll</span> <span class="id" title="var">vs</span>) "(Hll&amp;%Heq&amp;Hassoc)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_load</span>. <span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.lib.map.html#wp_find_list"><span class="id" title="lemma">wp_find_list</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">vret</span>) "(Hassoc&amp;Hm)". <span class="id" title="var">iApply</span> "HΦ". <span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="clutch.lib.map.html#find_list_gallina_map_lookup"><span class="id" title="lemma">find_list_gallina_map_lookup</span></a> <span class="id" title="var">vs</span> <span class="id" title="var">m</span>) //.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_get_Z" class="idref" href="#wp_get_Z"><span class="id" title="lemma">wp_get_Z</span></a> <a id="E:86" class="idref" href="#E:86"><span class="id" title="binder">E</span></a> <a id="lm:87" class="idref" href="#lm:87"><span class="id" title="binder">lm</span></a> <a id="m:88" class="idref" href="#m:88"><span class="id" title="binder">m</span></a> (<a id="z:89" class="idref" href="#z:89"><span class="id" title="binder">z</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a class="idref" href="clutch.lib.map.html#map_list"><span class="id" title="definition">map_list</span></a> <a class="idref" href="clutch.lib.map.html#lm:87"><span class="id" title="variable">lm</span></a> <a class="idref" href="clutch.lib.map.html#m:88"><span class="id" title="variable">m</span></a> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.map.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#lm:87"><span class="id" title="variable">lm</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#z:89"><span class="id" title="variable">z</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.lib.map.html#E:86"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a id="res:90" class="idref" href="#res:90"><span class="id" title="binder">res</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.lib.map.html#res:90"><span class="id" title="variable">res</span></a><span class="id" title="notation">;</span> <a class="idref" href="clutch.lib.map.html#map_list"><span class="id" title="definition">map_list</span></a> <a class="idref" href="clutch.lib.map.html#lm:87"><span class="id" title="variable">lm</span></a> <a class="idref" href="clutch.lib.map.html#m:88"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⌜</span> <a class="idref" href="clutch.lib.map.html#res:90"><span class="id" title="variable">res</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">(</span></a><span class="id" title="definition">bool_decide</span> (<a class="idref" href="clutch.lib.map.html#z:89"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> 0)%<span class="id" title="var">Z</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.map.html#opt_to_val"><span class="id" title="definition">opt_to_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a>  <a class="idref" href="clutch.lib.map.html#opt_to_val"><span class="id" title="definition">opt_to_val</span></a> (<a class="idref" href="clutch.lib.map.html#m:88"><span class="id" title="variable">m</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.lib.map.html#z:89"><span class="id" title="variable">z</span></a>)<span class="id" title="notation">⌝</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "Hm HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.map.html#get"><span class="id" title="definition">get</span></a>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hm" <span class="id" title="keyword">as</span> (<span class="id" title="var">ll</span> <span class="id" title="var">vs</span>) "(Hll&amp;%Heq&amp;Hassoc)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_load</span>. <span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.lib.map.html#wp_find_list_Z"><span class="id" title="lemma">wp_find_list_Z</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">vret</span>) "(Hassoc&amp;Hm)". <span class="id" title="var">iApply</span> "HΦ". <span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="clutch.lib.map.html#find_list_gallina_map_lookup"><span class="id" title="lemma">find_list_gallina_map_lookup</span></a> <span class="id" title="var">vs</span> <span class="id" title="var">m</span>) //.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_get" class="idref" href="#spec_get"><span class="id" title="lemma">spec_get</span></a> <a id="E:91" class="idref" href="#E:91"><span class="id" title="binder">E</span></a> <a id="K:92" class="idref" href="#K:92"><span class="id" title="binder">K</span></a> <a id="lm:93" class="idref" href="#lm:93"><span class="id" title="binder">lm</span></a> <a id="m:94" class="idref" href="#m:94"><span class="id" title="binder">m</span></a> (<a id="n:95" class="idref" href="#n:95"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.lib.map.html#E:91"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.map.html#map_slist"><span class="id" title="definition">map_slist</span></a> <a class="idref" href="clutch.lib.map.html#lm:93"><span class="id" title="variable">lm</span></a> <a class="idref" href="clutch.lib.map.html#m:94"><span class="id" title="variable">m</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.lib.map.html#K:92"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.lib.map.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#lm:93"><span class="id" title="variable">lm</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#n:95"><span class="id" title="variable">n</span></a>) <span class="id" title="notation">={</span><a class="idref" href="clutch.lib.map.html#E:91"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.lib.map.html#K:92"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.lib.map.html#opt_to_val"><span class="id" title="definition">opt_to_val</span></a> (<a class="idref" href="clutch.lib.map.html#m:94"><span class="id" title="variable">m</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="clutch.lib.map.html#n:95"><span class="id" title="variable">n</span></a>)) <span class="id" title="notation">∗</span> <a class="idref" href="clutch.lib.map.html#map_slist"><span class="id" title="definition">map_slist</span></a> <a class="idref" href="clutch.lib.map.html#lm:93"><span class="id" title="variable">lm</span></a> <a class="idref" href="clutch.lib.map.html#m:94"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "Hm Hr".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.map.html#get"><span class="id" title="definition">get</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hm" <span class="id" title="keyword">as</span> (<span class="id" title="var">ll</span> <span class="id" title="var">vs</span>) "(Hll&amp;%Heq&amp;Hassoc)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_load</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.lib.map.html#spec_find_list"><span class="id" title="lemma">spec_find_list</span></a> <span class="id" title="notation">with</span> "[$] [$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "(HK&amp;Halloc)"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="clutch.lib.map.html#find_list_gallina_map_lookup"><span class="id" title="lemma">find_list_gallina_map_lookup</span></a> <span class="id" title="var">vs</span> <span class="id" title="var">m</span>) //. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span> ,<span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_get_Z" class="idref" href="#spec_get_Z"><span class="id" title="lemma">spec_get_Z</span></a> <a id="E:96" class="idref" href="#E:96"><span class="id" title="binder">E</span></a> <a id="K:97" class="idref" href="#K:97"><span class="id" title="binder">K</span></a> <a id="lm:98" class="idref" href="#lm:98"><span class="id" title="binder">lm</span></a> <a id="m:99" class="idref" href="#m:99"><span class="id" title="binder">m</span></a> (<a id="z:100" class="idref" href="#z:100"><span class="id" title="binder">z</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.lib.map.html#E:96"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.map.html#map_slist"><span class="id" title="definition">map_slist</span></a> <a class="idref" href="clutch.lib.map.html#lm:98"><span class="id" title="variable">lm</span></a> <a class="idref" href="clutch.lib.map.html#m:99"><span class="id" title="variable">m</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.lib.map.html#K:97"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.lib.map.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#lm:98"><span class="id" title="variable">lm</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#z:100"><span class="id" title="variable">z</span></a>) <span class="id" title="notation">={</span><a class="idref" href="clutch.lib.map.html#E:96"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.lib.map.html#K:97"><span class="id" title="variable">K</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <span class="id" title="definition">bool_decide</span> (<a class="idref" href="clutch.lib.map.html#z:100"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> 0)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.map.html#opt_to_val"><span class="id" title="definition">opt_to_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="clutch.lib.map.html#opt_to_val"><span class="id" title="definition">opt_to_val</span></a> (<a class="idref" href="clutch.lib.map.html#m:99"><span class="id" title="variable">m</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.lib.map.html#z:100"><span class="id" title="variable">z</span></a>)) <span class="id" title="notation">∗</span> <a class="idref" href="clutch.lib.map.html#map_slist"><span class="id" title="definition">map_slist</span></a> <a class="idref" href="clutch.lib.map.html#lm:98"><span class="id" title="variable">lm</span></a> <a class="idref" href="clutch.lib.map.html#m:99"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "Hm Hr".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.map.html#get"><span class="id" title="definition">get</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hm" <span class="id" title="keyword">as</span> (<span class="id" title="var">ll</span> <span class="id" title="var">vs</span>) "(Hll&amp;%Heq&amp;Hassoc)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_load</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.lib.map.html#spec_find_list_Z"><span class="id" title="lemma">spec_find_list_Z</span></a> <span class="id" title="notation">with</span> "[$] [$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "(HK&amp;Halloc)"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="clutch.lib.map.html#find_list_gallina_map_lookup"><span class="id" title="lemma">find_list_gallina_map_lookup</span></a> <span class="id" title="var">vs</span> <span class="id" title="var">m</span>) //. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span> ,<span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_set" class="idref" href="#wp_set"><span class="id" title="lemma">wp_set</span></a> <a id="E:101" class="idref" href="#E:101"><span class="id" title="binder">E</span></a> <a id="lm:102" class="idref" href="#lm:102"><span class="id" title="binder">lm</span></a> <a id="m:103" class="idref" href="#m:103"><span class="id" title="binder">m</span></a> (<a id="n:104" class="idref" href="#n:104"><span class="id" title="binder">n</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="v:105" class="idref" href="#v:105"><span class="id" title="binder">v</span></a>: <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a class="idref" href="clutch.lib.map.html#map_list"><span class="id" title="definition">map_list</span></a> <a class="idref" href="clutch.lib.map.html#lm:102"><span class="id" title="variable">lm</span></a> <a class="idref" href="clutch.lib.map.html#m:103"><span class="id" title="variable">m</span></a> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.map.html#set"><span class="id" title="definition">set</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#lm:102"><span class="id" title="variable">lm</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#n:104"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.lib.map.html#v:105"><span class="id" title="variable">v</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.lib.map.html#E:101"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a><span class="id" title="notation">;</span> <a class="idref" href="clutch.lib.map.html#map_list"><span class="id" title="definition">map_list</span></a> <a class="idref" href="clutch.lib.map.html#lm:102"><span class="id" title="variable">lm</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="clutch.lib.map.html#n:104"><span class="id" title="variable">n</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="clutch.lib.map.html#v:105"><span class="id" title="variable">v</span></a><span class="id" title="notation">]&gt;</span><span class="id" title="notation">m</span>) <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "Hm HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.map.html#set"><span class="id" title="definition">set</span></a>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hm" <span class="id" title="keyword">as</span> (??) "(?&amp;%Heq&amp;Hassoc)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_load</span>. <span class="id" title="var">wp_pures</span>. <span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.lib.map.html#wp_cons_list"><span class="id" title="lemma">wp_cons_list</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">l'</span>) "Hassoc'". <span class="id" title="var">wp_store</span>. <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HΦ". <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">list_to_map_cons</span> <span class="id" title="var">Heq</span> //.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_set" class="idref" href="#spec_set"><span class="id" title="lemma">spec_set</span></a> <a id="E:106" class="idref" href="#E:106"><span class="id" title="binder">E</span></a> <a id="K:107" class="idref" href="#K:107"><span class="id" title="binder">K</span></a> <a id="lm:108" class="idref" href="#lm:108"><span class="id" title="binder">lm</span></a> <a id="m:109" class="idref" href="#m:109"><span class="id" title="binder">m</span></a> (<a id="n:110" class="idref" href="#n:110"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="v:111" class="idref" href="#v:111"><span class="id" title="binder">v</span></a>: <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.lib.map.html#E:106"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.map.html#map_slist"><span class="id" title="definition">map_slist</span></a> <a class="idref" href="clutch.lib.map.html#lm:108"><span class="id" title="variable">lm</span></a> <a class="idref" href="clutch.lib.map.html#m:109"><span class="id" title="variable">m</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.lib.map.html#K:107"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.lib.map.html#set"><span class="id" title="definition">set</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#lm:108"><span class="id" title="variable">lm</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.map.html#n:110"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.lib.map.html#v:111"><span class="id" title="variable">v</span></a>) <span class="id" title="notation">={</span><a class="idref" href="clutch.lib.map.html#E:106"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.lib.map.html#K:107"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.lib.map.html#map_slist"><span class="id" title="definition">map_slist</span></a> <a class="idref" href="clutch.lib.map.html#lm:108"><span class="id" title="variable">lm</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="clutch.lib.map.html#n:110"><span class="id" title="variable">n</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="clutch.lib.map.html#v:111"><span class="id" title="variable">v</span></a><span class="id" title="notation">]&gt;</span><span class="id" title="notation">m</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "Hm Hr".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.map.html#set"><span class="id" title="definition">set</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hm" <span class="id" title="keyword">as</span> (<span class="id" title="var">ll</span> <span class="id" title="var">vs</span>) "(Hll&amp;%Heq&amp;Hassoc)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_load</span>. <span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_bind</span> (<a class="idref" href="clutch.lib.map.html#cons_list"><span class="id" title="definition">cons_list</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iEval</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a>) <span class="id" title="tactic">in</span> "Hr".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.lib.map.html#spec_cons_list"><span class="id" title="lemma">spec_cons_list</span></a> <span class="id" title="notation">with</span> "[$] [$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> (?)"(Hr&amp;Halloc)"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iEval</span> (<span class="id" title="tactic">rewrite</span> -<a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a> /=) <span class="id" title="tactic">in</span> "Hr".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_store</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">list_to_map_cons</span> <span class="id" title="var">Heq</span> //.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="clutch.lib.map.html#map"><span class="id" title="section">map</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/coq-community/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
