<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resources/config.js"></script>
<script type="text/javascript" src="resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">clutch.prob_lang.erasure</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Reals.Reals.html#"><span class="id" title="library">Reals</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.micromega.Psatz.html#"><span class="id" title="library">Psatz</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coquelicot</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Rcomplements</span> <span class="id" title="library">Rbar</span> <span class="id" title="library">Lim_seq</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">fin_maps</span> <span class="id" title="library">fin_map_dom</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch.prelude</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#"><span class="id" title="library">stdpp_ext</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch.program_logic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="clutch.program_logic.language.html#"><span class="id" title="library">language</span></a> <a class="idref" href="clutch.program_logic.ectx_language.html#"><span class="id" title="library">ectx_language</span></a> <a class="idref" href="clutch.program_logic.exec.html#"><span class="id" title="library">exec</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch.prob_lang</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="clutch.prob_lang.locations.html#"><span class="id" title="library">locations</span></a> <a class="idref" href="clutch.prob_lang.notation.html#"><span class="id" title="library">notation</span></a> <a class="idref" href="clutch.prob_lang.lang.html#"><span class="id" title="library">lang</span></a> <a class="idref" href="clutch.prob_lang.metatheory.html#"><span class="id" title="library">metatheory</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch.prob</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="clutch.prob.couplings.html#"><span class="id" title="library">couplings</span></a>.<br/>

<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Default</span> <span class="id" title="keyword">Proof</span> <span class="id" title="var">Using</span> "Type*".<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">R</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="erasure_helpers" class="idref" href="#erasure_helpers"><span class="id" title="section">erasure_helpers</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> (<a id="erasure_helpers.m" class="idref" href="#erasure_helpers.m"><span class="id" title="variable">m</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a id="erasure_helpers.IH" class="idref" href="#erasure_helpers.IH"><span class="id" title="variable">IH</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="e1:2" class="idref" href="#e1:2"><span class="id" title="binder">e1</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.expr"><span class="id" title="inductive">expr</span></a>) (<a id="d9fc2e86675058e8837bdbd5ef077a4c" class="idref" href="#d9fc2e86675058e8837bdbd5ef077a4c"><span class="id" title="binder">σ1</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state"><span class="id" title="record">state</span></a>) <a id="29b7e245491c61285b1fb561776b6302" class="idref" href="#29b7e245491c61285b1fb561776b6302"><span class="id" title="binder">α</span></a> <a id="N:5" class="idref" href="#N:5"><span class="id" title="binder">N</span></a> <a id="zs:6" class="idref" href="#zs:6"><span class="id" title="binder">zs</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#d9fc2e86675058e8837bdbd5ef077a4c"><span class="id" title="variable">σ1</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="clutch.prob_lang.erasure.html#29b7e245491c61285b1fb561776b6302"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#N:5"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#zs:6"><span class="id" title="variable">zs</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers.m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#e1:2"><span class="id" title="variable">e1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#d9fc2e86675058e8837bdbd5ef077a4c"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dunifP"><span class="id" title="definition">dunifP</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#N:5"><span class="id" title="variable">N</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="z:7" class="idref" href="#z:7"><span class="id" title="binder">z</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers.m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#e1:2"><span class="id" title="variable">e1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <span class="id" title="notation">&lt;[</span><a class="idref" href="clutch.prob_lang.erasure.html#29b7e245491c61285b1fb561776b6302"><span class="id" title="variable">α</span></a><span class="id" title="notation">:=</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#N:5"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#zs:6"><span class="id" title="variable">zs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.erasure.html#z:7"><span class="id" title="variable">z</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><span class="id" title="notation">]&gt;</span> <a class="idref" href="clutch.prob_lang.erasure.html#d9fc2e86675058e8837bdbd5ef077a4c"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">)</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a id="ind_case_det" class="idref" href="#ind_case_det"><span class="id" title="lemma">ind_case_det</span></a> <a id="e:9" class="idref" href="#e:9"><span class="id" title="binder">e</span></a> <a id="962aaeeff05b6bd0df6153509c8e8505" class="idref" href="#962aaeeff05b6bd0df6153509c8e8505"><span class="id" title="binder">σ</span></a> <a id="f318545e8b3ea33486eea0794024f37c" class="idref" href="#f318545e8b3ea33486eea0794024f37c"><span class="id" title="binder">α</span></a> <a id="N:12" class="idref" href="#N:12"><span class="id" title="binder">N</span></a> <a id="zs:13" class="idref" href="#zs:13"><span class="id" title="binder">zs</span></a> <a id="K:14" class="idref" href="#K:14"><span class="id" title="binder">K</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#962aaeeff05b6bd0df6153509c8e8505"><span class="id" title="variable">σ</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="clutch.prob_lang.erasure.html#f318545e8b3ea33486eea0794024f37c"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#N:12"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#zs:13"><span class="id" title="variable">zs</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.metatheory.html#is_det_head_step"><span class="id" title="definition">is_det_head_step</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#e:9"><span class="id" title="variable">e</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#962aaeeff05b6bd0df6153509c8e8505"><span class="id" title="variable">σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a> (<a class="idref" href="clutch.program_logic.ectx_language.html#fill_lift"><span class="id" title="definition">fill_lift</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#K:14"><span class="id" title="variable">K</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#e:9"><span class="id" title="variable">e</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#962aaeeff05b6bd0df6153509c8e8505"><span class="id" title="variable">σ</span></a>) <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers.m"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dunifP"><span class="id" title="definition">dunifP</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#N:12"><span class="id" title="variable">N</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="z:15" class="idref" href="#z:15"><span class="id" title="binder">z</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.program_logic.ectx_language.html#fill_lift"><span class="id" title="definition">fill_lift</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#K:14"><span class="id" title="variable">K</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#e:9"><span class="id" title="variable">e</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <span class="id" title="notation">&lt;[</span><a class="idref" href="clutch.prob_lang.erasure.html#f318545e8b3ea33486eea0794024f37c"><span class="id" title="variable">α</span></a><span class="id" title="notation">:=</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#N:12"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#zs:13"><span class="id" title="variable">zs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.erasure.html#z:15"><span class="id" title="variable">z</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <span class="id" title="notation">]&gt;</span> <a class="idref" href="clutch.prob_lang.erasure.html#962aaeeff05b6bd0df6153509c8e8505"><span class="id" title="variable">σ</span></a>)) <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers.m"><span class="id" title="variable">m</span></a><a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(=)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">m</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hα</span> (<span class="id" title="var">e2</span> &amp; (σ2 &amp; <span class="id" title="var">Hdet</span>))%<a class="idref" href="clutch.prob_lang.metatheory.html#is_det_head_step_true"><span class="id" title="lemma">is_det_head_step_true</span></a>%<a class="idref" href="clutch.prob_lang.metatheory.html#det_step_pred_ex_rel"><span class="id" title="lemma">det_step_pred_ex_rel</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> 1!<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_singleton"><span class="id" title="lemma">det_head_step_singleton</span></a>; [|<span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> (<a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_singleton"><span class="id" title="lemma">det_head_step_singleton</span></a> ); <span class="id" title="tactic">eauto</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.metatheory.html#det_head_step_upd_tapes"><span class="id" title="lemma">det_head_step_upd_tapes</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">erewrite</span> <a class="idref" href="clutch.prob_lang.metatheory.html#det_step_eq_tapes"><span class="id" title="lemma">det_step_eq_tapes</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hα</span>; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="clutch.prob.distribution.html#dmap_dret"><span class="id" title="lemma">dmap_dret</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> (<a class="idref" href="clutch.prob.distribution.html#dmap_dret"><span class="id" title="lemma">dmap_dret</span></a> (<a class="idref" href="clutch.program_logic.ectx_language.html#fill_lift"><span class="id" title="definition">fill_lift</span></a> <span class="id" title="var">K</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="clutch.prob.distribution.html#dret_id_left"><span class="id" title="lemma">dret_id_left</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> (<a class="idref" href="clutch.prob.distribution.html#dret_id_left"><span class="id" title="lemma">dret_id_left</span></a> (<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers.m"><span class="id" title="variable">m</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers.IH"><span class="id" title="variable">IH</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a id="ind_case_dzero" class="idref" href="#ind_case_dzero"><span class="id" title="lemma">ind_case_dzero</span></a> <a id="e:16" class="idref" href="#e:16"><span class="id" title="binder">e</span></a> <a id="0b62e00a8cabb8092988a5646f06f6ac" class="idref" href="#0b62e00a8cabb8092988a5646f06f6ac"><span class="id" title="binder">σ</span></a> <a id="27bc4a6ffbba547cad8b636e127a5e76" class="idref" href="#27bc4a6ffbba547cad8b636e127a5e76"><span class="id" title="binder">α</span></a> <a id="N:19" class="idref" href="#N:19"><span class="id" title="binder">N</span></a> <a id="zs:20" class="idref" href="#zs:20"><span class="id" title="binder">zs</span></a> <a id="K:21" class="idref" href="#K:21"><span class="id" title="binder">K</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#0b62e00a8cabb8092988a5646f06f6ac"><span class="id" title="variable">σ</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="clutch.prob_lang.erasure.html#27bc4a6ffbba547cad8b636e127a5e76"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#N:19"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#zs:20"><span class="id" title="variable">zs</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#e:16"><span class="id" title="variable">e</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#0b62e00a8cabb8092988a5646f06f6ac"><span class="id" title="variable">σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob.distribution.html#dzero"><span class="id" title="definition">dzero</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a> (<a class="idref" href="clutch.program_logic.ectx_language.html#fill_lift"><span class="id" title="definition">fill_lift</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#K:21"><span class="id" title="variable">K</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#e:16"><span class="id" title="variable">e</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#0b62e00a8cabb8092988a5646f06f6ac"><span class="id" title="variable">σ</span></a>) <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers.m"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dunifP"><span class="id" title="definition">dunifP</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#N:19"><span class="id" title="variable">N</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="z:22" class="idref" href="#z:22"><span class="id" title="binder">z</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a> (<a class="idref" href="clutch.program_logic.ectx_language.html#fill_lift"><span class="id" title="definition">fill_lift</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#K:21"><span class="id" title="variable">K</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#e:16"><span class="id" title="variable">e</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <span class="id" title="notation">&lt;[</span><a class="idref" href="clutch.prob_lang.erasure.html#27bc4a6ffbba547cad8b636e127a5e76"><span class="id" title="variable">α</span></a><span class="id" title="notation">:=</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#N:19"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#zs:20"><span class="id" title="variable">zs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.erasure.html#z:22"><span class="id" title="variable">z</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><span class="id" title="notation">]&gt;</span> <a class="idref" href="clutch.prob_lang.erasure.html#0b62e00a8cabb8092988a5646f06f6ac"><span class="id" title="variable">σ</span></a>)) <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers.m"><span class="id" title="variable">m</span></a><a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">)</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">m</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hα</span> <span class="id" title="var">Hz</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hz</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="clutch.prob_lang.metatheory.html#head_step_dzero_upd_tapes"><span class="id" title="lemma">head_step_dzero_upd_tapes</span></a>; [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">elem_of_dom_2</span>|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.distribution.html#dmap_dzero"><span class="id" title="lemma">dmap_dzero</span></a> <a class="idref" href="clutch.prob.distribution.html#dbind_dzero"><span class="id" title="lemma">dbind_dzero</span></a> <a class="idref" href="clutch.prob.distribution.html#dzero_dbind"><span class="id" title="lemma">dzero_dbind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dzero_dzero"><span class="id" title="lemma">Rcoupl_dzero_dzero</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a id="ind_case_alloc" class="idref" href="#ind_case_alloc"><span class="id" title="lemma">ind_case_alloc</span></a> <a id="ae0c06ba32431cba6651bad87205f6d2" class="idref" href="#ae0c06ba32431cba6651bad87205f6d2"><span class="id" title="binder">σ</span></a> <a id="6d9fcab9e11df7a3b367a2a0813c6da7" class="idref" href="#6d9fcab9e11df7a3b367a2a0813c6da7"><span class="id" title="binder">α</span></a> <a id="N:25" class="idref" href="#N:25"><span class="id" title="binder">N</span></a> <a id="ns:26" class="idref" href="#ns:26"><span class="id" title="binder">ns</span></a> (<a id="z:27" class="idref" href="#z:27"><span class="id" title="binder">z</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) <a id="K:28" class="idref" href="#K:28"><span class="id" title="binder">K</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#ae0c06ba32431cba6651bad87205f6d2"><span class="id" title="variable">σ</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="clutch.prob_lang.erasure.html#6d9fcab9e11df7a3b367a2a0813c6da7"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#N:25"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#ns:26"><span class="id" title="variable">ns</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a> (<a class="idref" href="clutch.program_logic.ectx_language.html#fill_lift"><span class="id" title="definition">fill_lift</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#K:28"><span class="id" title="variable">K</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#alloc"><span class="id" title="abbreviation">alloc</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.erasure.html#z:27"><span class="id" title="variable">z</span></a>) <a class="idref" href="clutch.prob_lang.erasure.html#ae0c06ba32431cba6651bad87205f6d2"><span class="id" title="variable">σ</span></a>) <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers.m"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dunifP"><span class="id" title="definition">dunifP</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#N:25"><span class="id" title="variable">N</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="n:29" class="idref" href="#n:29"><span class="id" title="binder">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a> (<a class="idref" href="clutch.program_logic.ectx_language.html#fill_lift"><span class="id" title="definition">fill_lift</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#K:28"><span class="id" title="variable">K</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#alloc"><span class="id" title="abbreviation">alloc</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.erasure.html#z:27"><span class="id" title="variable">z</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <span class="id" title="notation">&lt;[</span><a class="idref" href="clutch.prob_lang.erasure.html#6d9fcab9e11df7a3b367a2a0813c6da7"><span class="id" title="variable">α</span></a><span class="id" title="notation">:=</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#N:25"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#ns:26"><span class="id" title="variable">ns</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.erasure.html#n:29"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><span class="id" title="notation">]&gt;</span> <a class="idref" href="clutch.prob_lang.erasure.html#ae0c06ba32431cba6651bad87205f6d2"><span class="id" title="variable">σ</span></a>)) <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers.m"><span class="id" title="variable">m</span></a><a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">m</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hα</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.distribution.html#dmap_dret"><span class="id" title="lemma">dmap_dret</span></a> <a class="idref" href="clutch.prob.distribution.html#dret_id_left"><span class="id" title="lemma">dret_id_left</span></a> -/<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> (<a class="idref" href="clutch.prob.distribution.html#dmap_dret"><span class="id" title="lemma">dmap_dret</span></a> (<a class="idref" href="clutch.program_logic.ectx_language.html#fill_lift"><span class="id" title="definition">fill_lift</span></a> <span class="id" title="var">K</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> (<a class="idref" href="clutch.prob.distribution.html#dret_id_left"><span class="id" title="lemma">dret_id_left</span></a> (<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers.m"><span class="id" title="variable">m</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;fix&nbsp;slightly&nbsp;ugly&nbsp;hack&nbsp;...&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">IH</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">IHm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">lookup_total_correct</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hα</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hαtot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="clutch.prob_lang.metatheory.html#elem_fresh_ne"><span class="id" title="lemma">elem_fresh_ne</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hα</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hne</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="clutch.prob.distribution.html#dbind_ext_right"><span class="id" title="lemma">dbind_ext_right</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="clutch.prob_lang.metatheory.html#fresh_loc_upd_some"><span class="id" title="lemma">fresh_loc_upd_some</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><span class="id" title="var">N</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">ns</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a>); [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="clutch.prob_lang.metatheory.html#fresh_loc_upd_swap"><span class="id" title="lemma">fresh_loc_upd_swap</span></a> σ <span class="id" title="var">α</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><span class="id" title="var">N</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">ns</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a>) //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob_lang.metatheory.html#fresh_loc_lookup"><span class="id" title="lemma">fresh_loc_lookup</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a id="ind_case_rand_some" class="idref" href="#ind_case_rand_some"><span class="id" title="lemma">ind_case_rand_some</span></a> <a id="c3ce5c4004a9652c410f50daf35ade0f" class="idref" href="#c3ce5c4004a9652c410f50daf35ade0f"><span class="id" title="binder">σ</span></a> <a id="d1eba641b6c42aff67e0cce349a80f3e" class="idref" href="#d1eba641b6c42aff67e0cce349a80f3e"><span class="id" title="binder">α</span></a> <a id="31bfc034bcc889ee63b3a80d4d6c85cd" class="idref" href="#31bfc034bcc889ee63b3a80d4d6c85cd"><span class="id" title="binder">α'</span></a> <a id="K:33" class="idref" href="#K:33"><span class="id" title="binder">K</span></a> <a id="N:34" class="idref" href="#N:34"><span class="id" title="binder">N</span></a> <a id="M:35" class="idref" href="#M:35"><span class="id" title="binder">M</span></a> (<a id="z:36" class="idref" href="#z:36"><span class="id" title="binder">z</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) <a id="n:37" class="idref" href="#n:37"><span class="id" title="binder">n</span></a> <a id="ns:38" class="idref" href="#ns:38"><span class="id" title="binder">ns</span></a> <a id="ns':39" class="idref" href="#ns':39"><span class="id" title="binder">ns'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.erasure.html#N:34"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#z:36"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#c3ce5c4004a9652c410f50daf35ade0f"><span class="id" title="variable">σ</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="clutch.prob_lang.erasure.html#d1eba641b6c42aff67e0cce349a80f3e"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#M:35"><span class="id" title="variable">M</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#ns':39"><span class="id" title="variable">ns'</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#c3ce5c4004a9652c410f50daf35ade0f"><span class="id" title="variable">σ</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="clutch.prob_lang.erasure.html#31bfc034bcc889ee63b3a80d4d6c85cd"><span class="id" title="variable">α'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#N:34"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#n:37"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#ns:38"><span class="id" title="variable">ns</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a> (<a class="idref" href="clutch.program_logic.ectx_language.html#fill_lift"><span class="id" title="definition">fill_lift</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#K:33"><span class="id" title="variable">K</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.erasure.html#z:36"><span class="id" title="variable">z</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">from</span></a> <a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.prob_lang.erasure.html#31bfc034bcc889ee63b3a80d4d6c85cd"><span class="id" title="variable">α'</span></a>) <a class="idref" href="clutch.prob_lang.erasure.html#c3ce5c4004a9652c410f50daf35ade0f"><span class="id" title="variable">σ</span></a>) <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers.m"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dunifP"><span class="id" title="definition">dunifP</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#M:35"><span class="id" title="variable">M</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="n:40" class="idref" href="#n:40"><span class="id" title="binder">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a> (<a class="idref" href="clutch.program_logic.ectx_language.html#fill_lift"><span class="id" title="definition">fill_lift</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#K:33"><span class="id" title="variable">K</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.erasure.html#z:36"><span class="id" title="variable">z</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">from</span></a> <a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.prob_lang.erasure.html#31bfc034bcc889ee63b3a80d4d6c85cd"><span class="id" title="variable">α'</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <span class="id" title="notation">&lt;[</span><a class="idref" href="clutch.prob_lang.erasure.html#d1eba641b6c42aff67e0cce349a80f3e"><span class="id" title="variable">α</span></a><span class="id" title="notation">:=</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#M:35"><span class="id" title="variable">M</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#ns':39"><span class="id" title="variable">ns'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.erasure.html#n:40"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><span class="id" title="notation">]&gt;</span> <a class="idref" href="clutch.prob_lang.erasure.html#c3ce5c4004a9652c410f50daf35ade0f"><span class="id" title="variable">σ</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers.m"><span class="id" title="variable">m</span></a><a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(=)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">m</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hz</span> <span class="id" title="var">Hα</span> <span class="id" title="var">Hα'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">lookup_total_correct</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hα</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hαtot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">lookup_total_correct</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hα'</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hα'tot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">α</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">α'</span>)) <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hαneql</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">simplify_eq</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> <span class="id" title="var">Hα</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="lemma">lookup_insert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">bool_decide_eq_true_2</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.distribution.html#dmap_dret"><span class="id" title="lemma">dmap_dret</span></a> <a class="idref" href="clutch.prob.distribution.html#dret_id_left"><span class="id" title="lemma">dret_id_left</span></a> -/<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="clutch.prob.distribution.html#dbind_ext_right"><span class="id" title="lemma">dbind_ext_right</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob_lang.metatheory.html#upd_tape_twice"><span class="id" title="lemma">upd_tape_twice</span></a> <a class="idref" href="clutch.prob.distribution.html#dmap_dret"><span class="id" title="lemma">dmap_dret</span></a> <a class="idref" href="clutch.prob.distribution.html#dret_id_left"><span class="id" title="lemma">dret_id_left</span></a> -/<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Haux</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="n:42" class="idref" href="#n:42"><span class="id" title="binder">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <span class="id" title="notation">&lt;[</span><span class="id" title="var">α'</span><span class="id" title="notation">:=</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <span class="id" title="var">z</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">ns</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.erasure.html#n:41"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><span class="id" title="notation">]&gt;</span> σ <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <span class="id" title="notation">&lt;[</span><span class="id" title="var">α'</span><span class="id" title="notation">:=</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <span class="id" title="var">z</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">ns</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.erasure.html#n:41"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><span class="id" title="notation">]&gt;</span> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <span class="id" title="notation">&lt;[</span><span class="id" title="var">α'</span><span class="id" title="notation">:=</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <span class="id" title="var">z</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">ns</span><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><span class="id" title="notation">]&gt;</span> σ)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">insert_insert</span> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="clutch.prob.distribution.html#dbind_ext_right"><span class="id" title="lemma">dbind_ext_right</span></a>; [| <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Haux</span>; <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers.IH"><span class="id" title="variable">IH</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">lookup_insert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> <span class="id" title="var">Hα'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">bool_decide_eq_true_2</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span>; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hα'</span> <span class="id" title="lemma">bool_decide_eq_true_2</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="clutch.prob.distribution.html#dmap_dret"><span class="id" title="lemma">dmap_dret</span></a> !<a class="idref" href="clutch.prob.distribution.html#dret_id_left"><span class="id" title="lemma">dret_id_left</span></a> -/<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="clutch.prob.distribution.html#dbind_ext_right"><span class="id" title="lemma">dbind_ext_right</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob_lang.metatheory.html#upd_diff_tape_comm"><span class="id" title="lemma">upd_diff_tape_comm</span></a>; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.distribution.html#dmap_dret"><span class="id" title="lemma">dmap_dret</span></a> <a class="idref" href="clutch.prob.distribution.html#dret_id_left"><span class="id" title="lemma">dret_id_left</span></a> -/<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers.IH"><span class="id" title="variable">IH</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a id="ind_case_rand_empty" class="idref" href="#ind_case_rand_empty"><span class="id" title="lemma">ind_case_rand_empty</span></a> <a id="e301eb36a877cd02cbb5965c6e966e14" class="idref" href="#e301eb36a877cd02cbb5965c6e966e14"><span class="id" title="binder">σ</span></a> <a id="16ea9a3246cad4755fd38c94de1f8ba3" class="idref" href="#16ea9a3246cad4755fd38c94de1f8ba3"><span class="id" title="binder">α</span></a> <a id="878bc226fbff32b70944e0ae8e2be2fa" class="idref" href="#878bc226fbff32b70944e0ae8e2be2fa"><span class="id" title="binder">α'</span></a> <a id="K:46" class="idref" href="#K:46"><span class="id" title="binder">K</span></a> (<a id="N:47" class="idref" href="#N:47"><span class="id" title="binder">N</span></a> <a id="M:48" class="idref" href="#M:48"><span class="id" title="binder">M</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="z:49" class="idref" href="#z:49"><span class="id" title="binder">z</span></a> <a id="ns:50" class="idref" href="#ns:50"><span class="id" title="binder">ns</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.erasure.html#M:48"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#z:49"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#e301eb36a877cd02cbb5965c6e966e14"><span class="id" title="variable">σ</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="clutch.prob_lang.erasure.html#16ea9a3246cad4755fd38c94de1f8ba3"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#N:47"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#ns:50"><span class="id" title="variable">ns</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#e301eb36a877cd02cbb5965c6e966e14"><span class="id" title="variable">σ</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="clutch.prob_lang.erasure.html#878bc226fbff32b70944e0ae8e2be2fa"><span class="id" title="variable">α'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#M:48"><span class="id" title="variable">M</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a> (<a class="idref" href="clutch.program_logic.ectx_language.html#fill_lift"><span class="id" title="definition">fill_lift</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#K:46"><span class="id" title="variable">K</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.erasure.html#z:49"><span class="id" title="variable">z</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">from</span></a> <a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.prob_lang.erasure.html#878bc226fbff32b70944e0ae8e2be2fa"><span class="id" title="variable">α'</span></a>) <a class="idref" href="clutch.prob_lang.erasure.html#e301eb36a877cd02cbb5965c6e966e14"><span class="id" title="variable">σ</span></a>) <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers.m"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dunifP"><span class="id" title="definition">dunifP</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#N:47"><span class="id" title="variable">N</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="n:51" class="idref" href="#n:51"><span class="id" title="binder">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a> (<a class="idref" href="clutch.program_logic.ectx_language.html#fill_lift"><span class="id" title="definition">fill_lift</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#K:46"><span class="id" title="variable">K</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.erasure.html#z:49"><span class="id" title="variable">z</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">from</span></a> <a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.prob_lang.erasure.html#878bc226fbff32b70944e0ae8e2be2fa"><span class="id" title="variable">α'</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <span class="id" title="notation">&lt;[</span><a class="idref" href="clutch.prob_lang.erasure.html#16ea9a3246cad4755fd38c94de1f8ba3"><span class="id" title="variable">α</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#N:47"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#ns:50"><span class="id" title="variable">ns</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.erasure.html#n:51"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><span class="id" title="notation">]&gt;</span> <a class="idref" href="clutch.prob_lang.erasure.html#e301eb36a877cd02cbb5965c6e966e14"><span class="id" title="variable">σ</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers.m"><span class="id" title="variable">m</span></a><a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">m</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hz</span> <span class="id" title="var">Hα</span> <span class="id" title="var">Hα'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">α</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">α'</span>)) <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hαneql</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">simplify_eq</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> <span class="id" title="var">Hα</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">bool_decide_eq_true_2</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {1 2}/<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="clutch.prob.distribution.html#dbind_assoc"><span class="id" title="lemma">dbind_assoc</span></a> -/<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="clutch.prob.couplings.html#Rcoupl_dbind"><span class="id" title="lemma">Rcoupl_dbind</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="notation">(=)</span>); [ |<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_eq"><span class="id" title="lemma">Rcoupl_eq</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">b</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.distribution.html#dret_id_left"><span class="id" title="lemma">dret_id_left</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">bool_decide_eq_true_2</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.distribution.html#dmap_dret"><span class="id" title="lemma">dmap_dret</span></a> <a class="idref" href="clutch.prob.distribution.html#dret_id_left"><span class="id" title="lemma">dret_id_left</span></a> -/<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob_lang.metatheory.html#upd_tape_twice"><span class="id" title="lemma">upd_tape_twice</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <span class="id" title="lemma">insert_id</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> σ; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_eq"><span class="id" title="lemma">Rcoupl_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span>; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hα'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">bool_decide_eq_true_2</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {1 2}/<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> (<a class="idref" href="clutch.prob.distribution.html#dbind_ext_right"><span class="id" title="lemma">dbind_ext_right</span></a> (<a class="idref" href="clutch.prob.distribution.html#dunifP"><span class="id" title="definition">dunifP</span></a> <span class="id" title="var">N</span>)); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {1 2}/<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> -<a class="idref" href="clutch.prob.distribution.html#dbind_assoc"><span class="id" title="lemma">dbind_assoc</span></a> -/<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="clutch.prob.distribution.html#dbind_assoc"><span class="id" title="lemma">dbind_assoc</span></a> -/<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.distribution.html#dbind_comm"><span class="id" title="lemma">dbind_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dbind"><span class="id" title="lemma">Rcoupl_dbind</span></a>; [|<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_eq"><span class="id" title="lemma">Rcoupl_eq</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.distribution.html#dret_id_left"><span class="id" title="lemma">dret_id_left</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="clutch.prob.distribution.html#dbind_ext_right"><span class="id" title="lemma">dbind_ext_right</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.distribution.html#dret_id_left"><span class="id" title="lemma">dret_id_left</span></a>. <span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers.IH"><span class="id" title="variable">IH</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a id="ind_case_rand_some_neq" class="idref" href="#ind_case_rand_some_neq"><span class="id" title="lemma">ind_case_rand_some_neq</span></a> <a id="193018d7d3b117e3eea7635a6f1d98b6" class="idref" href="#193018d7d3b117e3eea7635a6f1d98b6"><span class="id" title="binder">σ</span></a> <a id="eeb98ec63beea1749dd111a01f732e7c" class="idref" href="#eeb98ec63beea1749dd111a01f732e7c"><span class="id" title="binder">α</span></a> <a id="88cbf4247719476a89713d68ec5e3d93" class="idref" href="#88cbf4247719476a89713d68ec5e3d93"><span class="id" title="binder">α'</span></a> <a id="K:55" class="idref" href="#K:55"><span class="id" title="binder">K</span></a> <a id="N:56" class="idref" href="#N:56"><span class="id" title="binder">N</span></a> <a id="M:57" class="idref" href="#M:57"><span class="id" title="binder">M</span></a> <a id="ns:58" class="idref" href="#ns:58"><span class="id" title="binder">ns</span></a> <a id="ns':59" class="idref" href="#ns':59"><span class="id" title="binder">ns'</span></a> <a id="z:60" class="idref" href="#z:60"><span class="id" title="binder">z</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.erasure.html#N:56"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#z:60"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#193018d7d3b117e3eea7635a6f1d98b6"><span class="id" title="variable">σ</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="clutch.prob_lang.erasure.html#eeb98ec63beea1749dd111a01f732e7c"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#M:57"><span class="id" title="variable">M</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#ns':59"><span class="id" title="variable">ns'</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#193018d7d3b117e3eea7635a6f1d98b6"><span class="id" title="variable">σ</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="clutch.prob_lang.erasure.html#88cbf4247719476a89713d68ec5e3d93"><span class="id" title="variable">α'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#N:56"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#ns:58"><span class="id" title="variable">ns</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a> (<a class="idref" href="clutch.program_logic.ectx_language.html#fill_lift"><span class="id" title="definition">fill_lift</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#K:55"><span class="id" title="variable">K</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.erasure.html#z:60"><span class="id" title="variable">z</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">from</span></a> <a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.prob_lang.erasure.html#88cbf4247719476a89713d68ec5e3d93"><span class="id" title="variable">α'</span></a>) <a class="idref" href="clutch.prob_lang.erasure.html#193018d7d3b117e3eea7635a6f1d98b6"><span class="id" title="variable">σ</span></a>) <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers.m"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dunifP"><span class="id" title="definition">dunifP</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#M:57"><span class="id" title="variable">M</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="n:61" class="idref" href="#n:61"><span class="id" title="binder">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a> (<a class="idref" href="clutch.program_logic.ectx_language.html#fill_lift"><span class="id" title="definition">fill_lift</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#K:55"><span class="id" title="variable">K</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.erasure.html#z:60"><span class="id" title="variable">z</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">from</span></a> <a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.prob_lang.erasure.html#88cbf4247719476a89713d68ec5e3d93"><span class="id" title="variable">α'</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <span class="id" title="notation">&lt;[</span><a class="idref" href="clutch.prob_lang.erasure.html#eeb98ec63beea1749dd111a01f732e7c"><span class="id" title="variable">α</span></a><span class="id" title="notation">:=</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#M:57"><span class="id" title="variable">M</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#ns':59"><span class="id" title="variable">ns'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.erasure.html#n:61"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tape"><span class="id" title="definition">tape</span></a><span class="id" title="notation">]&gt;</span> <a class="idref" href="clutch.prob_lang.erasure.html#193018d7d3b117e3eea7635a6f1d98b6"><span class="id" title="variable">σ</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers.m"><span class="id" title="variable">m</span></a><a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(=)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">m</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hz</span> <span class="id" title="var">Hα</span> <span class="id" title="var">Hα'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> <span class="id" title="var">Hα'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">bool_decide_eq_false_2</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">α</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">α'</span>)) <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Heq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="lemma">lookup_insert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">bool_decide_eq_false_2</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="clutch.prob.distribution.html#dbind_assoc"><span class="id" title="lemma">dbind_assoc</span></a> -/<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> (<a class="idref" href="clutch.prob.distribution.html#dbind_ext_right"><span class="id" title="lemma">dbind_ext_right</span></a> (<a class="idref" href="clutch.prob.distribution.html#dunifP"><span class="id" title="definition">dunifP</span></a> <span class="id" title="var">M</span>)); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> -!<a class="idref" href="clutch.prob.distribution.html#dbind_assoc"><span class="id" title="lemma">dbind_assoc</span></a> -/<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.distribution.html#dbind_comm"><span class="id" title="lemma">dbind_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dbind"><span class="id" title="lemma">Rcoupl_dbind</span></a>; [|<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_eq"><span class="id" title="lemma">Rcoupl_eq</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> 2!<a class="idref" href="clutch.prob.distribution.html#dret_id_left"><span class="id" title="lemma">dret_id_left</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="clutch.prob.distribution.html#dbind_ext_right"><span class="id" title="lemma">dbind_ext_right</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> 2!<a class="idref" href="clutch.prob.distribution.html#dret_id_left"><span class="id" title="lemma">dret_id_left</span></a> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers.IH"><span class="id" title="variable">IH</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span>; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hα'</span> <span class="id" title="lemma">bool_decide_eq_false_2</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="clutch.prob.distribution.html#dbind_assoc"><span class="id" title="lemma">dbind_assoc</span></a> -/<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> (<a class="idref" href="clutch.prob.distribution.html#dbind_ext_right"><span class="id" title="lemma">dbind_ext_right</span></a> (<a class="idref" href="clutch.prob.distribution.html#dunifP"><span class="id" title="definition">dunifP</span></a> <span class="id" title="var">M</span>)); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> -!<a class="idref" href="clutch.prob.distribution.html#dbind_assoc"><span class="id" title="lemma">dbind_assoc</span></a> -/<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.distribution.html#dbind_comm"><span class="id" title="lemma">dbind_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dbind"><span class="id" title="lemma">Rcoupl_dbind</span></a>; [|<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_eq"><span class="id" title="lemma">Rcoupl_eq</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> 2!<a class="idref" href="clutch.prob.distribution.html#dret_id_left"><span class="id" title="lemma">dret_id_left</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="clutch.prob.distribution.html#dbind_ext_right"><span class="id" title="lemma">dbind_ext_right</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> 2!<a class="idref" href="clutch.prob.distribution.html#dret_id_left"><span class="id" title="lemma">dret_id_left</span></a> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers.IH"><span class="id" title="variable">IH</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a id="ind_case_rand" class="idref" href="#ind_case_rand"><span class="id" title="lemma">ind_case_rand</span></a> <a id="308af7f232d1cacf61d03f62f07326a3" class="idref" href="#308af7f232d1cacf61d03f62f07326a3"><span class="id" title="binder">σ</span></a> <a id="62eb1b9472b0e5a764cdb018ec125822" class="idref" href="#62eb1b9472b0e5a764cdb018ec125822"><span class="id" title="binder">α</span></a> <a id="K:64" class="idref" href="#K:64"><span class="id" title="binder">K</span></a> (<a id="M:65" class="idref" href="#M:65"><span class="id" title="binder">M</span></a> <a id="N:66" class="idref" href="#N:66"><span class="id" title="binder">N</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="z:67" class="idref" href="#z:67"><span class="id" title="binder">z</span></a> <a id="ns:68" class="idref" href="#ns:68"><span class="id" title="binder">ns</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.erasure.html#N:66"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#z:67"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#308af7f232d1cacf61d03f62f07326a3"><span class="id" title="variable">σ</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="clutch.prob_lang.erasure.html#62eb1b9472b0e5a764cdb018ec125822"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#M:65"><span class="id" title="variable">M</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#ns:68"><span class="id" title="variable">ns</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a> (<a class="idref" href="clutch.program_logic.ectx_language.html#fill_lift"><span class="id" title="definition">fill_lift</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#K:64"><span class="id" title="variable">K</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.erasure.html#z:67"><span class="id" title="variable">z</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">from</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>) <a class="idref" href="clutch.prob_lang.erasure.html#308af7f232d1cacf61d03f62f07326a3"><span class="id" title="variable">σ</span></a>) <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers.m"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dunifP"><span class="id" title="definition">dunifP</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#M:65"><span class="id" title="variable">M</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="n:69" class="idref" href="#n:69"><span class="id" title="binder">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a> (<a class="idref" href="clutch.program_logic.ectx_language.html#fill_lift"><span class="id" title="definition">fill_lift</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#K:64"><span class="id" title="variable">K</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.erasure.html#z:67"><span class="id" title="variable">z</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">from</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <span class="id" title="notation">&lt;[</span><a class="idref" href="clutch.prob_lang.erasure.html#62eb1b9472b0e5a764cdb018ec125822"><span class="id" title="variable">α</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#M:65"><span class="id" title="variable">M</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#ns:68"><span class="id" title="variable">ns</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.erasure.html#n:69"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tape"><span class="id" title="definition">tape</span></a><span class="id" title="notation">]&gt;</span> <a class="idref" href="clutch.prob_lang.erasure.html#308af7f232d1cacf61d03f62f07326a3"><span class="id" title="variable">σ</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers.m"><span class="id" title="variable">m</span></a><a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">m</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hz</span> <span class="id" title="var">Hα</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.head_step"><span class="id" title="definition">head_step</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {1 2}/<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> (<a class="idref" href="clutch.prob.distribution.html#dbind_ext_right"><span class="id" title="lemma">dbind_ext_right</span></a> (<a class="idref" href="clutch.prob.distribution.html#dunifP"><span class="id" title="definition">dunifP</span></a> <span class="id" title="var">M</span>)); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {1 2}/<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> -<a class="idref" href="clutch.prob.distribution.html#dbind_assoc"><span class="id" title="lemma">dbind_assoc</span></a> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="clutch.prob.distribution.html#dbind_assoc"><span class="id" title="lemma">dbind_assoc</span></a> -/<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> (<a class="idref" href="clutch.prob.distribution.html#dbind_ext_right"><span class="id" title="lemma">dbind_ext_right</span></a> (<a class="idref" href="clutch.prob.distribution.html#dunifP"><span class="id" title="definition">dunifP</span></a> <span class="id" title="var">M</span>)); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">rewrite</span> -!<a class="idref" href="clutch.prob.distribution.html#dbind_assoc"><span class="id" title="lemma">dbind_assoc</span></a>. <span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.distribution.html#dbind_comm"><span class="id" title="lemma">dbind_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dbind"><span class="id" title="lemma">Rcoupl_dbind</span></a>; [|<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_eq"><span class="id" title="lemma">Rcoupl_eq</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.distribution.html#dret_id_left"><span class="id" title="lemma">dret_id_left</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="clutch.prob.distribution.html#dbind_ext_right"><span class="id" title="lemma">dbind_ext_right</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.distribution.html#dret_id_left"><span class="id" title="lemma">dret_id_left</span></a>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers.IH"><span class="id" title="variable">IH</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="clutch.prob_lang.erasure.html#erasure_helpers"><span class="id" title="section">erasure_helpers</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="prim_coupl_upd_tapes_dom" class="idref" href="#prim_coupl_upd_tapes_dom"><span class="id" title="lemma">prim_coupl_upd_tapes_dom</span></a> <a id="m:70" class="idref" href="#m:70"><span class="id" title="binder">m</span></a> <a id="e1:71" class="idref" href="#e1:71"><span class="id" title="binder">e1</span></a> <a id="6cfb1ce4f402c6c75a5019d685464003" class="idref" href="#6cfb1ce4f402c6c75a5019d685464003"><span class="id" title="binder">σ1</span></a> <a id="3f915bd1086b5a3ca94febaf986c5dd2" class="idref" href="#3f915bd1086b5a3ca94febaf986c5dd2"><span class="id" title="binder">α</span></a> <a id="N:74" class="idref" href="#N:74"><span class="id" title="binder">N</span></a> <a id="ns:75" class="idref" href="#ns:75"><span class="id" title="binder">ns</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.erasure.html#6cfb1ce4f402c6c75a5019d685464003"><span class="id" title="variable">σ1</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <span class="id" title="notation">!!</span> <a class="idref" href="clutch.prob_lang.erasure.html#3f915bd1086b5a3ca94febaf986c5dd2"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#N:74"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#ns:75"><span class="id" title="variable">ns</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#m:70"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#e1:71"><span class="id" title="variable">e1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#6cfb1ce4f402c6c75a5019d685464003"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.distribution.html#dunifP"><span class="id" title="definition">dunifP</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#N:74"><span class="id" title="variable">N</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="n:76" class="idref" href="#n:76"><span class="id" title="binder">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#m:70"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#e1:71"><span class="id" title="variable">e1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_upd_tapes"><span class="id" title="definition">state_upd_tapes</span></a> <span class="id" title="notation">&lt;[</span><a class="idref" href="clutch.prob_lang.erasure.html#3f915bd1086b5a3ca94febaf986c5dd2"><span class="id" title="variable">α</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#N:74"><span class="id" title="variable">N</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#ns:75"><span class="id" title="variable">ns</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.prob_lang.erasure.html#n:76"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a><span class="id" title="notation">]&gt;</span> <a class="idref" href="clutch.prob_lang.erasure.html#6cfb1ce4f402c6c75a5019d685464003"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(=)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">e1</span> σ1 <span class="id" title="var">α</span> <span class="id" title="var">N</span> <span class="id" title="var">ns</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">e1</span> σ1 <span class="id" title="var">α</span> <span class="id" title="var">N</span> <span class="id" title="var">ns</span> <span class="id" title="var">Hα</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.to_val"><span class="id" title="definition">to_val</span></a> <span class="id" title="var">e1</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">He1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> (<a class="idref" href="clutch.prob.distribution.html#dret_const"><span class="id" title="lemma">dret_const</span></a> (<a class="idref" href="clutch.prob.distribution.html#dunifP"><span class="id" title="definition">dunifP</span></a> <span class="id" title="var">N</span>) <span class="id" title="var">v</span>); [<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_eq"><span class="id" title="lemma">Rcoupl_eq</span></a> | <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.distribution.html#dunif_mass"><span class="id" title="lemma">dunif_mass</span></a>; <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.distribution.html#dzero_dbind"><span class="id" title="lemma">dzero_dbind</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dzero_dzero"><span class="id" title="lemma">Rcoupl_dzero_dzero</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.program_logic.exec.html#exec_val_Sn"><span class="id" title="lemma">exec_val_Sn</span></a> /<a class="idref" href="clutch.program_logic.exec.html#prim_step_or_val"><span class="id" title="definition">prim_step_or_val</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.to_val"><span class="id" title="definition">to_val</span></a> <span class="id" title="var">e1</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">He1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.distribution.html#dret_id_left"><span class="id" title="lemma">dret_id_left</span></a> -/<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="clutch.program_logic.exec.html#exec_val_is_val"><span class="id" title="lemma">exec_val_is_val</span></a> <span class="id" title="var">v</span>) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.distribution.html#dret_const"><span class="id" title="lemma">dret_const</span></a>; [|<span class="id" title="var">solve_distr_mass</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dret"><span class="id" title="lemma">Rcoupl_dret</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.program_logic.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="clutch.program_logic.ectxi_language.html#decomp"><span class="id" title="definition">decomp</span></a> <span class="id" title="var">e1</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">K</span> <span class="id" title="var">ered</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hdecomp_e1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdecomp_e1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="clutch.prob_lang.metatheory.html#det_or_prob_or_dzero"><span class="id" title="lemma">det_or_prob_or_dzero</span></a> <span class="id" title="var">ered</span> σ1) <span class="id" title="keyword">as</span> [ <span class="id" title="var">HD</span> | [<span class="id" title="var">HP</span> | <span class="id" title="var">HZ</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.erasure.html#ind_case_det"><span class="id" title="lemma">ind_case_det</span></a>; [<span class="id" title="var">done</span>|<span class="id" title="var">done</span>|]. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob_lang.metatheory.html#is_det_head_step_true"><span class="id" title="lemma">is_det_head_step_true</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">inversion</span> <span class="id" title="var">HP</span>; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.erasure.html#ind_case_alloc"><span class="id" title="lemma">ind_case_alloc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.erasure.html#ind_case_rand_some"><span class="id" title="lemma">ind_case_rand_some</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.erasure.html#ind_case_rand_empty"><span class="id" title="lemma">ind_case_rand_empty</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.erasure.html#ind_case_rand_some_neq"><span class="id" title="lemma">ind_case_rand_some_neq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.erasure.html#ind_case_rand"><span class="id" title="lemma">ind_case_rand</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.erasure.html#ind_case_dzero"><span class="id" title="lemma">ind_case_dzero</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="prim_coupl_step_prim" class="idref" href="#prim_coupl_step_prim"><span class="id" title="lemma">prim_coupl_step_prim</span></a> <a id="m:77" class="idref" href="#m:77"><span class="id" title="binder">m</span></a> <a id="e1:78" class="idref" href="#e1:78"><span class="id" title="binder">e1</span></a> <a id="cd64f6d5328fb83aafaf7cc56c8b4777" class="idref" href="#cd64f6d5328fb83aafaf7cc56c8b4777"><span class="id" title="binder">σ1</span></a> <a id="93cca78aca480d6269c701d7213439eb" class="idref" href="#93cca78aca480d6269c701d7213439eb"><span class="id" title="binder">α</span></a> <a id="bs:81" class="idref" href="#bs:81"><span class="id" title="binder">bs</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.erasure.html#cd64f6d5328fb83aafaf7cc56c8b4777"><span class="id" title="variable">σ1</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <span class="id" title="notation">!!</span> <a class="idref" href="clutch.prob_lang.erasure.html#93cca78aca480d6269c701d7213439eb"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#bs:81"><span class="id" title="variable">bs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#m:77"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#e1:78"><span class="id" title="variable">e1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#cd64f6d5328fb83aafaf7cc56c8b4777"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#cd64f6d5328fb83aafaf7cc56c8b4777"><span class="id" title="variable">σ1</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#93cca78aca480d6269c701d7213439eb"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="5f3d4557c35c665e59d03403d6126888" class="idref" href="#5f3d4557c35c665e59d03403d6126888"><span class="id" title="binder">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#m:77"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#e1:78"><span class="id" title="variable">e1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#5f3d4557c35c665e59d03403d6126888"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hα</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">bool_decide_eq_true_2</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_dom</span>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">lookup_total_correct</span> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a> σ1) <span class="id" title="var">α</span> <span class="id" title="var">bs</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">bs</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="clutch.prob.distribution.html#dbind_assoc"><span class="id" title="lemma">dbind_assoc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="clutch.prob.distribution.html#dbind_ext_right"><span class="id" title="lemma">dbind_ext_right</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob.distribution.html#dret_id_left"><span class="id" title="lemma">dret_id_left</span></a>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.erasure.html#prim_coupl_upd_tapes_dom"><span class="id" title="lemma">prim_coupl_upd_tapes_dom</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="limprim_coupl_step_limprim_aux" class="idref" href="#limprim_coupl_step_limprim_aux"><span class="id" title="lemma">limprim_coupl_step_limprim_aux</span></a> <a id="e1:83" class="idref" href="#e1:83"><span class="id" title="binder">e1</span></a> <a id="f767a5bc25c0969cc9545fe351760ab5" class="idref" href="#f767a5bc25c0969cc9545fe351760ab5"><span class="id" title="binder">σ1</span></a> <a id="88f363a3d58dfc75e8ca35b781cf14f7" class="idref" href="#88f363a3d58dfc75e8ca35b781cf14f7"><span class="id" title="binder">α</span></a> <a id="bs:86" class="idref" href="#bs:86"><span class="id" title="binder">bs</span></a> <a id="v:87" class="idref" href="#v:87"><span class="id" title="binder">v</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.erasure.html#f767a5bc25c0969cc9545fe351760ab5"><span class="id" title="variable">σ1</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <span class="id" title="notation">!!</span> <a class="idref" href="clutch.prob_lang.erasure.html#88f363a3d58dfc75e8ca35b781cf14f7"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#bs:86"><span class="id" title="variable">bs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#e1:83"><span class="id" title="variable">e1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#f767a5bc25c0969cc9545fe351760ab5"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="clutch.prob_lang.erasure.html#v:87"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#f767a5bc25c0969cc9545fe351760ab5"><span class="id" title="variable">σ1</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#88f363a3d58dfc75e8ca35b781cf14f7"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="5e40aded8c6fd2e3e22b6952fc4702ca" class="idref" href="#5e40aded8c6fd2e3e22b6952fc4702ca"><span class="id" title="binder">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#e1:83"><span class="id" title="variable">e1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#5e40aded8c6fd2e3e22b6952fc4702ca"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">))</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hsome</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.program_logic.exec.html#lim_exec_val_rw"><span class="id" title="lemma">lim_exec_val_rw</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {2}/<a class="idref" href="clutch.prob.distribution.html#pmf"><span class="id" title="projection">pmf</span></a>/=/<a class="idref" href="clutch.prob.distribution.html#dbind_pmf"><span class="id" title="definition">dbind_pmf</span></a>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="clutch.program_logic.exec.html#lim_exec_val_rw"><span class="id" title="lemma">lim_exec_val_rw</span></a>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob.countable_sum.html#SeriesC"><span class="id" title="definition">SeriesC</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:93" class="idref" href="#a:93"><span class="id" title="binder">a</span></a>: <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state"><span class="id" title="record">state</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> σ1 <span class="id" title="var">α</span> <a class="idref" href="clutch.prob_lang.erasure.html#a:89"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <span class="id" title="definition">Sup_seq</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="n:94" class="idref" href="#n:94"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#n:90"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">e1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#a:89"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">v</span>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.countable_sum.html#SeriesC"><span class="id" title="definition">SeriesC</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:95" class="idref" href="#a:95"><span class="id" title="binder">a</span></a>: <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state"><span class="id" title="record">state</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="definition">Sup_seq</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="n:96" class="idref" href="#n:96"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> σ1 <span class="id" title="var">α</span> <a class="idref" href="clutch.prob_lang.erasure.html#a:91"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327"><span class="id" title="notation">*</span></a> <a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#n:92"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">e1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#a:91"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">v</span>))) <span class="id" title="keyword">as</span> <span class="id" title="var">Haux</span>.<br/>
&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.countable_sum.html#SeriesC_ext"><span class="id" title="lemma">SeriesC_ext</span></a>; <span class="id" title="tactic">intro</span> <span class="id" title="var">v'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prelude.Coquelicot_ext.html#eq_rbar_finite"><span class="id" title="lemma">eq_rbar_finite</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prelude.Coquelicot_ext.html#rmult_finite"><span class="id" title="lemma">rmult_finite</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="clutch.prelude.Coquelicot_ext.html#rbar_finite_real_eq"><span class="id" title="lemma">rbar_finite_real_eq</span></a> (<span class="id" title="definition">Sup_seq</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="n:99" class="idref" href="#n:99"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#n:97"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">e1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">v</span>))); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="lemma">Sup_seq_scal_l</span> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> σ1 <span class="id" title="var">α</span> <span class="id" title="var">v'</span>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="n:103" class="idref" href="#n:103"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#n:100"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">e1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">v</span>)); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="clutch.prelude.Coquelicot_ext.html#Rbar_le_sandwich"><span class="id" title="lemma">Rbar_le_sandwich</span></a> 0 1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="lemma">Sup_seq_minor_le</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> 0%<span class="id" title="var">nat</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prelude.Series_ext.html#upper_bound_ge_sup"><span class="id" title="lemma">upper_bound_ge_sup</span></a>; <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Haux</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="clutch.prob.countable_sum.html#MCT_seriesC"><span class="id" title="lemma">MCT_seriesC</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="n:106" class="idref" href="#n:106"><span class="id" title="binder">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#n:104"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">e1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a>σ1<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">v</span>) (<a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">e1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a>σ1<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">v</span>)); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Reals.RIneq.html#Rmult_le_pos"><span class="id" title="lemma">Rmult_le_pos</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Reals.RIneq.html#Rmult_le_compat"><span class="id" title="lemma">Rmult_le_compat</span></a>; <span class="id" title="tactic">auto</span>; [<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Reals.RIneq.html#Rle_refl"><span class="id" title="lemma">Rle_refl</span></a> | <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.program_logic.exec.html#exec_val_mon"><span class="id" title="lemma">exec_val_mon</span></a>]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> σ1 <span class="id" title="var">α</span> <span class="id" title="var">a</span>); <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" title="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Reals.RIneq.html#Rmult_le_compat_l"><span class="id" title="lemma">Rmult_le_compat_l</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="clutch.prob.couplings.html#Rcoupl_eq_elim"><span class="id" title="lemma">Rcoupl_eq_elim</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="clutch.prob_lang.erasure.html#prim_coupl_step_prim"><span class="id" title="lemma">prim_coupl_step_prim</span></a> <span class="id" title="var">n</span> <span class="id" title="var">e1</span> σ1 <span class="id" title="var">α</span> <span class="id" title="var">bs</span> <span class="id" title="var">Hsome</span>)); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {3}/<a class="idref" href="clutch.prob.distribution.html#pmf"><span class="id" title="projection">pmf</span></a>/=/<a class="idref" href="clutch.prob.distribution.html#dbind_pmf"><span class="id" title="definition">dbind_pmf</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.countable_sum.html#SeriesC_correct"><span class="id" title="lemma">SeriesC_correct</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="clutch.prob.countable_sum.html#ex_seriesC_le"><span class="id" title="lemma">ex_seriesC_le</span></a> <span class="id" title="var">_</span> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> σ1 <span class="id" title="var">α</span>)); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Reals.RIneq.html#Rmult_le_pos"><span class="id" title="lemma">Rmult_le_pos</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" title="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Reals.RIneq.html#Rmult_le_compat_l"><span class="id" title="lemma">Rmult_le_compat_l</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.program_logic.exec.html#lim_exec_val_rw"><span class="id" title="lemma">lim_exec_val_rw</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prelude.Coquelicot_ext.html#rbar_finite_real_eq"><span class="id" title="lemma">rbar_finite_real_eq</span></a>; [ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Sup_seq_correct</span> | ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prelude.Series_ext.html#mon_sup_succ"><span class="id" title="lemma">mon_sup_succ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<a class="idref" href="clutch.prelude.Coquelicot_ext.html#Rbar_le_sandwich"><span class="id" title="lemma">Rbar_le_sandwich</span></a> 0 1); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> (<span class="id" title="lemma">Sup_seq_minor_le</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> 0%<span class="id" title="var">nat</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prelude.Series_ext.html#upper_bound_ge_sup"><span class="id" title="lemma">upper_bound_ge_sup</span></a>; <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.program_logic.exec.html#exec_val_mon"><span class="id" title="lemma">exec_val_mon</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="limprim_coupl_step_limprim" class="idref" href="#limprim_coupl_step_limprim"><span class="id" title="lemma">limprim_coupl_step_limprim</span></a> <a id="e1:107" class="idref" href="#e1:107"><span class="id" title="binder">e1</span></a> <a id="3d3e9f45dd9171b43bc23c021043bd27" class="idref" href="#3d3e9f45dd9171b43bc23c021043bd27"><span class="id" title="binder">σ1</span></a> <a id="41acc466ca00f9ebc423c521ecefb56a" class="idref" href="#41acc466ca00f9ebc423c521ecefb56a"><span class="id" title="binder">α</span></a> <a id="bs:110" class="idref" href="#bs:110"><span class="id" title="binder">bs</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.erasure.html#3d3e9f45dd9171b43bc23c021043bd27"><span class="id" title="variable">σ1</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <span class="id" title="notation">!!</span> <a class="idref" href="clutch.prob_lang.erasure.html#41acc466ca00f9ebc423c521ecefb56a"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#bs:110"><span class="id" title="variable">bs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#e1:107"><span class="id" title="variable">e1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#3d3e9f45dd9171b43bc23c021043bd27"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#3d3e9f45dd9171b43bc23c021043bd27"><span class="id" title="variable">σ1</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#41acc466ca00f9ebc423c521ecefb56a"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="09b40ff62ac41342e14be7a7525fb0a5" class="idref" href="#09b40ff62ac41342e14be7a7525fb0a5"><span class="id" title="binder">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#e1:107"><span class="id" title="variable">e1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#09b40ff62ac41342e14be7a7525fb0a5"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hsome</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> (<a class="idref" href="clutch.prob.distribution.html#distr_ext"><span class="id" title="lemma">distr_ext</span></a> (<a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">e1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> σ1<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="clutch.prob_lang.erasure.html#limprim_coupl_step_limprim_aux"><span class="id" title="lemma">limprim_coupl_step_limprim_aux</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hsome</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_eq"><span class="id" title="lemma">Rcoupl_eq</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="refRcoupl_erasure" class="idref" href="#refRcoupl_erasure"><span class="id" title="lemma">refRcoupl_erasure</span></a> <a id="e1:112" class="idref" href="#e1:112"><span class="id" title="binder">e1</span></a> <a id="59ef07017ec00e3b46aa220b0a504a38" class="idref" href="#59ef07017ec00e3b46aa220b0a504a38"><span class="id" title="binder">σ1</span></a> <a id="e1':114" class="idref" href="#e1':114"><span class="id" title="binder">e1'</span></a> <a id="340b04b302db2c73cc323989db8e2bd8" class="idref" href="#340b04b302db2c73cc323989db8e2bd8"><span class="id" title="binder">σ1'</span></a> <a id="ff2ab65b28ae608cf9b0fc1d535a6e6f" class="idref" href="#ff2ab65b28ae608cf9b0fc1d535a6e6f"><span class="id" title="binder">α</span></a> <a id="762463bb78f4b2703a32599d4f81bd2d" class="idref" href="#762463bb78f4b2703a32599d4f81bd2d"><span class="id" title="binder">α'</span></a> <a id="R:118" class="idref" href="#R:118"><span class="id" title="binder">R</span></a> <a id="acbf32e4b989cded5cc4c2cc08fe35df" class="idref" href="#acbf32e4b989cded5cc4c2cc08fe35df"><span class="id" title="binder">Φ</span></a> <a id="m:120" class="idref" href="#m:120"><span class="id" title="binder">m</span></a> <a id="bs:121" class="idref" href="#bs:121"><span class="id" title="binder">bs</span></a> <a id="bs':122" class="idref" href="#bs':122"><span class="id" title="binder">bs'</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.erasure.html#59ef07017ec00e3b46aa220b0a504a38"><span class="id" title="variable">σ1</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <span class="id" title="notation">!!</span> <a class="idref" href="clutch.prob_lang.erasure.html#ff2ab65b28ae608cf9b0fc1d535a6e6f"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#bs:121"><span class="id" title="variable">bs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.erasure.html#340b04b302db2c73cc323989db8e2bd8"><span class="id" title="variable">σ1'</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <span class="id" title="notation">!!</span> <a class="idref" href="clutch.prob_lang.erasure.html#762463bb78f4b2703a32599d4f81bd2d"><span class="id" title="variable">α'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#bs':122"><span class="id" title="variable">bs'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#59ef07017ec00e3b46aa220b0a504a38"><span class="id" title="variable">σ1</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#ff2ab65b28ae608cf9b0fc1d535a6e6f"><span class="id" title="variable">α</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#340b04b302db2c73cc323989db8e2bd8"><span class="id" title="variable">σ1'</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#762463bb78f4b2703a32599d4f81bd2d"><span class="id" title="variable">α'</span></a>) <a class="idref" href="clutch.prob_lang.erasure.html#R:118"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="74ba691405efb01f43d3f644293b498f" class="idref" href="#74ba691405efb01f43d3f644293b498f"><span class="id" title="binder">σ2</span></a> <a id="e8cd571590fe9e1dc73aa522aeae2bc3" class="idref" href="#e8cd571590fe9e1dc73aa522aeae2bc3"><span class="id" title="binder">σ2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#R:118"><span class="id" title="variable">R</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#74ba691405efb01f43d3f644293b498f"><span class="id" title="variable">σ2</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#e8cd571590fe9e1dc73aa522aeae2bc3"><span class="id" title="variable">σ2'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#refRcoupl"><span class="id" title="definition">refRcoupl</span></a> (<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#m:120"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#e1:112"><span class="id" title="variable">e1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#74ba691405efb01f43d3f644293b498f"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#e1':114"><span class="id" title="variable">e1'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#e8cd571590fe9e1dc73aa522aeae2bc3"><span class="id" title="variable">σ2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="clutch.prob_lang.erasure.html#acbf32e4b989cded5cc4c2cc08fe35df"><span class="id" title="variable">Φ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#refRcoupl"><span class="id" title="definition">refRcoupl</span></a> (<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#m:120"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#e1:112"><span class="id" title="variable">e1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#59ef07017ec00e3b46aa220b0a504a38"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#e1':114"><span class="id" title="variable">e1'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#340b04b302db2c73cc323989db8e2bd8"><span class="id" title="variable">σ1'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="clutch.prob_lang.erasure.html#acbf32e4b989cded5cc4c2cc08fe35df"><span class="id" title="variable">Φ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hα</span> <span class="id" title="var">Hα'</span> <span class="id" title="var">HR</span> <span class="id" title="var">Hcont</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#refRcoupl_eq_refRcoupl_unfoldl"><span class="id" title="lemma">refRcoupl_eq_refRcoupl_unfoldl</span></a> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.erasure.html#prim_coupl_step_prim"><span class="id" title="lemma">prim_coupl_step_prim</span></a>; <span class="id" title="tactic">eauto</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#refRcoupl_eq_refRcoupl_unfoldr"><span class="id" title="lemma">refRcoupl_eq_refRcoupl_unfoldr</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_eq_sym"><span class="id" title="lemma">Rcoupl_eq_sym</span></a>, <a class="idref" href="clutch.prob_lang.erasure.html#limprim_coupl_step_limprim"><span class="id" title="lemma">limprim_coupl_step_limprim</span></a>; <span class="id" title="tactic">eauto</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="clutch.prob.couplings.html#refRcoupl_dbind"><span class="id" title="lemma">refRcoupl_dbind</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">R</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_refRcoupl"><span class="id" title="lemma">Rcoupl_refRcoupl</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="refRcoupl_erasure_r" class="idref" href="#refRcoupl_erasure_r"><span class="id" title="lemma">refRcoupl_erasure_r</span></a> (<a id="e1:125" class="idref" href="#e1:125"><span class="id" title="binder">e1</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.expr"><span class="id" title="inductive">expr</span></a>) <a id="aad6dd2efadde041a4f2d6a79a70040b" class="idref" href="#aad6dd2efadde041a4f2d6a79a70040b"><span class="id" title="binder">σ1</span></a> <a id="e1':127" class="idref" href="#e1':127"><span class="id" title="binder">e1'</span></a> <a id="6556b5207f844db63446c8dcf9555b17" class="idref" href="#6556b5207f844db63446c8dcf9555b17"><span class="id" title="binder">σ1'</span></a> <a id="3302ae721003f1e12e2cb510dcd1d1a7" class="idref" href="#3302ae721003f1e12e2cb510dcd1d1a7"><span class="id" title="binder">α'</span></a> <a id="R:130" class="idref" href="#R:130"><span class="id" title="binder">R</span></a> <a id="f254557ae0abbcc933c4b9c123cb7884" class="idref" href="#f254557ae0abbcc933c4b9c123cb7884"><span class="id" title="binder">Φ</span></a> <a id="m:132" class="idref" href="#m:132"><span class="id" title="binder">m</span></a> <a id="bs':133" class="idref" href="#bs':133"><span class="id" title="binder">bs'</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.to_val"><span class="id" title="definition">to_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#e1:125"><span class="id" title="variable">e1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.erasure.html#6556b5207f844db63446c8dcf9555b17"><span class="id" title="variable">σ1'</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <span class="id" title="notation">!!</span> <a class="idref" href="clutch.prob_lang.erasure.html#3302ae721003f1e12e2cb510dcd1d1a7"><span class="id" title="variable">α'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#bs':133"><span class="id" title="variable">bs'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a> (<a class="idref" href="clutch.program_logic.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#e1:125"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#aad6dd2efadde041a4f2d6a79a70040b"><span class="id" title="variable">σ1</span></a>) (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#6556b5207f844db63446c8dcf9555b17"><span class="id" title="variable">σ1'</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#3302ae721003f1e12e2cb510dcd1d1a7"><span class="id" title="variable">α'</span></a>) <a class="idref" href="clutch.prob_lang.erasure.html#R:130"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="e2:134" class="idref" href="#e2:134"><span class="id" title="binder">e2</span></a> <a id="12452889374550a6a1189c6012611e26" class="idref" href="#12452889374550a6a1189c6012611e26"><span class="id" title="binder">σ2</span></a> <a id="57fd53070cc1fdef4e13fed0fbf0bd1e" class="idref" href="#57fd53070cc1fdef4e13fed0fbf0bd1e"><span class="id" title="binder">σ2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#R:130"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#e2:134"><span class="id" title="variable">e2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#12452889374550a6a1189c6012611e26"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#57fd53070cc1fdef4e13fed0fbf0bd1e"><span class="id" title="variable">σ2'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob.couplings.html#refRcoupl"><span class="id" title="definition">refRcoupl</span></a> (<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#m:132"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#e2:134"><span class="id" title="variable">e2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#12452889374550a6a1189c6012611e26"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) (<a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#e1':127"><span class="id" title="variable">e1'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#57fd53070cc1fdef4e13fed0fbf0bd1e"><span class="id" title="variable">σ2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="clutch.prob_lang.erasure.html#f254557ae0abbcc933c4b9c123cb7884"><span class="id" title="variable">Φ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#refRcoupl"><span class="id" title="definition">refRcoupl</span></a> (<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#m:132"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#e1:125"><span class="id" title="variable">e1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#aad6dd2efadde041a4f2d6a79a70040b"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) (<a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#e1':127"><span class="id" title="variable">e1'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#6556b5207f844db63446c8dcf9555b17"><span class="id" title="variable">σ1'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="clutch.prob_lang.erasure.html#f254557ae0abbcc933c4b9c123cb7884"><span class="id" title="variable">Φ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">He1</span> <span class="id" title="var">Hα'</span> <span class="id" title="var">HR</span> <span class="id" title="var">Hcont</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.program_logic.exec.html#exec_val_Sn_not_val"><span class="id" title="lemma">exec_val_Sn_not_val</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="clutch.prob.couplings.html#refRcoupl_eq_refRcoupl_unfoldr"><span class="id" title="lemma">refRcoupl_eq_refRcoupl_unfoldr</span></a> <span class="id" title="var">_</span> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> σ1' <span class="id" title="var">α'</span> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="cf9b1c4d567cfb3baf227cacc05dd3ef" class="idref" href="#cf9b1c4d567cfb3baf227cacc05dd3ef"><span class="id" title="binder">σ2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">e1'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#5e2772091928042738e003eff9239748"><span class="id" title="variable">σ2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">)</span></a>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#refRcoupl_dbind"><span class="id" title="lemma">refRcoupl_dbind</span></a>; [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_refRcoupl"><span class="id" title="lemma">Rcoupl_refRcoupl</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [] ??. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hcont</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_eq_sym"><span class="id" title="lemma">Rcoupl_eq_sym</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.erasure.html#limprim_coupl_step_limprim"><span class="id" title="lemma">limprim_coupl_step_limprim</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="refRcoupl_erasure_l" class="idref" href="#refRcoupl_erasure_l"><span class="id" title="lemma">refRcoupl_erasure_l</span></a> (<a id="e1:139" class="idref" href="#e1:139"><span class="id" title="binder">e1</span></a> <a id="e1':140" class="idref" href="#e1':140"><span class="id" title="binder">e1'</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.expr"><span class="id" title="inductive">expr</span></a>) <a id="6fe6010c1add901a66ec2659e32d8cc1" class="idref" href="#6fe6010c1add901a66ec2659e32d8cc1"><span class="id" title="binder">σ1</span></a> <a id="92b9a53bba6b0d4789f94cf6e3740b9b" class="idref" href="#92b9a53bba6b0d4789f94cf6e3740b9b"><span class="id" title="binder">σ1'</span></a> <a id="78bba15cdbf8b378acdd1f226bf901f8" class="idref" href="#78bba15cdbf8b378acdd1f226bf901f8"><span class="id" title="binder">α</span></a> <a id="R:144" class="idref" href="#R:144"><span class="id" title="binder">R</span></a> <a id="3aea9fbf73c9d6bc5ea85dc47e62e550" class="idref" href="#3aea9fbf73c9d6bc5ea85dc47e62e550"><span class="id" title="binder">Φ</span></a> <a id="m:146" class="idref" href="#m:146"><span class="id" title="binder">m</span></a> <a id="bs:147" class="idref" href="#bs:147"><span class="id" title="binder">bs</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.erasure.html#6fe6010c1add901a66ec2659e32d8cc1"><span class="id" title="variable">σ1</span></a>.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>) <span class="id" title="notation">!!</span> <a class="idref" href="clutch.prob_lang.erasure.html#78bba15cdbf8b378acdd1f226bf901f8"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#bs:147"><span class="id" title="variable">bs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#Rcoupl"><span class="id" title="definition">Rcoupl</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#6fe6010c1add901a66ec2659e32d8cc1"><span class="id" title="variable">σ1</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#78bba15cdbf8b378acdd1f226bf901f8"><span class="id" title="variable">α</span></a>) (<a class="idref" href="clutch.program_logic.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#e1':140"><span class="id" title="variable">e1'</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#92b9a53bba6b0d4789f94cf6e3740b9b"><span class="id" title="variable">σ1'</span></a>) <a class="idref" href="clutch.prob_lang.erasure.html#R:144"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="b7d8fbf92d2dde1caf2ac8c790d1a85d" class="idref" href="#b7d8fbf92d2dde1caf2ac8c790d1a85d"><span class="id" title="binder">σ2</span></a> <a id="e2':149" class="idref" href="#e2':149"><span class="id" title="binder">e2'</span></a> <a id="aa39e030ebd8b97a9d11e5a32926007a" class="idref" href="#aa39e030ebd8b97a9d11e5a32926007a"><span class="id" title="binder">σ2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#R:144"><span class="id" title="variable">R</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#b7d8fbf92d2dde1caf2ac8c790d1a85d"><span class="id" title="variable">σ2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#e2':149"><span class="id" title="variable">e2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#aa39e030ebd8b97a9d11e5a32926007a"><span class="id" title="variable">σ2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob.couplings.html#refRcoupl"><span class="id" title="definition">refRcoupl</span></a> (<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#m:146"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#e1:139"><span class="id" title="variable">e1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#b7d8fbf92d2dde1caf2ac8c790d1a85d"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) (<a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#e2':149"><span class="id" title="variable">e2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#aa39e030ebd8b97a9d11e5a32926007a"><span class="id" title="variable">σ2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="clutch.prob_lang.erasure.html#3aea9fbf73c9d6bc5ea85dc47e62e550"><span class="id" title="variable">Φ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#refRcoupl"><span class="id" title="definition">refRcoupl</span></a> (<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#m:146"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#e1:139"><span class="id" title="variable">e1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#6fe6010c1add901a66ec2659e32d8cc1"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) (<a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.erasure.html#e1':140"><span class="id" title="variable">e1'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#92b9a53bba6b0d4789f94cf6e3740b9b"><span class="id" title="variable">σ1'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="clutch.prob_lang.erasure.html#3aea9fbf73c9d6bc5ea85dc47e62e550"><span class="id" title="variable">Φ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hα</span> <span class="id" title="var">HR</span> <span class="id" title="var">Hcont</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.to_val"><span class="id" title="definition">to_val</span></a> <span class="id" title="var">e1'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_pos_R"><span class="id" title="lemma">Rcoupl_pos_R</span></a>, <a class="idref" href="clutch.prob.couplings.html#Rcoupl_inhabited_l"><span class="id" title="lemma">Rcoupl_inhabited_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HR</span> <span class="id" title="keyword">as</span> (?&amp;?&amp;?&amp;?&amp;?); [<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="clutch.program_logic.language.html#val_stuck"><span class="id" title="lemma">val_stuck</span></a>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step_mass"><span class="id" title="lemma">state_step_mass</span></a>; [<span class="id" title="var">lra</span>|]. <span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_dom</span>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="clutch.prob.couplings.html#refRcoupl_eq_refRcoupl_unfoldl"><span class="id" title="lemma">refRcoupl_eq_refRcoupl_unfoldl</span></a> <span class="id" title="var">_</span> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state_step"><span class="id" title="definition">state_step</span></a> σ1 <span class="id" title="var">α</span> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="da7c0a8fe63ccc26f64099592fdcdb39" class="idref" href="#da7c0a8fe63ccc26f64099592fdcdb39"><span class="id" title="binder">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <span class="id" title="var">m</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">e1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.erasure.html#d986f91530ec79e6d41d40959f9036ea"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">)</span></a>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.erasure.html#prim_coupl_step_prim"><span class="id" title="lemma">prim_coupl_step_prim</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.program_logic.exec.html#lim_exec_val_prim_step"><span class="id" title="lemma">lim_exec_val_prim_step</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.program_logic.exec.html#prim_step_or_val_no_val"><span class="id" title="lemma">prim_step_or_val_no_val</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#refRcoupl_dbind"><span class="id" title="lemma">refRcoupl_dbind</span></a>; [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_refRcoupl"><span class="id" title="lemma">Rcoupl_refRcoupl</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? [] ?. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hcont</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*<br/>
Lemma&nbsp;ub_lift_erasure&nbsp;(e1&nbsp;:&nbsp;expr)&nbsp;σ1&nbsp;α&nbsp;R&nbsp;Φ&nbsp;m&nbsp;bs&nbsp;(ε1&nbsp;ε2&nbsp;:&nbsp;nonnegreal)&nbsp;:<br/>
&nbsp;&nbsp;σ.(tapes)&nbsp;!!&nbsp;α&nbsp;=&nbsp;Some&nbsp;bs&nbsp;→<br/>
&nbsp;&nbsp;ub_lift&nbsp;(state_step&nbsp;σ1&nbsp;α)&nbsp;R&nbsp;ε1&nbsp;→<br/>
&nbsp;&nbsp;(∀&nbsp;σ2,&nbsp;R&nbsp;σ2&nbsp;→&nbsp;ub_lift&nbsp;(exec_val&nbsp;m&nbsp;(e1,&nbsp;σ2))&nbsp;Φ&nbsp;ε2)&nbsp;→<br/>
&nbsp;&nbsp;ub_lift&nbsp;(exec_val&nbsp;m&nbsp;(e1,&nbsp;σ1))&nbsp;Φ&nbsp;(ε1&nbsp;+&nbsp;ε2).<br/>
Proof.<br/>
Qed.<br/>
*)</span><br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/coq-community/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
