<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resources/config.js"></script>
<script type="text/javascript" src="resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">clutch.examples.split_rng</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="clutch.clutch.html#"><span class="id" title="library">clutch</span></a> <a class="idref" href="clutch.lib.flip.html#"><span class="id" title="library">lib.flip</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch.examples</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="clutch.examples.keyed_hash.html#"><span class="id" title="library">keyed_hash</span></a> <a class="idref" href="clutch.examples.hash.html#"><span class="id" title="library">hash</span></a> <a class="idref" href="clutch.examples.rng.html#"><span class="id" title="library">rng</span></a>.<br/>

<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Default</span> <span class="id" title="keyword">Proof</span> <span class="id" title="var">Using</span> "Type*".<br/>

<br/>
<span class="comment">(*&nbsp;A&nbsp;"splittable"&nbsp;pseudo-random&nbsp;number&nbsp;generator&nbsp;derived&nbsp;from&nbsp;a&nbsp;keyed<br/>
&nbsp;&nbsp;&nbsp;hashing&nbsp;function.<br/>
<br/>
&nbsp;&nbsp;&nbsp;The&nbsp;idea&nbsp;is&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;generate&nbsp;a&nbsp;collection&nbsp;of&nbsp;separate&nbsp;independent&nbsp;RNGs&nbsp;from&nbsp;a&nbsp;single&nbsp;keyed&nbsp;hash<br/>
&nbsp;&nbsp;&nbsp;by&nbsp;having&nbsp;each&nbsp;RNG&nbsp;use&nbsp;a&nbsp;different&nbsp;key.<br/>
<br/>
&nbsp;&nbsp;&nbsp;Compare&nbsp;with&nbsp;rng.v,&nbsp;which&nbsp;generates&nbsp;a&nbsp;single&nbsp;rng&nbsp;from&nbsp;a&nbsp;hash&nbsp;function.<br/>
<br/>
*)</span><br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="rng" class="idref" href="#rng"><span class="id" title="section">rng</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="MAX_RNGS_POW:1" class="idref" href="#MAX_RNGS_POW:1"><span class="id" title="binder">MAX_RNGS_POW</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="MAX_SAMPLES_POW:2" class="idref" href="#MAX_SAMPLES_POW:2"><span class="id" title="binder">MAX_SAMPLES_POW</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="MAX_RNGS" class="idref" href="#MAX_RNGS"><span class="id" title="definition">MAX_RNGS</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.pow"><span class="id" title="definition">Nat.pow</span></a> 2 <a class="idref" href="clutch.examples.split_rng.html#rng.MAX_RNGS_POW"><span class="id" title="variable">MAX_RNGS_POW</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="MAX_SAMPLES" class="idref" href="#MAX_SAMPLES"><span class="id" title="definition">MAX_SAMPLES</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.pow"><span class="id" title="definition">Nat.pow</span></a> 2 <a class="idref" href="clutch.examples.split_rng.html#rng.MAX_SAMPLES_POW"><span class="id" title="variable">MAX_SAMPLES_POW</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="init_rng_gen" class="idref" href="#init_rng_gen"><span class="id" title="definition">init_rng_gen</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">:</span></a> "_"<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "f" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> (<a class="idref" href="clutch.examples.keyed_hash.html#init_keyed_hash"><span class="id" title="definition">init_keyed_hash</span></a> <a class="idref" href="clutch.examples.split_rng.html#rng.MAX_RNGS_POW"><span class="id" title="variable">MAX_RNGS_POW</span></a> <a class="idref" href="clutch.examples.split_rng.html#rng.MAX_SAMPLES_POW"><span class="id" title="variable">MAX_SAMPLES_POW</span></a>) <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "key_cntr" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">ref</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>0 <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;We&nbsp;return&nbsp;an&nbsp;rng&nbsp;"generator"&nbsp;that&nbsp;gets&nbsp;a&nbsp;fresh&nbsp;key&nbsp;from&nbsp;key_cntr&nbsp;(if&nbsp;available)&nbsp;and&nbsp;returns<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;an&nbsp;rng&nbsp;function&nbsp;using&nbsp;that&nbsp;key&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">:</span></a> "_"<a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "k" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#569b74bc432a2b233b93ae1b45418e26"><span class="id" title="notation">!</span></a>"key_cntr" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a><a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#MAX_RNGS"><span class="id" title="definition">MAX_RNGS</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> "k" <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#NONE"><span class="id" title="abbreviation">NONE</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"key_cntr" <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&lt;-'_x"><span class="id" title="notation">&lt;-</span></a> "k" <a class="idref" href="clutch.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1<a class="idref" href="clutch.prob_lang.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "sample_cntr" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">ref</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>0 <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#SOME"><span class="id" title="abbreviation">SOME</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">:</span></a> "_"<a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "v" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#569b74bc432a2b233b93ae1b45418e26"><span class="id" title="notation">!</span></a>"sample_cntr" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "b" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a><a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">:</span></a> "v" <a class="idref" href="clutch.prob_lang.notation.html#959e055f1ab3ff54c36dde10824af025"><span class="id" title="notation">≤</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#MAX_SAMPLES"><span class="id" title="definition">MAX_SAMPLES</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"f" "k" "v"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"sample_cntr" <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&lt;-'_x"><span class="id" title="notation">&lt;-</span></a> "v" <a class="idref" href="clutch.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1<a class="idref" href="clutch.prob_lang.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"b").<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="hash_rng_gen_specialized" class="idref" href="#hash_rng_gen_specialized"><span class="id" title="definition">hash_rng_gen_specialized</span></a> (<a id="f:3" class="idref" href="#f:3"><span class="id" title="binder">f</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) (<a id="key_cntr:4" class="idref" href="#key_cntr:4"><span class="id" title="binder">key_cntr</span></a> : <a class="idref" href="clutch.prob_lang.locations.html#loc"><span class="id" title="record">loc</span></a>) : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">:</span></a> "_"<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "k" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#569b74bc432a2b233b93ae1b45418e26"><span class="id" title="notation">!</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#key_cntr:4"><span class="id" title="variable">key_cntr</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a><a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#MAX_RNGS"><span class="id" title="definition">MAX_RNGS</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> "k" <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#NONE"><span class="id" title="abbreviation">NONE</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#key_cntr:4"><span class="id" title="variable">key_cntr</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&lt;-'_x"><span class="id" title="notation">&lt;-</span></a> "k" <a class="idref" href="clutch.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1<a class="idref" href="clutch.prob_lang.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "sample_cntr" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">ref</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>0 <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#SOME"><span class="id" title="abbreviation">SOME</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">:</span></a> "_"<a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "v" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#569b74bc432a2b233b93ae1b45418e26"><span class="id" title="notation">!</span></a>"sample_cntr" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "b" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a><a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">:</span></a> "v" <a class="idref" href="clutch.prob_lang.notation.html#959e055f1ab3ff54c36dde10824af025"><span class="id" title="notation">≤</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#MAX_SAMPLES"><span class="id" title="definition">MAX_SAMPLES</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#f:3"><span class="id" title="variable">f</span></a> "k" "v"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"sample_cntr" <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&lt;-'_x"><span class="id" title="notation">&lt;-</span></a> "v" <a class="idref" href="clutch.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1<a class="idref" href="clutch.prob_lang.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"b").<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="hash_rng_specialized" class="idref" href="#hash_rng_specialized"><span class="id" title="definition">hash_rng_specialized</span></a> (<a id="f:5" class="idref" href="#f:5"><span class="id" title="binder">f</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) (<a id="k:6" class="idref" href="#k:6"><span class="id" title="binder">k</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="c:7" class="idref" href="#c:7"><span class="id" title="binder">c</span></a> : <a class="idref" href="clutch.prob_lang.locations.html#loc"><span class="id" title="record">loc</span></a>) : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">:</span></a> "_"<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "v" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#569b74bc432a2b233b93ae1b45418e26"><span class="id" title="notation">!</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#c:7"><span class="id" title="variable">c</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "b" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a><a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">:</span></a> "v" <a class="idref" href="clutch.prob_lang.notation.html#959e055f1ab3ff54c36dde10824af025"><span class="id" title="notation">≤</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#MAX_SAMPLES"><span class="id" title="definition">MAX_SAMPLES</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#f:5"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#k:6"><span class="id" title="variable">k</span></a> "v"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#c:7"><span class="id" title="variable">c</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&lt;-'_x"><span class="id" title="notation">&lt;-</span></a> "v" <a class="idref" href="clutch.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1<a class="idref" href="clutch.prob_lang.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"b").<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="clutchRGS0:9" class="idref" href="#clutchRGS0:9"><span class="id" title="binder">!</span></a><a id="clutchRGS0:9" class="idref" href="#clutchRGS0:9"><span class="id" title="binder">clutchRGS</span></a> <a id="clutchRGS0:9" class="idref" href="#clutchRGS0:9"><span class="id" title="binder">Σ</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;it&nbsp;would&nbsp;be&nbsp;better&nbsp;to&nbsp;wrap&nbsp;this&nbsp;ghost_mapG&nbsp;with&nbsp;keyed_mapG&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="GHOST_MAP:10" class="idref" href="#GHOST_MAP:10"><span class="id" title="binder">GHOST_MAP</span></a>: <span class="id" title="class">ghost_mapG</span> <a class="idref" href="clutch.examples.split_rng.html#3b363b930699826ecdaf7aa4666b9402"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="clutch.examples.keyed_hash.html#fin_hash_dom_space"><span class="id" title="definition">fin_hash_dom_space</span></a> <a class="idref" href="clutch.examples.split_rng.html#rng.MAX_RNGS_POW"><span class="id" title="variable">MAX_RNGS_POW</span></a> <a class="idref" href="clutch.examples.split_rng.html#rng.MAX_SAMPLES_POW"><span class="id" title="variable">MAX_SAMPLES_POW</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="khashN" class="idref" href="#khashN"><span class="id" title="definition">khashN</span></a> := <span class="id" title="definition">nroot</span><span class="id" title="notation">.@</span>"khash".<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="is_keyed_hash" class="idref" href="#is_keyed_hash"><span class="id" title="definition">is_keyed_hash</span></a> <a id="ffabb5326d6c3c3378c3a8b7fee7ec6d" class="idref" href="#ffabb5326d6c3c3378c3a8b7fee7ec6d"><span class="id" title="binder">γ</span></a> <a id="f:12" class="idref" href="#f:12"><span class="id" title="binder">f</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">na_inv</span> <a class="idref" href="clutch.rel_logic.model.html#clutchRGS_nais"><span class="id" title="method">clutchRGS_nais</span></a> <a class="idref" href="clutch.examples.split_rng.html#khashN"><span class="id" title="definition">khashN</span></a> (<a class="idref" href="clutch.examples.keyed_hash.html#keyed_hash_auth"><span class="id" title="definition">keyed_hash_auth</span></a> <a class="idref" href="clutch.examples.split_rng.html#rng.MAX_RNGS_POW"><span class="id" title="variable">MAX_RNGS_POW</span></a> <a class="idref" href="clutch.examples.split_rng.html#rng.MAX_SAMPLES_POW"><span class="id" title="variable">MAX_SAMPLES_POW</span></a> <a class="idref" href="clutch.examples.split_rng.html#ffabb5326d6c3c3378c3a8b7fee7ec6d"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.split_rng.html#f:12"><span class="id" title="variable">f</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="is_skeyed_hash" class="idref" href="#is_skeyed_hash"><span class="id" title="definition">is_skeyed_hash</span></a> <a id="4f26856a24270e77f960c01c9cfcd453" class="idref" href="#4f26856a24270e77f960c01c9cfcd453"><span class="id" title="binder">γ</span></a> <a id="f:14" class="idref" href="#f:14"><span class="id" title="binder">f</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">na_inv</span> <a class="idref" href="clutch.rel_logic.model.html#clutchRGS_nais"><span class="id" title="method">clutchRGS_nais</span></a> <a class="idref" href="clutch.examples.split_rng.html#khashN"><span class="id" title="definition">khashN</span></a> (<a class="idref" href="clutch.examples.keyed_hash.html#skeyed_hash_auth"><span class="id" title="definition">skeyed_hash_auth</span></a> <a class="idref" href="clutch.examples.split_rng.html#rng.MAX_RNGS_POW"><span class="id" title="variable">MAX_RNGS_POW</span></a> <a class="idref" href="clutch.examples.split_rng.html#rng.MAX_SAMPLES_POW"><span class="id" title="variable">MAX_SAMPLES_POW</span></a> <a class="idref" href="clutch.examples.split_rng.html#4f26856a24270e77f960c01c9cfcd453"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.split_rng.html#f:14"><span class="id" title="variable">f</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Putting&nbsp;is_keyed_hash&nbsp;seems&nbsp;like&nbsp;it&nbsp;makes&nbsp;the&nbsp;definition&nbsp;but&nbsp;then&nbsp;this&nbsp;is&nbsp;not&nbsp;timeless&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="hash_rng" class="idref" href="#hash_rng"><span class="id" title="definition">hash_rng</span></a> (<a id="n:15" class="idref" href="#n:15"><span class="id" title="binder">n</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="g:16" class="idref" href="#g:16"><span class="id" title="binder">g</span></a>: <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="clutch.examples.split_rng.html#3b363b930699826ecdaf7aa4666b9402"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="h:17" class="idref" href="#h:17"><span class="id" title="binder">h</span></a> <a id="k:18" class="idref" href="#k:18"><span class="id" title="binder">k</span></a> <a id="c:19" class="idref" href="#c:19"><span class="id" title="binder">c</span></a> <a id="m:20" class="idref" href="#m:20"><span class="id" title="binder">m</span></a> <a id="cf6aa9dd96fbb1b0b51132ecb076c581" class="idref" href="#cf6aa9dd96fbb1b0b51132ecb076c581"><span class="id" title="binder">γ</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">⌜</span> <a class="idref" href="clutch.examples.split_rng.html#g:16"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.split_rng.html#hash_rng_specialized"><span class="id" title="definition">hash_rng_specialized</span></a> <a class="idref" href="clutch.examples.split_rng.html#h:17"><span class="id" title="variable">h</span></a> (<span class="id" title="definition">fin_to_nat</span> <a class="idref" href="clutch.examples.split_rng.html#k:18"><span class="id" title="variable">k</span></a>) <a class="idref" href="clutch.examples.split_rng.html#c:19"><span class="id" title="variable">c</span></a> <span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⌜</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:22" class="idref" href="#x:22"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:15"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.split_rng.html#x:22"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.examples.split_rng.html#x:22"><span class="id" title="variable">x</span></a> <span class="id" title="notation">∉</span> <span class="id" title="definition">dom</span> <a class="idref" href="clutch.examples.split_rng.html#m:20"><span class="id" title="variable">m</span></a> <span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own"><span class="id" title="definition">khashfun_own</span></a> <a class="idref" href="clutch.examples.split_rng.html#rng.MAX_RNGS_POW"><span class="id" title="variable">MAX_RNGS_POW</span></a> <a class="idref" href="clutch.examples.split_rng.html#rng.MAX_SAMPLES_POW"><span class="id" title="variable">MAX_SAMPLES_POW</span></a> <a class="idref" href="clutch.examples.split_rng.html#cf6aa9dd96fbb1b0b51132ecb076c581"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.split_rng.html#k:18"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.split_rng.html#m:20"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#is_keyed_hash"><span class="id" title="definition">is_keyed_hash</span></a> <a class="idref" href="clutch.examples.split_rng.html#cf6aa9dd96fbb1b0b51132ecb076c581"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.split_rng.html#h:17"><span class="id" title="variable">h</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#c:19"><span class="id" title="variable">c</span></a> <a class="idref" href="clutch.rel_logic.primitive_laws.html#db9bde1508f348dd1f9d24e9d4ead804"><span class="id" title="notation">↦</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#n:15"><span class="id" title="variable">n</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="shash_rng" class="idref" href="#shash_rng"><span class="id" title="definition">shash_rng</span></a> (<a id="n:23" class="idref" href="#n:23"><span class="id" title="binder">n</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="g:24" class="idref" href="#g:24"><span class="id" title="binder">g</span></a>: <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="clutch.examples.split_rng.html#3b363b930699826ecdaf7aa4666b9402"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="h:25" class="idref" href="#h:25"><span class="id" title="binder">h</span></a> <a id="k:26" class="idref" href="#k:26"><span class="id" title="binder">k</span></a> <a id="c:27" class="idref" href="#c:27"><span class="id" title="binder">c</span></a> <a id="m:28" class="idref" href="#m:28"><span class="id" title="binder">m</span></a> <a id="eb4d76647b09e0fda0494f65bba2b253" class="idref" href="#eb4d76647b09e0fda0494f65bba2b253"><span class="id" title="binder">γ</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">⌜</span> <a class="idref" href="clutch.examples.split_rng.html#g:24"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.split_rng.html#hash_rng_specialized"><span class="id" title="definition">hash_rng_specialized</span></a> <a class="idref" href="clutch.examples.split_rng.html#h:25"><span class="id" title="variable">h</span></a> (<span class="id" title="definition">fin_to_nat</span> <a class="idref" href="clutch.examples.split_rng.html#k:26"><span class="id" title="variable">k</span></a>) <a class="idref" href="clutch.examples.split_rng.html#c:27"><span class="id" title="variable">c</span></a> <span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⌜</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:30" class="idref" href="#x:30"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:23"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.split_rng.html#x:30"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.examples.split_rng.html#x:30"><span class="id" title="variable">x</span></a> <span class="id" title="notation">∉</span> <span class="id" title="definition">dom</span> <a class="idref" href="clutch.examples.split_rng.html#m:28"><span class="id" title="variable">m</span></a> <span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own"><span class="id" title="definition">khashfun_own</span></a> <a class="idref" href="clutch.examples.split_rng.html#rng.MAX_RNGS_POW"><span class="id" title="variable">MAX_RNGS_POW</span></a> <a class="idref" href="clutch.examples.split_rng.html#rng.MAX_SAMPLES_POW"><span class="id" title="variable">MAX_SAMPLES_POW</span></a> <a class="idref" href="clutch.examples.split_rng.html#eb4d76647b09e0fda0494f65bba2b253"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.split_rng.html#k:26"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.split_rng.html#m:28"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#is_skeyed_hash"><span class="id" title="definition">is_skeyed_hash</span></a> <a class="idref" href="clutch.examples.split_rng.html#eb4d76647b09e0fda0494f65bba2b253"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.split_rng.html#h:25"><span class="id" title="variable">h</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#c:27"><span class="id" title="variable">c</span></a> <a class="idref" href="clutch.rel_logic.spec_ra.html#0326014f985dcbdf069e6962e826748b"><span class="id" title="notation">↦ₛ</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#n:23"><span class="id" title="variable">n</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="hash_rng_gen" class="idref" href="#hash_rng_gen"><span class="id" title="definition">hash_rng_gen</span></a> (<a id="n:31" class="idref" href="#n:31"><span class="id" title="binder">n</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="f:32" class="idref" href="#f:32"><span class="id" title="binder">f</span></a>: <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="clutch.examples.split_rng.html#3b363b930699826ecdaf7aa4666b9402"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="h:33" class="idref" href="#h:33"><span class="id" title="binder">h</span></a> <a id="kcntr:34" class="idref" href="#kcntr:34"><span class="id" title="binder">kcntr</span></a> <a id="0dfab04a48ab485abcaf335220989fb1" class="idref" href="#0dfab04a48ab485abcaf335220989fb1"><span class="id" title="binder">γ</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">⌜</span> <a class="idref" href="clutch.examples.split_rng.html#f:32"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.split_rng.html#hash_rng_gen_specialized"><span class="id" title="definition">hash_rng_gen_specialized</span></a> <a class="idref" href="clutch.examples.split_rng.html#h:33"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.examples.split_rng.html#kcntr:34"><span class="id" title="variable">kcntr</span></a> <span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#is_keyed_hash"><span class="id" title="definition">is_keyed_hash</span></a> <a class="idref" href="clutch.examples.split_rng.html#0dfab04a48ab485abcaf335220989fb1"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.split_rng.html#h:33"><span class="id" title="variable">h</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#kcntr:34"><span class="id" title="variable">kcntr</span></a> <a class="idref" href="clutch.rel_logic.primitive_laws.html#db9bde1508f348dd1f9d24e9d4ead804"><span class="id" title="notation">↦</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#n:31"><span class="id" title="variable">n</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">[∗</span> <span class="id" title="notation">set</span><span class="id" title="notation">]</span> <a id="k:36" class="idref" href="#k:36"><span class="id" title="binder">k</span></a> <span class="id" title="notation">∈</span> <span class="id" title="definition">fin_to_set</span> (<a class="idref" href="clutch.examples.keyed_hash.html#fin_key_space"><span class="id" title="definition">fin_key_space</span></a> <a class="idref" href="clutch.examples.split_rng.html#rng.MAX_RNGS_POW"><span class="id" title="variable">MAX_RNGS_POW</span></a>)<span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">⌜</span> <a class="idref" href="clutch.examples.split_rng.html#n:31"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="definition">fin_to_nat</span> <a class="idref" href="clutch.examples.split_rng.html#k:36"><span class="id" title="variable">k</span></a> <span class="id" title="notation">⌝</span> <span class="id" title="notation">→</span> <a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own"><span class="id" title="definition">khashfun_own</span></a> <span class="id" title="var">_</span> <a class="idref" href="clutch.examples.split_rng.html#rng.MAX_SAMPLES_POW"><span class="id" title="variable">MAX_SAMPLES_POW</span></a> <a class="idref" href="clutch.examples.split_rng.html#0dfab04a48ab485abcaf335220989fb1"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.split_rng.html#k:36"><span class="id" title="variable">k</span></a> <span class="id" title="notation">∅</span><span class="id" title="notation">)</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="shash_rng_gen" class="idref" href="#shash_rng_gen"><span class="id" title="definition">shash_rng_gen</span></a> (<a id="n:37" class="idref" href="#n:37"><span class="id" title="binder">n</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="f:38" class="idref" href="#f:38"><span class="id" title="binder">f</span></a>: <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="clutch.examples.split_rng.html#3b363b930699826ecdaf7aa4666b9402"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="h:39" class="idref" href="#h:39"><span class="id" title="binder">h</span></a> <a id="kcntr:40" class="idref" href="#kcntr:40"><span class="id" title="binder">kcntr</span></a> <a id="1702d82f562f6fa41761290d2fa51013" class="idref" href="#1702d82f562f6fa41761290d2fa51013"><span class="id" title="binder">γ</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">⌜</span> <a class="idref" href="clutch.examples.split_rng.html#f:38"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.split_rng.html#hash_rng_gen_specialized"><span class="id" title="definition">hash_rng_gen_specialized</span></a> <a class="idref" href="clutch.examples.split_rng.html#h:39"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.examples.split_rng.html#kcntr:40"><span class="id" title="variable">kcntr</span></a> <span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#is_skeyed_hash"><span class="id" title="definition">is_skeyed_hash</span></a> <a class="idref" href="clutch.examples.split_rng.html#1702d82f562f6fa41761290d2fa51013"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.split_rng.html#h:39"><span class="id" title="variable">h</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#kcntr:40"><span class="id" title="variable">kcntr</span></a> <a class="idref" href="clutch.rel_logic.spec_ra.html#0326014f985dcbdf069e6962e826748b"><span class="id" title="notation">↦ₛ</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#n:37"><span class="id" title="variable">n</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">[∗</span> <span class="id" title="notation">set</span><span class="id" title="notation">]</span> <a id="k:42" class="idref" href="#k:42"><span class="id" title="binder">k</span></a> <span class="id" title="notation">∈</span> <span class="id" title="definition">fin_to_set</span> (<a class="idref" href="clutch.examples.keyed_hash.html#fin_key_space"><span class="id" title="definition">fin_key_space</span></a> <a class="idref" href="clutch.examples.split_rng.html#rng.MAX_RNGS_POW"><span class="id" title="variable">MAX_RNGS_POW</span></a>)<span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">⌜</span> <a class="idref" href="clutch.examples.split_rng.html#n:37"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="definition">fin_to_nat</span> <a class="idref" href="clutch.examples.split_rng.html#k:42"><span class="id" title="variable">k</span></a> <span class="id" title="notation">⌝</span> <span class="id" title="notation">→</span> <a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own"><span class="id" title="definition">khashfun_own</span></a> <span class="id" title="var">_</span> <a class="idref" href="clutch.examples.split_rng.html#rng.MAX_SAMPLES_POW"><span class="id" title="variable">MAX_SAMPLES_POW</span></a> <a class="idref" href="clutch.examples.split_rng.html#1702d82f562f6fa41761290d2fa51013"><span class="id" title="variable">γ</span></a> <a class="idref" href="clutch.examples.split_rng.html#k:42"><span class="id" title="variable">k</span></a> <span class="id" title="notation">∅</span><span class="id" title="notation">)</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_init_rng_gen" class="idref" href="#wp_init_rng_gen"><span class="id" title="lemma">wp_init_rng_gen</span></a> <a id="E:43" class="idref" href="#E:43"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">True</span> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#init_rng_gen"><span class="id" title="definition">init_rng_gen</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.examples.split_rng.html#E:43"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">(</span><a id="f:44" class="idref" href="#f:44"><span class="id" title="binder">f</span></a>: <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a><span class="id" title="notation">),</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.examples.split_rng.html#f:44"><span class="id" title="variable">f</span></a><span class="id" title="notation">;</span> <a class="idref" href="clutch.examples.split_rng.html#hash_rng_gen"><span class="id" title="definition">hash_rng_gen</span></a> 0 <a class="idref" href="clutch.examples.split_rng.html#f:44"><span class="id" title="variable">f</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "_ HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.split_rng.html#init_rng_gen"><span class="id" title="definition">init_rng_gen</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.keyed_hash.html#wp_init_keyed_hash"><span class="id" title="lemma">wp_init_keyed_hash</span></a> <span class="id" title="notation">with</span> "[//]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">h</span>) "H". <span class="id" title="var">iDestruct</span> "H" <span class="id" title="keyword">as</span> (<span class="id" title="var">γ</span>) "(Hauth&amp;Hks)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_alloc</span> <span class="id" title="var">key_cntr</span> <span class="id" title="keyword">as</span> "Hkc".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<span class="id" title="notation">|={</span><span class="id" title="var">E</span><span class="id" title="notation">}=&gt;</span> <a class="idref" href="clutch.examples.split_rng.html#is_keyed_hash"><span class="id" title="definition">is_keyed_hash</span></a> <span class="id" title="var">γ</span> <span class="id" title="var">h</span>)%<span class="id" title="var">I</span> <span class="id" title="keyword">with</span> "[Hauth]" <span class="id" title="keyword">as</span> "&gt;#His_keyed".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iApply</span> <span class="id" title="lemma">na_inv_alloc</span>. <span class="id" title="var">iNext</span>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span> "# ∗".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepS_mono</span> <span class="id" title="notation">with</span> "Hks"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">x</span> <span class="id" title="var">Helem</span>) "$"; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_init_rng_gen" class="idref" href="#spec_init_rng_gen"><span class="id" title="lemma">spec_init_rng_gen</span></a> <a id="E:45" class="idref" href="#E:45"><span class="id" title="binder">E</span></a> <a id="K:46" class="idref" href="#K:46"><span class="id" title="binder">K</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.examples.split_rng.html#E:45"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.split_rng.html#K:46"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.examples.split_rng.html#init_rng_gen"><span class="id" title="definition">init_rng_gen</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>) <span class="id" title="notation">={</span><a class="idref" href="clutch.examples.split_rng.html#E:45"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="f:47" class="idref" href="#f:47"><span class="id" title="binder">f</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.split_rng.html#K:46"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.examples.split_rng.html#f:47"><span class="id" title="variable">f</span></a>) <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.split_rng.html#shash_rng_gen"><span class="id" title="definition">shash_rng_gen</span></a> 0 <a class="idref" href="clutch.examples.split_rng.html#f:47"><span class="id" title="variable">f</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "HK".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.split_rng.html#init_rng_gen"><span class="id" title="definition">init_rng_gen</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_bind</span> (<a class="idref" href="clutch.examples.keyed_hash.html#init_keyed_hash"><span class="id" title="definition">init_keyed_hash</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.keyed_hash.html#spec_init_keyed_hash"><span class="id" title="lemma">spec_init_keyed_hash</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">h</span> <span class="id" title="var">γ</span>) "(HK&amp;Hauth&amp;Hks)"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_alloc</span> <span class="id" title="keyword">as</span> <span class="id" title="var">key_cntr</span> "Hkc".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<span class="id" title="notation">|={</span><span class="id" title="var">E</span><span class="id" title="notation">}=&gt;</span> <a class="idref" href="clutch.examples.split_rng.html#is_skeyed_hash"><span class="id" title="definition">is_skeyed_hash</span></a> <span class="id" title="var">γ</span> <span class="id" title="var">h</span>)%<span class="id" title="var">I</span> <span class="id" title="keyword">with</span> "[Hauth]" <span class="id" title="keyword">as</span> "&gt;#His_keyed".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iApply</span> <span class="id" title="lemma">na_inv_alloc</span>. <span class="id" title="var">iNext</span>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span> "HK".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span> "# ∗".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepS_mono</span> <span class="id" title="notation">with</span> "Hks"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">x</span> <span class="id" title="var">Helem</span>) "$"; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_run_rng_gen" class="idref" href="#wp_run_rng_gen"><span class="id" title="lemma">wp_run_rng_gen</span></a> <a id="k:48" class="idref" href="#k:48"><span class="id" title="binder">k</span></a> <a id="f:49" class="idref" href="#f:49"><span class="id" title="binder">f</span></a> <a id="E:50" class="idref" href="#E:50"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#k:48"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.split_rng.html#MAX_RNGS"><span class="id" title="definition">MAX_RNGS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">▷</span> <a class="idref" href="clutch.examples.split_rng.html#hash_rng_gen"><span class="id" title="definition">hash_rng_gen</span></a> <a class="idref" href="clutch.examples.split_rng.html#k:48"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.split_rng.html#f:49"><span class="id" title="variable">f</span></a> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#f:49"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.examples.split_rng.html#E:50"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">(</span><a id="g:51" class="idref" href="#g:51"><span class="id" title="binder">g</span></a>: <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a><span class="id" title="notation">),</span> <span class="id" title="notation">RET</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.prob_lang.notation.html#SOMEV"><span class="id" title="abbreviation">SOMEV</span></a> <a class="idref" href="clutch.examples.split_rng.html#g:51"><span class="id" title="variable">g</span></a><span class="id" title="notation">);</span> <a class="idref" href="clutch.examples.split_rng.html#hash_rng_gen"><span class="id" title="definition">hash_rng_gen</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.split_rng.html#k:48"><span class="id" title="variable">k</span></a>) <a class="idref" href="clutch.examples.split_rng.html#f:49"><span class="id" title="variable">f</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.split_rng.html#hash_rng"><span class="id" title="definition">hash_rng</span></a> 0 <a class="idref" href="clutch.examples.split_rng.html#g:51"><span class="id" title="variable">g</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hle</span> <span class="id" title="var">Φ</span>) "Hgen HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hgen" <span class="id" title="keyword">as</span> (<span class="id" title="var">h</span> <span class="id" title="var">kcntr</span> <span class="id" title="var">γ</span>) "(&gt;-&gt;&amp;#His&amp;Hknctr&amp;Hks)".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iEval</span> (<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.split_rng.html#hash_rng_gen_specialized"><span class="id" title="definition">hash_rng_gen_specialized</span></a>). <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_load</span>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_store</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_alloc</span> <span class="id" title="var">sample_cntr</span> <span class="id" title="keyword">as</span> "Hsc".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.split_rng.html#init_rng_gen"><span class="id" title="definition">init_rng_gen</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hlt</span>: <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.split_rng.html#MAX_RNGS"><span class="id" title="definition">MAX_RNGS</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">k'</span> := (<span class="id" title="abbreviation">nat_to_fin</span> <span class="id" title="var">Hlt</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#fin_key_space"><span class="id" title="definition">fin_key_space</span></a> <a class="idref" href="clutch.examples.split_rng.html#rng.MAX_RNGS_POW"><span class="id" title="variable">MAX_RNGS_POW</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepS_delete</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">k'</span> <span class="id" title="notation">with</span> "Hks"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "(Hk&amp;Hks)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_fin_to_set</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "Hks Hknctr".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="var">iFrame</span> "#".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">k</span>))%<span class="id" title="var">Z</span> <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span> "Hknctr".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<span class="id" title="lemma">big_sepS_delete</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">k'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_fin_to_set</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitR</span> "Hks".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iIntros</span> (<span class="id" title="var">Hle'</span>). <span class="id" title="var">iExFalso</span>. <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">k'</span> <span class="id" title="lemma">fin_to_nat_to_fin</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hle'</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepS_mono</span> <span class="id" title="notation">with</span> "Hks"<span class="id" title="notation">)</span>. <span class="id" title="var">iIntros</span> (??) "H %Hle'".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "H". <span class="id" title="var">iPureIntro</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">k'</span>, <span class="id" title="var">_</span>, <span class="id" title="notation">∅</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span> "Hsc #". <span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.split_rng.html#hash_rng_specialized"><span class="id" title="definition">hash_rng_specialized</span></a>. <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">k'</span> <span class="id" title="lemma">fin_to_nat_to_fin</span> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iPureIntro</span>. <span class="id" title="var">set_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "Hk". <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">k'</span> <span class="id" title="lemma">fin_to_nat_to_fin</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_run_rng_gen" class="idref" href="#spec_run_rng_gen"><span class="id" title="lemma">spec_run_rng_gen</span></a> <a id="k:52" class="idref" href="#k:52"><span class="id" title="binder">k</span></a> <a id="f:53" class="idref" href="#f:53"><span class="id" title="binder">f</span></a> <a id="K:54" class="idref" href="#K:54"><span class="id" title="binder">K</span></a> <a id="E:55" class="idref" href="#E:55"><span class="id" title="binder">E</span></a>  :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.examples.split_rng.html#E:55"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#k:52"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.split_rng.html#MAX_RNGS"><span class="id" title="definition">MAX_RNGS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#shash_rng_gen"><span class="id" title="definition">shash_rng_gen</span></a> <a class="idref" href="clutch.examples.split_rng.html#k:52"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.split_rng.html#f:53"><span class="id" title="variable">f</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.split_rng.html#K:54"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.examples.split_rng.html#f:53"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>) <span class="id" title="notation">={</span><a class="idref" href="clutch.examples.split_rng.html#E:55"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="g:56" class="idref" href="#g:56"><span class="id" title="binder">g</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.split_rng.html#K:54"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#SOMEV"><span class="id" title="abbreviation">SOMEV</span></a> <a class="idref" href="clutch.examples.split_rng.html#g:56"><span class="id" title="variable">g</span></a>)) <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.split_rng.html#shash_rng_gen"><span class="id" title="definition">shash_rng_gen</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.split_rng.html#k:52"><span class="id" title="variable">k</span></a>) <a class="idref" href="clutch.examples.split_rng.html#f:53"><span class="id" title="variable">f</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.split_rng.html#shash_rng"><span class="id" title="definition">shash_rng</span></a> 0 <a class="idref" href="clutch.examples.split_rng.html#g:56"><span class="id" title="variable">g</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">HE</span> <span class="id" title="var">Hle</span>) "Hgen HK".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hgen" <span class="id" title="keyword">as</span> (<span class="id" title="var">h</span> <span class="id" title="var">kcntr</span> <span class="id" title="var">γ</span>) "(-&gt;&amp;#His&amp;Hknctr&amp;Hks)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iEval</span> (<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.split_rng.html#hash_rng_gen_specialized"><span class="id" title="definition">hash_rng_gen_specialized</span></a>) <span class="id" title="tactic">in</span> "HK".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_load</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_store</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_alloc</span> <span class="id" title="keyword">as</span> <span class="id" title="var">sample_cntr</span> "Hsc".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span> "HK".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hlt</span>: <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.split_rng.html#MAX_RNGS"><span class="id" title="definition">MAX_RNGS</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">k'</span> := (<span class="id" title="abbreviation">nat_to_fin</span> <span class="id" title="var">Hlt</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.examples.keyed_hash.html#fin_key_space"><span class="id" title="definition">fin_key_space</span></a> <a class="idref" href="clutch.examples.split_rng.html#rng.MAX_RNGS_POW"><span class="id" title="variable">MAX_RNGS_POW</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepS_delete</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">k'</span> <span class="id" title="notation">with</span> "Hks"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "(Hk&amp;Hks)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_fin_to_set</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "Hks Hknctr".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="var">iFrame</span> "#".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">k</span>))%<span class="id" title="var">Z</span> <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span> "Hknctr".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<span class="id" title="lemma">big_sepS_delete</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">k'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_fin_to_set</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitR</span> "Hks".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iIntros</span> (<span class="id" title="var">Hle'</span>). <span class="id" title="var">iExFalso</span>. <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">k'</span> <span class="id" title="lemma">fin_to_nat_to_fin</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hle'</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepS_mono</span> <span class="id" title="notation">with</span> "Hks"<span class="id" title="notation">)</span>. <span class="id" title="var">iIntros</span> (??) "H %Hle'".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "H". <span class="id" title="var">iPureIntro</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">k'</span>, <span class="id" title="var">_</span>, <span class="id" title="notation">∅</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span> "Hsc #". <span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.split_rng.html#hash_rng_specialized"><span class="id" title="definition">hash_rng_specialized</span></a>. <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">k'</span> <span class="id" title="lemma">fin_to_nat_to_fin</span> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iPureIntro</span>. <span class="id" title="var">set_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "Hk". <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">k'</span> <span class="id" title="lemma">fin_to_nat_to_fin</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_run_rng_gen_out_of_range" class="idref" href="#wp_run_rng_gen_out_of_range"><span class="id" title="lemma">wp_run_rng_gen_out_of_range</span></a> <a id="k:57" class="idref" href="#k:57"><span class="id" title="binder">k</span></a> <a id="f:58" class="idref" href="#f:58"><span class="id" title="binder">f</span></a> <a id="E:59" class="idref" href="#E:59"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#MAX_RNGS"><span class="id" title="definition">MAX_RNGS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.examples.split_rng.html#k:57"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">▷</span> <a class="idref" href="clutch.examples.split_rng.html#hash_rng_gen"><span class="id" title="definition">hash_rng_gen</span></a> <a class="idref" href="clutch.examples.split_rng.html#k:57"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.split_rng.html#f:58"><span class="id" title="variable">f</span></a> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#f:58"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.examples.split_rng.html#E:59"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.prob_lang.notation.html#NONEV"><span class="id" title="abbreviation">NONEV</span></a><span class="id" title="notation">;</span> <a class="idref" href="clutch.examples.split_rng.html#hash_rng_gen"><span class="id" title="definition">hash_rng_gen</span></a> <a class="idref" href="clutch.examples.split_rng.html#k:57"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.split_rng.html#f:58"><span class="id" title="variable">f</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hlt</span> <span class="id" title="var">Φ</span>) "Hgen HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hgen" <span class="id" title="keyword">as</span> (<span class="id" title="var">h</span> <span class="id" title="var">kcntr</span> <span class="id" title="var">γ</span>) "(&gt;-&gt;&amp;#His&amp;Hknctr&amp;Hks)".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iEval</span> (<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.split_rng.html#hash_rng_gen_specialized"><span class="id" title="definition">hash_rng_gen_specialized</span></a>). <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_load</span>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="var">iFrame</span> "#∗".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_run_rng_gen_out_of_range" class="idref" href="#spec_run_rng_gen_out_of_range"><span class="id" title="lemma">spec_run_rng_gen_out_of_range</span></a> <a id="k:60" class="idref" href="#k:60"><span class="id" title="binder">k</span></a> <a id="f:61" class="idref" href="#f:61"><span class="id" title="binder">f</span></a> <a id="K:62" class="idref" href="#K:62"><span class="id" title="binder">K</span></a> <a id="E:63" class="idref" href="#E:63"><span class="id" title="binder">E</span></a>  :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.examples.split_rng.html#E:63"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#MAX_RNGS"><span class="id" title="definition">MAX_RNGS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.examples.split_rng.html#k:60"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#shash_rng_gen"><span class="id" title="definition">shash_rng_gen</span></a> <a class="idref" href="clutch.examples.split_rng.html#k:60"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.split_rng.html#f:61"><span class="id" title="variable">f</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.split_rng.html#K:62"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.examples.split_rng.html#f:61"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>) <span class="id" title="notation">={</span><a class="idref" href="clutch.examples.split_rng.html#E:63"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.split_rng.html#K:62"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#NONEV"><span class="id" title="abbreviation">NONEV</span></a>) <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.split_rng.html#shash_rng_gen"><span class="id" title="definition">shash_rng_gen</span></a> <a class="idref" href="clutch.examples.split_rng.html#k:60"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.split_rng.html#f:61"><span class="id" title="variable">f</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">HE</span> <span class="id" title="var">Hlt</span>) "Hgen HK".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hgen" <span class="id" title="keyword">as</span> (<span class="id" title="var">h</span> <span class="id" title="var">kcntr</span> <span class="id" title="var">γ</span>) "(-&gt;&amp;#His&amp;Hknctr&amp;Hks)".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iEval</span> (<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.split_rng.html#hash_rng_gen_specialized"><span class="id" title="definition">hash_rng_gen_specialized</span></a>) <span class="id" title="tactic">in</span> "HK". <span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_load</span>. <span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iFrame</span> "HK".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="var">iFrame</span> "#∗".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a id="fin_keys_inhabited" class="idref" href="#fin_keys_inhabited"><span class="id" title="instance">fin_keys_inhabited</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="class">Inhabited</span> (<span class="id" title="abbreviation">fin</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="clutch.examples.keyed_hash.html#MAX_KEYS"><span class="id" title="definition">MAX_KEYS</span></a> <a class="idref" href="clutch.examples.split_rng.html#rng.MAX_RNGS_POW"><span class="id" title="variable">MAX_RNGS_POW</span></a>))).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">econstructor</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Notice&nbsp;this&nbsp;is&nbsp;almost&nbsp;identical&nbsp;to&nbsp;the&nbsp;version&nbsp;in&nbsp;rng.v,&nbsp;except&nbsp;we&nbsp;need&nbsp;the&nbsp;token<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;open&nbsp;the&nbsp;invariant&nbsp;for&nbsp;the&nbsp;keyed&nbsp;hash&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_hash_rng_flip" class="idref" href="#wp_hash_rng_flip"><span class="id" title="lemma">wp_hash_rng_flip</span></a> <a id="n:64" class="idref" href="#n:64"><span class="id" title="binder">n</span></a> <a id="g:65" class="idref" href="#g:65"><span class="id" title="binder">g</span></a> <a id="K:66" class="idref" href="#K:66"><span class="id" title="binder">K</span></a> <a id="E:67" class="idref" href="#E:67"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.examples.split_rng.html#E:67"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.examples.split_rng.html#khashN"><span class="id" title="definition">khashN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.examples.split_rng.html#E:67"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#n:64"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8.html#3ccab6e0e5cec5d8305913b11c2aa678"><span class="id" title="notation">≤</span></a> <a class="idref" href="clutch.examples.split_rng.html#MAX_SAMPLES"><span class="id" title="definition">MAX_SAMPLES</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">▷</span> <a class="idref" href="clutch.examples.split_rng.html#hash_rng"><span class="id" title="definition">hash_rng</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:64"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.examples.split_rng.html#g:65"><span class="id" title="variable">g</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.split_rng.html#K:66"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a>%<span class="id" title="var">E</span> <span class="id" title="notation">∗</span> <span class="id" title="definition">na_own</span> <a class="idref" href="clutch.rel_logic.model.html#clutchRGS_nais"><span class="id" title="method">clutchRGS_nais</span></a> (<span class="id" title="notation">↑</span><a class="idref" href="clutch.examples.split_rng.html#khashN"><span class="id" title="definition">khashN</span></a>) <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#g:65"><span class="id" title="variable">g</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.examples.split_rng.html#E:67"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">(</span><a id="b:68" class="idref" href="#b:68"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><span class="id" title="notation">),</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#b:68"><span class="id" title="variable">b</span></a><span class="id" title="notation">;</span> <a class="idref" href="clutch.examples.split_rng.html#hash_rng"><span class="id" title="definition">hash_rng</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:64"><span class="id" title="variable">n</span></a>) <a class="idref" href="clutch.examples.split_rng.html#g:65"><span class="id" title="variable">g</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.split_rng.html#K:66"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#b:68"><span class="id" title="variable">b</span></a> <span class="id" title="notation">∗</span> <span class="id" title="definition">na_own</span> <a class="idref" href="clutch.rel_logic.model.html#clutchRGS_nais"><span class="id" title="method">clutchRGS_nais</span></a> (<span class="id" title="notation">↑</span><a class="idref" href="clutch.examples.split_rng.html#khashN"><span class="id" title="definition">khashN</span></a>) <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">HN1</span> <span class="id" title="var">HN2</span> <span class="id" title="var">Hle</span> <span class="id" title="var">Φ</span>) "(Hhash&amp;HK&amp;Htok) HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.split_rng.html#hash_rng"><span class="id" title="definition">hash_rng</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hhash" <span class="id" title="keyword">as</span> (<span class="id" title="var">h</span> <span class="id" title="var">k</span> <span class="id" title="var">c</span> <span class="id" title="var">m</span> <span class="id" title="var">γ</span>) "(&gt;-&gt;&amp;&gt;%Hdom&amp;Hhash&amp;#Hkeyed_hash&amp;Hc)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.split_rng.html#hash_rng_specialized"><span class="id" title="definition">hash_rng_specialized</span></a>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_load</span>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.split_rng.html#is_keyed_hash"><span class="id" title="definition">is_keyed_hash</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><span class="id" title="lemma">na_inv_acc</span> <span class="id" title="notation">with</span> "[$] [$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "(&gt;H&amp;Htok&amp;Hclo)"; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own_couplable"><span class="id" title="lemma">khashfun_own_couplable</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span> <span class="id" title="notation">with</span> "[$] [$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hcoup"; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_dom</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.hash.html#impl_couplable_elim"><span class="id" title="lemma">hash.impl_couplable_elim</span></a> <span class="id" title="notation">with</span> "[-]"<span class="id" title="notation">)</span>; [<span class="id" title="var">done</span> | <span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span> "Hcoup HK". <span class="id" title="var">iIntros</span> (<span class="id" title="var">b</span>) "&gt;(Hauth&amp;Hhash) HK".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.keyed_hash.html#wp_khashfun_prev"><span class="id" title="lemma">wp_khashfun_prev</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert</span> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "(Hauth&amp;Hhash)". <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_store</span>. <span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"Hclo" <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Htok". <span class="id" title="var">iModIntro</span>. <span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_insert_L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_unfold</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Hle'</span> [?|?]; <span class="id" title="tactic">first</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hdom</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">eassumption</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>))%<span class="id" title="var">Z</span> <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Existing Instance</span> <span class="id" title="var">timeless_skeyed_hash_auth</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_hash_rng_flip_couplable" class="idref" href="#spec_hash_rng_flip_couplable"><span class="id" title="lemma">spec_hash_rng_flip_couplable</span></a> <a id="n:69" class="idref" href="#n:69"><span class="id" title="binder">n</span></a> <a id="g:70" class="idref" href="#g:70"><span class="id" title="binder">g</span></a> <a id="K:71" class="idref" href="#K:71"><span class="id" title="binder">K</span></a> <a id="E:72" class="idref" href="#E:72"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.examples.split_rng.html#E:72"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.examples.split_rng.html#khashN"><span class="id" title="definition">khashN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.examples.split_rng.html#E:72"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#n:69"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8.html#3ccab6e0e5cec5d8305913b11c2aa678"><span class="id" title="notation">≤</span></a> <a class="idref" href="clutch.examples.split_rng.html#MAX_SAMPLES"><span class="id" title="definition">MAX_SAMPLES</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#shash_rng"><span class="id" title="definition">shash_rng</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:69"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.examples.split_rng.html#g:70"><span class="id" title="variable">g</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">na_own</span> <a class="idref" href="clutch.rel_logic.model.html#clutchRGS_nais"><span class="id" title="method">clutchRGS_nais</span></a> (<span class="id" title="notation">↑</span><a class="idref" href="clutch.examples.split_rng.html#khashN"><span class="id" title="definition">khashN</span></a>) <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.split_rng.html#K:71"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.examples.split_rng.html#g:70"><span class="id" title="variable">g</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>) <span class="id" title="notation">={</span><a class="idref" href="clutch.examples.split_rng.html#E:72"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.hash.html#spec_couplable"><span class="id" title="definition">spec_couplable</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="b:73" class="idref" href="#b:73"><span class="id" title="binder">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="notation">|={</span><a class="idref" href="clutch.examples.split_rng.html#E:72"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=&gt;</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.split_rng.html#K:71"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#b:73"><span class="id" title="variable">b</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.split_rng.html#shash_rng"><span class="id" title="definition">shash_rng</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:69"><span class="id" title="variable">n</span></a>) <a class="idref" href="clutch.examples.split_rng.html#g:70"><span class="id" title="variable">g</span></a> <span class="id" title="notation">∗</span> <span class="id" title="definition">na_own</span> <a class="idref" href="clutch.rel_logic.model.html#clutchRGS_nais"><span class="id" title="method">clutchRGS_nais</span></a> (<span class="id" title="notation">↑</span><a class="idref" href="clutch.examples.split_rng.html#khashN"><span class="id" title="definition">khashN</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">HN1</span> <span class="id" title="var">HN2</span> <span class="id" title="var">Hle</span>) "Hhash Htok HK".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hhash" <span class="id" title="keyword">as</span> (<span class="id" title="var">h</span> <span class="id" title="var">k</span> <span class="id" title="var">c</span> <span class="id" title="var">m</span> <span class="id" title="var">γ</span>) "(-&gt;&amp;%Hdom&amp;Hhash&amp;#Hkeyed_hash&amp;Hc)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.split_rng.html#hash_rng_specialized"><span class="id" title="definition">hash_rng_specialized</span></a>. <span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_load</span>. <span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.split_rng.html#is_skeyed_hash"><span class="id" title="definition">is_skeyed_hash</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><span class="id" title="lemma">na_inv_acc</span> <span class="id" title="notation">with</span> "[$] [$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "(&gt;H&amp;Htok&amp;Hclo)"; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.keyed_hash.html#khashfun_own_spec_couplable"><span class="id" title="lemma">khashfun_own_spec_couplable</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span> <span class="id" title="notation">with</span> "[$] [$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hcoup"; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_dom</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.rng.html#spec_couplable_wand"><span class="id" title="lemma">spec_couplable_wand</span></a> <span class="id" title="notation">with</span> "Hcoup"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">b</span>) "&gt;(Hauth&amp;Hhash)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_bind</span> (<span class="id" title="var">h</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><span class="id" title="var">k</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.keyed_hash.html#spec_khashfun_prev"><span class="id" title="lemma">spec_khashfun_prev</span></a> <span class="id" title="notation">with</span> "[$] [$] [$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "(HK&amp;Hauth&amp;Hhash)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert</span> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_store</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"Hclo" <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Htok". <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_insert_L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_unfold</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Hle'</span> [?|?]; <span class="id" title="tactic">first</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hdom</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">eassumption</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>))%<span class="id" title="var">Z</span> <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_hash_rng_flip_out_of_range" class="idref" href="#wp_hash_rng_flip_out_of_range"><span class="id" title="lemma">wp_hash_rng_flip_out_of_range</span></a> <a id="n:74" class="idref" href="#n:74"><span class="id" title="binder">n</span></a> <a id="g:75" class="idref" href="#g:75"><span class="id" title="binder">g</span></a> <a id="E:76" class="idref" href="#E:76"><span class="id" title="binder">E</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#MAX_SAMPLES"><span class="id" title="definition">MAX_SAMPLES</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:74"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">▷</span> <a class="idref" href="clutch.examples.split_rng.html#hash_rng"><span class="id" title="definition">hash_rng</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:74"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.examples.split_rng.html#g:75"><span class="id" title="variable">g</span></a> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#g:75"><span class="id" title="variable">g</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.examples.split_rng.html#E:76"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><span class="id" title="notation">;</span> <a class="idref" href="clutch.examples.split_rng.html#hash_rng"><span class="id" title="definition">hash_rng</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:74"><span class="id" title="variable">n</span></a>) <a class="idref" href="clutch.examples.split_rng.html#g:75"><span class="id" title="variable">g</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hlt</span> <span class="id" title="var">Φ</span>) "Hhash HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hhash" <span class="id" title="keyword">as</span> (<span class="id" title="var">h</span> <span class="id" title="var">k</span> <span class="id" title="var">c</span> <span class="id" title="var">m</span> <span class="id" title="var">γ</span>) "(&gt;-&gt;&amp;&gt;%Hdom&amp;Hhash&amp;#Hkeyed_hash&amp;Hc)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.split_rng.html#hash_rng_specialized"><span class="id" title="definition">hash_rng_specialized</span></a>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_load</span>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="var">wp_store</span>. <span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>))%<span class="id" title="var">Z</span> <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span> "#∗". <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hdom</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_hash_rng_flip_out_of_range" class="idref" href="#spec_hash_rng_flip_out_of_range"><span class="id" title="lemma">spec_hash_rng_flip_out_of_range</span></a> <a id="n:77" class="idref" href="#n:77"><span class="id" title="binder">n</span></a> <a id="g:78" class="idref" href="#g:78"><span class="id" title="binder">g</span></a> <a id="K:79" class="idref" href="#K:79"><span class="id" title="binder">K</span></a> <a id="E:80" class="idref" href="#E:80"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.examples.split_rng.html#E:80"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#MAX_SAMPLES"><span class="id" title="definition">MAX_SAMPLES</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:77"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#shash_rng"><span class="id" title="definition">shash_rng</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:77"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.examples.split_rng.html#g:78"><span class="id" title="variable">g</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.split_rng.html#K:79"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.examples.split_rng.html#g:78"><span class="id" title="variable">g</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>) <span class="id" title="notation">={</span><a class="idref" href="clutch.examples.split_rng.html#E:80"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.split_rng.html#K:79"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.split_rng.html#shash_rng"><span class="id" title="definition">shash_rng</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:77"><span class="id" title="variable">n</span></a>) <a class="idref" href="clutch.examples.split_rng.html#g:78"><span class="id" title="variable">g</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">HE</span> <span class="id" title="var">Hlt</span>) "Hhash HK".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hhash" <span class="id" title="keyword">as</span> (<span class="id" title="var">h</span> <span class="id" title="var">k</span> <span class="id" title="var">c</span> <span class="id" title="var">m</span> <span class="id" title="var">γ</span>) "(-&gt;&amp;%Hdom&amp;Hhash&amp;#Hkeyed_hash&amp;Hc)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.split_rng.html#hash_rng_specialized"><span class="id" title="definition">hash_rng_specialized</span></a>. <span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_load</span>. <span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>. <span class="id" title="var">tp_store</span>. <span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iFrame</span> "HK".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>))%<span class="id" title="var">Z</span> <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span> "#∗". <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hdom</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;"ideal"&nbsp;version&nbsp;that&nbsp;calls&nbsp;a&nbsp;tape-less&nbsp;flip&nbsp;directly&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="init_bounded_rng_gen" class="idref" href="#init_bounded_rng_gen"><span class="id" title="definition">init_bounded_rng_gen</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">:</span></a> "_"<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "rng_cntr" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">ref</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>0 <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">:</span></a> "_"<a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "k" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#569b74bc432a2b233b93ae1b45418e26"><span class="id" title="notation">!</span></a>"rng_cntr" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a><a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#MAX_RNGS"><span class="id" title="definition">MAX_RNGS</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> "k" <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#NONE"><span class="id" title="abbreviation">NONE</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"rng_cntr" <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&lt;-'_x"><span class="id" title="notation">&lt;-</span></a> "k" <a class="idref" href="clutch.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1<a class="idref" href="clutch.prob_lang.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "f" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> (<a class="idref" href="clutch.examples.rng.html#init_bounded_rng"><span class="id" title="definition">init_bounded_rng</span></a> <a class="idref" href="clutch.examples.split_rng.html#MAX_SAMPLES"><span class="id" title="definition">MAX_SAMPLES</span></a>) <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#SOME"><span class="id" title="abbreviation">SOME</span></a> "f".<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="bounded_rng_gen_specialized" class="idref" href="#bounded_rng_gen_specialized"><span class="id" title="definition">bounded_rng_gen_specialized</span></a> (<a id="c:81" class="idref" href="#c:81"><span class="id" title="binder">c</span></a> : <a class="idref" href="clutch.prob_lang.locations.html#loc"><span class="id" title="record">loc</span></a>) : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">:</span></a> "_"<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "k" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#569b74bc432a2b233b93ae1b45418e26"><span class="id" title="notation">!</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#c:81"><span class="id" title="variable">c</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a><a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#MAX_RNGS"><span class="id" title="definition">MAX_RNGS</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> "k" <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#NONE"><span class="id" title="abbreviation">NONE</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#c:81"><span class="id" title="variable">c</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&lt;-'_x"><span class="id" title="notation">&lt;-</span></a> "k" <a class="idref" href="clutch.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1<a class="idref" href="clutch.prob_lang.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "f" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> (<a class="idref" href="clutch.examples.rng.html#init_bounded_rng"><span class="id" title="definition">init_bounded_rng</span></a> <a class="idref" href="clutch.examples.split_rng.html#MAX_SAMPLES"><span class="id" title="definition">MAX_SAMPLES</span></a>) <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#SOME"><span class="id" title="abbreviation">SOME</span></a> "f".<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="bounded_rng_gen" class="idref" href="#bounded_rng_gen"><span class="id" title="definition">bounded_rng_gen</span></a> (<a id="n:82" class="idref" href="#n:82"><span class="id" title="binder">n</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="g:83" class="idref" href="#g:83"><span class="id" title="binder">g</span></a>: <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="clutch.examples.split_rng.html#3b363b930699826ecdaf7aa4666b9402"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="c:84" class="idref" href="#c:84"><span class="id" title="binder">c</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">⌜</span> <a class="idref" href="clutch.examples.split_rng.html#g:83"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.split_rng.html#bounded_rng_gen_specialized"><span class="id" title="definition">bounded_rng_gen_specialized</span></a> <a class="idref" href="clutch.examples.split_rng.html#c:84"><span class="id" title="variable">c</span></a> <span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.split_rng.html#c:84"><span class="id" title="variable">c</span></a> <a class="idref" href="clutch.rel_logic.primitive_laws.html#db9bde1508f348dd1f9d24e9d4ead804"><span class="id" title="notation">↦</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#n:82"><span class="id" title="variable">n</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="sbounded_rng_gen" class="idref" href="#sbounded_rng_gen"><span class="id" title="definition">sbounded_rng_gen</span></a> (<a id="n:85" class="idref" href="#n:85"><span class="id" title="binder">n</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="g:86" class="idref" href="#g:86"><span class="id" title="binder">g</span></a>: <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="clutch.examples.split_rng.html#3b363b930699826ecdaf7aa4666b9402"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="c:87" class="idref" href="#c:87"><span class="id" title="binder">c</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">⌜</span> <a class="idref" href="clutch.examples.split_rng.html#g:86"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.split_rng.html#bounded_rng_gen_specialized"><span class="id" title="definition">bounded_rng_gen_specialized</span></a> <a class="idref" href="clutch.examples.split_rng.html#c:87"><span class="id" title="variable">c</span></a> <span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.split_rng.html#c:87"><span class="id" title="variable">c</span></a> <a class="idref" href="clutch.rel_logic.spec_ra.html#0326014f985dcbdf069e6962e826748b"><span class="id" title="notation">↦ₛ</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#n:85"><span class="id" title="variable">n</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_init_bounded_rng_gen" class="idref" href="#wp_init_bounded_rng_gen"><span class="id" title="lemma">wp_init_bounded_rng_gen</span></a> <a id="E:88" class="idref" href="#E:88"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">True</span> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#init_bounded_rng_gen"><span class="id" title="definition">init_bounded_rng_gen</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.examples.split_rng.html#E:88"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a id="g:89" class="idref" href="#g:89"><span class="id" title="binder">g</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.examples.split_rng.html#g:89"><span class="id" title="variable">g</span></a><span class="id" title="notation">;</span> <a class="idref" href="clutch.examples.split_rng.html#bounded_rng_gen"><span class="id" title="definition">bounded_rng_gen</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> <a class="idref" href="clutch.examples.split_rng.html#g:89"><span class="id" title="variable">g</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "_ HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.split_rng.html#init_bounded_rng_gen"><span class="id" title="definition">init_bounded_rng_gen</span></a>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_alloc</span> <span class="id" title="var">c</span> <span class="id" title="keyword">as</span> "Hc".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_init_bounded_rng_gen" class="idref" href="#spec_init_bounded_rng_gen"><span class="id" title="lemma">spec_init_bounded_rng_gen</span></a> <a id="E:90" class="idref" href="#E:90"><span class="id" title="binder">E</span></a> <a id="K:91" class="idref" href="#K:91"><span class="id" title="binder">K</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.examples.split_rng.html#E:90"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.split_rng.html#K:91"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.examples.split_rng.html#init_bounded_rng_gen"><span class="id" title="definition">init_bounded_rng_gen</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>) <span class="id" title="notation">={</span><a class="idref" href="clutch.examples.split_rng.html#E:90"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <span class="id" title="notation">∃</span> <a id="f:92" class="idref" href="#f:92"><span class="id" title="binder">f</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.split_rng.html#K:91"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.examples.split_rng.html#f:92"><span class="id" title="variable">f</span></a>) <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.split_rng.html#sbounded_rng_gen"><span class="id" title="definition">sbounded_rng_gen</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> <a class="idref" href="clutch.examples.split_rng.html#f:92"><span class="id" title="variable">f</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "Hspec".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.split_rng.html#init_bounded_rng_gen"><span class="id" title="definition">init_bounded_rng_gen</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_alloc</span> <span class="id" title="keyword">as</span> <span class="id" title="var">c</span> "Hc".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">c</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_run_bounded_rng_gen" class="idref" href="#wp_run_bounded_rng_gen"><span class="id" title="lemma">wp_run_bounded_rng_gen</span></a> <a id="k:93" class="idref" href="#k:93"><span class="id" title="binder">k</span></a> <a id="f:94" class="idref" href="#f:94"><span class="id" title="binder">f</span></a> <a id="E:95" class="idref" href="#E:95"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#k:93"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.split_rng.html#MAX_RNGS"><span class="id" title="definition">MAX_RNGS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a class="idref" href="clutch.examples.split_rng.html#bounded_rng_gen"><span class="id" title="definition">bounded_rng_gen</span></a> <a class="idref" href="clutch.examples.split_rng.html#k:93"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.split_rng.html#f:94"><span class="id" title="variable">f</span></a> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#f:94"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.examples.split_rng.html#E:95"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">(</span><a id="g:96" class="idref" href="#g:96"><span class="id" title="binder">g</span></a>: <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a><span class="id" title="notation">),</span> <span class="id" title="notation">RET</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.prob_lang.notation.html#SOMEV"><span class="id" title="abbreviation">SOMEV</span></a> <a class="idref" href="clutch.examples.split_rng.html#g:96"><span class="id" title="variable">g</span></a><span class="id" title="notation">);</span> <a class="idref" href="clutch.examples.split_rng.html#bounded_rng_gen"><span class="id" title="definition">bounded_rng_gen</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.split_rng.html#k:93"><span class="id" title="variable">k</span></a>) <a class="idref" href="clutch.examples.split_rng.html#f:94"><span class="id" title="variable">f</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.rng.html#bounded_rng"><span class="id" title="definition">bounded_rng</span></a> <a class="idref" href="clutch.examples.split_rng.html#MAX_SAMPLES"><span class="id" title="definition">MAX_SAMPLES</span></a> 0 <a class="idref" href="clutch.examples.split_rng.html#g:96"><span class="id" title="variable">g</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hle</span> <span class="id" title="var">Φ</span>) "Hhash HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hhash" <span class="id" title="keyword">as</span> (<span class="id" title="var">c</span> -&gt;) "Hc".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.split_rng.html#bounded_rng_gen_specialized"><span class="id" title="definition">bounded_rng_gen_specialized</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="var">wp_load</span>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>; [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="var">wp_store</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.rng.html#wp_init_bounded_rng"><span class="id" title="lemma">wp_init_bounded_rng</span></a> <span class="id" title="notation">with</span> "[//]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "H". <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">k</span>))%<span class="id" title="var">Z</span> <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_run_bounded_rng_gen" class="idref" href="#spec_run_bounded_rng_gen"><span class="id" title="lemma">spec_run_bounded_rng_gen</span></a> <a id="k:97" class="idref" href="#k:97"><span class="id" title="binder">k</span></a> <a id="f:98" class="idref" href="#f:98"><span class="id" title="binder">f</span></a> <a id="E:99" class="idref" href="#E:99"><span class="id" title="binder">E</span></a> <a id="K:100" class="idref" href="#K:100"><span class="id" title="binder">K</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.examples.split_rng.html#E:99"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#k:97"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.split_rng.html#MAX_RNGS"><span class="id" title="definition">MAX_RNGS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#sbounded_rng_gen"><span class="id" title="definition">sbounded_rng_gen</span></a> <a class="idref" href="clutch.examples.split_rng.html#k:97"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.split_rng.html#f:98"><span class="id" title="variable">f</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.split_rng.html#K:100"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.examples.split_rng.html#f:98"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>) <span class="id" title="notation">={</span><a class="idref" href="clutch.examples.split_rng.html#E:99"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="g:101" class="idref" href="#g:101"><span class="id" title="binder">g</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.split_rng.html#K:100"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#SOMEV"><span class="id" title="abbreviation">SOMEV</span></a> <a class="idref" href="clutch.examples.split_rng.html#g:101"><span class="id" title="variable">g</span></a>)) <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#sbounded_rng_gen"><span class="id" title="definition">sbounded_rng_gen</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.split_rng.html#k:97"><span class="id" title="variable">k</span></a>) <a class="idref" href="clutch.examples.split_rng.html#f:98"><span class="id" title="variable">f</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.rng.html#sbounded_rng"><span class="id" title="definition">sbounded_rng</span></a> <a class="idref" href="clutch.examples.split_rng.html#MAX_SAMPLES"><span class="id" title="definition">MAX_SAMPLES</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> <a class="idref" href="clutch.examples.split_rng.html#g:101"><span class="id" title="variable">g</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (? <span class="id" title="var">Hle</span>) "Hgen Hspec".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hgen" <span class="id" title="keyword">as</span> (<span class="id" title="var">c</span> -&gt;) "Hc".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.split_rng.html#bounded_rng_gen_specialized"><span class="id" title="definition">bounded_rng_gen_specialized</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_load</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>; [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_store</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_bind</span> (<a class="idref" href="clutch.examples.rng.html#init_bounded_rng"><span class="id" title="definition">init_bounded_rng</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.rng.html#spec_init_bounded_rng"><span class="id" title="lemma">spec_init_bounded_rng</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">g</span>) "(HK&amp;Hrng)"; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">k</span>))%<span class="id" title="var">Z</span> <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_run_bounded_rng_gen_out_of_range" class="idref" href="#wp_run_bounded_rng_gen_out_of_range"><span class="id" title="lemma">wp_run_bounded_rng_gen_out_of_range</span></a> <a id="k:102" class="idref" href="#k:102"><span class="id" title="binder">k</span></a> <a id="f:103" class="idref" href="#f:103"><span class="id" title="binder">f</span></a> <a id="E:104" class="idref" href="#E:104"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#MAX_RNGS"><span class="id" title="definition">MAX_RNGS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.examples.split_rng.html#k:102"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a class="idref" href="clutch.examples.split_rng.html#bounded_rng_gen"><span class="id" title="definition">bounded_rng_gen</span></a> <a class="idref" href="clutch.examples.split_rng.html#k:102"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.split_rng.html#f:103"><span class="id" title="variable">f</span></a> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#f:103"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.examples.split_rng.html#E:104"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.prob_lang.notation.html#NONEV"><span class="id" title="abbreviation">NONEV</span></a><span class="id" title="notation">;</span> <a class="idref" href="clutch.examples.split_rng.html#bounded_rng_gen"><span class="id" title="definition">bounded_rng_gen</span></a> <a class="idref" href="clutch.examples.split_rng.html#k:102"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.split_rng.html#f:103"><span class="id" title="variable">f</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hle</span> <span class="id" title="var">Φ</span>) "Hhash HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hhash" <span class="id" title="keyword">as</span> (<span class="id" title="var">c</span> -&gt;) "Hc".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.split_rng.html#bounded_rng_gen_specialized"><span class="id" title="definition">bounded_rng_gen_specialized</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="var">wp_load</span>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>; [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_run_bounded_rng_gen_out_of_range" class="idref" href="#spec_run_bounded_rng_gen_out_of_range"><span class="id" title="lemma">spec_run_bounded_rng_gen_out_of_range</span></a> <a id="k:105" class="idref" href="#k:105"><span class="id" title="binder">k</span></a> <a id="f:106" class="idref" href="#f:106"><span class="id" title="binder">f</span></a> <a id="E:107" class="idref" href="#E:107"><span class="id" title="binder">E</span></a> <a id="K:108" class="idref" href="#K:108"><span class="id" title="binder">K</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.examples.split_rng.html#E:107"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#MAX_RNGS"><span class="id" title="definition">MAX_RNGS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.examples.split_rng.html#k:105"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#sbounded_rng_gen"><span class="id" title="definition">sbounded_rng_gen</span></a> <a class="idref" href="clutch.examples.split_rng.html#k:105"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.split_rng.html#f:106"><span class="id" title="variable">f</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.split_rng.html#K:108"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.examples.split_rng.html#f:106"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>) <span class="id" title="notation">={</span><a class="idref" href="clutch.examples.split_rng.html#E:107"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.split_rng.html#K:108"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#NONEV"><span class="id" title="abbreviation">NONEV</span></a>) <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#sbounded_rng_gen"><span class="id" title="definition">sbounded_rng_gen</span></a> <a class="idref" href="clutch.examples.split_rng.html#k:105"><span class="id" title="variable">k</span></a> <a class="idref" href="clutch.examples.split_rng.html#f:106"><span class="id" title="variable">f</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (? <span class="id" title="var">Hle</span>) "Hgen Hspec".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hgen" <span class="id" title="keyword">as</span> (<span class="id" title="var">c</span> -&gt;) "Hc".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.split_rng.html#bounded_rng_gen_specialized"><span class="id" title="definition">bounded_rng_gen_specialized</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_load</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>; [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_hash_rng_flip_refine" class="idref" href="#wp_hash_rng_flip_refine"><span class="id" title="lemma">wp_hash_rng_flip_refine</span></a> <a id="n:109" class="idref" href="#n:109"><span class="id" title="binder">n</span></a> <a id="g:110" class="idref" href="#g:110"><span class="id" title="binder">g</span></a> <a id="sg:111" class="idref" href="#sg:111"><span class="id" title="binder">sg</span></a> <a id="K:112" class="idref" href="#K:112"><span class="id" title="binder">K</span></a> <a id="E:113" class="idref" href="#E:113"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.examples.split_rng.html#khashN"><span class="id" title="definition">khashN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.examples.split_rng.html#E:113"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.examples.split_rng.html#E:113"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">▷</span> <a class="idref" href="clutch.examples.split_rng.html#hash_rng"><span class="id" title="definition">hash_rng</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:109"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.examples.split_rng.html#g:110"><span class="id" title="variable">g</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.rng.html#sbounded_rng"><span class="id" title="definition">sbounded_rng</span></a> <a class="idref" href="clutch.examples.split_rng.html#MAX_SAMPLES"><span class="id" title="definition">MAX_SAMPLES</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:109"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.examples.split_rng.html#sg:111"><span class="id" title="variable">sg</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.split_rng.html#K:112"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.examples.split_rng.html#sg:111"><span class="id" title="variable">sg</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>) <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">na_own</span> <a class="idref" href="clutch.rel_logic.model.html#clutchRGS_nais"><span class="id" title="method">clutchRGS_nais</span></a> (<span class="id" title="notation">↑</span><a class="idref" href="clutch.examples.split_rng.html#khashN"><span class="id" title="definition">khashN</span></a>) <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#g:110"><span class="id" title="variable">g</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.examples.split_rng.html#E:113"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">(</span><a id="b:114" class="idref" href="#b:114"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><span class="id" title="notation">),</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#b:114"><span class="id" title="variable">b</span></a><span class="id" title="notation">;</span> <a class="idref" href="clutch.examples.split_rng.html#hash_rng"><span class="id" title="definition">hash_rng</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:109"><span class="id" title="variable">n</span></a>) <a class="idref" href="clutch.examples.split_rng.html#g:110"><span class="id" title="variable">g</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.rng.html#sbounded_rng"><span class="id" title="definition">sbounded_rng</span></a> <a class="idref" href="clutch.examples.split_rng.html#MAX_SAMPLES"><span class="id" title="definition">MAX_SAMPLES</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:109"><span class="id" title="variable">n</span></a>) <a class="idref" href="clutch.examples.split_rng.html#sg:111"><span class="id" title="variable">sg</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.split_rng.html#K:112"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#b:114"><span class="id" title="variable">b</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">na_own</span> <a class="idref" href="clutch.rel_logic.model.html#clutchRGS_nais"><span class="id" title="method">clutchRGS_nais</span></a> (<span class="id" title="notation">↑</span><a class="idref" href="clutch.examples.split_rng.html#khashN"><span class="id" title="definition">khashN</span></a>) <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">HN1</span> <span class="id" title="var">HN2</span> <span class="id" title="var">Φ</span>) "(Hhash&amp;Hbrng&amp;HK&amp;Htok) HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hbrng" <span class="id" title="keyword">as</span> (<span class="id" title="var">sc</span> -&gt;) "Hsc".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.rng.html#bounded_rng_specialized"><span class="id" title="definition">bounded_rng_specialized</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_load</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_bind</span> <a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a>%<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="clutch.program_logic.weakestpre.html#wp_fupd"><span class="id" title="lemma">wp_fupd</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.split_rng.html#wp_hash_rng_flip"><span class="id" title="lemma">wp_hash_rng_flip</span></a> <span class="id" title="notation">with</span> "[$HK $Hhash $Htok]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">b</span>) "(Hhash&amp;HK&amp;Htok)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_store</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>))%<span class="id" title="var">Z</span> <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_store</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.split_rng.html#wp_hash_rng_flip_out_of_range"><span class="id" title="lemma">wp_hash_rng_flip_out_of_range</span></a> <span class="id" title="notation">with</span> "[$Hhash]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hhash".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>))%<span class="id" title="var">Z</span> <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_bounded_rng_flip_refine" class="idref" href="#wp_bounded_rng_flip_refine"><span class="id" title="lemma">wp_bounded_rng_flip_refine</span></a> <a id="n:115" class="idref" href="#n:115"><span class="id" title="binder">n</span></a> <a id="g:116" class="idref" href="#g:116"><span class="id" title="binder">g</span></a> <a id="sg:117" class="idref" href="#sg:117"><span class="id" title="binder">sg</span></a> <a id="K:118" class="idref" href="#K:118"><span class="id" title="binder">K</span></a> <a id="E:119" class="idref" href="#E:119"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.examples.split_rng.html#E:119"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.examples.split_rng.html#khashN"><span class="id" title="definition">khashN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.examples.split_rng.html#E:119"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a class="idref" href="clutch.examples.rng.html#bounded_rng"><span class="id" title="definition">bounded_rng</span></a> <a class="idref" href="clutch.examples.split_rng.html#MAX_SAMPLES"><span class="id" title="definition">MAX_SAMPLES</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:115"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.examples.split_rng.html#g:116"><span class="id" title="variable">g</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="clutch.examples.split_rng.html#shash_rng"><span class="id" title="definition">shash_rng</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:115"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.examples.split_rng.html#sg:117"><span class="id" title="variable">sg</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.split_rng.html#K:118"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.examples.split_rng.html#sg:117"><span class="id" title="variable">sg</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>) <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">na_own</span> <a class="idref" href="clutch.rel_logic.model.html#clutchRGS_nais"><span class="id" title="method">clutchRGS_nais</span></a> (<span class="id" title="notation">↑</span><a class="idref" href="clutch.examples.split_rng.html#khashN"><span class="id" title="definition">khashN</span></a>)<span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.split_rng.html#g:116"><span class="id" title="variable">g</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.examples.split_rng.html#E:119"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">(</span><a id="b:120" class="idref" href="#b:120"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><span class="id" title="notation">),</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#b:120"><span class="id" title="variable">b</span></a><span class="id" title="notation">;</span> <a class="idref" href="clutch.examples.rng.html#bounded_rng"><span class="id" title="definition">bounded_rng</span></a> <a class="idref" href="clutch.examples.split_rng.html#MAX_SAMPLES"><span class="id" title="definition">MAX_SAMPLES</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:115"><span class="id" title="variable">n</span></a>) <a class="idref" href="clutch.examples.split_rng.html#g:116"><span class="id" title="variable">g</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.split_rng.html#shash_rng"><span class="id" title="definition">shash_rng</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:115"><span class="id" title="variable">n</span></a>) <a class="idref" href="clutch.examples.split_rng.html#sg:117"><span class="id" title="variable">sg</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.split_rng.html#K:118"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.split_rng.html#b:120"><span class="id" title="variable">b</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">na_own</span> <a class="idref" href="clutch.rel_logic.model.html#clutchRGS_nais"><span class="id" title="method">clutchRGS_nais</span></a> (<span class="id" title="notation">↑</span><a class="idref" href="clutch.examples.split_rng.html#khashN"><span class="id" title="definition">khashN</span></a>)<span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">HN1</span> <span class="id" title="var">HN2</span> <span class="id" title="var">Φ</span>) "(Hbrng&amp;Hhash&amp;HK&amp;Htok) HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hbrng" <span class="id" title="keyword">as</span> (<span class="id" title="var">sc</span> -&gt;) "Hsc".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.rng.html#bounded_rng_specialized"><span class="id" title="definition">bounded_rng_specialized</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="var">wp_load</span>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<a class="idref" href="clutch.rel_logic.spec_ra.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a>) <span class="id" title="keyword">with</span> "[-]" <span class="id" title="keyword">as</span> "#Hspec_ctx".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iDestruct</span> "HK" <span class="id" title="keyword">as</span> "($&amp;_)". }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.split_rng.html#spec_hash_rng_flip_couplable"><span class="id" title="lemma">spec_hash_rng_flip_couplable</span></a> <span class="id" title="notation">with</span> "Hhash Htok HK"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hspec"; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.hash.html#spec_couplable_elim"><span class="id" title="lemma">spec_couplable_elim</span></a> <span class="id" title="notation">with</span> "[$Hspec $Hspec_ctx Hsc HΦ]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">b</span>) "&gt;(HK&amp;Hhash)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="var">wp_store</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span> "HK Hhash". <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>))%<span class="id" title="var">Z</span> <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.split_rng.html#spec_hash_rng_flip_out_of_range"><span class="id" title="lemma">spec_hash_rng_flip_out_of_range</span></a> <span class="id" title="notation">with</span> "Hhash HK"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "(HK&amp;Hhash)"; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_store</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span> "HK Hhash Htok". <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>))%<span class="id" title="var">Z</span> <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="rngN" class="idref" href="#rngN"><span class="id" title="definition">rngN</span></a> := <span class="id" title="definition">nroot</span><span class="id" title="notation">.@</span>"rng".<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="hash_bounded_refinement" class="idref" href="#hash_bounded_refinement"><span class="id" title="lemma">hash_bounded_refinement</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> <a class="idref" href="clutch.rel_logic.model.html#:::'REL'_x_'&lt;&lt;'_x_':'_x"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.examples.split_rng.html#init_rng_gen"><span class="id" title="definition">init_rng_gen</span></a> <a class="idref" href="clutch.rel_logic.model.html#:::'REL'_x_'&lt;&lt;'_x_':'_x"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.examples.split_rng.html#init_bounded_rng_gen"><span class="id" title="definition">init_bounded_rng_gen</span></a> <a class="idref" href="clutch.rel_logic.model.html#:::'REL'_x_'&lt;&lt;'_x_':'_x"><span class="id" title="notation">:</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.model.html#lrel_unit"><span class="id" title="definition">lrel_unit</span></a> <a class="idref" href="clutch.rel_logic.model.html#198b3df6111d1e335bfbd02615def5fc"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.rel_logic.model.html#198b3df6111d1e335bfbd02615def5fc"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.model.html#lrel_unit"><span class="id" title="definition">lrel_unit</span></a> <a class="idref" href="clutch.rel_logic.model.html#198b3df6111d1e335bfbd02615def5fc"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.rel_logic.model.html#lrel_sum"><span class="id" title="definition">lrel_sum</span></a> <a class="idref" href="clutch.rel_logic.model.html#lrel_unit"><span class="id" title="definition">lrel_unit</span></a> (<a class="idref" href="clutch.rel_logic.model.html#lrel_unit"><span class="id" title="definition">lrel_unit</span></a> <a class="idref" href="clutch.rel_logic.model.html#198b3df6111d1e335bfbd02615def5fc"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.rel_logic.model.html#lrel_bool"><span class="id" title="definition">lrel_bool</span></a>)<a class="idref" href="clutch.rel_logic.model.html#198b3df6111d1e335bfbd02615def5fc"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_arrow_val</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (??) "(-&gt;&amp;-&gt;)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.model.html#refines_eq"><span class="id" title="definition">refines_eq</span></a>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">K</span>) "HK Hown".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="clutch.program_logic.weakestpre.html#wp_fupd"><span class="id" title="lemma">wp_fupd</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.split_rng.html#wp_init_rng_gen"><span class="id" title="lemma">wp_init_rng_gen</span></a> <span class="id" title="notation">with</span> "[//]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">g</span>) "Hhash_gen".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.split_rng.html#spec_init_bounded_rng_gen"><span class="id" title="lemma">spec_init_bounded_rng_gen</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">f</span>) "(HK&amp;Hbounded_gen)"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">P</span> := (<span class="id" title="notation">∃</span> <a id="n:122" class="idref" href="#n:122"><span class="id" title="binder">n</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.examples.split_rng.html#hash_rng_gen"><span class="id" title="definition">hash_rng_gen</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:121"><span class="id" title="variable">n</span></a> <span class="id" title="var">g</span> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.split_rng.html#sbounded_rng_gen"><span class="id" title="definition">sbounded_rng_gen</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:121"><span class="id" title="variable">n</span></a> <span class="id" title="var">f</span>)%<span class="id" title="var">I</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><span class="id" title="lemma">na_inv_alloc</span> <a class="idref" href="clutch.rel_logic.model.html#clutchRGS_nais"><span class="id" title="method">clutchRGS_nais</span></a> <span class="id" title="var">_</span> <a class="idref" href="clutch.examples.split_rng.html#rngN"><span class="id" title="definition">rngN</span></a> <span class="id" title="var">P</span> <span class="id" title="notation">with</span> "[Hhash_gen Hbounded_gen]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "#Hinv".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iNext</span>. <span class="id" title="var">iExists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a>. <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">v1</span> <span class="id" title="var">v2</span>) "!&gt; (-&gt;&amp;-&gt;)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">K</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.rel_logic.model.html#refines_na_inv"><span class="id" title="lemma">refines_na_inv</span></a> <span class="id" title="notation">with</span> "[$Hinv]"<span class="id" title="notation">)</span> ; <span class="id" title="tactic">auto</span> ; <span class="id" title="var">iIntros</span> "[HP Hclose]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.model.html#refines_eq"><span class="id" title="definition">refines_eq</span></a>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">K</span>) "HK Hown".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "HP" <span class="id" title="keyword">as</span> (<span class="id" title="var">m</span>) "(Hg&amp;&gt;Hsf)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="clutch.program_logic.weakestpre.html#wp_fupd"><span class="id" title="lemma">wp_fupd</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">m</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.split_rng.html#MAX_RNGS"><span class="id" title="definition">MAX_RNGS</span></a>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hl</span>|]; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.split_rng.html#wp_run_rng_gen_out_of_range"><span class="id" title="lemma">wp_run_rng_gen_out_of_range</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hg".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.split_rng.html#spec_run_bounded_rng_gen_out_of_range"><span class="id" title="lemma">spec_run_bounded_rng_gen_out_of_range</span></a> <span class="id" title="notation">with</span> "[$] [$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "(HK&amp;Hsf)"; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"Hclose" <span class="id" title="notation">with</span> "[Hg Hsf $Hown]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iNext</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iLeft</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.split_rng.html#wp_run_rng_gen"><span class="id" title="lemma">wp_run_rng_gen</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">hrng</span>) "(Hg&amp;Hrng)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.split_rng.html#spec_run_bounded_rng_gen"><span class="id" title="lemma">spec_run_bounded_rng_gen</span></a> <span class="id" title="notation">with</span> "Hsf HK"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">srng</span>) "(HK&amp;Hsf&amp;Hsrng)"; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"Hclose" <span class="id" title="notation">with</span> "[Hg Hsf Hown]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hown".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iFrame</span>. <span class="id" title="var">iNext</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>. }<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;finally&nbsp;we&nbsp;show&nbsp;a&nbsp;refinement&nbsp;between&nbsp;the&nbsp;generated&nbsp;rngs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">Prng</span> := (<span class="id" title="notation">∃</span> <a id="n:124" class="idref" href="#n:124"><span class="id" title="binder">n</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.examples.split_rng.html#hash_rng"><span class="id" title="definition">hash_rng</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:123"><span class="id" title="variable">n</span></a> <span class="id" title="var">hrng</span> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.rng.html#sbounded_rng"><span class="id" title="definition">sbounded_rng</span></a> <a class="idref" href="clutch.examples.split_rng.html#MAX_SAMPLES"><span class="id" title="definition">MAX_SAMPLES</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:123"><span class="id" title="variable">n</span></a> <span class="id" title="var">srng</span>)%<span class="id" title="var">I</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><span class="id" title="lemma">na_inv_alloc</span> <a class="idref" href="clutch.rel_logic.model.html#clutchRGS_nais"><span class="id" title="method">clutchRGS_nais</span></a> <span class="id" title="var">_</span> <a class="idref" href="clutch.examples.split_rng.html#rngN"><span class="id" title="definition">rngN</span></a> <span class="id" title="var">Prng</span> <span class="id" title="notation">with</span> "[Hrng Hsrng]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "#Hinv_rng".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">Prng</span>. <span class="id" title="var">iNext</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iClear</span> "Hinv".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iRight</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">v1</span> <span class="id" title="var">v2</span>) "!&gt; (-&gt;&amp;-&gt;)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hl</span> <span class="id" title="var">m</span> <span class="id" title="var">K</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.rel_logic.model.html#refines_na_inv"><span class="id" title="lemma">refines_na_inv</span></a> <span class="id" title="notation">with</span> "[$Hinv_rng]"<span class="id" title="notation">)</span> ; <span class="id" title="tactic">auto</span> ; <span class="id" title="var">iIntros</span> "[HP Hclose]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.model.html#refines_eq"><span class="id" title="definition">refines_eq</span></a>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">K</span>) "HK Hown".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "HP" <span class="id" title="keyword">as</span> (<span class="id" title="var">m</span>) "(Hf&amp;&gt;Hsf)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="clutch.program_logic.weakestpre.html#wp_fupd"><span class="id" title="lemma">wp_fupd</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">na_own_acc</span> (<span class="id" title="notation">↑</span><a class="idref" href="clutch.examples.split_rng.html#khashN"><span class="id" title="definition">khashN</span></a>) <span class="id" title="notation">with</span> "Hown"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "(Hown&amp;Hclose')"; <span class="id" title="tactic">first</span> <span class="id" title="var">solve_ndisj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.split_rng.html#wp_hash_rng_flip_refine"><span class="id" title="lemma">wp_hash_rng_flip_refine</span></a> <span class="id" title="notation">with</span> "[$Hf $Hsf $HK $Hown]"<span class="id" title="notation">)</span>; [<span class="id" title="var">done</span> | <span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">b</span>) "(Hhash&amp;Hbounded&amp;HK&amp;Hown)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span>"Hclose'" <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hown".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"Hclose" <span class="id" title="notation">with</span> "[-HK]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iFrame</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="bounded_hash_refinement" class="idref" href="#bounded_hash_refinement"><span class="id" title="lemma">bounded_hash_refinement</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> <a class="idref" href="clutch.rel_logic.model.html#:::'REL'_x_'&lt;&lt;'_x_':'_x"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.examples.split_rng.html#init_bounded_rng_gen"><span class="id" title="definition">init_bounded_rng_gen</span></a> <a class="idref" href="clutch.rel_logic.model.html#:::'REL'_x_'&lt;&lt;'_x_':'_x"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.examples.split_rng.html#init_rng_gen"><span class="id" title="definition">init_rng_gen</span></a> <a class="idref" href="clutch.rel_logic.model.html#:::'REL'_x_'&lt;&lt;'_x_':'_x"><span class="id" title="notation">:</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.model.html#lrel_unit"><span class="id" title="definition">lrel_unit</span></a> <a class="idref" href="clutch.rel_logic.model.html#198b3df6111d1e335bfbd02615def5fc"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.rel_logic.model.html#198b3df6111d1e335bfbd02615def5fc"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.model.html#lrel_unit"><span class="id" title="definition">lrel_unit</span></a> <a class="idref" href="clutch.rel_logic.model.html#198b3df6111d1e335bfbd02615def5fc"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.rel_logic.model.html#lrel_sum"><span class="id" title="definition">lrel_sum</span></a> <a class="idref" href="clutch.rel_logic.model.html#lrel_unit"><span class="id" title="definition">lrel_unit</span></a> (<a class="idref" href="clutch.rel_logic.model.html#lrel_unit"><span class="id" title="definition">lrel_unit</span></a> <a class="idref" href="clutch.rel_logic.model.html#198b3df6111d1e335bfbd02615def5fc"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.rel_logic.model.html#lrel_bool"><span class="id" title="definition">lrel_bool</span></a>)<a class="idref" href="clutch.rel_logic.model.html#198b3df6111d1e335bfbd02615def5fc"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_arrow_val</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (??) "(-&gt;&amp;-&gt;)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.model.html#refines_eq"><span class="id" title="definition">refines_eq</span></a>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">K</span>) "HK Hown".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="clutch.program_logic.weakestpre.html#wp_fupd"><span class="id" title="lemma">wp_fupd</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.split_rng.html#wp_init_bounded_rng_gen"><span class="id" title="lemma">wp_init_bounded_rng_gen</span></a> <span class="id" title="notation">with</span> "[//]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">g</span>) "Hbounded_gen".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.split_rng.html#spec_init_rng_gen"><span class="id" title="lemma">spec_init_rng_gen</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">f</span>) "(HK&amp;Hhash_gen)"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">P</span> := (<span class="id" title="notation">∃</span> <a id="n:126" class="idref" href="#n:126"><span class="id" title="binder">n</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.examples.split_rng.html#shash_rng_gen"><span class="id" title="definition">shash_rng_gen</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:125"><span class="id" title="variable">n</span></a> <span class="id" title="var">f</span> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.split_rng.html#bounded_rng_gen"><span class="id" title="definition">bounded_rng_gen</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:125"><span class="id" title="variable">n</span></a> <span class="id" title="var">g</span>)%<span class="id" title="var">I</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><span class="id" title="lemma">na_inv_alloc</span> <a class="idref" href="clutch.rel_logic.model.html#clutchRGS_nais"><span class="id" title="method">clutchRGS_nais</span></a> <span class="id" title="var">_</span> <a class="idref" href="clutch.examples.split_rng.html#rngN"><span class="id" title="definition">rngN</span></a> <span class="id" title="var">P</span> <span class="id" title="notation">with</span> "[Hhash_gen Hbounded_gen]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "#Hinv".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iNext</span>. <span class="id" title="var">iExists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a>. <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">v1</span> <span class="id" title="var">v2</span>) "!&gt; (-&gt;&amp;-&gt;)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">K</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.rel_logic.model.html#refines_na_inv"><span class="id" title="lemma">refines_na_inv</span></a> <span class="id" title="notation">with</span> "[$Hinv]"<span class="id" title="notation">)</span> ; <span class="id" title="tactic">auto</span> ; <span class="id" title="var">iIntros</span> "[HP Hclose]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.model.html#refines_eq"><span class="id" title="definition">refines_eq</span></a>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">K</span>) "HK Hown".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "HP" <span class="id" title="keyword">as</span> (<span class="id" title="var">m</span>) "(Hsf&amp;&gt;Hg)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="clutch.program_logic.weakestpre.html#wp_fupd"><span class="id" title="lemma">wp_fupd</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">m</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.split_rng.html#MAX_RNGS"><span class="id" title="definition">MAX_RNGS</span></a>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hl</span>|]; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.split_rng.html#wp_run_bounded_rng_gen_out_of_range"><span class="id" title="lemma">wp_run_bounded_rng_gen_out_of_range</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hg".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.split_rng.html#spec_run_rng_gen_out_of_range"><span class="id" title="lemma">spec_run_rng_gen_out_of_range</span></a> <span class="id" title="notation">with</span> "[$] [$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "(HK&amp;Hsf)"; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"Hclose" <span class="id" title="notation">with</span> "[Hg Hsf $Hown]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iNext</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iLeft</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.split_rng.html#wp_run_bounded_rng_gen"><span class="id" title="lemma">wp_run_bounded_rng_gen</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">rng</span>) "(Hg&amp;Hrng)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.split_rng.html#spec_run_rng_gen"><span class="id" title="lemma">spec_run_rng_gen</span></a> <span class="id" title="notation">with</span> "Hsf HK"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">srng</span>) "(HK&amp;Hsf&amp;Hsrng)"; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"Hclose" <span class="id" title="notation">with</span> "[Hg Hsf Hown]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hown".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iFrame</span>. <span class="id" title="var">iNext</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>. }<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;finally&nbsp;we&nbsp;show&nbsp;a&nbsp;refinement&nbsp;between&nbsp;the&nbsp;generated&nbsp;rngs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">Prng</span> := (<span class="id" title="notation">∃</span> <a id="n:128" class="idref" href="#n:128"><span class="id" title="binder">n</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.examples.split_rng.html#shash_rng"><span class="id" title="definition">shash_rng</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:127"><span class="id" title="variable">n</span></a> <span class="id" title="var">srng</span> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.rng.html#bounded_rng"><span class="id" title="definition">bounded_rng</span></a> <a class="idref" href="clutch.examples.split_rng.html#MAX_SAMPLES"><span class="id" title="definition">MAX_SAMPLES</span></a> <a class="idref" href="clutch.examples.split_rng.html#n:127"><span class="id" title="variable">n</span></a> <span class="id" title="var">rng</span>)%<span class="id" title="var">I</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><span class="id" title="lemma">na_inv_alloc</span> <a class="idref" href="clutch.rel_logic.model.html#clutchRGS_nais"><span class="id" title="method">clutchRGS_nais</span></a> <span class="id" title="var">_</span> <a class="idref" href="clutch.examples.split_rng.html#rngN"><span class="id" title="definition">rngN</span></a> <span class="id" title="var">Prng</span> <span class="id" title="notation">with</span> "[Hrng Hsrng]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "#Hinv_rng".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">Prng</span>. <span class="id" title="var">iNext</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iClear</span> "Hinv".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iRight</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">v1</span> <span class="id" title="var">v2</span>) "!&gt; (-&gt;&amp;-&gt;)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hl</span> <span class="id" title="var">m</span> <span class="id" title="var">K</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.rel_logic.model.html#refines_na_inv"><span class="id" title="lemma">refines_na_inv</span></a> <span class="id" title="notation">with</span> "[$Hinv_rng]"<span class="id" title="notation">)</span> ; <span class="id" title="tactic">auto</span> ; <span class="id" title="var">iIntros</span> "[HP Hclose]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.model.html#refines_eq"><span class="id" title="definition">refines_eq</span></a>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">K</span>) "HK Hown".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "HP" <span class="id" title="keyword">as</span> (<span class="id" title="var">m</span>) "(Hf&amp;&gt;Hsf)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="clutch.program_logic.weakestpre.html#wp_fupd"><span class="id" title="lemma">wp_fupd</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">na_own_acc</span> (<span class="id" title="notation">↑</span><a class="idref" href="clutch.examples.split_rng.html#khashN"><span class="id" title="definition">khashN</span></a>) <span class="id" title="notation">with</span> "Hown"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "(Hown&amp;Hclose')"; <span class="id" title="tactic">first</span> <span class="id" title="var">solve_ndisj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.split_rng.html#wp_bounded_rng_flip_refine"><span class="id" title="lemma">wp_bounded_rng_flip_refine</span></a> <span class="id" title="notation">with</span> "[$Hf $Hsf $HK $Hown]"<span class="id" title="notation">)</span>; [<span class="id" title="var">done</span> | <span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">b</span>) "(Hhash&amp;Hbounded&amp;HK&amp;Hown)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span>"Hclose'" <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hown".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"Hclose" <span class="id" title="notation">with</span> "[-HK]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iFrame</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="clutch.examples.split_rng.html#rng"><span class="id" title="section">rng</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/coq-community/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
