<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resources/config.js"></script>
<script type="text/javascript" src="resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">clutch.lib.flip</h1>

<div class="code">
</div>

<div class="doc">
<a id="lab1"></a><h1 class="section">Derived laws for a fair coin flip</h1>

</div>
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">namespaces</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.proofmode</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;<span class="id" title="library">coq_tactics</span> <span class="id" title="library">ltac_tactics</span> <span class="id" title="library">sel_patterns</span> <span class="id" title="library">environments</span> <span class="id" title="library">reduction</span> <span class="id" title="library">proofmode</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="clutch.clutch.html#"><span class="id" title="library">clutch</span></a> <a class="idref" href="clutch.lib.conversion.html#"><span class="id" title="library">lib.conversion</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="flipL" class="idref" href="#flipL"><span class="id" title="definition">flipL</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> := <a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">:</span></a> "e"<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.lib.conversion.html#int_to_bool"><span class="id" title="definition">int_to_bool</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">rand</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1%<span class="id" title="var">nat</span> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">from</span></a> "e").<br/>
<span class="id" title="keyword">Definition</span> <a id="flip" class="idref" href="#flip"><span class="id" title="definition">flip</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.expr"><span class="id" title="inductive">expr</span></a> := (<a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>).<br/>
<span class="id" title="keyword">Definition</span> <a id="allocB" class="idref" href="#allocB"><span class="id" title="definition">allocB</span></a> := <a class="idref" href="clutch.prob_lang.notation.html#alloc"><span class="id" title="abbreviation">alloc</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1%<span class="id" title="var">nat</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="tapeB" class="idref" href="#tapeB"><span class="id" title="definition">tapeB</span></a> (<a id="bs:1" class="idref" href="#bs:1"><span class="id" title="binder">bs</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tape"><span class="id" title="definition">tape</span></a> := <a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a>1<a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#bool_to_fin"><span class="id" title="definition">bool_to_fin</span></a> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="clutch.lib.flip.html#bs:1"><span class="id" title="variable">bs</span></a><a class="idref" href="clutch.prelude.stdpp_ext.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="bool_tape" class="idref" href="#bool_tape"><span class="id" title="definition">bool_tape</span></a> `{<a id="H:3" class="idref" href="#H:3"><span class="id" title="binder">clutchRGS</span></a> <a id="H:3" class="idref" href="#H:3"><span class="id" title="binder">Σ</span></a>} <a id="l:4" class="idref" href="#l:4"><span class="id" title="binder">l</span></a> <a id="bs:5" class="idref" href="#bs:5"><span class="id" title="binder">bs</span></a> : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="clutch.lib.flip.html#ebf069dbc779b42a15c441a6d39d5f83"><span class="id" title="variable">Σ</span></a> := <a class="idref" href="clutch.lib.flip.html#l:4"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.rel_logic.primitive_laws.html#52c0998123349fcc3e1f8d05ae50419f"><span class="id" title="notation">↪</span></a> <a class="idref" href="clutch.lib.flip.html#tapeB"><span class="id" title="definition">tapeB</span></a> <a class="idref" href="clutch.lib.flip.html#bs:5"><span class="id" title="variable">bs</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="bool_tape_spec" class="idref" href="#bool_tape_spec"><span class="id" title="definition">bool_tape_spec</span></a> `{<a id="H:7" class="idref" href="#H:7"><span class="id" title="binder">clutchRGS</span></a> <a id="H:7" class="idref" href="#H:7"><span class="id" title="binder">Σ</span></a>} <a id="l:8" class="idref" href="#l:8"><span class="id" title="binder">l</span></a> <a id="bs:9" class="idref" href="#bs:9"><span class="id" title="binder">bs</span></a> : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="clutch.lib.flip.html#f525610baade8c1419220d275a93fff0"><span class="id" title="variable">Σ</span></a> := <a class="idref" href="clutch.lib.flip.html#l:8"><span class="id" title="variable">l</span></a> <a class="idref" href="clutch.rel_logic.spec_ra.html#537f9bfe1a4246c42baec6fa8e98c8aa"><span class="id" title="notation">↪ₛ</span></a> <a class="idref" href="clutch.lib.flip.html#tapeB"><span class="id" title="definition">tapeB</span></a> <a class="idref" href="clutch.lib.flip.html#bs:9"><span class="id" title="variable">bs</span></a>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="53eba80cc5527af8f74a0acfba2d9230" class="idref" href="#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">&quot;</span></a>l ↪B bs" := (<a class="idref" href="clutch.lib.flip.html#bool_tape"><span class="id" title="definition">bool_tape</span></a> <span class="id" title="var">l</span> <span class="id" title="var">bs</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">format</span> "l  ↪B  bs") : <span class="id" title="var">bi_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="a39fd62056c242355b26e3b6a38a9588" class="idref" href="#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">&quot;</span></a>l ↪ₛB bs" := (<a class="idref" href="clutch.lib.flip.html#bool_tape_spec"><span class="id" title="definition">bool_tape_spec</span></a> <span class="id" title="var">l</span> <span class="id" title="var">bs</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">format</span> "l  ↪ₛB  bs") : <span class="id" title="var">bi_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="specs" class="idref" href="#specs"><span class="id" title="section">specs</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:11" class="idref" href="#H:11"><span class="id" title="binder">clutchRGS</span></a> <a id="H:11" class="idref" href="#H:11"><span class="id" title="binder">Σ</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_allocB_tape" class="idref" href="#wp_allocB_tape"><span class="id" title="lemma">wp_allocB_tape</span></a> <a id="E:12" class="idref" href="#E:12"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">True</span> <span class="id" title="notation">}}}</span> <a class="idref" href="clutch.lib.flip.html#allocB"><span class="id" title="definition">allocB</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.lib.flip.html#E:12"><span class="id" title="variable">E</span></a> <span class="id" title="notation">{{{</span> <a id="735d886dab4ed68ebb289e88433f8410" class="idref" href="#735d886dab4ed68ebb289e88433f8410"><span class="id" title="binder">α</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.lib.flip.html#735d886dab4ed68ebb289e88433f8410"><span class="id" title="variable">α</span></a><span class="id" title="notation">;</span> <a class="idref" href="clutch.lib.flip.html#735d886dab4ed68ebb289e88433f8410"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "_ HΦ". <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="clutch.rel_logic.primitive_laws.html#wp_alloc_tape"><span class="id" title="lemma">wp_alloc_tape</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_flip" class="idref" href="#wp_flip"><span class="id" title="lemma">wp_flip</span></a> <a id="E:14" class="idref" href="#E:14"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">True</span> <span class="id" title="notation">}}}</span> <a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.lib.flip.html#E:14"><span class="id" title="variable">E</span></a> <span class="id" title="notation">{{{</span> <span class="id" title="notation">(</span><a id="b:15" class="idref" href="#b:15"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><span class="id" title="notation">),</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitBool"><span class="id" title="constructor">LitBool</span></a> <a class="idref" href="clutch.lib.flip.html#b:15"><span class="id" title="variable">b</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a><span class="id" title="notation">;</span> <span class="id" title="notation">True</span> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "_ HΦ". <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a>/<a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_bind</span> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">rand</span></a> <span class="id" title="var">_</span> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">from</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.rel_logic.primitive_laws.html#wp_rand"><span class="id" title="lemma">wp_rand</span></a> 1 <span class="id" title="notation">with</span> "[//]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "_ /=".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.lib.conversion.html#wp_int_to_bool"><span class="id" title="lemma">wp_int_to_bool</span></a> <span class="id" title="notation">with</span> "[//]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "_".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_flipL" class="idref" href="#wp_flipL"><span class="id" title="lemma">wp_flipL</span></a> <a id="E:16" class="idref" href="#E:16"><span class="id" title="binder">E</span></a> <a id="d7761040dcb0d253db75070b448ba0f5" class="idref" href="#d7761040dcb0d253db75070b448ba0f5"><span class="id" title="binder">α</span></a> <a id="b:18" class="idref" href="#b:18"><span class="id" title="binder">b</span></a> <a id="bs:19" class="idref" href="#bs:19"><span class="id" title="binder">bs</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">▷</span> <a class="idref" href="clutch.lib.flip.html#d7761040dcb0d253db75070b448ba0f5"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.lib.flip.html#b:18"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="clutch.lib.flip.html#bs:19"><span class="id" title="variable">bs</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">)</span></a> <span class="id" title="notation">}}}</span> <a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a> <a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.lib.flip.html#d7761040dcb0d253db75070b448ba0f5"><span class="id" title="variable">α</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.lib.flip.html#E:16"><span class="id" title="variable">E</span></a> <span class="id" title="notation">{{{</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitBool"><span class="id" title="constructor">LitBool</span></a> <a class="idref" href="clutch.lib.flip.html#b:18"><span class="id" title="variable">b</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a><span class="id" title="notation">;</span> <a class="idref" href="clutch.lib.flip.html#d7761040dcb0d253db75070b448ba0f5"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#bs:19"><span class="id" title="variable">bs</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "&gt;Hl HΦ". <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a>/<a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_bind</span> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">rand</span></a> <span class="id" title="var">_</span> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">from</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.rel_logic.primitive_laws.html#wp_rand_tape"><span class="id" title="lemma">wp_rand_tape</span></a> 1 <span class="id" title="notation">with</span> "Hl"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hl /=".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.lib.conversion.html#wp_int_to_bool"><span class="id" title="lemma">wp_int_to_bool</span></a> <span class="id" title="notation">with</span> "[//]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "_".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#Z_to_bool_of_nat"><span class="id" title="lemma">Z_to_bool_of_nat</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#bool_to_fin_to_nat_inv"><span class="id" title="lemma">bool_to_fin_to_nat_inv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_flipL_empty" class="idref" href="#wp_flipL_empty"><span class="id" title="lemma">wp_flipL_empty</span></a> <a id="E:20" class="idref" href="#E:20"><span class="id" title="binder">E</span></a> <a id="3e54f05cff61f00248ebd6ea8d337c37" class="idref" href="#3e54f05cff61f00248ebd6ea8d337c37"><span class="id" title="binder">α</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">▷</span> <a class="idref" href="clutch.lib.flip.html#3e54f05cff61f00248ebd6ea8d337c37"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="notation">}}}</span> <a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a> <a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.lib.flip.html#3e54f05cff61f00248ebd6ea8d337c37"><span class="id" title="variable">α</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.lib.flip.html#E:20"><span class="id" title="variable">E</span></a> <span class="id" title="notation">{{{</span> <a id="b:22" class="idref" href="#b:22"><span class="id" title="binder">b</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitBool"><span class="id" title="constructor">LitBool</span></a> <a class="idref" href="clutch.lib.flip.html#b:22"><span class="id" title="variable">b</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a><span class="id" title="notation">;</span> <a class="idref" href="clutch.lib.flip.html#3e54f05cff61f00248ebd6ea8d337c37"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "&gt;Hl HΦ". <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a>/<a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_bind</span> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">rand</span></a> <span class="id" title="var">_</span> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">from</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.rel_logic.primitive_laws.html#wp_rand_tape_empty"><span class="id" title="lemma">wp_rand_tape_empty</span></a> <span class="id" title="notation">with</span> "Hl"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">n</span>) "Hl /=".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.lib.conversion.html#wp_int_to_bool"><span class="id" title="lemma">wp_int_to_bool</span></a> <span class="id" title="notation">with</span> "[//]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "_".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="refines_right_allocB_tape" class="idref" href="#refines_right_allocB_tape"><span class="id" title="lemma">refines_right_allocB_tape</span></a> <a id="E:23" class="idref" href="#E:23"><span class="id" title="binder">E</span></a> <a id="K:24" class="idref" href="#K:24"><span class="id" title="binder">K</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="instance">nclose</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.lib.flip.html#E:23"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.lib.flip.html#K:24"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.lib.flip.html#allocB"><span class="id" title="definition">allocB</span></a> <span class="id" title="notation">={</span><a class="idref" href="clutch.lib.flip.html#E:23"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <span class="id" title="notation">∃</span> <a id="6fb522096358674dd209e6ac77f89539" class="idref" href="#6fb522096358674dd209e6ac77f89539"><span class="id" title="binder">α</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.lib.flip.html#K:24"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#6fb522096358674dd209e6ac77f89539"><span class="id" title="variable">α</span></a>) <span class="id" title="notation">∗</span> <a class="idref" href="clutch.lib.flip.html#6fb522096358674dd209e6ac77f89539"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "(?&amp;?)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.rel_logic.spec_rules.html#step_alloctape"><span class="id" title="lemma">step_alloctape</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">α</span>) "(?&amp;?&amp;?)"; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>; <span class="id" title="var">iExists</span> <span class="id" title="var">α</span>; <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="refines_right_flipL" class="idref" href="#refines_right_flipL"><span class="id" title="lemma">refines_right_flipL</span></a> <a id="E:26" class="idref" href="#E:26"><span class="id" title="binder">E</span></a> <a id="K:27" class="idref" href="#K:27"><span class="id" title="binder">K</span></a> <a id="96ad1ac1716b109ad2893defa1eaf2a8" class="idref" href="#96ad1ac1716b109ad2893defa1eaf2a8"><span class="id" title="binder">α</span></a> (<a id="b:29" class="idref" href="#b:29"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) <a id="bs:30" class="idref" href="#bs:30"><span class="id" title="binder">bs</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="instance">nclose</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.lib.flip.html#E:26"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.flip.html#96ad1ac1716b109ad2893defa1eaf2a8"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.lib.flip.html#b:29"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="clutch.lib.flip.html#bs:30"><span class="id" title="variable">bs</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">)</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.lib.flip.html#K:27"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a> <a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.lib.flip.html#96ad1ac1716b109ad2893defa1eaf2a8"><span class="id" title="variable">α</span></a>) <span class="id" title="notation">={</span><a class="idref" href="clutch.lib.flip.html#E:26"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.lib.flip.html#K:27"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.LitBool"><span class="id" title="constructor">LitBool</span></a> <a class="idref" href="clutch.lib.flip.html#b:29"><span class="id" title="variable">b</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.lib.flip.html#96ad1ac1716b109ad2893defa1eaf2a8"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#bs:30"><span class="id" title="variable">bs</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "Hα Hr". <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a>/<a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_bind</span> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">rand</span></a> <span class="id" title="var">_</span> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">from</span></a> <span class="id" title="var">_</span> )%<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hr" <span class="id" title="keyword">as</span> "[#Hinv Hr]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.rel_logic.spec_rules.html#step_rand"><span class="id" title="lemma">step_rand</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "(_ &amp; Hj &amp; Hl) /="; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.lib.conversion.html#refines_right_int_to_bool"><span class="id" title="lemma">refines_right_int_to_bool</span></a> <span class="id" title="notation">with</span> "[$Hinv $Hj]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hr"; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#Z_to_bool_of_nat"><span class="id" title="lemma">Z_to_bool_of_nat</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#bool_to_fin_to_nat_inv"><span class="id" title="lemma">bool_to_fin_to_nat_inv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span> "Hr Hl".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab2"></a><h1 class="section">Tape allocation</h1>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="refines_allocB_tape_l" class="idref" href="#refines_allocB_tape_l"><span class="id" title="lemma">refines_allocB_tape_l</span></a> <a id="K:31" class="idref" href="#K:31"><span class="id" title="binder">K</span></a> <a id="E:32" class="idref" href="#E:32"><span class="id" title="binder">E</span></a> <a id="t:33" class="idref" href="#t:33"><span class="id" title="binder">t</span></a> <a id="A:34" class="idref" href="#A:34"><span class="id" title="binder">A</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">▷</span> <span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="4a188f136a9674abe8e1f3015e01f0ea" class="idref" href="#4a188f136a9674abe8e1f3015e01f0ea"><span class="id" title="binder">α</span></a> : <a class="idref" href="clutch.prob_lang.locations.html#loc"><span class="id" title="record">loc</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.lib.flip.html#4a188f136a9674abe8e1f3015e01f0ea"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:31"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.lib.flip.html#4a188f136a9674abe8e1f3015e01f0ea"><span class="id" title="variable">α</span></a>) <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.lib.flip.html#t:33"><span class="id" title="variable">t</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:32"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:34"><span class="id" title="variable">A</span></a><span class="id" title="notation">)</span>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">-∗</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:31"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.lib.flip.html#allocB"><span class="id" title="definition">allocB</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.lib.flip.html#t:33"><span class="id" title="variable">t</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:32"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:34"><span class="id" title="variable">A</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">iIntros</span> "?". <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_alloctape_l"><span class="id" title="lemma">refines_alloctape_l</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="refines_allocB_tape_r" class="idref" href="#refines_allocB_tape_r"><span class="id" title="lemma">refines_allocB_tape_r</span></a> <a id="E:36" class="idref" href="#E:36"><span class="id" title="binder">E</span></a> <a id="K:37" class="idref" href="#K:37"><span class="id" title="binder">K</span></a> <a id="t:38" class="idref" href="#t:38"><span class="id" title="binder">t</span></a> <a id="A:39" class="idref" href="#A:39"><span class="id" title="binder">A</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">∀</span> <a id="3c85de880ac7727ba8142958ded6bc4c" class="idref" href="#3c85de880ac7727ba8142958ded6bc4c"><span class="id" title="binder">α</span></a> : <a class="idref" href="clutch.prob_lang.locations.html#loc"><span class="id" title="record">loc</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.lib.flip.html#3c85de880ac7727ba8142958ded6bc4c"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.lib.flip.html#t:38"><span class="id" title="variable">t</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:37"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.lib.flip.html#3c85de880ac7727ba8142958ded6bc4c"><span class="id" title="variable">α</span></a>) <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:36"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:39"><span class="id" title="variable">A</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">-∗</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.lib.flip.html#t:38"><span class="id" title="variable">t</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:37"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.lib.flip.html#allocB"><span class="id" title="definition">allocB</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:36"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:39"><span class="id" title="variable">A</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">iIntros</span> "?". <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_alloctape_r"><span class="id" title="lemma">refines_alloctape_r</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab3"></a><h1 class="section">Unlabelled flip</h1>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="refines_flip_l" class="idref" href="#refines_flip_l"><span class="id" title="lemma">refines_flip_l</span></a> <a id="E:41" class="idref" href="#E:41"><span class="id" title="binder">E</span></a> <a id="K:42" class="idref" href="#K:42"><span class="id" title="binder">K</span></a> <a id="t:43" class="idref" href="#t:43"><span class="id" title="binder">t</span></a> <a id="A:44" class="idref" href="#A:44"><span class="id" title="binder">A</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">▷</span> <span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <span class="id" title="notation">(</span><a id="b:45" class="idref" href="#b:45"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><span class="id" title="notation">),</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:42"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.flip.html#b:45"><span class="id" title="variable">b</span></a>) <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.lib.flip.html#t:43"><span class="id" title="variable">t</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:41"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:44"><span class="id" title="variable">A</span></a><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">-∗</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:42"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.lib.flip.html#t:43"><span class="id" title="variable">t</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:41"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:44"><span class="id" title="variable">A</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hlog".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_wp_l"><span class="id" title="lemma">refines_wp_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.lib.flip.html#wp_flip"><span class="id" title="lemma">wp_flip</span></a> <span class="id" title="notation">with</span> "[//]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;<span class="inlinecode"><span class="id" title="var">refines_flip_r</span></span>&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab4"></a><h1 class="section">Labelled flip</h1>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="refines_flipL_l" class="idref" href="#refines_flipL_l"><span class="id" title="lemma">refines_flipL_l</span></a> <a id="E:46" class="idref" href="#E:46"><span class="id" title="binder">E</span></a> <a id="K:47" class="idref" href="#K:47"><span class="id" title="binder">K</span></a> <a id="2c98d7b39e50a333e56d04fcb625458e" class="idref" href="#2c98d7b39e50a333e56d04fcb625458e"><span class="id" title="binder">α</span></a> <a id="b:49" class="idref" href="#b:49"><span class="id" title="binder">b</span></a> <a id="bs:50" class="idref" href="#bs:50"><span class="id" title="binder">bs</span></a> <a id="t:51" class="idref" href="#t:51"><span class="id" title="binder">t</span></a> <a id="A:52" class="idref" href="#A:52"><span class="id" title="binder">A</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">▷</span> <a class="idref" href="clutch.lib.flip.html#2c98d7b39e50a333e56d04fcb625458e"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.lib.flip.html#b:49"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="clutch.lib.flip.html#bs:50"><span class="id" title="variable">bs</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">▷</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.lib.flip.html#2c98d7b39e50a333e56d04fcb625458e"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#bs:50"><span class="id" title="variable">bs</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:47"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.flip.html#b:49"><span class="id" title="variable">b</span></a>) <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.lib.flip.html#t:51"><span class="id" title="variable">t</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:46"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:52"><span class="id" title="variable">A</span></a><span class="id" title="notation">)</span><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">-∗</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:47"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a> <a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.lib.flip.html#2c98d7b39e50a333e56d04fcb625458e"><span class="id" title="variable">α</span></a>) <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.lib.flip.html#t:51"><span class="id" title="variable">t</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:46"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:52"><span class="id" title="variable">A</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "[Hα Hlog]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_wp_l"><span class="id" title="lemma">refines_wp_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.lib.flip.html#wp_flipL"><span class="id" title="lemma">wp_flipL</span></a> <span class="id" title="notation">with</span> "Hα"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="refines_flipL_r" class="idref" href="#refines_flipL_r"><span class="id" title="lemma">refines_flipL_r</span></a> <a id="E:53" class="idref" href="#E:53"><span class="id" title="binder">E</span></a> <a id="K:54" class="idref" href="#K:54"><span class="id" title="binder">K</span></a> <a id="1d89bfe72c7dfa2d69e16dd54f47be4f" class="idref" href="#1d89bfe72c7dfa2d69e16dd54f47be4f"><span class="id" title="binder">α</span></a> <a id="b:56" class="idref" href="#b:56"><span class="id" title="binder">b</span></a> <a id="bs:57" class="idref" href="#bs:57"><span class="id" title="binder">bs</span></a> <a id="t:58" class="idref" href="#t:58"><span class="id" title="binder">t</span></a> <a id="A:59" class="idref" href="#A:59"><span class="id" title="binder">A</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.flip.html#1d89bfe72c7dfa2d69e16dd54f47be4f"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.lib.flip.html#b:56"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="clutch.lib.flip.html#bs:57"><span class="id" title="variable">bs</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">-∗</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.lib.flip.html#1d89bfe72c7dfa2d69e16dd54f47be4f"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#bs:57"><span class="id" title="variable">bs</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.lib.flip.html#t:58"><span class="id" title="variable">t</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:54"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.flip.html#b:56"><span class="id" title="variable">b</span></a>) <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:53"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:59"><span class="id" title="variable">A</span></a><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">-∗</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.lib.flip.html#t:58"><span class="id" title="variable">t</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:54"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a> <a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.lib.flip.html#1d89bfe72c7dfa2d69e16dd54f47be4f"><span class="id" title="variable">α</span></a>)<a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:53"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:59"><span class="id" title="variable">A</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hα Hlog".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_step_r"><span class="id" title="lemma">refines_step_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">k</span>) "Hk".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.lib.flip.html#refines_right_flipL"><span class="id" title="lemma">refines_right_flipL</span></a> <span class="id" title="notation">with</span> "[$] [$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[? ?]"; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>; <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>. <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span>"Hlog" <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="refines_flipL_empty_l" class="idref" href="#refines_flipL_empty_l"><span class="id" title="lemma">refines_flipL_empty_l</span></a> <a id="K:60" class="idref" href="#K:60"><span class="id" title="binder">K</span></a> <a id="E:61" class="idref" href="#E:61"><span class="id" title="binder">E</span></a> <a id="8e541805ccf942975951e9ddc38f58e2" class="idref" href="#8e541805ccf942975951e9ddc38f58e2"><span class="id" title="binder">α</span></a> <a id="A:63" class="idref" href="#A:63"><span class="id" title="binder">A</span></a> <a id="e:64" class="idref" href="#e:64"><span class="id" title="binder">e</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.flip.html#8e541805ccf942975951e9ddc38f58e2"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <span class="id" title="notation">(</span><a id="b:65" class="idref" href="#b:65"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><span class="id" title="notation">),</span> <a class="idref" href="clutch.lib.flip.html#8e541805ccf942975951e9ddc38f58e2"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:60"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.flip.html#b:65"><span class="id" title="variable">b</span></a>) <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.lib.flip.html#e:64"><span class="id" title="variable">e</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:61"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:63"><span class="id" title="variable">A</span></a><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:60"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a> <a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.lib.flip.html#8e541805ccf942975951e9ddc38f58e2"><span class="id" title="variable">α</span></a>) <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.lib.flip.html#e:64"><span class="id" title="variable">e</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:61"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:63"><span class="id" title="variable">A</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "[Hα H]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_wp_l"><span class="id" title="lemma">refines_wp_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.lib.flip.html#wp_flipL_empty"><span class="id" title="lemma">wp_flipL_empty</span></a> <span class="id" title="notation">with</span> "Hα"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="refines_flipL_empty_r" class="idref" href="#refines_flipL_empty_r"><span class="id" title="lemma">refines_flipL_empty_r</span></a> <a id="K:66" class="idref" href="#K:66"><span class="id" title="binder">K</span></a> <a id="E:67" class="idref" href="#E:67"><span class="id" title="binder">E</span></a> <a id="108c6cf6facffeb78e98c690f6007773" class="idref" href="#108c6cf6facffeb78e98c690f6007773"><span class="id" title="binder">α</span></a> <a id="A:69" class="idref" href="#A:69"><span class="id" title="binder">A</span></a> <a id="e:70" class="idref" href="#e:70"><span class="id" title="binder">e</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="instance">nclose</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.lib.flip.html#E:67"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.to_val"><span class="id" title="definition">to_val</span></a> <a class="idref" href="clutch.lib.flip.html#e:70"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.flip.html#108c6cf6facffeb78e98c690f6007773"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="b:71" class="idref" href="#b:71"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.lib.flip.html#108c6cf6facffeb78e98c690f6007773"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.lib.flip.html#e:70"><span class="id" title="variable">e</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:66"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.flip.html#b:71"><span class="id" title="variable">b</span></a>) <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:67"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:69"><span class="id" title="variable">A</span></a><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.lib.flip.html#e:70"><span class="id" title="variable">e</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:66"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a> <a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.lib.flip.html#108c6cf6facffeb78e98c690f6007773"><span class="id" title="variable">α</span></a>) <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:67"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:69"><span class="id" title="variable">A</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (? <span class="id" title="var">ev</span>) "[Hα H]". <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a>/<a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_pures_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_apply_r</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_rand_empty_r"><span class="id" title="definition">refines_rand_empty_r</span></a>; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">n</span>) "Hα".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_apply_r</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_step_r"><span class="id" title="lemma">refines_step_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">K'</span>) "Hr".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.lib.conversion.html#refines_right_int_to_bool"><span class="id" title="lemma">refines_right_int_to_bool</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span>; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>; <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "H".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab5"></a><h1 class="section">Coupling rules</h1>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Instance</span> <a id="bool_bool_fin_fin" class="idref" href="#bool_bool_fin_fin"><span class="id" title="instance">bool_bool_fin_fin</span></a> <a id="f:72" class="idref" href="#f:72"><span class="id" title="binder">f</span></a> `{<a id="H0:73" class="idref" href="#H0:73"><span class="id" title="binder">Bij</span></a> <a id="H0:73" class="idref" href="#H0:73"><span class="id" title="binder">bool</span></a> <a id="H0:73" class="idref" href="#H0:73"><span class="id" title="binder">bool</span></a> <a id="H0:73" class="idref" href="#H0:73"><span class="id" title="binder">f</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prelude.stdpp_ext.html#Bij"><span class="id" title="class">Bij</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="n:74" class="idref" href="#n:74"><span class="id" title="binder">n</span></a> : <span class="id" title="abbreviation">fin</span> 2<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#bool_to_fin"><span class="id" title="definition">bool_to_fin</span></a> (<a class="idref" href="clutch.lib.flip.html#f:72"><span class="id" title="variable">f</span></a> (<a class="idref" href="clutch.prelude.stdpp_ext.html#fin_to_bool"><span class="id" title="definition">fin_to_bool</span></a> <a class="idref" href="clutch.lib.flip.html#n:74"><span class="id" title="variable">n</span></a>))).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">_</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Definition</span> <a id="fn_bool_to_fin" class="idref" href="#fn_bool_to_fin"><span class="id" title="definition">fn_bool_to_fin</span></a> (<a id="f:75" class="idref" href="#f:75"><span class="id" title="binder">f</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="n:76" class="idref" href="#n:76"><span class="id" title="binder">n</span></a> : <span class="id" title="abbreviation">fin</span> 2<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#bool_to_fin"><span class="id" title="definition">bool_to_fin</span></a> (<a class="idref" href="clutch.lib.flip.html#f:75"><span class="id" title="variable">f</span></a> (<a class="idref" href="clutch.prelude.stdpp_ext.html#fin_to_bool"><span class="id" title="definition">fin_to_bool</span></a> <a class="idref" href="clutch.lib.flip.html#n:76"><span class="id" title="variable">n</span></a>))).<br/>

<br/>
</div>

<div class="doc">
flip ~ flip  
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_couple_flip_flip" class="idref" href="#wp_couple_flip_flip"><span class="id" title="lemma">wp_couple_flip_flip</span></a> <a id="f:77" class="idref" href="#f:77"><span class="id" title="binder">f</span></a> `{<a id="H0:78" class="idref" href="#H0:78"><span class="id" title="binder">Bij</span></a> <a id="H0:78" class="idref" href="#H0:78"><span class="id" title="binder">bool</span></a> <a id="H0:78" class="idref" href="#H0:78"><span class="id" title="binder">bool</span></a> <a id="H0:78" class="idref" href="#H0:78"><span class="id" title="binder">f</span></a>} <a id="K:79" class="idref" href="#K:79"><span class="id" title="binder">K</span></a> <a id="E:80" class="idref" href="#E:80"><span class="id" title="binder">E</span></a> <a id="d3aa9a87820fbf0fe7674bf427793c01" class="idref" href="#d3aa9a87820fbf0fe7674bf427793c01"><span class="id" title="binder">Φ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="instance">nclose</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.lib.flip.html#E:80"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.lib.flip.html#K:79"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">▷</span> <span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="b:82" class="idref" href="#b:82"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.lib.flip.html#K:79"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a><a class="idref" href="clutch.lib.flip.html#f:77"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.lib.flip.html#b:82"><span class="id" title="variable">b</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="clutch.lib.flip.html#d3aa9a87820fbf0fe7674bf427793c01"><span class="id" title="variable">Φ</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.flip.html#b:82"><span class="id" title="variable">b</span></a><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> <span class="id" title="notation">WP</span> <a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.lib.flip.html#E:80"><span class="id" title="variable">E</span></a> <span class="id" title="notation">{{</span> <a class="idref" href="clutch.lib.flip.html#d3aa9a87820fbf0fe7674bf427793c01"><span class="id" title="variable">Φ</span></a> <span class="id" title="notation">}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "(Hr &amp; HΦ)". <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a>/<a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_bind</span> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">rand</span></a> <span class="id" title="var">_</span> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">from</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_bind</span> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">rand</span></a> <span class="id" title="var">_</span> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">from</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<a class="idref" href="clutch.rel_logic.coupling_rules.html#wp_couple_rand_rand"><span class="id" title="lemma">wp_couple_rand_rand</span></a> 1 (<a class="idref" href="clutch.lib.flip.html#fn_bool_to_fin"><span class="id" title="definition">fn_bool_to_fin</span></a> <span class="id" title="var">f</span>)); [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;" (<span class="id" title="var">n</span>) "Hr".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.lib.conversion.html#refines_right_int_to_bool"><span class="id" title="lemma">refines_right_int_to_bool</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span>; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="clutch.lib.conversion.html#wp_int_to_bool"><span class="id" title="lemma">wp_int_to_bool</span></a>; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "_ /=".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="clutch.prelude.stdpp_ext.html#Z_to_bool_of_nat"><span class="id" title="lemma">Z_to_bool_of_nat</span></a> !<a class="idref" href="clutch.prelude.stdpp_ext.html#bool_to_fin_to_nat_inv"><span class="id" title="lemma">bool_to_fin_to_nat_inv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#fin_to_nat_to_bool_inv"><span class="id" title="lemma">fin_to_nat_to_bool_inv</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="refines_couple_flip_flip" class="idref" href="#refines_couple_flip_flip"><span class="id" title="lemma">refines_couple_flip_flip</span></a> <a id="f:83" class="idref" href="#f:83"><span class="id" title="binder">f</span></a> `{<a id="H0:84" class="idref" href="#H0:84"><span class="id" title="binder">Bij</span></a> <a id="H0:84" class="idref" href="#H0:84"><span class="id" title="binder">bool</span></a> <a id="H0:84" class="idref" href="#H0:84"><span class="id" title="binder">bool</span></a> <a id="H0:84" class="idref" href="#H0:84"><span class="id" title="binder">f</span></a>} <a id="K:85" class="idref" href="#K:85"><span class="id" title="binder">K</span></a> <a id="K':86" class="idref" href="#K':86"><span class="id" title="binder">K'</span></a> <a id="E:87" class="idref" href="#E:87"><span class="id" title="binder">E</span></a> <a id="A:88" class="idref" href="#A:88"><span class="id" title="binder">A</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="instance">nclose</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.lib.flip.html#E:87"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">▷</span> <span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="b:89" class="idref" href="#b:89"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:85"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.flip.html#b:89"><span class="id" title="variable">b</span></a>) <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K':86"><span class="id" title="variable">K'</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a><a class="idref" href="clutch.lib.flip.html#f:83"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.lib.flip.html#b:89"><span class="id" title="variable">b</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a>) <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:87"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:88"><span class="id" title="variable">A</span></a><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:85"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K':86"><span class="id" title="variable">K'</span></a> <a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:87"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:88"><span class="id" title="variable">A</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.model.html#refines_eq"><span class="id" title="definition">refines_eq</span></a> /<a class="idref" href="clutch.rel_logic.model.html#refines_def"><span class="id" title="definition">refines_def</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "Hcnt %? ? /=".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <a class="idref" href="clutch.program_logic.weakestpre.html#wp_bind"><span class="id" title="lemma">wp_bind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> (<a class="idref" href="clutch.lib.flip.html#wp_couple_flip_flip"><span class="id" title="lemma">wp_couple_flip_flip</span></a> <span class="id" title="var">f</span>); [<span class="id" title="var">solve_ndisj</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;" (<span class="id" title="var">b</span>) "Hr".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span>"Hcnt" <span class="id" title="notation">with</span> "[$] [$]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
tape ~ tape 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_couple_bool_tape_tape" class="idref" href="#wp_couple_bool_tape_tape"><span class="id" title="lemma">wp_couple_bool_tape_tape</span></a> <a id="f:90" class="idref" href="#f:90"><span class="id" title="binder">f</span></a> `{<a id="H0:91" class="idref" href="#H0:91"><span class="id" title="binder">Bij</span></a> <a id="H0:91" class="idref" href="#H0:91"><span class="id" title="binder">bool</span></a> <a id="H0:91" class="idref" href="#H0:91"><span class="id" title="binder">bool</span></a> <a id="H0:91" class="idref" href="#H0:91"><span class="id" title="binder">f</span></a>} <a id="E:92" class="idref" href="#E:92"><span class="id" title="binder">E</span></a> <a id="e:93" class="idref" href="#e:93"><span class="id" title="binder">e</span></a> <a id="5ac292975b8c344dc200264ae410d936" class="idref" href="#5ac292975b8c344dc200264ae410d936"><span class="id" title="binder">α</span></a> <a id="864e6e353f5f15cf853c909169f8ae8d" class="idref" href="#864e6e353f5f15cf853c909169f8ae8d"><span class="id" title="binder">α</span></a><a id="864e6e353f5f15cf853c909169f8ae8d" class="idref" href="#864e6e353f5f15cf853c909169f8ae8d"><span class="id" title="binder">ₛ</span></a> <a id="bs:96" class="idref" href="#bs:96"><span class="id" title="binder">bs</span></a> <a id="6eed26a2884438da239e698f646ddbf8" class="idref" href="#6eed26a2884438da239e698f646ddbf8"><span class="id" title="binder">bs</span></a><a id="6eed26a2884438da239e698f646ddbf8" class="idref" href="#6eed26a2884438da239e698f646ddbf8"><span class="id" title="binder">ₛ</span></a> <a id="848afab06bf12743b7d5ad588f763841" class="idref" href="#848afab06bf12743b7d5ad588f763841"><span class="id" title="binder">Φ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.to_val"><span class="id" title="definition">to_val</span></a> <a class="idref" href="clutch.lib.flip.html#e:93"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="instance">nclose</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.lib.flip.html#E:92"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="clutch.lib.flip.html#864e6e353f5f15cf853c909169f8ae8d"><span class="id" title="variable">α</span></a><a class="idref" href="clutch.lib.flip.html#864e6e353f5f15cf853c909169f8ae8d"><span class="id" title="variable">ₛ</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#6eed26a2884438da239e698f646ddbf8"><span class="id" title="variable">bs</span></a><a class="idref" href="clutch.lib.flip.html#6eed26a2884438da239e698f646ddbf8"><span class="id" title="variable">ₛ</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="clutch.lib.flip.html#5ac292975b8c344dc200264ae410d936"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#bs:96"><span class="id" title="variable">bs</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="b:99" class="idref" href="#b:99"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.lib.flip.html#864e6e353f5f15cf853c909169f8ae8d"><span class="id" title="variable">α</span></a><a class="idref" href="clutch.lib.flip.html#864e6e353f5f15cf853c909169f8ae8d"><span class="id" title="variable">ₛ</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.lib.flip.html#6eed26a2884438da239e698f646ddbf8"><span class="id" title="variable">bs</span></a><a class="idref" href="clutch.lib.flip.html#6eed26a2884438da239e698f646ddbf8"><span class="id" title="variable">ₛ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.lib.flip.html#f:90"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.lib.flip.html#b:99"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.lib.flip.html#5ac292975b8c344dc200264ae410d936"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.lib.flip.html#bs:96"><span class="id" title="variable">bs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.lib.flip.html#b:99"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">)</span></a> <span class="id" title="notation">-∗</span> <span class="id" title="notation">WP</span> <a class="idref" href="clutch.lib.flip.html#e:93"><span class="id" title="variable">e</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.lib.flip.html#E:92"><span class="id" title="variable">E</span></a> <span class="id" title="notation">{{</span> <a class="idref" href="clutch.lib.flip.html#848afab06bf12743b7d5ad588f763841"><span class="id" title="variable">Φ</span></a> <span class="id" title="notation">}}</span><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> <span class="id" title="notation">WP</span> <a class="idref" href="clutch.lib.flip.html#e:93"><span class="id" title="variable">e</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.lib.flip.html#E:92"><span class="id" title="variable">E</span></a> <span class="id" title="notation">{{</span> <a class="idref" href="clutch.lib.flip.html#848afab06bf12743b7d5ad588f763841"><span class="id" title="variable">Φ</span></a> <span class="id" title="notation">}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (??) "(Hctx &amp; &gt;αs &amp; &gt;Hα &amp; Hlog)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<a class="idref" href="clutch.rel_logic.coupling_rules.html#wp_couple_tapes"><span class="id" title="lemma">wp_couple_tapes</span></a> <span class="id" title="var">_</span> (<a class="idref" href="clutch.lib.flip.html#fn_bool_to_fin"><span class="id" title="definition">fn_bool_to_fin</span></a> <span class="id" title="var">f</span>)); [<span class="id" title="var">done</span>|<span class="id" title="var">done</span>|<span class="id" title="var">iFrame</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">n</span>) "[Hαs Hα]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">surj</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#bool_to_fin"><span class="id" title="definition">bool_to_fin</span></a> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span> &lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span>"Hlog" <span class="id" title="notation">$!</span> <span class="id" title="var">b</span><span class="id" title="notation">)</span>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.flip.html#fn_bool_to_fin"><span class="id" title="definition">fn_bool_to_fin</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#bool_to_fin_to_bool"><span class="id" title="lemma">bool_to_fin_to_bool</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<span class="id" title="lemma">list_fmap_singleton</span> -!<span class="id" title="lemma">fmap_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="refines_couple_bool_tape_tape" class="idref" href="#refines_couple_bool_tape_tape"><span class="id" title="lemma">refines_couple_bool_tape_tape</span></a> <a id="f:100" class="idref" href="#f:100"><span class="id" title="binder">f</span></a> `{<a id="H0:101" class="idref" href="#H0:101"><span class="id" title="binder">Bij</span></a> <a id="H0:101" class="idref" href="#H0:101"><span class="id" title="binder">bool</span></a> <a id="H0:101" class="idref" href="#H0:101"><span class="id" title="binder">bool</span></a> <a id="H0:101" class="idref" href="#H0:101"><span class="id" title="binder">f</span></a>} <a id="E:102" class="idref" href="#E:102"><span class="id" title="binder">E</span></a> <a id="e1:103" class="idref" href="#e1:103"><span class="id" title="binder">e1</span></a> <a id="e2:104" class="idref" href="#e2:104"><span class="id" title="binder">e2</span></a> <a id="A:105" class="idref" href="#A:105"><span class="id" title="binder">A</span></a> <a id="80cdf8a647252fcb2fef52accbe5ca24" class="idref" href="#80cdf8a647252fcb2fef52accbe5ca24"><span class="id" title="binder">α</span></a> <a id="4b1f5a5db7795154f6f651450661a94a" class="idref" href="#4b1f5a5db7795154f6f651450661a94a"><span class="id" title="binder">α</span></a><a id="4b1f5a5db7795154f6f651450661a94a" class="idref" href="#4b1f5a5db7795154f6f651450661a94a"><span class="id" title="binder">ₛ</span></a> <a id="bs:108" class="idref" href="#bs:108"><span class="id" title="binder">bs</span></a> <a id="5cf90000f16cb971718cee503503bd32" class="idref" href="#5cf90000f16cb971718cee503503bd32"><span class="id" title="binder">bs</span></a><a id="5cf90000f16cb971718cee503503bd32" class="idref" href="#5cf90000f16cb971718cee503503bd32"><span class="id" title="binder">ₛ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.to_val"><span class="id" title="definition">to_val</span></a> <a class="idref" href="clutch.lib.flip.html#e1:103"><span class="id" title="variable">e1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">▷</span> <a class="idref" href="clutch.lib.flip.html#4b1f5a5db7795154f6f651450661a94a"><span class="id" title="variable">α</span></a><a class="idref" href="clutch.lib.flip.html#4b1f5a5db7795154f6f651450661a94a"><span class="id" title="variable">ₛ</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#5cf90000f16cb971718cee503503bd32"><span class="id" title="variable">bs</span></a><a class="idref" href="clutch.lib.flip.html#5cf90000f16cb971718cee503503bd32"><span class="id" title="variable">ₛ</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="clutch.lib.flip.html#80cdf8a647252fcb2fef52accbe5ca24"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#bs:108"><span class="id" title="variable">bs</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="b:110" class="idref" href="#b:110"><span class="id" title="binder">b</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.lib.flip.html#4b1f5a5db7795154f6f651450661a94a"><span class="id" title="variable">α</span></a><a class="idref" href="clutch.lib.flip.html#4b1f5a5db7795154f6f651450661a94a"><span class="id" title="variable">ₛ</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.lib.flip.html#5cf90000f16cb971718cee503503bd32"><span class="id" title="variable">bs</span></a><a class="idref" href="clutch.lib.flip.html#5cf90000f16cb971718cee503503bd32"><span class="id" title="variable">ₛ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.lib.flip.html#f:100"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.lib.flip.html#b:110"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.lib.flip.html#80cdf8a647252fcb2fef52accbe5ca24"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.lib.flip.html#bs:108"><span class="id" title="variable">bs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.lib.flip.html#b:110"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">)</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.lib.flip.html#e1:103"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.lib.flip.html#e2:104"><span class="id" title="variable">e2</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:102"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:105"><span class="id" title="variable">A</span></a><span class="id" title="notation">)</span><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.lib.flip.html#e1:103"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.lib.flip.html#e2:104"><span class="id" title="variable">e2</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:102"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:105"><span class="id" title="variable">A</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "(Hαs &amp; Hα &amp; Hlog)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<a class="idref" href="clutch.rel_logic.rel_rules.html#refines_couple_tapes"><span class="id" title="definition">refines_couple_tapes</span></a> <span class="id" title="var">_</span> (<a class="idref" href="clutch.lib.flip.html#fn_bool_to_fin"><span class="id" title="definition">fn_bool_to_fin</span></a> <span class="id" title="var">f</span>)); [<span class="id" title="var">done</span>|<span class="id" title="var">iFrame</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">n</span>) "[Hαs Hα]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">surj</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#bool_to_fin"><span class="id" title="definition">bool_to_fin</span></a> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span> &lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span>"Hlog" <span class="id" title="notation">$!</span> <span class="id" title="var">b</span><span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.flip.html#fn_bool_to_fin"><span class="id" title="definition">fn_bool_to_fin</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#bool_to_fin_to_bool"><span class="id" title="lemma">bool_to_fin_to_bool</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<span class="id" title="lemma">list_fmap_singleton</span> -!<span class="id" title="lemma">fmap_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
tape(n) ~ tape(n) 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_couple_bool_tapeN_tapeN_eq" class="idref" href="#wp_couple_bool_tapeN_tapeN_eq"><span class="id" title="lemma">wp_couple_bool_tapeN_tapeN_eq</span></a> <a id="m:111" class="idref" href="#m:111"><span class="id" title="binder">m</span></a> <a id="E:112" class="idref" href="#E:112"><span class="id" title="binder">E</span></a> <a id="e:113" class="idref" href="#e:113"><span class="id" title="binder">e</span></a> <a id="0c7a946d2faecca6941942b25bbe46fa" class="idref" href="#0c7a946d2faecca6941942b25bbe46fa"><span class="id" title="binder">α</span></a> <a id="1309dbc4a60cc0179942ef573bdccf57" class="idref" href="#1309dbc4a60cc0179942ef573bdccf57"><span class="id" title="binder">α</span></a><a id="1309dbc4a60cc0179942ef573bdccf57" class="idref" href="#1309dbc4a60cc0179942ef573bdccf57"><span class="id" title="binder">ₛ</span></a> <a id="bs:116" class="idref" href="#bs:116"><span class="id" title="binder">bs</span></a> <a id="1752796ad9c12001958eab22e8011c0c" class="idref" href="#1752796ad9c12001958eab22e8011c0c"><span class="id" title="binder">bs</span></a><a id="1752796ad9c12001958eab22e8011c0c" class="idref" href="#1752796ad9c12001958eab22e8011c0c"><span class="id" title="binder">ₛ</span></a> <a id="6929b04bbafb356caee33abb8e1f824e" class="idref" href="#6929b04bbafb356caee33abb8e1f824e"><span class="id" title="binder">Φ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.to_val"><span class="id" title="definition">to_val</span></a> <a class="idref" href="clutch.lib.flip.html#e:113"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="instance">nclose</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.lib.flip.html#E:112"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="clutch.lib.flip.html#1309dbc4a60cc0179942ef573bdccf57"><span class="id" title="variable">α</span></a><a class="idref" href="clutch.lib.flip.html#1309dbc4a60cc0179942ef573bdccf57"><span class="id" title="variable">ₛ</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#1752796ad9c12001958eab22e8011c0c"><span class="id" title="variable">bs</span></a><a class="idref" href="clutch.lib.flip.html#1752796ad9c12001958eab22e8011c0c"><span class="id" title="variable">ₛ</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="clutch.lib.flip.html#0c7a946d2faecca6941942b25bbe46fa"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#bs:116"><span class="id" title="variable">bs</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="bs':119" class="idref" href="#bs':119"><span class="id" title="binder">bs'</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">⌜</span><span class="id" title="abbreviation">length</span> <a class="idref" href="clutch.lib.flip.html#bs':119"><span class="id" title="variable">bs'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.lib.flip.html#m:111"><span class="id" title="variable">m</span></a> <span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.lib.flip.html#1309dbc4a60cc0179942ef573bdccf57"><span class="id" title="variable">α</span></a><a class="idref" href="clutch.lib.flip.html#1309dbc4a60cc0179942ef573bdccf57"><span class="id" title="variable">ₛ</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.lib.flip.html#1752796ad9c12001958eab22e8011c0c"><span class="id" title="variable">bs</span></a><a class="idref" href="clutch.lib.flip.html#1752796ad9c12001958eab22e8011c0c"><span class="id" title="variable">ₛ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="clutch.lib.flip.html#bs':119"><span class="id" title="variable">bs'</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.lib.flip.html#0c7a946d2faecca6941942b25bbe46fa"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.lib.flip.html#bs:116"><span class="id" title="variable">bs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="clutch.lib.flip.html#bs':119"><span class="id" title="variable">bs'</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">)</span></a> <span class="id" title="notation">-∗</span> <span class="id" title="notation">WP</span> <a class="idref" href="clutch.lib.flip.html#e:113"><span class="id" title="variable">e</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.lib.flip.html#E:112"><span class="id" title="variable">E</span></a> <span class="id" title="notation">{{</span> <a class="idref" href="clutch.lib.flip.html#6929b04bbafb356caee33abb8e1f824e"><span class="id" title="variable">Φ</span></a> <span class="id" title="notation">}}</span><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> <span class="id" title="notation">WP</span> <a class="idref" href="clutch.lib.flip.html#e:113"><span class="id" title="variable">e</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.lib.flip.html#E:112"><span class="id" title="variable">E</span></a> <span class="id" title="notation">{{</span> <a class="idref" href="clutch.lib.flip.html#6929b04bbafb356caee33abb8e1f824e"><span class="id" title="variable">Φ</span></a> <span class="id" title="notation">}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (??).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">m</span>] "IH" <span class="id" title="keyword">forall</span> (<span class="id" title="var">bs</span> <span class="id" title="var">bs</span>ₛ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "(#Hctx&amp; &gt;Hα &amp; &gt;Hαₛ&amp;Hwp)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span>"Hwp" <span class="id" title="notation">$!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> 2!<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "(#Hctx&amp;Hα&amp;Hαₛ&amp;Hwp)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "IH". <span class="id" title="var">iFrame</span> "Hα Hαₛ Hctx".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "(%Hlen &amp; Hα &amp; Hαₛ)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<a class="idref" href="clutch.lib.flip.html#wp_couple_bool_tape_tape"><span class="id" title="lemma">wp_couple_bool_tape_tape</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">Datatypes.id</span></a>); [<span class="id" title="var">done</span>|<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span> "Hα Hαₛ Hctx".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">n</span>) "(Hα&amp;Hαₛ)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span>"Hwp" <span class="id" title="notation">$!</span> <span class="id" title="notation">(</span><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><span class="id" title="notation">))</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> 2!<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a> <span class="id" title="var">Hlen</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
tape ~ flip  
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_couple_tape_flip" class="idref" href="#wp_couple_tape_flip"><span class="id" title="lemma">wp_couple_tape_flip</span></a> <a id="f:120" class="idref" href="#f:120"><span class="id" title="binder">f</span></a> `{<a id="H0:121" class="idref" href="#H0:121"><span class="id" title="binder">Bij</span></a> <a id="H0:121" class="idref" href="#H0:121"><span class="id" title="binder">bool</span></a> <a id="H0:121" class="idref" href="#H0:121"><span class="id" title="binder">bool</span></a> <a id="H0:121" class="idref" href="#H0:121"><span class="id" title="binder">f</span></a>} <a id="K:122" class="idref" href="#K:122"><span class="id" title="binder">K</span></a> <a id="E:123" class="idref" href="#E:123"><span class="id" title="binder">E</span></a> <a id="8b06c7f377fe87a003e02f2986a9caf5" class="idref" href="#8b06c7f377fe87a003e02f2986a9caf5"><span class="id" title="binder">α</span></a> <a id="bs:125" class="idref" href="#bs:125"><span class="id" title="binder">bs</span></a> <a id="59b01455388855e72eb2fe1d499d2c45" class="idref" href="#59b01455388855e72eb2fe1d499d2c45"><span class="id" title="binder">Φ</span></a> <a id="e:127" class="idref" href="#e:127"><span class="id" title="binder">e</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.to_val"><span class="id" title="definition">to_val</span></a> <a class="idref" href="clutch.lib.flip.html#e:127"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="instance">nclose</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.lib.flip.html#E:123"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">▷</span> <a class="idref" href="clutch.lib.flip.html#8b06c7f377fe87a003e02f2986a9caf5"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#bs:125"><span class="id" title="variable">bs</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.lib.flip.html#K:122"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="b:128" class="idref" href="#b:128"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.lib.flip.html#8b06c7f377fe87a003e02f2986a9caf5"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.lib.flip.html#bs:125"><span class="id" title="variable">bs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.lib.flip.html#b:128"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.lib.flip.html#K:122"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#(</span></a><a class="idref" href="clutch.lib.flip.html#f:120"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.lib.flip.html#b:128"><span class="id" title="variable">b</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">)</span></a> <span class="id" title="notation">-∗</span> <span class="id" title="notation">WP</span> <a class="idref" href="clutch.lib.flip.html#e:127"><span class="id" title="variable">e</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.lib.flip.html#E:123"><span class="id" title="variable">E</span></a> <span class="id" title="notation">{{</span> <a class="idref" href="clutch.lib.flip.html#59b01455388855e72eb2fe1d499d2c45"><span class="id" title="variable">Φ</span></a> <span class="id" title="notation">}}</span><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> <span class="id" title="notation">WP</span> <a class="idref" href="clutch.lib.flip.html#e:127"><span class="id" title="variable">e</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.lib.flip.html#E:123"><span class="id" title="variable">E</span></a> <span class="id" title="notation">{{</span> <a class="idref" href="clutch.lib.flip.html#59b01455388855e72eb2fe1d499d2c45"><span class="id" title="variable">Φ</span></a> <span class="id" title="notation">}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (??) "(Hα &amp; Hr &amp; Hcnt)". <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a>/<a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>. <span class="id" title="var">tp_bind</span> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">rand</span></a> <span class="id" title="var">_</span> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">from</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<a class="idref" href="clutch.rel_logic.coupling_rules.html#wp_couple_tape_rand"><span class="id" title="lemma">wp_couple_tape_rand</span></a> 1 (<a class="idref" href="clutch.lib.flip.html#fn_bool_to_fin"><span class="id" title="definition">fn_bool_to_fin</span></a> <span class="id" title="var">f</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> 1); [<span class="id" title="var">done</span>|<span class="id" title="var">solve_ndisj</span>|<span class="id" title="var">iFrame</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">n</span>) "[Hα Hr]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.lib.conversion.html#refines_right_int_to_bool"><span class="id" title="lemma">refines_right_int_to_bool</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hr"; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span>"Hcnt" <span class="id" title="notation">with</span> "[-]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#Z_to_bool_of_nat"><span class="id" title="lemma">Z_to_bool_of_nat</span></a> !<a class="idref" href="clutch.prelude.stdpp_ext.html#bool_to_fin_to_nat_inv"><span class="id" title="lemma">bool_to_fin_to_nat_inv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">surj</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#bool_to_fin"><span class="id" title="definition">bool_to_fin</span></a> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span> &lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#bool_to_fin_to_bool"><span class="id" title="lemma">bool_to_fin_to_bool</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">list_fmap_singleton</span> -<span class="id" title="lemma">fmap_app</span> //.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="refines_couple_tape_flip" class="idref" href="#refines_couple_tape_flip"><span class="id" title="lemma">refines_couple_tape_flip</span></a> <a id="K':129" class="idref" href="#K':129"><span class="id" title="binder">K'</span></a> <a id="E:130" class="idref" href="#E:130"><span class="id" title="binder">E</span></a> <a id="22fec0b499ec1afc8a3fd1a646ed2f6f" class="idref" href="#22fec0b499ec1afc8a3fd1a646ed2f6f"><span class="id" title="binder">α</span></a> <a id="A:132" class="idref" href="#A:132"><span class="id" title="binder">A</span></a> <a id="bs:133" class="idref" href="#bs:133"><span class="id" title="binder">bs</span></a> <a id="e:134" class="idref" href="#e:134"><span class="id" title="binder">e</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="instance">nclose</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.lib.flip.html#E:130"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.to_val"><span class="id" title="definition">to_val</span></a> <a class="idref" href="clutch.lib.flip.html#e:134"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">▷</span> <a class="idref" href="clutch.lib.flip.html#22fec0b499ec1afc8a3fd1a646ed2f6f"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#bs:133"><span class="id" title="variable">bs</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="b:135" class="idref" href="#b:135"><span class="id" title="binder">b</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.lib.flip.html#22fec0b499ec1afc8a3fd1a646ed2f6f"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.lib.flip.html#bs:133"><span class="id" title="variable">bs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.lib.flip.html#b:135"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">)</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.lib.flip.html#e:134"><span class="id" title="variable">e</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K':129"><span class="id" title="variable">K'</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.flip.html#b:135"><span class="id" title="variable">b</span></a>) <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:130"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:132"><span class="id" title="variable">A</span></a><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.lib.flip.html#e:134"><span class="id" title="variable">e</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K':129"><span class="id" title="variable">K'</span></a> <a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:130"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:132"><span class="id" title="variable">A</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (??) "[Hα Hcnt]". <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a>/<a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_pures_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_apply_r</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_couple_tape_rand"><span class="id" title="definition">refines_couple_tape_rand</span></a>; [<span class="id" title="var">done</span>|<span class="id" title="var">iFrame</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">n</span>) "Hα".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">surj</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#bool_to_fin"><span class="id" title="definition">bool_to_fin</span></a> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span> &lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">list_fmap_singleton</span> -!<span class="id" title="lemma">fmap_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSpecialize</span> <span class="id" title="notation">(</span>"Hcnt" <span class="id" title="notation">with</span> "Hα"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_apply_r</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_step_r"><span class="id" title="lemma">refines_step_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">K''</span>) "Hr".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.lib.conversion.html#refines_right_int_to_bool"><span class="id" title="lemma">refines_right_int_to_bool</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span>; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>; <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#Z_to_bool_of_nat"><span class="id" title="lemma">Z_to_bool_of_nat</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#bool_to_fin_to_nat_inv"><span class="id" title="lemma">bool_to_fin_to_nat_inv</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
flip ~ tape 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_couple_flip_tape" class="idref" href="#wp_couple_flip_tape"><span class="id" title="lemma">wp_couple_flip_tape</span></a> <a id="f:136" class="idref" href="#f:136"><span class="id" title="binder">f</span></a> `{<a id="H0:137" class="idref" href="#H0:137"><span class="id" title="binder">Bij</span></a> <a id="H0:137" class="idref" href="#H0:137"><span class="id" title="binder">bool</span></a> <a id="H0:137" class="idref" href="#H0:137"><span class="id" title="binder">bool</span></a> <a id="H0:137" class="idref" href="#H0:137"><span class="id" title="binder">f</span></a>} <a id="E:138" class="idref" href="#E:138"><span class="id" title="binder">E</span></a> <a id="83c5bbcc4e6af2f01d83276a6414bf10" class="idref" href="#83c5bbcc4e6af2f01d83276a6414bf10"><span class="id" title="binder">α</span></a> <a id="bs:140" class="idref" href="#bs:140"><span class="id" title="binder">bs</span></a> <a id="06ab7a256467d3a258cb4b7c1c33a0b0" class="idref" href="#06ab7a256467d3a258cb4b7c1c33a0b0"><span class="id" title="binder">Φ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="instance">nclose</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.lib.flip.html#E:138"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="clutch.lib.flip.html#83c5bbcc4e6af2f01d83276a6414bf10"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#bs:140"><span class="id" title="variable">bs</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">▷</span> <span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="b:142" class="idref" href="#b:142"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.lib.flip.html#83c5bbcc4e6af2f01d83276a6414bf10"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.lib.flip.html#bs:140"><span class="id" title="variable">bs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.lib.flip.html#f:136"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.lib.flip.html#b:142"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">)</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="clutch.lib.flip.html#06ab7a256467d3a258cb4b7c1c33a0b0"><span class="id" title="variable">Φ</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.flip.html#b:142"><span class="id" title="variable">b</span></a><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> <span class="id" title="notation">WP</span> <a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.lib.flip.html#E:138"><span class="id" title="variable">E</span></a> <span class="id" title="notation">{{</span> <a class="idref" href="clutch.lib.flip.html#06ab7a256467d3a258cb4b7c1c33a0b0"><span class="id" title="variable">Φ</span></a> <span class="id" title="notation">}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "(#Hctx &amp; Hα &amp; Hcnt)". <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a>/<a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="var">wp_bind</span> (<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">rand</span></a> <span class="id" title="var">_</span> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'rand'_x_'from'_x"><span class="id" title="notation">from</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<a class="idref" href="clutch.rel_logic.coupling_rules.html#wp_couple_rand_tape"><span class="id" title="lemma">wp_couple_rand_tape</span></a> 1 (<a class="idref" href="clutch.lib.flip.html#fn_bool_to_fin"><span class="id" title="definition">fn_bool_to_fin</span></a> <span class="id" title="var">f</span>)); [<span class="id" title="var">solve_ndisj</span>|<span class="id" title="var">iFrame</span> "Hctx Hα"].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;" (<span class="id" title="var">n</span>) "Hα".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.lib.conversion.html#wp_int_to_bool"><span class="id" title="lemma">wp_int_to_bool</span></a> <span class="id" title="notation">with</span> "[//]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "_".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span>"Hcnt" <span class="id" title="notation">with</span> "[-]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">surj</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#bool_to_fin"><span class="id" title="definition">bool_to_fin</span></a> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span> &lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#Z_to_bool_of_nat"><span class="id" title="lemma">Z_to_bool_of_nat</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#bool_to_fin_to_nat_inv"><span class="id" title="lemma">bool_to_fin_to_nat_inv</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.flip.html#fn_bool_to_fin"><span class="id" title="definition">fn_bool_to_fin</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#bool_to_fin_to_bool"><span class="id" title="lemma">bool_to_fin_to_bool</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">list_fmap_singleton</span> -<span class="id" title="lemma">fmap_app</span> //.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="refines_couple_flip_tape" class="idref" href="#refines_couple_flip_tape"><span class="id" title="lemma">refines_couple_flip_tape</span></a> <a id="K:143" class="idref" href="#K:143"><span class="id" title="binder">K</span></a> <a id="E:144" class="idref" href="#E:144"><span class="id" title="binder">E</span></a> <a id="83bddb7d49a9d900e72807511386fc24" class="idref" href="#83bddb7d49a9d900e72807511386fc24"><span class="id" title="binder">α</span></a> <a id="A:146" class="idref" href="#A:146"><span class="id" title="binder">A</span></a> <a id="bs:147" class="idref" href="#bs:147"><span class="id" title="binder">bs</span></a> <a id="e:148" class="idref" href="#e:148"><span class="id" title="binder">e</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">▷</span> <a class="idref" href="clutch.lib.flip.html#83bddb7d49a9d900e72807511386fc24"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#bs:147"><span class="id" title="variable">bs</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">▷</span> <span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="b:149" class="idref" href="#b:149"><span class="id" title="binder">b</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.lib.flip.html#83bddb7d49a9d900e72807511386fc24"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.lib.flip.html#bs:147"><span class="id" title="variable">bs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="clutch.lib.flip.html#b:149"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">)</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:143"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.flip.html#b:149"><span class="id" title="variable">b</span></a>) <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.lib.flip.html#e:148"><span class="id" title="variable">e</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:144"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:146"><span class="id" title="variable">A</span></a><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:143"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.lib.flip.html#e:148"><span class="id" title="variable">e</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:144"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:146"><span class="id" title="variable">A</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "[Hαs Hcnt]". <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a>/<a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_pures_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_apply_l</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_couple_rand_tape"><span class="id" title="definition">refines_couple_rand_tape</span></a>; <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;" (<span class="id" title="var">n</span>) "Hα".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">surj</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#bool_to_fin"><span class="id" title="definition">bool_to_fin</span></a> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span> &lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">list_fmap_singleton</span> -!<span class="id" title="lemma">fmap_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSpecialize</span> <span class="id" title="notation">(</span>"Hcnt" <span class="id" title="notation">with</span> "Hα"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_wp_l"><span class="id" title="lemma">refines_wp_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.lib.conversion.html#wp_int_to_bool"><span class="id" title="lemma">wp_int_to_bool</span></a> <span class="id" title="notation">with</span> "[//]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "_".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#Z_to_bool_of_nat"><span class="id" title="lemma">Z_to_bool_of_nat</span></a> <a class="idref" href="clutch.prelude.stdpp_ext.html#bool_to_fin_to_nat_inv"><span class="id" title="lemma">bool_to_fin_to_nat_inv</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
flipL ~ flip  
</div>
<div class="code">
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;wp_couple_flipL_flip&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="refines_couple_flipL_flip" class="idref" href="#refines_couple_flipL_flip"><span class="id" title="lemma">refines_couple_flipL_flip</span></a> <a id="K:150" class="idref" href="#K:150"><span class="id" title="binder">K</span></a> <a id="K':151" class="idref" href="#K':151"><span class="id" title="binder">K'</span></a> <a id="E:152" class="idref" href="#E:152"><span class="id" title="binder">E</span></a> <a id="68071e4e44091d388fb275a4248708af" class="idref" href="#68071e4e44091d388fb275a4248708af"><span class="id" title="binder">α</span></a> <a id="A:154" class="idref" href="#A:154"><span class="id" title="binder">A</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="instance">nclose</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.lib.flip.html#E:152"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">▷</span> <a class="idref" href="clutch.lib.flip.html#68071e4e44091d388fb275a4248708af"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">▷</span> <span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="b:155" class="idref" href="#b:155"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.lib.flip.html#68071e4e44091d388fb275a4248708af"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:150"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.flip.html#b:155"><span class="id" title="variable">b</span></a>) <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K':151"><span class="id" title="variable">K'</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.flip.html#b:155"><span class="id" title="variable">b</span></a>) <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:152"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:154"><span class="id" title="variable">A</span></a><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:150"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a> <a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.lib.flip.html#68071e4e44091d388fb275a4248708af"><span class="id" title="variable">α</span></a>) <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K':151"><span class="id" title="variable">K'</span></a> <a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:152"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:154"><span class="id" title="variable">A</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "(Hα &amp; H)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_pures_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="clutch.lib.flip.html#refines_couple_tape_flip"><span class="id" title="lemma">refines_couple_tape_flip</span></a>; [<span class="id" title="var">done</span>| |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill_not_val"><span class="id" title="lemma">fill_not_val</span></a> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span> =&gt; /=. <span class="id" title="var">iIntros</span> (<span class="id" title="var">b</span>) "Hα".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<a class="idref" href="clutch.lib.flip.html#refines_flipL_l"><span class="id" title="lemma">refines_flipL_l</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="var">iIntros</span> "!&gt;". <span class="id" title="var">iApply</span> "H".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
flip ~ flipL  
</div>
<div class="code">
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;wp_couple_flip_flipL&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="refines_couple_flip_flipL" class="idref" href="#refines_couple_flip_flipL"><span class="id" title="lemma">refines_couple_flip_flipL</span></a> <a id="K:156" class="idref" href="#K:156"><span class="id" title="binder">K</span></a> <a id="K':157" class="idref" href="#K':157"><span class="id" title="binder">K'</span></a> <a id="E:158" class="idref" href="#E:158"><span class="id" title="binder">E</span></a> <a id="44fe85fc64808b6f043007684c03b88e" class="idref" href="#44fe85fc64808b6f043007684c03b88e"><span class="id" title="binder">α</span></a> <a id="A:160" class="idref" href="#A:160"><span class="id" title="binder">A</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">▷</span> <a class="idref" href="clutch.lib.flip.html#44fe85fc64808b6f043007684c03b88e"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">▷</span> <span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="b:161" class="idref" href="#b:161"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.lib.flip.html#44fe85fc64808b6f043007684c03b88e"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:156"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.flip.html#b:161"><span class="id" title="variable">b</span></a>) <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K':157"><span class="id" title="variable">K'</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.flip.html#b:161"><span class="id" title="variable">b</span></a>) <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:158"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:160"><span class="id" title="variable">A</span></a><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:156"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K':157"><span class="id" title="variable">K'</span></a> (<a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a> <a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.lib.flip.html#44fe85fc64808b6f043007684c03b88e"><span class="id" title="variable">α</span></a>) <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">@</span></a> <a class="idref" href="clutch.lib.flip.html#E:158"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.rel_logic.model.html#d3c268bd640b3c62d79ad39eb13de4cf"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.lib.flip.html#A:160"><span class="id" title="variable">A</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "(Hα &amp; H)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="clutch.lib.flip.html#refines_couple_flip_tape"><span class="id" title="lemma">refines_couple_flip_tape</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;" (<span class="id" title="var">n</span>) "Hα".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.lib.flip.html#refines_flipL_r"><span class="id" title="lemma">refines_flipL_r</span></a> <span class="id" title="notation">with</span> "Hα"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "α". <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "H".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="clutch.lib.flip.html#specs"><span class="id" title="section">specs</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="tac_rel_allocBtape_l_simpl" class="idref" href="#tac_rel_allocBtape_l_simpl"><span class="id" title="lemma">tac_rel_allocBtape_l_simpl</span></a> `{<a id="clutchRGS0:163" class="idref" href="#clutchRGS0:163"><span class="id" title="binder">!</span></a><a id="clutchRGS0:163" class="idref" href="#clutchRGS0:163"><span class="id" title="binder">clutchRGS</span></a> <a id="clutchRGS0:163" class="idref" href="#clutchRGS0:163"><span class="id" title="binder">Σ</span></a>} <a id="K:164" class="idref" href="#K:164"><span class="id" title="binder">K</span></a> <a id="0c4c21cbb6ecdf32d6c580eafc892e29" class="idref" href="#0c4c21cbb6ecdf32d6c580eafc892e29"><span class="id" title="binder">ℶ1</span></a> <a id="0719e259358669bcbcdca69f2d56fd0c" class="idref" href="#0719e259358669bcbcdca69f2d56fd0c"><span class="id" title="binder">ℶ2</span></a> <a id="e:167" class="idref" href="#e:167"><span class="id" title="binder">e</span></a> <a id="t:168" class="idref" href="#t:168"><span class="id" title="binder">t</span></a> <a id="A:169" class="idref" href="#A:169"><span class="id" title="binder">A</span></a> <a id="E:170" class="idref" href="#E:170"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.lib.flip.html#e:167"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:164"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.lib.flip.html#allocB"><span class="id" title="definition">allocB</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="class">MaybeIntoLaterNEnvs</span> 1 <a class="idref" href="clutch.lib.flip.html#0c4c21cbb6ecdf32d6c580eafc892e29"><span class="id" title="variable">ℶ1</span></a> <a class="idref" href="clutch.lib.flip.html#0719e259358669bcbcdca69f2d56fd0c"><span class="id" title="variable">ℶ2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><span class="id" title="definition">envs_entails</span> <a class="idref" href="clutch.lib.flip.html#0719e259358669bcbcdca69f2d56fd0c"><span class="id" title="variable">ℶ2</span></a> (<span class="id" title="notation">∀</span> <span class="id" title="notation">(</span><a id="d04ec882e7ecfa868d9557c16ba4c23c" class="idref" href="#d04ec882e7ecfa868d9557c16ba4c23c"><span class="id" title="binder">α</span></a> : <a class="idref" href="clutch.prob_lang.locations.html#loc"><span class="id" title="record">loc</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="clutch.lib.flip.html#d04ec882e7ecfa868d9557c16ba4c23c"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="clutch.rel_logic.model.html#refines"><span class="id" title="definition">refines</span></a> <a class="idref" href="clutch.lib.flip.html#E:170"><span class="id" title="variable">E</span></a> (<a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:164"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.lib.flip.html#d04ec882e7ecfa868d9557c16ba4c23c"><span class="id" title="variable">α</span></a>)) <a class="idref" href="clutch.lib.flip.html#t:168"><span class="id" title="variable">t</span></a> <a class="idref" href="clutch.lib.flip.html#A:169"><span class="id" title="variable">A</span></a><span class="id" title="notation">)</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">envs_entails</span> <a class="idref" href="clutch.lib.flip.html#0c4c21cbb6ecdf32d6c580eafc892e29"><span class="id" title="variable">ℶ1</span></a> (<a class="idref" href="clutch.rel_logic.model.html#refines"><span class="id" title="definition">refines</span></a> <a class="idref" href="clutch.lib.flip.html#E:170"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.lib.flip.html#e:167"><span class="id" title="variable">e</span></a> <a class="idref" href="clutch.lib.flip.html#t:168"><span class="id" title="variable">t</span></a> <a class="idref" href="clutch.lib.flip.html#A:169"><span class="id" title="variable">A</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> ???. <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.rel_logic.rel_tactics.html#tac_rel_alloctape_l_simpl"><span class="id" title="lemma">tac_rel_alloctape_l_simpl</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "rel_allocBtape_l" <span class="id" title="var">ident</span>(<span class="id" title="var">l</span>) "as" <span class="id" title="keyword">constr</span>(<span class="id" title="var">H</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">rel_pures_l</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">first</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">rel_reshape_cont_l</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">K</span> <span class="id" title="var">e'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="clutch.lib.flip.html#tac_rel_allocBtape_l_simpl"><span class="id" title="lemma">tac_rel_allocBtape_l_simpl</span></a> <span class="id" title="var">K</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">reflexivity</span> </div>

<div class="doc">
e = fill K (Alloc e') 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id" title="tactic">idtac</span>..])<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id" title="tactic">fail</span> 1 "rel_allocBtape_l: cannot find 'allocB'"];<br/>
&nbsp;&nbsp;[<span class="id" title="var">iSolveTC</span>        </div>

<div class="doc">
IntoLaters 
</div>
<div class="code">
&nbsp;&nbsp;|<span class="id" title="var">iIntros</span> (<span class="id" title="var">l</span>) <span class="id" title="var">H</span>; <span class="id" title="var">rel_finish</span>  </div>

<div class="doc">
new goal </div>
<div class="code">
].<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="tac_rel_allocBtape_r" class="idref" href="#tac_rel_allocBtape_r"><span class="id" title="lemma">tac_rel_allocBtape_r</span></a> `{<a id="clutchRGS0:173" class="idref" href="#clutchRGS0:173"><span class="id" title="binder">!</span></a><a id="clutchRGS0:173" class="idref" href="#clutchRGS0:173"><span class="id" title="binder">clutchRGS</span></a> <a id="clutchRGS0:173" class="idref" href="#clutchRGS0:173"><span class="id" title="binder">Σ</span></a>} <a id="K':174" class="idref" href="#K':174"><span class="id" title="binder">K'</span></a> <a id="e66bbcec7b705f956dfff0ea28023493" class="idref" href="#e66bbcec7b705f956dfff0ea28023493"><span class="id" title="binder">ℶ</span></a> <a id="E:176" class="idref" href="#E:176"><span class="id" title="binder">E</span></a> <a id="e:177" class="idref" href="#e:177"><span class="id" title="binder">e</span></a> <a id="t:178" class="idref" href="#t:178"><span class="id" title="binder">t</span></a> <a id="A:179" class="idref" href="#A:179"><span class="id" title="binder">A</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.lib.flip.html#t:178"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K':174"><span class="id" title="variable">K'</span></a> <a class="idref" href="clutch.lib.flip.html#allocB"><span class="id" title="definition">allocB</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="instance">nclose</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.lib.flip.html#E:176"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">envs_entails</span> <a class="idref" href="clutch.lib.flip.html#e66bbcec7b705f956dfff0ea28023493"><span class="id" title="variable">ℶ</span></a> (<span class="id" title="notation">∀</span> <a id="031abda17f45ba80f1448c380c4170e7" class="idref" href="#031abda17f45ba80f1448c380c4170e7"><span class="id" title="binder">α</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.lib.flip.html#031abda17f45ba80f1448c380c4170e7"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="clutch.rel_logic.model.html#refines"><span class="id" title="definition">refines</span></a> <a class="idref" href="clutch.lib.flip.html#E:176"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.lib.flip.html#e:177"><span class="id" title="variable">e</span></a> (<a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K':174"><span class="id" title="variable">K'</span></a> <a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.lib.flip.html#031abda17f45ba80f1448c380c4170e7"><span class="id" title="variable">α</span></a>) <a class="idref" href="clutch.lib.flip.html#A:179"><span class="id" title="variable">A</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">envs_entails</span> <a class="idref" href="clutch.lib.flip.html#e66bbcec7b705f956dfff0ea28023493"><span class="id" title="variable">ℶ</span></a> (<a class="idref" href="clutch.rel_logic.model.html#refines"><span class="id" title="definition">refines</span></a> <a class="idref" href="clutch.lib.flip.html#E:176"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.lib.flip.html#e:177"><span class="id" title="variable">e</span></a> <a class="idref" href="clutch.lib.flip.html#t:178"><span class="id" title="variable">t</span></a> <a class="idref" href="clutch.lib.flip.html#A:179"><span class="id" title="variable">A</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> ???. <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.rel_logic.rel_tactics.html#tac_rel_alloctape_r"><span class="id" title="lemma">tac_rel_alloctape_r</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "rel_allocBtape_r" <span class="id" title="var">ident</span>(<span class="id" title="var">l</span>) "as" <span class="id" title="keyword">constr</span>(<span class="id" title="var">H</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">rel_pures_r</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">first</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">rel_reshape_cont_r</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">K</span> <span class="id" title="var">e'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="clutch.lib.flip.html#tac_rel_allocBtape_r"><span class="id" title="lemma">tac_rel_allocBtape_r</span></a> <span class="id" title="var">K</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">reflexivity</span>  </div>

<div class="doc">
t = K'<span class="inlinecode"><a class="idref" href="clutch.prob_lang.notation.html#alloc"><span class="id" title="abbreviation">alloc</span></a></span> <span class="inlinecode"><span class="id" title="var">t'</span></span> 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id" title="tactic">idtac</span>..])<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id" title="tactic">fail</span> 1 "rel_allocBtape_r: cannot find 'allocB'"];<br/>
&nbsp;&nbsp;[<span class="id" title="var">solve_ndisj</span> || <span class="id" title="tactic">fail</span> "rel_allocBtape_r: cannot prove 'nclose specN ⊆ ?'"<br/>
&nbsp;&nbsp;|<span class="id" title="var">iIntros</span> (<span class="id" title="var">l</span>) <span class="id" title="var">H</span>; <span class="id" title="var">rel_finish</span>  </div>

<div class="doc">
new goal </div>
<div class="code">
].<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "rel_allocBtape_r" :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">l</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">H</span> := <span class="id" title="var">iFresh</span> "H" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">rel_alloctape_r</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> <span class="id" title="var">H</span>.<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "rel_allocBtape_l" :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">l</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">H</span> := <span class="id" title="var">iFresh</span> "H" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">rel_alloctape_l</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> <span class="id" title="var">H</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="tac_rel_flipL_l" class="idref" href="#tac_rel_flipL_l"><span class="id" title="lemma">tac_rel_flipL_l</span></a> `{<a id="clutchRGS0:182" class="idref" href="#clutchRGS0:182"><span class="id" title="binder">!</span></a><a id="clutchRGS0:182" class="idref" href="#clutchRGS0:182"><span class="id" title="binder">clutchRGS</span></a> <a id="clutchRGS0:182" class="idref" href="#clutchRGS0:182"><span class="id" title="binder">Σ</span></a>} <a id="K:183" class="idref" href="#K:183"><span class="id" title="binder">K</span></a> <a id="497a5f7fb2a723ebfbe67d51becd0df7" class="idref" href="#497a5f7fb2a723ebfbe67d51becd0df7"><span class="id" title="binder">ℶ1</span></a> <a id="86cae32b0dd76b4625548c19f56641e5" class="idref" href="#86cae32b0dd76b4625548c19f56641e5"><span class="id" title="binder">ℶ2</span></a> <a id="i1:186" class="idref" href="#i1:186"><span class="id" title="binder">i1</span></a> (<a id="aaf2bb5b469b4efeeb34a06a45419908" class="idref" href="#aaf2bb5b469b4efeeb34a06a45419908"><span class="id" title="binder">α</span></a> : <a class="idref" href="clutch.prob_lang.locations.html#loc"><span class="id" title="record">loc</span></a>) <a id="n:188" class="idref" href="#n:188"><span class="id" title="binder">n</span></a> <a id="ns:189" class="idref" href="#ns:189"><span class="id" title="binder">ns</span></a> <a id="e:190" class="idref" href="#e:190"><span class="id" title="binder">e</span></a> <a id="t:191" class="idref" href="#t:191"><span class="id" title="binder">t</span></a> <a id="tres:192" class="idref" href="#tres:192"><span class="id" title="binder">tres</span></a> <a id="A:193" class="idref" href="#A:193"><span class="id" title="binder">A</span></a> <a id="E:194" class="idref" href="#E:194"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.lib.flip.html#t:191"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:183"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a> <a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.lib.flip.html#aaf2bb5b469b4efeeb34a06a45419908"><span class="id" title="variable">α</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">envs_lookup</span> <a class="idref" href="clutch.lib.flip.html#i1:186"><span class="id" title="variable">i1</span></a> <a class="idref" href="clutch.lib.flip.html#497a5f7fb2a723ebfbe67d51becd0df7"><span class="id" title="variable">ℶ1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.lib.flip.html#aaf2bb5b469b4efeeb34a06a45419908"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.lib.flip.html#n:188"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="clutch.lib.flip.html#ns:189"><span class="id" title="variable">ns</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>%<span class="id" title="var">I</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">envs_simple_replace</span> <a class="idref" href="clutch.lib.flip.html#i1:186"><span class="id" title="variable">i1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> (<span class="id" title="constructor">Esnoc</span> <span class="id" title="constructor">Enil</span> <a class="idref" href="clutch.lib.flip.html#i1:186"><span class="id" title="variable">i1</span></a> (<a class="idref" href="clutch.lib.flip.html#aaf2bb5b469b4efeeb34a06a45419908"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#ns:189"><span class="id" title="variable">ns</span></a>)) <a class="idref" href="clutch.lib.flip.html#497a5f7fb2a723ebfbe67d51becd0df7"><span class="id" title="variable">ℶ1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.lib.flip.html#86cae32b0dd76b4625548c19f56641e5"><span class="id" title="variable">ℶ2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.lib.flip.html#tres:192"><span class="id" title="variable">tres</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:183"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.flip.html#n:188"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">envs_entails</span> <a class="idref" href="clutch.lib.flip.html#86cae32b0dd76b4625548c19f56641e5"><span class="id" title="variable">ℶ2</span></a> (<a class="idref" href="clutch.rel_logic.model.html#refines"><span class="id" title="definition">refines</span></a> <a class="idref" href="clutch.lib.flip.html#E:194"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.lib.flip.html#tres:192"><span class="id" title="variable">tres</span></a> <a class="idref" href="clutch.lib.flip.html#e:190"><span class="id" title="variable">e</span></a> <a class="idref" href="clutch.lib.flip.html#A:193"><span class="id" title="variable">A</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">envs_entails</span> <a class="idref" href="clutch.lib.flip.html#497a5f7fb2a723ebfbe67d51becd0df7"><span class="id" title="variable">ℶ1</span></a> (<a class="idref" href="clutch.rel_logic.model.html#refines"><span class="id" title="definition">refines</span></a> <a class="idref" href="clutch.lib.flip.html#E:194"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.lib.flip.html#t:191"><span class="id" title="variable">t</span></a> <a class="idref" href="clutch.lib.flip.html#e:190"><span class="id" title="variable">e</span></a> <a class="idref" href="clutch.lib.flip.html#A:193"><span class="id" title="variable">A</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="definition">envs_entails_unseal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ???? <span class="id" title="var">Hg</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">t</span> <span class="id" title="var">tres</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">envs_simple_replace_sound</span> //; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="definition">right_id</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hg</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="clutch.lib.flip.html#refines_flipL_l"><span class="id" title="lemma">refines_flipL_l</span></a> <span class="id" title="var">_</span> <span class="id" title="var">K</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">bi.later_sep</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">bi.later_intro</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="tac_rel_flipL_r" class="idref" href="#tac_rel_flipL_r"><span class="id" title="lemma">tac_rel_flipL_r</span></a> `{<a id="clutchRGS0:196" class="idref" href="#clutchRGS0:196"><span class="id" title="binder">!</span></a><a id="clutchRGS0:196" class="idref" href="#clutchRGS0:196"><span class="id" title="binder">clutchRGS</span></a> <a id="clutchRGS0:196" class="idref" href="#clutchRGS0:196"><span class="id" title="binder">Σ</span></a>} <a id="K:197" class="idref" href="#K:197"><span class="id" title="binder">K</span></a> <a id="1d122144601a11f2be7bdeb6eb7fdbdb" class="idref" href="#1d122144601a11f2be7bdeb6eb7fdbdb"><span class="id" title="binder">ℶ1</span></a> <a id="0dfd911ff637b7819f386674726627dc" class="idref" href="#0dfd911ff637b7819f386674726627dc"><span class="id" title="binder">ℶ2</span></a> <a id="E:200" class="idref" href="#E:200"><span class="id" title="binder">E</span></a> <a id="i1:201" class="idref" href="#i1:201"><span class="id" title="binder">i1</span></a> (<a id="df0b7c81f2582e40191a474cf153b4c8" class="idref" href="#df0b7c81f2582e40191a474cf153b4c8"><span class="id" title="binder">α</span></a> : <a class="idref" href="clutch.prob_lang.locations.html#loc"><span class="id" title="record">loc</span></a>) <a id="n:203" class="idref" href="#n:203"><span class="id" title="binder">n</span></a> <a id="ns:204" class="idref" href="#ns:204"><span class="id" title="binder">ns</span></a> <a id="e:205" class="idref" href="#e:205"><span class="id" title="binder">e</span></a> <a id="t:206" class="idref" href="#t:206"><span class="id" title="binder">t</span></a> <a id="tres:207" class="idref" href="#tres:207"><span class="id" title="binder">tres</span></a> <a id="A:208" class="idref" href="#A:208"><span class="id" title="binder">A</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="clutch.lib.flip.html#t:206"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:197"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a> (<a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">lbl</span></a><a class="idref" href="clutch.prob_lang.notation.html#3c0d92df4cb553f56e51c75fd64a5753"><span class="id" title="notation">:</span></a><a class="idref" href="clutch.lib.flip.html#df0b7c81f2582e40191a474cf153b4c8"><span class="id" title="variable">α</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="instance">nclose</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.lib.flip.html#E:200"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">envs_lookup</span> <a class="idref" href="clutch.lib.flip.html#i1:201"><span class="id" title="variable">i1</span></a> <a class="idref" href="clutch.lib.flip.html#1d122144601a11f2be7bdeb6eb7fdbdb"><span class="id" title="variable">ℶ1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.lib.flip.html#df0b7c81f2582e40191a474cf153b4c8"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.lib.flip.html#n:203"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="clutch.lib.flip.html#ns:204"><span class="id" title="variable">ns</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>%<span class="id" title="var">I</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">envs_simple_replace</span> <a class="idref" href="clutch.lib.flip.html#i1:201"><span class="id" title="variable">i1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> (<span class="id" title="constructor">Esnoc</span> <span class="id" title="constructor">Enil</span> <a class="idref" href="clutch.lib.flip.html#i1:201"><span class="id" title="variable">i1</span></a> (<a class="idref" href="clutch.lib.flip.html#df0b7c81f2582e40191a474cf153b4c8"><span class="id" title="variable">α</span></a> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#ns:204"><span class="id" title="variable">ns</span></a>)) <a class="idref" href="clutch.lib.flip.html#1d122144601a11f2be7bdeb6eb7fdbdb"><span class="id" title="variable">ℶ1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="clutch.lib.flip.html#0dfd911ff637b7819f386674726627dc"><span class="id" title="variable">ℶ2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.lib.flip.html#tres:207"><span class="id" title="variable">tres</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.program_logic.ectxi_language.html#fill"><span class="id" title="definition">fill</span></a> <a class="idref" href="clutch.lib.flip.html#K:197"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.lib.flip.html#n:203"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">envs_entails</span> <a class="idref" href="clutch.lib.flip.html#0dfd911ff637b7819f386674726627dc"><span class="id" title="variable">ℶ2</span></a> (<a class="idref" href="clutch.rel_logic.model.html#refines"><span class="id" title="definition">refines</span></a> <a class="idref" href="clutch.lib.flip.html#E:200"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.lib.flip.html#e:205"><span class="id" title="variable">e</span></a> <a class="idref" href="clutch.lib.flip.html#tres:207"><span class="id" title="variable">tres</span></a> <a class="idref" href="clutch.lib.flip.html#A:208"><span class="id" title="variable">A</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">envs_entails</span> <a class="idref" href="clutch.lib.flip.html#1d122144601a11f2be7bdeb6eb7fdbdb"><span class="id" title="variable">ℶ1</span></a> (<a class="idref" href="clutch.rel_logic.model.html#refines"><span class="id" title="definition">refines</span></a> <a class="idref" href="clutch.lib.flip.html#E:200"><span class="id" title="variable">E</span></a> <a class="idref" href="clutch.lib.flip.html#e:205"><span class="id" title="variable">e</span></a> <a class="idref" href="clutch.lib.flip.html#t:206"><span class="id" title="variable">t</span></a> <a class="idref" href="clutch.lib.flip.html#A:208"><span class="id" title="variable">A</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="definition">envs_entails_unseal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ????? <span class="id" title="var">Hg</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">t</span> <span class="id" title="var">tres</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">envs_simple_replace_sound</span> //; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="definition">right_id</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="clutch.lib.flip.html#refines_flipL_r"><span class="id" title="lemma">refines_flipL_r</span></a> <span class="id" title="var">_</span> <span class="id" title="var">K</span>) //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hg</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">bi.wand_elim_l</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "rel_flipL_l" :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">solve_mapsto</span> <span class="id" title="var">_</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">α</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> (?<span class="id" title="var">α</span> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">I</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <span class="id" title="var">α</span> <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssumptionCore</span> || <span class="id" title="tactic">fail</span> "rel_flipL_l: cannot find" <span class="id" title="var">α</span> "↪B ?" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">rel_pures_l</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">first</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">rel_reshape_cont_l</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">K</span> <span class="id" title="var">e'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="clutch.lib.flip.html#tac_rel_flipL_l"><span class="id" title="lemma">tac_rel_flipL_l</span></a> <span class="id" title="var">K</span>); [<span class="id" title="tactic">reflexivity</span>|..])<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id" title="tactic">fail</span> 1 "rel_flipL_l: cannot find 'flip'"];<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;the&nbsp;remaining&nbsp;goals&nbsp;are&nbsp;from&nbsp;tac_rel_flipL_l&nbsp;(except&nbsp;for&nbsp;the&nbsp;first&nbsp;one,&nbsp;which&nbsp;has&nbsp;already&nbsp;been&nbsp;solved&nbsp;by&nbsp;this&nbsp;point)&nbsp;*)</span><br/>
&nbsp;&nbsp;[<span class="id" title="var">solve_mapsto</span> ()<br/>
&nbsp;&nbsp;|<span class="id" title="var">pm_reflexivity</span> || <span class="id" title="tactic">fail</span> "rel_flipL_l: this should not happen O-:"<br/>
&nbsp;&nbsp;|<span class="id" title="tactic">reflexivity</span><br/>
&nbsp;&nbsp;|<span class="id" title="var">rel_finish</span>  </div>

<div class="doc">
new goal </div>
<div class="code">
].<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "rel_flipL_r" :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">solve_mapsto</span> <span class="id" title="var">_</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">l</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> (?<span class="id" title="var">l</span> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">I</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <span class="id" title="var">l</span> <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssumptionCore</span> || <span class="id" title="tactic">fail</span> "rel_flipL_r: cannot find" <span class="id" title="var">l</span> "↪ₛB ?" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">rel_pures_r</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">first</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">rel_reshape_cont_r</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">K</span> <span class="id" title="var">e'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="clutch.lib.flip.html#tac_rel_flipL_r"><span class="id" title="lemma">tac_rel_flipL_r</span></a> <span class="id" title="var">K</span>); [<span class="id" title="tactic">reflexivity</span>|..])<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id" title="tactic">fail</span> 1 "rel_flipL_r: cannot find 'flip'"];<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;the&nbsp;remaining&nbsp;goals&nbsp;are&nbsp;from&nbsp;tac_rel_flipL_r&nbsp;(except&nbsp;for&nbsp;the&nbsp;first&nbsp;one,&nbsp;which&nbsp;has&nbsp;already&nbsp;been&nbsp;solved&nbsp;by&nbsp;this&nbsp;point)&nbsp;*)</span><br/>
&nbsp;&nbsp;[<span class="id" title="var">solve_ndisj</span> || <span class="id" title="tactic">fail</span> "rel_flipL_r: cannot prove 'nclose specN ⊆ ?'"<br/>
&nbsp;&nbsp;|<span class="id" title="var">solve_mapsto</span> ()<br/>
&nbsp;&nbsp;|<span class="id" title="var">pm_reflexivity</span> || <span class="id" title="tactic">fail</span> "rel_flipL_r: this should not happen O-:"<br/>
&nbsp;&nbsp;|<span class="id" title="tactic">reflexivity</span><br/>
&nbsp;&nbsp;|<span class="id" title="var">rel_finish</span>  </div>

<div class="doc">
new goal </div>
<div class="code">
].<br/>

<br/>
<span class="id" title="keyword">Global Opaque</span> <a class="idref" href="clutch.lib.flip.html#tapeB"><span class="id" title="definition">tapeB</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/coq-community/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
