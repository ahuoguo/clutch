<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resources/config.js"></script>
<script type="text/javascript" src="resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">clutch.examples.rng</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="clutch.clutch.html#"><span class="id" title="library">clutch</span></a> <a class="idref" href="clutch.lib.flip.html#"><span class="id" title="library">lib.flip</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch.examples</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="clutch.examples.hash.html#"><span class="id" title="library">hash</span></a>.<br/>

<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Default</span> <span class="id" title="keyword">Proof</span> <span class="id" title="var">Using</span> "Type*".<br/>

<br/>
<span class="comment">(*&nbsp;A&nbsp;simple&nbsp;"pseudo-random&nbsp;number&nbsp;generator"&nbsp;derived&nbsp;from&nbsp;a&nbsp;hashing&nbsp;function.<br/>
<br/>
&nbsp;&nbsp;&nbsp;The&nbsp;random&nbsp;number&nbsp;generator&nbsp;maintains&nbsp;an&nbsp;internal&nbsp;private<br/>
&nbsp;&nbsp;&nbsp;counter.&nbsp;Each&nbsp;time&nbsp;a&nbsp;flip&nbsp;is&nbsp;requested,&nbsp;it&nbsp;hashes&nbsp;the&nbsp;value&nbsp;of&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;counter,&nbsp;increments&nbsp;the&nbsp;counter,&nbsp;and&nbsp;returns&nbsp;the&nbsp;hash&nbsp;bit.<br/>
<br/>
&nbsp;&nbsp;&nbsp;We&nbsp;prove&nbsp;that&nbsp;this&nbsp;is&nbsp;contextually&nbsp;equivalent&nbsp;to&nbsp;an&nbsp;"ideal"<br/>
&nbsp;&nbsp;&nbsp;implentation&nbsp;that&nbsp;keeps&nbsp;a&nbsp;counter&nbsp;value&nbsp;but&nbsp;just&nbsp;calls&nbsp;flip<br/>
&nbsp;&nbsp;&nbsp;directly&nbsp;so&nbsp;long&nbsp;as&nbsp;the&nbsp;counter&nbsp;is&nbsp;under&nbsp;a&nbsp;maximum&nbsp;value.<br/>
<br/>
&nbsp;&nbsp;&nbsp;In&nbsp;some&nbsp;sense&nbsp;this&nbsp;equvialence&nbsp;proof&nbsp;may&nbsp;seem&nbsp;trivial,&nbsp;since&nbsp;we&nbsp;use&nbsp;the&nbsp;lazy&nbsp;hash&nbsp;function,<br/>
&nbsp;&nbsp;&nbsp;and&nbsp;under&nbsp;the&nbsp;hood&nbsp;our&nbsp;lazy&nbsp;hash&nbsp;actually&nbsp;does&nbsp;in&nbsp;fact&nbsp;amount&nbsp;to&nbsp;calling&nbsp;flip<br/>
&nbsp;&nbsp;&nbsp;()&nbsp;when&nbsp;a&nbsp;hash&nbsp;is&nbsp;queried&nbsp;for&nbsp;the&nbsp;first&nbsp;time&nbsp;for&nbsp;a&nbsp;given&nbsp;key.&nbsp;So<br/>
&nbsp;&nbsp;&nbsp;the&nbsp;proof&nbsp;boils&nbsp;down&nbsp;to&nbsp;showing&nbsp;that&nbsp;counter&nbsp;is&nbsp;incremented&nbsp;properly<br/>
&nbsp;&nbsp;&nbsp;and&nbsp;we&nbsp;never&nbsp;re-use&nbsp;the&nbsp;counter&nbsp;value&nbsp;twice.<br/>
<br/>
&nbsp;&nbsp;&nbsp;Nevertheless,&nbsp;the&nbsp;proof&nbsp;is&nbsp;still&nbsp;an&nbsp;interesting&nbsp;exercise&nbsp;for&nbsp;two<br/>
&nbsp;&nbsp;&nbsp;reasons:<br/>
<br/>
&nbsp;&nbsp;&nbsp;(1)&nbsp;This&nbsp;is&nbsp;somewhat&nbsp;similar&nbsp;to&nbsp;PRNG&nbsp;based&nbsp;on&nbsp;encrypting&nbsp;a&nbsp;counter<br/>
&nbsp;&nbsp;&nbsp;with&nbsp;AES,&nbsp;which&nbsp;is&nbsp;used&nbsp;in&nbsp;realistic&nbsp;scenarios.&nbsp;(Though&nbsp;in&nbsp;that<br/>
&nbsp;&nbsp;&nbsp;context,&nbsp;because&nbsp;a&nbsp;block&nbsp;cipher&nbsp;implements&nbsp;a&nbsp;pseudo-random<br/>
&nbsp;&nbsp;&nbsp;permutation&nbsp;instead&nbsp;of&nbsp;a&nbsp;pseudo-random&nbsp;function,&nbsp;the&nbsp;argument&nbsp;is<br/>
&nbsp;&nbsp;&nbsp;more&nbsp;involved&nbsp;since&nbsp;the&nbsp;PRNG&nbsp;is&nbsp;not&nbsp;indistinguishable&nbsp;from&nbsp;flip()).<br/>
<br/>
&nbsp;&nbsp;&nbsp;(2)&nbsp;If&nbsp;we&nbsp;had&nbsp;used&nbsp;the&nbsp;eager&nbsp;hash,&nbsp;the&nbsp;proof&nbsp;would&nbsp;be&nbsp;much&nbsp;harder<br/>
&nbsp;&nbsp;&nbsp;and&nbsp;we&nbsp;would&nbsp;need&nbsp;the&nbsp;"ideal"&nbsp;non-hash&nbsp;version&nbsp;to&nbsp;use&nbsp;a&nbsp;tape&nbsp;so<br/>
&nbsp;&nbsp;&nbsp;that&nbsp;we&nbsp;could&nbsp;pre-sample&nbsp;all&nbsp;of&nbsp;its&nbsp;values.&nbsp;&nbsp;Fortunately&nbsp;we&nbsp;already<br/>
&nbsp;&nbsp;&nbsp;proved&nbsp;the&nbsp;eager&nbsp;hash&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;the&nbsp;lazy&nbsp;hash.<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="rng" class="idref" href="#rng"><span class="id" title="section">rng</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="MAX:1" class="idref" href="#MAX:1"><span class="id" title="binder">MAX</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="init_hash_rng" class="idref" href="#init_hash_rng"><span class="id" title="definition">init_hash_rng</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">:</span></a> "_"<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "f" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.examples.hash.html#init_hash"><span class="id" title="definition">init_hash</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.rng.html#rng.MAX"><span class="id" title="variable">MAX</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "c" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">ref</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>0 <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">:</span></a> "_"<a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "n" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#569b74bc432a2b233b93ae1b45418e26"><span class="id" title="notation">!</span></a>"c" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "b" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> "f" "n" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"c" <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&lt;-'_x"><span class="id" title="notation">&lt;-</span></a> "n" <a class="idref" href="clutch.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1<a class="idref" href="clutch.prob_lang.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"b"<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="hash_rng_specialized" class="idref" href="#hash_rng_specialized"><span class="id" title="definition">hash_rng_specialized</span></a> (<a id="f:2" class="idref" href="#f:2"><span class="id" title="binder">f</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) (<a id="c:3" class="idref" href="#c:3"><span class="id" title="binder">c</span></a> : <a class="idref" href="clutch.prob_lang.locations.html#loc"><span class="id" title="record">loc</span></a>) : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">:</span></a> "_"<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "n" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#569b74bc432a2b233b93ae1b45418e26"><span class="id" title="notation">!</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.rng.html#c:3"><span class="id" title="variable">c</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "b" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.examples.rng.html#f:2"><span class="id" title="variable">f</span></a> "n" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.rng.html#c:3"><span class="id" title="variable">c</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&lt;-'_x"><span class="id" title="notation">&lt;-</span></a> "n" <a class="idref" href="clutch.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1<a class="idref" href="clutch.prob_lang.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"b").<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="clutchRGS0:5" class="idref" href="#clutchRGS0:5"><span class="id" title="binder">!</span></a><a id="clutchRGS0:5" class="idref" href="#clutchRGS0:5"><span class="id" title="binder">clutchRGS</span></a> <a id="clutchRGS0:5" class="idref" href="#clutchRGS0:5"><span class="id" title="binder">Σ</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="hash_rng" class="idref" href="#hash_rng"><span class="id" title="definition">hash_rng</span></a> (<a id="n:6" class="idref" href="#n:6"><span class="id" title="binder">n</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="g:7" class="idref" href="#g:7"><span class="id" title="binder">g</span></a>: <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="clutch.examples.rng.html#3b363b930699826ecdaf7aa4666b9402"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="h:8" class="idref" href="#h:8"><span class="id" title="binder">h</span></a> <a id="c:9" class="idref" href="#c:9"><span class="id" title="binder">c</span></a> <a id="m:10" class="idref" href="#m:10"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">⌜</span> <a class="idref" href="clutch.examples.rng.html#g:7"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.rng.html#hash_rng_specialized"><span class="id" title="definition">hash_rng_specialized</span></a> <a class="idref" href="clutch.examples.rng.html#h:8"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.examples.rng.html#c:9"><span class="id" title="variable">c</span></a> <span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⌜</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:11" class="idref" href="#x:11"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.examples.rng.html#n:6"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.rng.html#x:11"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.examples.rng.html#x:11"><span class="id" title="variable">x</span></a> <span class="id" title="notation">∉</span> <span class="id" title="definition">dom</span> <a class="idref" href="clutch.examples.rng.html#m:10"><span class="id" title="variable">m</span></a> <span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.hash.html#hashfun"><span class="id" title="definition">hashfun</span></a> <a class="idref" href="clutch.examples.rng.html#rng.MAX"><span class="id" title="variable">MAX</span></a> <a class="idref" href="clutch.examples.rng.html#h:8"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.examples.rng.html#m:10"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.rng.html#c:9"><span class="id" title="variable">c</span></a> <a class="idref" href="clutch.rel_logic.primitive_laws.html#db9bde1508f348dd1f9d24e9d4ead804"><span class="id" title="notation">↦</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.rng.html#n:6"><span class="id" title="variable">n</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="shash_rng" class="idref" href="#shash_rng"><span class="id" title="definition">shash_rng</span></a> (<a id="n:12" class="idref" href="#n:12"><span class="id" title="binder">n</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="g:13" class="idref" href="#g:13"><span class="id" title="binder">g</span></a>: <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="clutch.examples.rng.html#3b363b930699826ecdaf7aa4666b9402"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="h:14" class="idref" href="#h:14"><span class="id" title="binder">h</span></a> <a id="c:15" class="idref" href="#c:15"><span class="id" title="binder">c</span></a> <a id="m:16" class="idref" href="#m:16"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">⌜</span> <a class="idref" href="clutch.examples.rng.html#g:13"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.rng.html#hash_rng_specialized"><span class="id" title="definition">hash_rng_specialized</span></a> <a class="idref" href="clutch.examples.rng.html#h:14"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.examples.rng.html#c:15"><span class="id" title="variable">c</span></a> <span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⌜</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:17" class="idref" href="#x:17"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.examples.rng.html#n:12"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="clutch.examples.rng.html#x:17"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.examples.rng.html#x:17"><span class="id" title="variable">x</span></a> <span class="id" title="notation">∉</span> <span class="id" title="definition">dom</span> <a class="idref" href="clutch.examples.rng.html#m:16"><span class="id" title="variable">m</span></a> <span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.hash.html#shashfun"><span class="id" title="definition">shashfun</span></a> <a class="idref" href="clutch.examples.rng.html#rng.MAX"><span class="id" title="variable">MAX</span></a> <a class="idref" href="clutch.examples.rng.html#h:14"><span class="id" title="variable">h</span></a> <a class="idref" href="clutch.examples.rng.html#m:16"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.rng.html#c:15"><span class="id" title="variable">c</span></a> <a class="idref" href="clutch.rel_logic.spec_ra.html#0326014f985dcbdf069e6962e826748b"><span class="id" title="notation">↦ₛ</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.rng.html#n:12"><span class="id" title="variable">n</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Existing Instances</span> <span class="id" title="var">timeless_hashfun</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="timeless_hash_rng" class="idref" href="#timeless_hash_rng"><span class="id" title="lemma">timeless_hash_rng</span></a> <a id="n:18" class="idref" href="#n:18"><span class="id" title="binder">n</span></a> <a id="g:19" class="idref" href="#g:19"><span class="id" title="binder">g</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="class">Timeless</span> (<a class="idref" href="clutch.examples.rng.html#hash_rng"><span class="id" title="definition">hash_rng</span></a> <a class="idref" href="clutch.examples.rng.html#n:18"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.examples.rng.html#g:19"><span class="id" title="variable">g</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">_</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Existing Instances</span> <span class="id" title="var">timeless_shashfun</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="timeless_shash_rng" class="idref" href="#timeless_shash_rng"><span class="id" title="lemma">timeless_shash_rng</span></a> <a id="n:20" class="idref" href="#n:20"><span class="id" title="binder">n</span></a> <a id="g:21" class="idref" href="#g:21"><span class="id" title="binder">g</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="class">Timeless</span> (<a class="idref" href="clutch.examples.rng.html#shash_rng"><span class="id" title="definition">shash_rng</span></a> <a class="idref" href="clutch.examples.rng.html#n:20"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.examples.rng.html#g:21"><span class="id" title="variable">g</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">_</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO(Joe):&nbsp;these&nbsp;instances&nbsp;interfere&nbsp;in&nbsp;a&nbsp;bad&nbsp;way&nbsp;that&nbsp;I&nbsp;don't&nbsp;understand.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;Existing&nbsp;Instances&nbsp;timeless_hash_rng&nbsp;timeless_shash_rng.<br/>
&nbsp;&nbsp;&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_init_hash_rng" class="idref" href="#wp_init_hash_rng"><span class="id" title="lemma">wp_init_hash_rng</span></a> <a id="E:22" class="idref" href="#E:22"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">True</span> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.rng.html#init_hash_rng"><span class="id" title="definition">init_hash_rng</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.examples.rng.html#E:22"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a id="g:23" class="idref" href="#g:23"><span class="id" title="binder">g</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.examples.rng.html#g:23"><span class="id" title="variable">g</span></a><span class="id" title="notation">;</span> <a class="idref" href="clutch.examples.rng.html#hash_rng"><span class="id" title="definition">hash_rng</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> <a class="idref" href="clutch.examples.rng.html#g:23"><span class="id" title="variable">g</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "_ HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.rng.html#init_hash_rng"><span class="id" title="definition">init_hash_rng</span></a>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.hash.html#wp_init_hash"><span class="id" title="lemma">wp_init_hash</span></a> <span class="id" title="notation">with</span> "[//]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">f</span>) "Hhash".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_alloc</span> <span class="id" title="var">c</span> <span class="id" title="keyword">as</span> "Hc".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HΦ".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iSplit</span>; <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_init_hash_rng" class="idref" href="#spec_init_hash_rng"><span class="id" title="lemma">spec_init_hash_rng</span></a> <a id="K:24" class="idref" href="#K:24"><span class="id" title="binder">K</span></a> <a id="E:25" class="idref" href="#E:25"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.examples.rng.html#E:25"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.rng.html#K:24"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.examples.rng.html#init_hash_rng"><span class="id" title="definition">init_hash_rng</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>) <span class="id" title="notation">={</span><a class="idref" href="clutch.examples.rng.html#E:25"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <span class="id" title="notation">∃</span> <a id="f:26" class="idref" href="#f:26"><span class="id" title="binder">f</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.rng.html#K:24"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.examples.rng.html#f:26"><span class="id" title="variable">f</span></a>) <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.rng.html#shash_rng"><span class="id" title="definition">shash_rng</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> <a class="idref" href="clutch.examples.rng.html#f:26"><span class="id" title="variable">f</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "HK".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.rng.html#init_hash_rng"><span class="id" title="definition">init_hash_rng</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_bind</span> (<a class="idref" href="clutch.examples.hash.html#init_hash"><span class="id" title="definition">init_hash</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.hash.html#spec_init_hash"><span class="id" title="lemma">spec_init_hash</span></a> <span class="id" title="notation">with</span> "[$HK]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">f</span>) "(HK&amp;Hhash)"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_alloc</span> <span class="id" title="keyword">as</span> <span class="id" title="var">c</span> "Hc".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span> "HK".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iSplit</span>; <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_hash_rng_flip" class="idref" href="#wp_hash_rng_flip"><span class="id" title="lemma">wp_hash_rng_flip</span></a> <a id="n:27" class="idref" href="#n:27"><span class="id" title="binder">n</span></a> <a id="g:28" class="idref" href="#g:28"><span class="id" title="binder">g</span></a> <a id="K:29" class="idref" href="#K:29"><span class="id" title="binder">K</span></a> <a id="E:30" class="idref" href="#E:30"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.examples.rng.html#E:30"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.rng.html#n:27"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8.html#3ccab6e0e5cec5d8305913b11c2aa678"><span class="id" title="notation">≤</span></a> <a class="idref" href="clutch.examples.rng.html#rng.MAX"><span class="id" title="variable">MAX</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a class="idref" href="clutch.examples.rng.html#hash_rng"><span class="id" title="definition">hash_rng</span></a> <a class="idref" href="clutch.examples.rng.html#n:27"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.examples.rng.html#g:28"><span class="id" title="variable">g</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.rng.html#K:29"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a><span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.rng.html#g:28"><span class="id" title="variable">g</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.examples.rng.html#E:30"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">(</span><a id="b:31" class="idref" href="#b:31"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><span class="id" title="notation">),</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.rng.html#b:31"><span class="id" title="variable">b</span></a><span class="id" title="notation">;</span> <a class="idref" href="clutch.examples.rng.html#hash_rng"><span class="id" title="definition">hash_rng</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.rng.html#n:27"><span class="id" title="variable">n</span></a>) <a class="idref" href="clutch.examples.rng.html#g:28"><span class="id" title="variable">g</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.rng.html#K:29"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.rng.html#b:31"><span class="id" title="variable">b</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">HN</span> <span class="id" title="var">Hle</span> <span class="id" title="var">Φ</span>) "(Hhash&amp;HK) HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hhash" <span class="id" title="keyword">as</span> (<span class="id" title="var">h</span> <span class="id" title="var">c</span> <span class="id" title="var">m</span> -&gt; <span class="id" title="var">Hdom</span>) "(Hhash&amp;Hc)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.rng.html#hash_rng_specialized"><span class="id" title="definition">hash_rng_specialized</span></a>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_load</span>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.hash.html#hashfun_couplable"><span class="id" title="lemma">hashfun_couplable</span></a> <span class="id" title="var">n</span> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hcoup"; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_dom</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.hash.html#impl_couplable_elim"><span class="id" title="lemma">impl_couplable_elim</span></a> <span class="id" title="notation">with</span> "[$Hcoup $HK Hc HΦ]"<span class="id" title="notation">)</span>; [<span class="id" title="var">done</span> | <span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">b</span>) "Hhash HK".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.hash.html#wp_hashfun_prev"><span class="id" title="lemma">wp_hashfun_prev</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert</span> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hhash". <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_store</span>. <span class="id" title="var">iModIntro</span>. <span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_insert_L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_unfold</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Hle'</span> [?|?]; <span class="id" title="tactic">first</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hdom</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">eassumption</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>))%<span class="id" title="var">Z</span> <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;move&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_couplable_wand" class="idref" href="#spec_couplable_wand"><span class="id" title="lemma">spec_couplable_wand</span></a> (<a id="P:32" class="idref" href="#P:32"><span class="id" title="binder">P</span></a> <a id="Q:33" class="idref" href="#Q:33"><span class="id" title="binder">Q</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="clutch.examples.rng.html#3b363b930699826ecdaf7aa4666b9402"><span class="id" title="variable">Σ</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.hash.html#spec_couplable"><span class="id" title="definition">spec_couplable</span></a> <a class="idref" href="clutch.examples.rng.html#P:32"><span class="id" title="variable">P</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="b:34" class="idref" href="#b:34"><span class="id" title="binder">b</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.examples.rng.html#P:32"><span class="id" title="variable">P</span></a> <a class="idref" href="clutch.examples.rng.html#b:34"><span class="id" title="variable">b</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="clutch.examples.rng.html#Q:33"><span class="id" title="variable">Q</span></a> <a class="idref" href="clutch.examples.rng.html#b:34"><span class="id" title="variable">b</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.hash.html#spec_couplable"><span class="id" title="definition">spec_couplable</span></a> <a class="idref" href="clutch.examples.rng.html#Q:33"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.hash.html#spec_couplable"><span class="id" title="definition">spec_couplable</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> 1 <span class="id" title="keyword">as</span> (<span class="id" title="var">α</span> <span class="id" title="var">bs</span>) "(Hα&amp;HP)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "HPQ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">α</span>, <span class="id" title="var">bs</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iIntros</span> (?) "H". <span class="id" title="var">iApply</span> "HPQ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HP". <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_hash_rng_flip_couplable" class="idref" href="#spec_hash_rng_flip_couplable"><span class="id" title="lemma">spec_hash_rng_flip_couplable</span></a> <a id="n:35" class="idref" href="#n:35"><span class="id" title="binder">n</span></a> <a id="g:36" class="idref" href="#g:36"><span class="id" title="binder">g</span></a> <a id="K:37" class="idref" href="#K:37"><span class="id" title="binder">K</span></a> <a id="E:38" class="idref" href="#E:38"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.examples.rng.html#E:38"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.rng.html#n:35"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8.html#3ccab6e0e5cec5d8305913b11c2aa678"><span class="id" title="notation">≤</span></a> <a class="idref" href="clutch.examples.rng.html#rng.MAX"><span class="id" title="variable">MAX</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.rng.html#shash_rng"><span class="id" title="definition">shash_rng</span></a> <a class="idref" href="clutch.examples.rng.html#n:35"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.examples.rng.html#g:36"><span class="id" title="variable">g</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.rng.html#K:37"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.examples.rng.html#g:36"><span class="id" title="variable">g</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>) <span class="id" title="notation">={</span><a class="idref" href="clutch.examples.rng.html#E:38"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.hash.html#spec_couplable"><span class="id" title="definition">spec_couplable</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="b:39" class="idref" href="#b:39"><span class="id" title="binder">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="notation">|={</span><a class="idref" href="clutch.examples.rng.html#E:38"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=&gt;</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.rng.html#K:37"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.rng.html#b:39"><span class="id" title="variable">b</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.rng.html#shash_rng"><span class="id" title="definition">shash_rng</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.rng.html#n:35"><span class="id" title="variable">n</span></a>) <a class="idref" href="clutch.examples.rng.html#g:36"><span class="id" title="variable">g</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (? <span class="id" title="var">Hle</span>) "Hshash HK".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hshash" <span class="id" title="keyword">as</span> (<span class="id" title="var">h</span> <span class="id" title="var">c</span> <span class="id" title="var">m</span> -&gt; <span class="id" title="var">Hdom</span>) "(Hhash&amp;Hc)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.rng.html#hash_rng_specialized"><span class="id" title="definition">hash_rng_specialized</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>. <span class="id" title="var">tp_load</span>. <span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.hash.html#shashfun_couplable"><span class="id" title="lemma">shashfun_couplable</span></a> <span class="id" title="var">n</span> <span class="id" title="notation">with</span> "Hhash"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hhash"; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_dom</span>, <span class="id" title="var">Hdom</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.rng.html#spec_couplable_wand"><span class="id" title="lemma">spec_couplable_wand</span></a> <span class="id" title="notation">with</span> "Hhash"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">b</span>) "Hhash".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_bind</span> (<span class="id" title="var">h</span> <span class="id" title="var">_</span>)%<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.hash.html#spec_hashfun_prev"><span class="id" title="lemma">spec_hashfun_prev</span></a> <span class="id" title="notation">with</span> "Hhash HK"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "(HK&amp;Hhash)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert</span> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_store</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span> "HK". <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_insert_L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_unfold</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Hle'</span> [?|?]; <span class="id" title="tactic">first</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hdom</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">eassumption</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>))%<span class="id" title="var">Z</span> <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_hash_rng_flip_out_of_range" class="idref" href="#wp_hash_rng_flip_out_of_range"><span class="id" title="lemma">wp_hash_rng_flip_out_of_range</span></a> <a id="n:40" class="idref" href="#n:40"><span class="id" title="binder">n</span></a> <a id="g:41" class="idref" href="#g:41"><span class="id" title="binder">g</span></a> <a id="E:42" class="idref" href="#E:42"><span class="id" title="binder">E</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.rng.html#rng.MAX"><span class="id" title="variable">MAX</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.examples.rng.html#n:40"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a class="idref" href="clutch.examples.rng.html#hash_rng"><span class="id" title="definition">hash_rng</span></a> <a class="idref" href="clutch.examples.rng.html#n:40"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.examples.rng.html#g:41"><span class="id" title="variable">g</span></a> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.rng.html#g:41"><span class="id" title="variable">g</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.examples.rng.html#E:42"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><span class="id" title="notation">;</span> <a class="idref" href="clutch.examples.rng.html#hash_rng"><span class="id" title="definition">hash_rng</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.rng.html#n:40"><span class="id" title="variable">n</span></a>) <a class="idref" href="clutch.examples.rng.html#g:41"><span class="id" title="variable">g</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hlt</span> <span class="id" title="var">Φ</span>) "Hhash HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hhash" <span class="id" title="keyword">as</span> (<span class="id" title="var">h</span> <span class="id" title="var">c</span> <span class="id" title="var">m</span> -&gt; <span class="id" title="var">Hdom</span>) "(Hhash&amp;Hc)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.rng.html#hash_rng_specialized"><span class="id" title="definition">hash_rng_specialized</span></a>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_load</span>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.hash.html#wp_hashfun_out_of_range"><span class="id" title="lemma">wp_hashfun_out_of_range</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hhash". <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_store</span>. <span class="id" title="var">iModIntro</span>. <span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hdom</span>. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>))%<span class="id" title="var">Z</span> <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_hash_rng_flip_out_of_range" class="idref" href="#spec_hash_rng_flip_out_of_range"><span class="id" title="lemma">spec_hash_rng_flip_out_of_range</span></a> <a id="n:43" class="idref" href="#n:43"><span class="id" title="binder">n</span></a> <a id="g:44" class="idref" href="#g:44"><span class="id" title="binder">g</span></a> <a id="K:45" class="idref" href="#K:45"><span class="id" title="binder">K</span></a> <a id="E:46" class="idref" href="#E:46"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.examples.rng.html#E:46"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.rng.html#rng.MAX"><span class="id" title="variable">MAX</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="clutch.examples.rng.html#n:43"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.rng.html#shash_rng"><span class="id" title="definition">shash_rng</span></a> <a class="idref" href="clutch.examples.rng.html#n:43"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.examples.rng.html#g:44"><span class="id" title="variable">g</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.rng.html#K:45"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.examples.rng.html#g:44"><span class="id" title="variable">g</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>) <span class="id" title="notation">={</span><a class="idref" href="clutch.examples.rng.html#E:46"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.rng.html#K:45"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.rng.html#shash_rng"><span class="id" title="definition">shash_rng</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.rng.html#n:43"><span class="id" title="variable">n</span></a>) <a class="idref" href="clutch.examples.rng.html#g:44"><span class="id" title="variable">g</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (? <span class="id" title="var">Hlt</span>) "Hshash HK".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hshash" <span class="id" title="keyword">as</span> (<span class="id" title="var">h</span> <span class="id" title="var">c</span> <span class="id" title="var">m</span> -&gt; <span class="id" title="var">Hdom</span>) "(Hhash&amp;Hc)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.rng.html#hash_rng_specialized"><span class="id" title="definition">hash_rng_specialized</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>. <span class="id" title="var">tp_load</span>. <span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_bind</span> (<span class="id" title="var">h</span> <span class="id" title="var">_</span>)%<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.hash.html#spec_hashfun_out_of_range"><span class="id" title="lemma">spec_hashfun_out_of_range</span></a> <span class="id" title="notation">with</span> "Hhash HK"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "(HK&amp;Hhash)"; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_store</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span> "HK". <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hdom</span>. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>))%<span class="id" title="var">Z</span> <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;"ideal"&nbsp;version&nbsp;that&nbsp;calls&nbsp;a&nbsp;tape-less&nbsp;flip&nbsp;directly&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="init_bounded_rng" class="idref" href="#init_bounded_rng"><span class="id" title="definition">init_bounded_rng</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">:</span></a> "_"<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "c" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">ref</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>0 <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">:</span></a> "_"<a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "n" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#569b74bc432a2b233b93ae1b45418e26"><span class="id" title="notation">!</span></a>"c" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "b" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a><a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">:</span></a> "n" <a class="idref" href="clutch.prob_lang.notation.html#959e055f1ab3ff54c36dde10824af025"><span class="id" title="notation">≤</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.rng.html#rng.MAX"><span class="id" title="variable">MAX</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"c" <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&lt;-'_x"><span class="id" title="notation">&lt;-</span></a> "n" <a class="idref" href="clutch.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1<a class="idref" href="clutch.prob_lang.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"b"<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="bounded_rng_specialized" class="idref" href="#bounded_rng_specialized"><span class="id" title="definition">bounded_rng_specialized</span></a> (<a id="c:47" class="idref" href="#c:47"><span class="id" title="binder">c</span></a> : <a class="idref" href="clutch.prob_lang.locations.html#loc"><span class="id" title="record">loc</span></a>) : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">:</span></a> "_"<a class="idref" href="clutch.prob_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "n" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#569b74bc432a2b233b93ae1b45418e26"><span class="id" title="notation">!</span></a><a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.rng.html#c:47"><span class="id" title="variable">c</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "b" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a><a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">:</span></a> "n" <a class="idref" href="clutch.prob_lang.notation.html#959e055f1ab3ff54c36dde10824af025"><span class="id" title="notation">≤</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.rng.html#rng.MAX"><span class="id" title="variable">MAX</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.rng.html#c:47"><span class="id" title="variable">c</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&lt;-'_x"><span class="id" title="notation">&lt;-</span></a> "n" <a class="idref" href="clutch.prob_lang.notation.html#a4d9e3466bf1928a450a1a8426a17af3"><span class="id" title="notation">+</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>1<a class="idref" href="clutch.prob_lang.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"b").<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="bounded_rng" class="idref" href="#bounded_rng"><span class="id" title="definition">bounded_rng</span></a> (<a id="n:48" class="idref" href="#n:48"><span class="id" title="binder">n</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="g:49" class="idref" href="#g:49"><span class="id" title="binder">g</span></a>: <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="clutch.examples.rng.html#3b363b930699826ecdaf7aa4666b9402"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="c:50" class="idref" href="#c:50"><span class="id" title="binder">c</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">⌜</span> <a class="idref" href="clutch.examples.rng.html#g:49"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.rng.html#bounded_rng_specialized"><span class="id" title="definition">bounded_rng_specialized</span></a> <a class="idref" href="clutch.examples.rng.html#c:50"><span class="id" title="variable">c</span></a> <span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.rng.html#c:50"><span class="id" title="variable">c</span></a> <a class="idref" href="clutch.rel_logic.primitive_laws.html#db9bde1508f348dd1f9d24e9d4ead804"><span class="id" title="notation">↦</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.rng.html#n:48"><span class="id" title="variable">n</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="sbounded_rng" class="idref" href="#sbounded_rng"><span class="id" title="definition">sbounded_rng</span></a> (<a id="n:51" class="idref" href="#n:51"><span class="id" title="binder">n</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="g:52" class="idref" href="#g:52"><span class="id" title="binder">g</span></a>: <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>) : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="clutch.examples.rng.html#3b363b930699826ecdaf7aa4666b9402"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="c:53" class="idref" href="#c:53"><span class="id" title="binder">c</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">⌜</span> <a class="idref" href="clutch.examples.rng.html#g:52"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.examples.rng.html#bounded_rng_specialized"><span class="id" title="definition">bounded_rng_specialized</span></a> <a class="idref" href="clutch.examples.rng.html#c:53"><span class="id" title="variable">c</span></a> <span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.rng.html#c:53"><span class="id" title="variable">c</span></a> <a class="idref" href="clutch.rel_logic.spec_ra.html#0326014f985dcbdf069e6962e826748b"><span class="id" title="notation">↦ₛ</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.rng.html#n:51"><span class="id" title="variable">n</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_init_bounded_rng" class="idref" href="#wp_init_bounded_rng"><span class="id" title="lemma">wp_init_bounded_rng</span></a> <a id="E:54" class="idref" href="#E:54"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">True</span> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.rng.html#init_bounded_rng"><span class="id" title="definition">init_bounded_rng</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.examples.rng.html#E:54"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a id="g:55" class="idref" href="#g:55"><span class="id" title="binder">g</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.examples.rng.html#g:55"><span class="id" title="variable">g</span></a><span class="id" title="notation">;</span> <a class="idref" href="clutch.examples.rng.html#bounded_rng"><span class="id" title="definition">bounded_rng</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> <a class="idref" href="clutch.examples.rng.html#g:55"><span class="id" title="variable">g</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "_ HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.rng.html#init_bounded_rng"><span class="id" title="definition">init_bounded_rng</span></a>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_alloc</span> <span class="id" title="var">c</span> <span class="id" title="keyword">as</span> "Hc".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_init_bounded_rng" class="idref" href="#spec_init_bounded_rng"><span class="id" title="lemma">spec_init_bounded_rng</span></a> <a id="E:56" class="idref" href="#E:56"><span class="id" title="binder">E</span></a> <a id="K:57" class="idref" href="#K:57"><span class="id" title="binder">K</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.examples.rng.html#E:56"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.rng.html#K:57"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.examples.rng.html#init_bounded_rng"><span class="id" title="definition">init_bounded_rng</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>) <span class="id" title="notation">={</span><a class="idref" href="clutch.examples.rng.html#E:56"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <span class="id" title="notation">∃</span> <a id="f:58" class="idref" href="#f:58"><span class="id" title="binder">f</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.rng.html#K:57"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_val"><span class="id" title="abbreviation">of_val</span></a> <a class="idref" href="clutch.examples.rng.html#f:58"><span class="id" title="variable">f</span></a>) <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.rng.html#sbounded_rng"><span class="id" title="definition">sbounded_rng</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> <a class="idref" href="clutch.examples.rng.html#f:58"><span class="id" title="variable">f</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "Hspec".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.rng.html#init_bounded_rng"><span class="id" title="definition">init_bounded_rng</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_alloc</span> <span class="id" title="keyword">as</span> <span class="id" title="var">c</span> "Hc".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">c</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_hash_rng_flip_refine" class="idref" href="#wp_hash_rng_flip_refine"><span class="id" title="lemma">wp_hash_rng_flip_refine</span></a> <a id="n:59" class="idref" href="#n:59"><span class="id" title="binder">n</span></a> <a id="g:60" class="idref" href="#g:60"><span class="id" title="binder">g</span></a> <a id="sg:61" class="idref" href="#sg:61"><span class="id" title="binder">sg</span></a> <a id="K:62" class="idref" href="#K:62"><span class="id" title="binder">K</span></a> <a id="E:63" class="idref" href="#E:63"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.examples.rng.html#E:63"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a class="idref" href="clutch.examples.rng.html#hash_rng"><span class="id" title="definition">hash_rng</span></a> <a class="idref" href="clutch.examples.rng.html#n:59"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.examples.rng.html#g:60"><span class="id" title="variable">g</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.rng.html#sbounded_rng"><span class="id" title="definition">sbounded_rng</span></a> <a class="idref" href="clutch.examples.rng.html#n:59"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.examples.rng.html#sg:61"><span class="id" title="variable">sg</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.rng.html#K:62"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.examples.rng.html#sg:61"><span class="id" title="variable">sg</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>)<span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.rng.html#g:60"><span class="id" title="variable">g</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.examples.rng.html#E:63"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">(</span><a id="b:64" class="idref" href="#b:64"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><span class="id" title="notation">),</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.rng.html#b:64"><span class="id" title="variable">b</span></a><span class="id" title="notation">;</span> <a class="idref" href="clutch.examples.rng.html#hash_rng"><span class="id" title="definition">hash_rng</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.rng.html#n:59"><span class="id" title="variable">n</span></a>) <a class="idref" href="clutch.examples.rng.html#g:60"><span class="id" title="variable">g</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.rng.html#sbounded_rng"><span class="id" title="definition">sbounded_rng</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.rng.html#n:59"><span class="id" title="variable">n</span></a>) <a class="idref" href="clutch.examples.rng.html#sg:61"><span class="id" title="variable">sg</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.rng.html#K:62"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.rng.html#b:64"><span class="id" title="variable">b</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">HN</span> <span class="id" title="var">Φ</span>) "(Hhash&amp;Hbrng&amp;HK) HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hbrng" <span class="id" title="keyword">as</span> (<span class="id" title="var">sc</span> -&gt;) "Hsc".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.rng.html#bounded_rng_specialized"><span class="id" title="definition">bounded_rng_specialized</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_load</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_bind</span> <a class="idref" href="clutch.lib.flip.html#flip"><span class="id" title="definition">flip</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="clutch.program_logic.weakestpre.html#wp_fupd"><span class="id" title="lemma">wp_fupd</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.rng.html#wp_hash_rng_flip"><span class="id" title="lemma">wp_hash_rng_flip</span></a> <span class="id" title="notation">with</span> "[$HK $Hhash]"<span class="id" title="notation">)</span>; [<span class="id" title="var">done</span>|<span class="id" title="var">lia</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">b</span>) "(Hhash&amp;HK)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="clutch.rel_logic.rel_rules.html#refines_right_bind"><span class="id" title="lemma">refines_right_bind</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_store</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>))%<span class="id" title="var">Z</span> <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_store</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.rng.html#wp_hash_rng_flip_out_of_range"><span class="id" title="lemma">wp_hash_rng_flip_out_of_range</span></a> <span class="id" title="notation">with</span> "[$Hhash]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hhash".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>))%<span class="id" title="var">Z</span> <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_bounded_rng_flip_refine" class="idref" href="#wp_bounded_rng_flip_refine"><span class="id" title="lemma">wp_bounded_rng_flip_refine</span></a> <a id="n:65" class="idref" href="#n:65"><span class="id" title="binder">n</span></a> <a id="g:66" class="idref" href="#g:66"><span class="id" title="binder">g</span></a> <a id="sg:67" class="idref" href="#sg:67"><span class="id" title="binder">sg</span></a> <a id="K:68" class="idref" href="#K:68"><span class="id" title="binder">K</span></a> <a id="E:69" class="idref" href="#E:69"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">↑</span><a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="clutch.examples.rng.html#E:69"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a class="idref" href="clutch.examples.rng.html#bounded_rng"><span class="id" title="definition">bounded_rng</span></a> <a class="idref" href="clutch.examples.rng.html#n:65"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.examples.rng.html#g:66"><span class="id" title="variable">g</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.rng.html#shash_rng"><span class="id" title="definition">shash_rng</span></a> <a class="idref" href="clutch.examples.rng.html#n:65"><span class="id" title="variable">n</span></a> <a class="idref" href="clutch.examples.rng.html#sg:67"><span class="id" title="variable">sg</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.rng.html#K:68"><span class="id" title="variable">K</span></a> (<a class="idref" href="clutch.examples.rng.html#sg:67"><span class="id" title="variable">sg</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>)<span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.examples.rng.html#g:66"><span class="id" title="variable">g</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <span class="id" title="notation">@</span> <a class="idref" href="clutch.examples.rng.html#E:69"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">(</span><a id="b:70" class="idref" href="#b:70"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><span class="id" title="notation">),</span> <span class="id" title="notation">RET</span> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.rng.html#b:70"><span class="id" title="variable">b</span></a><span class="id" title="notation">;</span> <a class="idref" href="clutch.examples.rng.html#bounded_rng"><span class="id" title="definition">bounded_rng</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.rng.html#n:65"><span class="id" title="variable">n</span></a>) <a class="idref" href="clutch.examples.rng.html#g:66"><span class="id" title="variable">g</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.rng.html#shash_rng"><span class="id" title="definition">shash_rng</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.examples.rng.html#n:65"><span class="id" title="variable">n</span></a>) <a class="idref" href="clutch.examples.rng.html#sg:67"><span class="id" title="variable">sg</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#refines_right"><span class="id" title="definition">refines_right</span></a> <a class="idref" href="clutch.examples.rng.html#K:68"><span class="id" title="variable">K</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.rng.html#b:70"><span class="id" title="variable">b</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">HN</span> <span class="id" title="var">Φ</span>) "(Hbrng&amp;Hhash&amp;HK) HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hbrng" <span class="id" title="keyword">as</span> (<span class="id" title="var">sc</span> -&gt;) "Hsc".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.examples.rng.html#bounded_rng_specialized"><span class="id" title="definition">bounded_rng_specialized</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="var">wp_load</span>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_bool_decide</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<a class="idref" href="clutch.rel_logic.spec_ra.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a>) <span class="id" title="keyword">with</span> "[-]" <span class="id" title="keyword">as</span> "#Hspec_ctx".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iDestruct</span> "HK" <span class="id" title="keyword">as</span> "($&amp;_)". }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.rng.html#spec_hash_rng_flip_couplable"><span class="id" title="lemma">spec_hash_rng_flip_couplable</span></a> <span class="id" title="notation">with</span> "Hhash HK"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hspec"; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.hash.html#spec_couplable_elim"><span class="id" title="lemma">spec_couplable_elim</span></a> <span class="id" title="notation">with</span> "[$Hspec $Hspec_ctx Hsc HΦ]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">b</span>) "&gt;(HK&amp;Hhash)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="var">wp_store</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span> "HK Hhash". <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>))%<span class="id" title="var">Z</span> <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.rng.html#spec_hash_rng_flip_out_of_range"><span class="id" title="lemma">spec_hash_rng_flip_out_of_range</span></a> <span class="id" title="notation">with</span> "Hhash HK"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "(HK&amp;Hhash)"; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_store</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iApply</span> "HΦ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span> "HK Hhash". <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>))%<span class="id" title="var">Z</span> <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="rngN" class="idref" href="#rngN"><span class="id" title="definition">rngN</span></a> := <span class="id" title="definition">nroot</span><span class="id" title="notation">.@</span>"rng".<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="hash_bounded_refinement" class="idref" href="#hash_bounded_refinement"><span class="id" title="lemma">hash_bounded_refinement</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> <a class="idref" href="clutch.rel_logic.model.html#:::'REL'_x_'&lt;&lt;'_x_':'_x"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.examples.rng.html#init_hash_rng"><span class="id" title="definition">init_hash_rng</span></a> <a class="idref" href="clutch.rel_logic.model.html#:::'REL'_x_'&lt;&lt;'_x_':'_x"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.examples.rng.html#init_bounded_rng"><span class="id" title="definition">init_bounded_rng</span></a> <a class="idref" href="clutch.rel_logic.model.html#:::'REL'_x_'&lt;&lt;'_x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.rel_logic.model.html#lrel_unit"><span class="id" title="definition">lrel_unit</span></a> <a class="idref" href="clutch.rel_logic.model.html#198b3df6111d1e335bfbd02615def5fc"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.rel_logic.model.html#198b3df6111d1e335bfbd02615def5fc"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.model.html#lrel_unit"><span class="id" title="definition">lrel_unit</span></a> <a class="idref" href="clutch.rel_logic.model.html#198b3df6111d1e335bfbd02615def5fc"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.rel_logic.model.html#lrel_bool"><span class="id" title="definition">lrel_bool</span></a><a class="idref" href="clutch.rel_logic.model.html#198b3df6111d1e335bfbd02615def5fc"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_arrow_val</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (??) "(-&gt;&amp;-&gt;)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.model.html#refines_eq"><span class="id" title="definition">refines_eq</span></a>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">K</span>) "HK Hown".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="clutch.program_logic.weakestpre.html#wp_fupd"><span class="id" title="lemma">wp_fupd</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.rng.html#wp_init_hash_rng"><span class="id" title="lemma">wp_init_hash_rng</span></a> <span class="id" title="notation">with</span> "[//]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">g</span>) "Hhash".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.rng.html#spec_init_bounded_rng"><span class="id" title="lemma">spec_init_bounded_rng</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">f</span>) "(HK&amp;Hbounded)"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">P</span> := (<span class="id" title="notation">∃</span> <a id="n:72" class="idref" href="#n:72"><span class="id" title="binder">n</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.examples.rng.html#hash_rng"><span class="id" title="definition">hash_rng</span></a> <a class="idref" href="clutch.examples.rng.html#n:71"><span class="id" title="variable">n</span></a> <span class="id" title="var">g</span> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.rng.html#sbounded_rng"><span class="id" title="definition">sbounded_rng</span></a> <a class="idref" href="clutch.examples.rng.html#n:71"><span class="id" title="variable">n</span></a> <span class="id" title="var">f</span>)%<span class="id" title="var">I</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><span class="id" title="lemma">na_inv_alloc</span> <a class="idref" href="clutch.rel_logic.model.html#clutchRGS_nais"><span class="id" title="method">clutchRGS_nais</span></a> <span class="id" title="var">_</span> <a class="idref" href="clutch.examples.rng.html#rngN"><span class="id" title="definition">rngN</span></a> <span class="id" title="var">P</span> <span class="id" title="notation">with</span> "[Hhash Hbounded]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "#Hinv".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iNext</span>. <span class="id" title="var">iExists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a>. <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">v1</span> <span class="id" title="var">v2</span>) "!&gt; (-&gt;&amp;-&gt;)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">K</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.rel_logic.model.html#refines_na_inv"><span class="id" title="lemma">refines_na_inv</span></a> <span class="id" title="notation">with</span> "[$Hinv]"<span class="id" title="notation">)</span> ; <span class="id" title="tactic">auto</span> ; <span class="id" title="var">iIntros</span> "[HP Hclose]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.model.html#refines_eq"><span class="id" title="definition">refines_eq</span></a>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">K</span>) "HK Hown".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "HP" <span class="id" title="keyword">as</span> (<span class="id" title="var">m</span>) "(Hf&amp;&gt;Hsf)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.examples.rng.html#timeless_hash_rng"><span class="id" title="lemma">timeless_hash_rng</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hf" <span class="id" title="keyword">as</span> "&gt;Hf".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="clutch.program_logic.weakestpre.html#wp_fupd"><span class="id" title="lemma">wp_fupd</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.rng.html#wp_hash_rng_flip_refine"><span class="id" title="lemma">wp_hash_rng_flip_refine</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">b</span>) "(Hhash&amp;Hbounded&amp;HK)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"Hclose" <span class="id" title="notation">with</span> "[-HK]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iFrame</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="bounded_hash_refinement" class="idref" href="#bounded_hash_refinement"><span class="id" title="lemma">bounded_hash_refinement</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> <a class="idref" href="clutch.rel_logic.model.html#:::'REL'_x_'&lt;&lt;'_x_':'_x"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.examples.rng.html#init_bounded_rng"><span class="id" title="definition">init_bounded_rng</span></a> <a class="idref" href="clutch.rel_logic.model.html#:::'REL'_x_'&lt;&lt;'_x_':'_x"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.examples.rng.html#init_hash_rng"><span class="id" title="definition">init_hash_rng</span></a> <a class="idref" href="clutch.rel_logic.model.html#:::'REL'_x_'&lt;&lt;'_x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.rel_logic.model.html#lrel_unit"><span class="id" title="definition">lrel_unit</span></a> <a class="idref" href="clutch.rel_logic.model.html#198b3df6111d1e335bfbd02615def5fc"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.rel_logic.model.html#198b3df6111d1e335bfbd02615def5fc"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.model.html#lrel_unit"><span class="id" title="definition">lrel_unit</span></a> <a class="idref" href="clutch.rel_logic.model.html#198b3df6111d1e335bfbd02615def5fc"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.rel_logic.model.html#lrel_bool"><span class="id" title="definition">lrel_bool</span></a><a class="idref" href="clutch.rel_logic.model.html#198b3df6111d1e335bfbd02615def5fc"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_arrow_val</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (??) "(-&gt;&amp;-&gt;)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.model.html#refines_eq"><span class="id" title="definition">refines_eq</span></a>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">K</span>) "HK Hown".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="clutch.program_logic.weakestpre.html#wp_fupd"><span class="id" title="lemma">wp_fupd</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.rng.html#wp_init_bounded_rng"><span class="id" title="lemma">wp_init_bounded_rng</span></a> <span class="id" title="notation">with</span> "[//]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">g</span>) "Hbounded".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.rng.html#spec_init_hash_rng"><span class="id" title="lemma">spec_init_hash_rng</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">f</span>) "(HK&amp;Hhash)"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">P</span> := (<span class="id" title="notation">∃</span> <a id="n:74" class="idref" href="#n:74"><span class="id" title="binder">n</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.examples.rng.html#bounded_rng"><span class="id" title="definition">bounded_rng</span></a> <a class="idref" href="clutch.examples.rng.html#n:73"><span class="id" title="variable">n</span></a> <span class="id" title="var">g</span> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.examples.rng.html#shash_rng"><span class="id" title="definition">shash_rng</span></a> <a class="idref" href="clutch.examples.rng.html#n:73"><span class="id" title="variable">n</span></a> <span class="id" title="var">f</span>)%<span class="id" title="var">I</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><span class="id" title="lemma">na_inv_alloc</span> <a class="idref" href="clutch.rel_logic.model.html#clutchRGS_nais"><span class="id" title="method">clutchRGS_nais</span></a> <span class="id" title="var">_</span> <a class="idref" href="clutch.examples.rng.html#rngN"><span class="id" title="definition">rngN</span></a> <span class="id" title="var">P</span> <span class="id" title="notation">with</span> "[Hhash Hbounded]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "#Hinv".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iNext</span>. <span class="id" title="var">iExists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a>. <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">v1</span> <span class="id" title="var">v2</span>) "!&gt; (-&gt;&amp;-&gt;)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">K</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.rel_logic.model.html#refines_na_inv"><span class="id" title="lemma">refines_na_inv</span></a> <span class="id" title="notation">with</span> "[$Hinv]"<span class="id" title="notation">)</span> ; <span class="id" title="tactic">auto</span> ; <span class="id" title="var">iIntros</span> "[HP Hclose]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.rel_logic.model.html#refines_eq"><span class="id" title="definition">refines_eq</span></a>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">K</span>) "HK Hown".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "HP" <span class="id" title="keyword">as</span> (<span class="id" title="var">m</span>) "(&gt;Hf&amp;Hsf)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.examples.rng.html#timeless_shash_rng"><span class="id" title="lemma">timeless_shash_rng</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hsf" <span class="id" title="keyword">as</span> "&gt;Hsf".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="clutch.program_logic.weakestpre.html#wp_fupd"><span class="id" title="lemma">wp_fupd</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_apply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.examples.rng.html#wp_bounded_rng_flip_refine"><span class="id" title="lemma">wp_bounded_rng_flip_refine</span></a> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">b</span>) "(Hhash&amp;Hbounded&amp;HK)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"Hclose" <span class="id" title="notation">with</span> "[-HK]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iFrame</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="clutch.examples.rng.html#rng"><span class="id" title="section">rng</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/coq-community/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
