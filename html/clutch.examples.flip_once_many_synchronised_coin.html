<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resources/config.js"></script>
<script type="text/javascript" src="resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">clutch.examples.flip_once_many_synchronised_coin</h1>

<div class="code">
<span class="comment">(*&nbsp;We&nbsp;establish&nbsp;a&nbsp;refinement&nbsp;of&nbsp;two&nbsp;implementations&nbsp;of&nbsp;a&nbsp;coin&nbsp;with&nbsp;two&nbsp;methods<br/>
&nbsp;&nbsp;&nbsp;"update"&nbsp;and&nbsp;"read".&nbsp;The&nbsp;first&nbsp;time&nbsp;"read"&nbsp;is&nbsp;called,&nbsp;it&nbsp;returns&nbsp;a&nbsp;random<br/>
&nbsp;&nbsp;&nbsp;boolean,&nbsp;on&nbsp;successive&nbsp;calls&nbsp;the&nbsp;result&nbsp;will&nbsp;be&nbsp;fixed.<br/>
<br/>
&nbsp;&nbsp;&nbsp;The&nbsp;"eager"&nbsp;implementation&nbsp;samples&nbsp;a&nbsp;new&nbsp;bit&nbsp;every&nbsp;time&nbsp;"update"&nbsp;is&nbsp;called,<br/>
&nbsp;&nbsp;&nbsp;and&nbsp;fixes&nbsp;the&nbsp;last&nbsp;sampled&nbsp;bit&nbsp;on&nbsp;the&nbsp;first&nbsp;call&nbsp;to&nbsp;"read".<br/>
<br/>
&nbsp;&nbsp;&nbsp;The&nbsp;"lazy"&nbsp;implementation&nbsp;instead&nbsp;does&nbsp;nothing&nbsp;on&nbsp;"update",&nbsp;and&nbsp;samples&nbsp;only<br/>
&nbsp;&nbsp;&nbsp;once&nbsp;"read"&nbsp;is&nbsp;called.<br/>
<br/>
&nbsp;&nbsp;&nbsp;The&nbsp;interest&nbsp;of&nbsp;this&nbsp;example&nbsp;is&nbsp;that&nbsp;the&nbsp;update&nbsp;procedure&nbsp;may&nbsp;be&nbsp;called&nbsp;many<br/>
&nbsp;&nbsp;&nbsp;times,&nbsp;and&nbsp;thus&nbsp;eager&nbsp;may&nbsp;sample&nbsp;more&nbsp;bits&nbsp;than&nbsp;lazy.&nbsp;At&nbsp;first&nbsp;glance,&nbsp;it<br/>
&nbsp;&nbsp;&nbsp;may&nbsp;thus&nbsp;seem&nbsp;difficult&nbsp;to&nbsp;choose&nbsp;which&nbsp;two&nbsp;flips&nbsp;to&nbsp;couple.<br/>
<br/>
&nbsp;&nbsp;&nbsp;We&nbsp;solve&nbsp;the&nbsp;issue&nbsp;by&nbsp;proving&nbsp;an&nbsp;intermediate&nbsp;refinement&nbsp;"lazy_alt".&nbsp;This<br/>
&nbsp;&nbsp;&nbsp;variant&nbsp;of&nbsp;"lazy"&nbsp;performs&nbsp;a&nbsp;flip&nbsp;in&nbsp;"update",&nbsp;but&nbsp;discards&nbsp;the&nbsp;result.&nbsp;It<br/>
&nbsp;&nbsp;&nbsp;thus&nbsp;behaves&nbsp;like&nbsp;"lazy",&nbsp;but&nbsp;still&nbsp;allows&nbsp;us&nbsp;to&nbsp;keep&nbsp;the&nbsp;tapes&nbsp;"α"&nbsp;(from<br/>
&nbsp;&nbsp;&nbsp;"lazy_alt")&nbsp;and&nbsp;"β"&nbsp;(from&nbsp;eager)&nbsp;synchronised.<br/>
&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="clutch.clutch.html#"><span class="id" title="library">clutch</span></a> <a class="idref" href="clutch.lib.flip.html#"><span class="id" title="library">lib.flip</span></a>.<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Default</span> <span class="id" title="keyword">Proof</span> <span class="id" title="var">Using</span> "Type*".<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="proofs" class="idref" href="#proofs"><span class="id" title="section">proofs</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="clutchRGS0:2" class="idref" href="#clutchRGS0:2"><span class="id" title="binder">!</span></a><a id="clutchRGS0:2" class="idref" href="#clutchRGS0:2"><span class="id" title="binder">clutchRGS</span></a> <a id="clutchRGS0:2" class="idref" href="#clutchRGS0:2"><span class="id" title="binder">Σ</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="onceN" class="idref" href="#onceN"><span class="id" title="definition">onceN</span></a> := <span class="id" title="definition">nroot</span><span class="id" title="notation">.@</span>"once".<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a id="proofs.read_lazy" class="idref" href="#proofs.read_lazy"><span class="id" title="variable">read_lazy</span></a> <a id="lbl:3" class="idref" href="#lbl:3"><span class="id" title="binder">lbl</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.expr"><span class="id" title="inductive">expr</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">:</span></a><span class="id" title="notation">&lt;&gt;</span><a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a><a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.prob_lang.notation.html#569b74bc432a2b233b93ae1b45418e26"><span class="id" title="notation">!</span></a>"f" <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "x" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a> <a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#lbl:3"><span class="id" title="variable">lbl</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"r" <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&lt;-'_x"><span class="id" title="notation">&lt;-</span></a> "x" <a class="idref" href="clutch.prob_lang.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"f" <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&lt;-'_x"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a><a class="idref" href="clutch.prob_lang.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#569b74bc432a2b233b93ae1b45418e26"><span class="id" title="notation">!</span></a> "r"<a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="lazy" class="idref" href="#lazy"><span class="id" title="definition">lazy</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.expr"><span class="id" title="inductive">expr</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "r" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">ref</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "f" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">ref</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "update" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">:</span></a><span class="id" title="notation">&lt;&gt;</span><a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "read" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#proofs.read_lazy"><span class="id" title="variable">read_lazy</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">(</span></a>"update"<a class="idref" href="clutch.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">,</span></a> "read"<a class="idref" href="clutch.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="lazy_alt" class="idref" href="#lazy_alt"><span class="id" title="definition">lazy_alt</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.expr"><span class="id" title="inductive">expr</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "α" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.lib.flip.html#allocB"><span class="id" title="definition">allocB</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "r" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">ref</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a> "α"<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "f" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">ref</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "update" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">:</span></a><span class="id" title="notation">&lt;&gt;</span><a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.prob_lang.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a> "α"<a class="idref" href="clutch.prob_lang.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">;;</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "read" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#proofs.read_lazy"><span class="id" title="variable">read_lazy</span></a> "α" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">(</span></a>"update"<a class="idref" href="clutch.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">,</span></a> "read"<a class="idref" href="clutch.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="eager" class="idref" href="#eager"><span class="id" title="definition">eager</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.expr"><span class="id" title="inductive">expr</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "β" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.lib.flip.html#allocB"><span class="id" title="definition">allocB</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "r" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">ref</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a> "β"<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "f" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'ref'_x"><span class="id" title="notation">ref</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "update" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">:</span></a><span class="id" title="notation">&lt;&gt;</span><a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a><a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.prob_lang.notation.html#569b74bc432a2b233b93ae1b45418e26"><span class="id" title="notation">!</span></a>"f" <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "x" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="clutch.lib.flip.html#flipL"><span class="id" title="definition">flipL</span></a> "β" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"r" <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&lt;-'_x"><span class="id" title="notation">&lt;-</span></a> "x"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:'if:'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.prob_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "read" <a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">λ</span></a><a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">:</span></a><span class="id" title="notation">&lt;&gt;</span><a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">(</span></a>"f" <a class="idref" href="clutch.prob_lang.notation.html#::expr_scope:x_'&lt;-'_x"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="clutch.prob_lang.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#569b74bc432a2b233b93ae1b45418e26"><span class="id" title="notation">!</span></a>"r"<a class="idref" href="clutch.prob_lang.notation.html#d2c3354f6c46df814e66d4c5c9b9c738"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a> <a class="idref" href="clutch.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">(</span></a>"update"<a class="idref" href="clutch.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">,</span></a> "read"<a class="idref" href="clutch.prob_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="lazy_alt_eager" class="idref" href="#lazy_alt_eager"><span class="id" title="lemma">lazy_alt_eager</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> <a class="idref" href="clutch.rel_logic.model.html#:::'REL'_x_'&lt;&lt;'_x_':'_x"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#lazy_alt"><span class="id" title="definition">lazy_alt</span></a> <a class="idref" href="clutch.rel_logic.model.html#:::'REL'_x_'&lt;&lt;'_x_':'_x"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#eager"><span class="id" title="definition">eager</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.model.html#:::'REL'_x_'&lt;&lt;'_x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.rel_logic.model.html#ff8576311e921c25920cc153affc3c5e"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.model.html#0926557fff3a7c5de6f38fcac599a96f"><span class="id" title="notation">()</span></a> <a class="idref" href="clutch.rel_logic.model.html#198b3df6111d1e335bfbd02615def5fc"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.rel_logic.model.html#0926557fff3a7c5de6f38fcac599a96f"><span class="id" title="notation">()</span></a><a class="idref" href="clutch.rel_logic.model.html#ff8576311e921c25920cc153affc3c5e"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.rel_logic.model.html#ff8576311e921c25920cc153affc3c5e"><span class="id" title="notation">*</span></a> <a class="idref" href="clutch.rel_logic.model.html#ff8576311e921c25920cc153affc3c5e"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.model.html#0926557fff3a7c5de6f38fcac599a96f"><span class="id" title="notation">()</span></a> <a class="idref" href="clutch.rel_logic.model.html#198b3df6111d1e335bfbd02615def5fc"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.rel_logic.model.html#lrel_bool"><span class="id" title="definition">lrel_bool</span></a><a class="idref" href="clutch.rel_logic.model.html#ff8576311e921c25920cc153affc3c5e"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">try</span> <span class="id" title="var">rel_pures_l</span> ; <span class="id" title="tactic">try</span> <span class="id" title="var">rel_pures_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#lazy_alt"><span class="id" title="definition">lazy_alt</span></a>, <a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#eager"><span class="id" title="definition">eager</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_allocBtape_l</span> <span class="id" title="var">α</span> <span class="id" title="keyword">as</span> "α"...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_allocBtape_r</span> <span class="id" title="var">β</span> <span class="id" title="keyword">as</span> "β"...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_apply_l</span> <a class="idref" href="clutch.lib.flip.html#refines_flipL_empty_l"><span class="id" title="lemma">refines_flipL_empty_l</span></a> =&gt; // ; <span class="id" title="var">iFrame</span> ; <span class="id" title="var">iIntros</span> "%b' α"...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_apply_r</span> <a class="idref" href="clutch.lib.flip.html#refines_couple_bool_tape_tape"><span class="id" title="lemma">refines_couple_bool_tape_tape</span></a> =&gt; // ; <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">b</span>) "[β α]" =&gt; /=...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_flipL_r</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_alloc_l</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> "x"...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_alloc_r</span> <span class="id" title="var">y</span> <span class="id" title="keyword">as</span> "y"...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_alloc_l</span> <span class="id" title="var">f</span> <span class="id" title="keyword">as</span> "f".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_alloc_r</span> <span class="id" title="var">g</span> <span class="id" title="keyword">as</span> "g".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">P2</span> := ((<span class="id" title="notation">∃</span> <span class="id" title="notation">(</span><a id="bx:7" class="idref" href="#bx:7"><span class="id" title="binder">bx</span></a> <a id="b:8" class="idref" href="#b:8"><span class="id" title="binder">b</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><span class="id" title="notation">),</span> <span class="id" title="notation">∃</span> <a id="bs:9" class="idref" href="#bs:9"><span class="id" title="binder">bs</span></a><span class="id" title="notation">,</span> <span class="id" title="var">x</span> <a class="idref" href="clutch.rel_logic.primitive_laws.html#db9bde1508f348dd1f9d24e9d4ead804"><span class="id" title="notation">↦</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#bx:4"><span class="id" title="variable">bx</span></a> <span class="id" title="notation">∗</span> <span class="id" title="var">y</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#0326014f985dcbdf069e6962e826748b"><span class="id" title="notation">↦ₛ</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#b:5"><span class="id" title="variable">b</span></a> <span class="id" title="notation">∗</span> <span class="id" title="var">α</span> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#b:5"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#bs:6"><span class="id" title="variable">bs</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∗</span> <span class="id" title="var">β</span> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#bs:6"><span class="id" title="variable">bs</span></a> <span class="id" title="notation">∗</span> <span class="id" title="var">f</span> <a class="idref" href="clutch.rel_logic.primitive_laws.html#db9bde1508f348dd1f9d24e9d4ead804"><span class="id" title="notation">↦</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <span class="id" title="notation">∗</span> <span class="id" title="var">g</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#0326014f985dcbdf069e6962e826748b"><span class="id" title="notation">↦ₛ</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>))%<span class="id" title="var">I</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">P3</span> := ((<span class="id" title="notation">∃</span> <a id="b:13" class="idref" href="#b:13"><span class="id" title="binder">b</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">∃</span> <a id="bs:14" class="idref" href="#bs:14"><span class="id" title="binder">bs</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">∃</span> <a id="bs':15" class="idref" href="#bs':15"><span class="id" title="binder">bs'</span></a><span class="id" title="notation">,</span> <span class="id" title="var">x</span> <a class="idref" href="clutch.rel_logic.primitive_laws.html#db9bde1508f348dd1f9d24e9d4ead804"><span class="id" title="notation">↦</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#b:10"><span class="id" title="variable">b</span></a> <span class="id" title="notation">∗</span> <span class="id" title="var">y</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#0326014f985dcbdf069e6962e826748b"><span class="id" title="notation">↦ₛ</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#b:10"><span class="id" title="variable">b</span></a> <span class="id" title="notation">∗</span> <span class="id" title="var">α</span> <a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">↪</span></a><a class="idref" href="clutch.lib.flip.html#53eba80cc5527af8f74a0acfba2d9230"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#bs:11"><span class="id" title="variable">bs</span></a> <span class="id" title="notation">∗</span> <span class="id" title="var">β</span> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#bs':12"><span class="id" title="variable">bs'</span></a> <span class="id" title="notation">∗</span> <span class="id" title="var">f</span> <a class="idref" href="clutch.rel_logic.primitive_laws.html#db9bde1508f348dd1f9d24e9d4ead804"><span class="id" title="notation">↦</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="notation">∗</span> <span class="id" title="var">g</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#0326014f985dcbdf069e6962e826748b"><span class="id" title="notation">↦ₛ</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>))%<span class="id" title="var">I</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<a class="idref" href="clutch.rel_logic.model.html#refines_na_alloc"><span class="id" title="lemma">refines_na_alloc</span></a> (<span class="id" title="var">P2</span> <span class="id" title="notation">∨</span> <span class="id" title="var">P3</span>) <a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#onceN"><span class="id" title="definition">onceN</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> ; [ <span class="id" title="var">iLeft</span> ; <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>,<span class="id" title="var">_</span>,<span class="id" title="var">_</span> ; <span class="id" title="var">iFrame</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#Hinv". <span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 8 <span class="id" title="var">rel_pure_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 8 <span class="id" title="var">rel_pure_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="clutch.rel_logic.compatibility.html#refines_pair"><span class="id" title="lemma">refines_pair</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iApply</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_arrow_val"><span class="id" title="lemma">refines_arrow_val</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!#" (<span class="id" title="var">f1</span> <span class="id" title="var">f2</span>) "#Hf".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.rel_logic.model.html#refines_na_inv"><span class="id" title="lemma">refines_na_inv</span></a> <span class="id" title="notation">with</span> "[-$Hinv]"<span class="id" title="notation">)</span>; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "(&gt;[ (%bx &amp; %b &amp; %bs &amp; x &amp; y &amp; α &amp; β &amp; f &amp; g)
                 | (%b &amp; %bs &amp; %bs' &amp; x &amp; y &amp; α &amp; β &amp; f &amp; g) ] &amp; Hclose)"...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">rel_load_r</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="clutch.lib.flip.html#refines_couple_bool_tape_tape"><span class="id" title="lemma">refines_couple_bool_tape_tape</span></a> =&gt; // ; <span class="id" title="var">iFrame</span> ; <span class="id" title="var">iIntros</span> (<span class="id" title="var">b'</span>) "(β &amp; α)" =&gt; /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">bs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">rel_flipL_l</span>. <span class="id" title="var">rel_flipL_r</span>... <span class="id" title="var">rel_store_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Tactic</span> <span class="id" title="keyword">Notation</span> "close_inv" :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.rel_logic.model.html#refines_na_close"><span class="id" title="lemma">refines_na_close</span></a> <span class="id" title="notation">with</span> "[-$Hclose]"<span class="id" title="notation">)</span> ; <span class="id" title="var">iSplitL</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">iNext</span> ; (<span class="id" title="var">iLeft</span> ; <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>,<span class="id" title="var">_</span>,<span class="id" title="var">_</span> ; <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| (<span class="id" title="var">iRight</span> ; <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>,<span class="id" title="var">_</span>,<span class="id" title="var">_</span> ; <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>)|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">close_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_values</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">rel_flipL_l</span>. <span class="id" title="var">rel_flipL_r</span>... <span class="id" title="var">rel_store_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">close_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_values</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">rel_load_r</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">bs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">rel_apply_l</span> <a class="idref" href="clutch.lib.flip.html#refines_flipL_empty_l"><span class="id" title="lemma">refines_flipL_empty_l</span></a> =&gt; // ; <span class="id" title="var">iFrame</span> ; <span class="id" title="var">iIntros</span> "%b' α"...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">close_inv</span> ; <span class="id" title="var">rel_values</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">rel_flipL_l</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">close_inv</span> ; <span class="id" title="var">rel_values</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iApply</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_arrow_val"><span class="id" title="lemma">refines_arrow_val</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!#" (<span class="id" title="var">f1</span> <span class="id" title="var">f2</span>) "#Hf".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.rel_logic.model.html#refines_na_inv"><span class="id" title="lemma">refines_na_inv</span></a> <span class="id" title="notation">with</span> "[-$Hinv]"<span class="id" title="notation">)</span>; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "(&gt;[ (%bx &amp; %b &amp; %bs &amp; x &amp; y &amp; α &amp; β &amp; f &amp; g)
                 | (%b &amp; %bs &amp; %bs' &amp; x &amp; y &amp; α &amp; β &amp; f &amp; g) ] &amp; Hclose)"...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">rel_store_r</span> ; <span class="id" title="var">rel_load_l</span>... <span class="id" title="var">rel_load_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_flipL_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="var">rel_store_l</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_load_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">close_inv</span> ; <span class="id" title="var">rel_values</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">rel_store_r</span> ; <span class="id" title="var">rel_load_l</span>... <span class="id" title="var">rel_load_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_load_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">close_inv</span> ; <span class="id" title="var">rel_values</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="lazy_lazy_alt" class="idref" href="#lazy_lazy_alt"><span class="id" title="lemma">lazy_lazy_alt</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> <a class="idref" href="clutch.rel_logic.model.html#:::'REL'_x_'&lt;&lt;'_x_':'_x"><span class="id" title="notation">REL</span></a> <a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#lazy"><span class="id" title="definition">lazy</span></a> <a class="idref" href="clutch.rel_logic.model.html#:::'REL'_x_'&lt;&lt;'_x_':'_x"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#lazy_alt"><span class="id" title="definition">lazy_alt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.rel_logic.model.html#:::'REL'_x_'&lt;&lt;'_x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="clutch.rel_logic.model.html#ff8576311e921c25920cc153affc3c5e"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.model.html#0926557fff3a7c5de6f38fcac599a96f"><span class="id" title="notation">()</span></a> <a class="idref" href="clutch.rel_logic.model.html#198b3df6111d1e335bfbd02615def5fc"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.rel_logic.model.html#0926557fff3a7c5de6f38fcac599a96f"><span class="id" title="notation">()</span></a><a class="idref" href="clutch.rel_logic.model.html#ff8576311e921c25920cc153affc3c5e"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.rel_logic.model.html#ff8576311e921c25920cc153affc3c5e"><span class="id" title="notation">*</span></a> <a class="idref" href="clutch.rel_logic.model.html#ff8576311e921c25920cc153affc3c5e"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.model.html#0926557fff3a7c5de6f38fcac599a96f"><span class="id" title="notation">()</span></a> <a class="idref" href="clutch.rel_logic.model.html#198b3df6111d1e335bfbd02615def5fc"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.rel_logic.model.html#lrel_bool"><span class="id" title="definition">lrel_bool</span></a><a class="idref" href="clutch.rel_logic.model.html#ff8576311e921c25920cc153affc3c5e"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">try</span> <span class="id" title="var">rel_pures_l</span> ; <span class="id" title="tactic">try</span> <span class="id" title="var">rel_pures_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#lazy_alt"><span class="id" title="definition">lazy_alt</span></a>, <a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#lazy"><span class="id" title="definition">lazy</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_alloctape_r</span> <span class="id" title="var">β</span> <span class="id" title="keyword">as</span> "β"...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_apply_r</span> <a class="idref" href="clutch.lib.flip.html#refines_flipL_empty_r"><span class="id" title="lemma">refines_flipL_empty_r</span></a> =&gt; // ; <span class="id" title="var">iFrame</span> ; <span class="id" title="var">iIntros</span> "%b' β"...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_alloc_l</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> "x"...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_alloc_r</span> <span class="id" title="var">y</span> <span class="id" title="keyword">as</span> "y"...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_alloc_l</span> <span class="id" title="var">f</span> <span class="id" title="keyword">as</span> "f".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_alloc_r</span> <span class="id" title="var">g</span> <span class="id" title="keyword">as</span> "g".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">P2</span> := ((<span class="id" title="notation">∃</span> <span class="id" title="notation">(</span><a id="bx:18" class="idref" href="#bx:18"><span class="id" title="binder">bx</span></a> <a id="b:19" class="idref" href="#b:19"><span class="id" title="binder">b</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><span class="id" title="notation">),</span> <span class="id" title="var">x</span> <a class="idref" href="clutch.rel_logic.primitive_laws.html#db9bde1508f348dd1f9d24e9d4ead804"><span class="id" title="notation">↦</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#bx:16"><span class="id" title="variable">bx</span></a> <span class="id" title="notation">∗</span> <span class="id" title="var">y</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#0326014f985dcbdf069e6962e826748b"><span class="id" title="notation">↦ₛ</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#b:17"><span class="id" title="variable">b</span></a> <span class="id" title="notation">∗</span> <span class="id" title="var">β</span> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="notation">∗</span> <span class="id" title="var">f</span> <a class="idref" href="clutch.rel_logic.primitive_laws.html#db9bde1508f348dd1f9d24e9d4ead804"><span class="id" title="notation">↦</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <span class="id" title="notation">∗</span> <span class="id" title="var">g</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#0326014f985dcbdf069e6962e826748b"><span class="id" title="notation">↦ₛ</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>))%<span class="id" title="var">I</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">P3</span> := ((<span class="id" title="notation">∃</span> <a id="b:21" class="idref" href="#b:21"><span class="id" title="binder">b</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><span class="id" title="notation">,</span> <span class="id" title="var">x</span> <a class="idref" href="clutch.rel_logic.primitive_laws.html#db9bde1508f348dd1f9d24e9d4ead804"><span class="id" title="notation">↦</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#b:20"><span class="id" title="variable">b</span></a> <span class="id" title="notation">∗</span> <span class="id" title="var">y</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#0326014f985dcbdf069e6962e826748b"><span class="id" title="notation">↦ₛ</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#b:20"><span class="id" title="variable">b</span></a> <span class="id" title="notation">∗</span> <span class="id" title="var">β</span> <a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">↪ₛ</span></a><a class="idref" href="clutch.lib.flip.html#a39fd62056c242355b26e3b6a38a9588"><span class="id" title="notation">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="notation">∗</span> <span class="id" title="var">f</span> <a class="idref" href="clutch.rel_logic.primitive_laws.html#db9bde1508f348dd1f9d24e9d4ead804"><span class="id" title="notation">↦</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="notation">∗</span> <span class="id" title="var">g</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#0326014f985dcbdf069e6962e826748b"><span class="id" title="notation">↦ₛ</span></a> <a class="idref" href="clutch.prob_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>))%<span class="id" title="var">I</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<a class="idref" href="clutch.rel_logic.model.html#refines_na_alloc"><span class="id" title="lemma">refines_na_alloc</span></a> (<span class="id" title="var">P2</span> <span class="id" title="notation">∨</span> <span class="id" title="var">P3</span>) <a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#onceN"><span class="id" title="definition">onceN</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> ; [ <span class="id" title="var">iLeft</span> ; <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>,<span class="id" title="var">_</span> ; <span class="id" title="var">iFrame</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#Hinv". <span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 8 <span class="id" title="var">rel_pure_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 8 <span class="id" title="var">rel_pure_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="clutch.rel_logic.compatibility.html#refines_pair"><span class="id" title="lemma">refines_pair</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iApply</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_arrow_val"><span class="id" title="lemma">refines_arrow_val</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!#" (<span class="id" title="var">f1</span> <span class="id" title="var">f2</span>) "#Hf".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.rel_logic.model.html#refines_na_inv"><span class="id" title="lemma">refines_na_inv</span></a> <span class="id" title="notation">with</span> "[-$Hinv]"<span class="id" title="notation">)</span>; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "(&gt;[ (%bx &amp; %b &amp; x &amp; y &amp; β &amp; f &amp; g)
                 | (%b &amp; x &amp; y &amp; β &amp; f &amp; g) ] &amp; Hclose)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Tactic</span> <span class="id" title="keyword">Notation</span> "close_inv" :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.rel_logic.model.html#refines_na_close"><span class="id" title="lemma">refines_na_close</span></a> <span class="id" title="notation">with</span> "[-$Hclose]"<span class="id" title="notation">)</span> ; <span class="id" title="var">iSplitL</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">iNext</span> ; (<span class="id" title="var">iLeft</span> ; <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>,<span class="id" title="var">_</span> ; <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| (<span class="id" title="var">iRight</span> ; <span class="id" title="var">iExists</span> <span class="id" title="var">_</span> ; <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>)|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">rel_pures_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_apply_r</span> <a class="idref" href="clutch.lib.flip.html#refines_flipL_empty_r"><span class="id" title="lemma">refines_flipL_empty_r</span></a> =&gt; // ; <span class="id" title="var">iFrame</span> ; <span class="id" title="var">iIntros</span> "%b' β"...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">close_inv</span> ; <span class="id" title="var">rel_values</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">rel_pures_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_apply_r</span> <a class="idref" href="clutch.lib.flip.html#refines_flipL_empty_r"><span class="id" title="lemma">refines_flipL_empty_r</span></a> =&gt; // ; <span class="id" title="var">iFrame</span> ; <span class="id" title="var">iIntros</span> "%b' β"...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">close_inv</span> ; <span class="id" title="var">rel_values</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iApply</span> <a class="idref" href="clutch.rel_logic.rel_rules.html#refines_arrow_val"><span class="id" title="lemma">refines_arrow_val</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!#" (<span class="id" title="var">f1</span> <span class="id" title="var">f2</span>) "#Hf".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.rel_logic.model.html#refines_na_inv"><span class="id" title="lemma">refines_na_inv</span></a> <span class="id" title="notation">with</span> "[-$Hinv]"<span class="id" title="notation">)</span>; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "(&gt;[ (%bx &amp; %b &amp; x &amp; y &amp; β &amp; f &amp; g)
                 | (%b &amp; x &amp; y &amp; β &amp; f &amp; g) ] &amp; Hclose)"...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">rel_load_l</span>. <span class="id" title="var">rel_load_r</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_apply_l</span> <a class="idref" href="clutch.lib.flip.html#refines_couple_flip_tape"><span class="id" title="lemma">refines_couple_flip_tape</span></a> ; <span class="id" title="var">iFrame</span> ; <span class="id" title="var">iIntros</span> "!&gt;" (<span class="id" title="var">b'</span>) "β" =&gt; /=...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_flipL_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="var">rel_store_l</span>... <span class="id" title="var">rel_load_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="var">rel_store_r</span> ; <span class="id" title="var">rel_load_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">close_inv</span> ; <span class="id" title="var">rel_values</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">rel_load_l</span>... <span class="id" title="var">rel_load_r</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rel_load_l</span> ; <span class="id" title="var">rel_load_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">close_inv</span> ; <span class="id" title="var">rel_values</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="clutch.examples.flip_once_many_synchronised_coin.html#proofs"><span class="id" title="section">proofs</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/coq-community/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
