<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resources/config.js"></script>
<script type="text/javascript" src="resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">clutch.rel_logic.adequacy</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.proofmode</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">base</span> <span class="id" title="library">proofmode</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.bi</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">weakestpre</span> <span class="id" title="library">fixpoint</span> <span class="id" title="library">big_op</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.base_logic.lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">ghost_map</span> <span class="id" title="library">invariants</span> <span class="id" title="library">fancy_updates</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.algebra</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">excl</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.prelude</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">options</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch.prelude</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="clutch.prelude.stdpp_ext.html#"><span class="id" title="library">stdpp_ext</span></a> <a class="idref" href="clutch.prelude.iris_ext.html#"><span class="id" title="library">iris_ext</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch.prob_lang</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="clutch.prob_lang.erasure.html#"><span class="id" title="library">erasure</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch.program_logic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="clutch.program_logic.language.html#"><span class="id" title="library">language</span></a> <a class="idref" href="clutch.program_logic.weakestpre.html#"><span class="id" title="library">weakestpre</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch.rel_logic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="clutch.rel_logic.primitive_laws.html#"><span class="id" title="library">primitive_laws</span></a> <a class="idref" href="clutch.rel_logic.spec_ra.html#"><span class="id" title="library">spec_ra</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">clutch.prob</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="clutch.prob.distribution.html#"><span class="id" title="library">distribution</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="module">uPred</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="adequacy" class="idref" href="#adequacy"><span class="id" title="section">adequacy</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="clutchGS0:2" class="idref" href="#clutchGS0:2"><span class="id" title="binder">!</span></a><a id="clutchGS0:2" class="idref" href="#clutchGS0:2"><span class="id" title="binder">clutchGS</span></a> <a id="clutchGS0:2" class="idref" href="#clutchGS0:2"><span class="id" title="binder">Σ</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="refRcoupl_dbind'" class="idref" href="#refRcoupl_dbind'"><span class="id" title="lemma">refRcoupl_dbind'</span></a> `{<a id="H:5" class="idref" href="#H:5"><span class="id" title="binder">Countable</span></a> <a id="H:5" class="idref" href="#H:5"><span class="id" title="binder">A</span></a>, <a id="H0:8" class="idref" href="#H0:8"><span class="id" title="binder">Countable</span></a> <a id="H0:8" class="idref" href="#H0:8"><span class="id" title="binder">A'</span></a>, <a id="H1:11" class="idref" href="#H1:11"><span class="id" title="binder">Countable</span></a> <a id="H1:11" class="idref" href="#H1:11"><span class="id" title="binder">B</span></a>, <a id="H2:14" class="idref" href="#H2:14"><span class="id" title="binder">Countable</span></a> <a id="H2:14" class="idref" href="#H2:14"><span class="id" title="binder">B'</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="f:15" class="idref" href="#f:15"><span class="id" title="binder">f</span></a> : <a class="idref" href="clutch.rel_logic.adequacy.html#A:3"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob.distribution.html#distr"><span class="id" title="record">distr</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#A':6"><span class="id" title="variable">A'</span></a>) (<a id="g:16" class="idref" href="#g:16"><span class="id" title="binder">g</span></a> : <a class="idref" href="clutch.rel_logic.adequacy.html#B:9"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob.distribution.html#distr"><span class="id" title="record">distr</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#B':12"><span class="id" title="variable">B'</span></a>) (<a id="8de2c9f99e4699c737f06fc043b0e5b0" class="idref" href="#8de2c9f99e4699c737f06fc043b0e5b0"><span class="id" title="binder">μ1</span></a> : <a class="idref" href="clutch.prob.distribution.html#distr"><span class="id" title="record">distr</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#A:3"><span class="id" title="variable">A</span></a>) (<a id="00b55cd51f04e66754ff7c8def3f4867" class="idref" href="#00b55cd51f04e66754ff7c8def3f4867"><span class="id" title="binder">μ2</span></a> : <a class="idref" href="clutch.prob.distribution.html#distr"><span class="id" title="record">distr</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#B:9"><span class="id" title="variable">B</span></a>) (<a id="R:19" class="idref" href="#R:19"><span class="id" title="binder">R</span></a> : <a class="idref" href="clutch.rel_logic.adequacy.html#A:3"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#B:9"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) (<a id="T:20" class="idref" href="#T:20"><span class="id" title="binder">T</span></a> : <a class="idref" href="clutch.rel_logic.adequacy.html#A':6"><span class="id" title="variable">A'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#B':12"><span class="id" title="variable">B'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) <a id="n:21" class="idref" href="#n:21"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⌜</span><a class="idref" href="clutch.prob.couplings.html#refRcoupl"><span class="id" title="definition">refRcoupl</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#8de2c9f99e4699c737f06fc043b0e5b0"><span class="id" title="variable">μ1</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#00b55cd51f04e66754ff7c8def3f4867"><span class="id" title="variable">μ2</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#R:19"><span class="id" title="variable">R</span></a><span class="id" title="notation">⌝</span> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="a:22" class="idref" href="#a:22"><span class="id" title="binder">a</span></a> <a id="b:23" class="idref" href="#b:23"><span class="id" title="binder">b</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">⌜</span><a class="idref" href="clutch.rel_logic.adequacy.html#R:19"><span class="id" title="variable">R</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#a:22"><span class="id" title="variable">a</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#b:23"><span class="id" title="variable">b</span></a><span class="id" title="notation">⌝</span> <span class="id" title="notation">={</span><span class="id" title="notation">∅</span><span class="id" title="notation">}▷=∗^(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#n:21"><span class="id" title="variable">n</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">⌜</span><a class="idref" href="clutch.prob.couplings.html#refRcoupl"><span class="id" title="definition">refRcoupl</span></a> (<a class="idref" href="clutch.rel_logic.adequacy.html#f:15"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#a:22"><span class="id" title="variable">a</span></a>) (<a class="idref" href="clutch.rel_logic.adequacy.html#g:16"><span class="id" title="variable">g</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#b:23"><span class="id" title="variable">b</span></a>) <a class="idref" href="clutch.rel_logic.adequacy.html#T:20"><span class="id" title="variable">T</span></a><span class="id" title="notation">⌝</span><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">|={</span><span class="id" title="notation">∅</span><span class="id" title="notation">}▷=&gt;^(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#n:21"><span class="id" title="variable">n</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">⌜</span><a class="idref" href="clutch.prob.couplings.html#refRcoupl"><span class="id" title="definition">refRcoupl</span></a> (<a class="idref" href="clutch.prob.distribution.html#dbind"><span class="id" title="definition">dbind</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#f:15"><span class="id" title="variable">f</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#8de2c9f99e4699c737f06fc043b0e5b0"><span class="id" title="variable">μ1</span></a>) (<a class="idref" href="clutch.prob.distribution.html#dbind"><span class="id" title="definition">dbind</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#g:16"><span class="id" title="variable">g</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#00b55cd51f04e66754ff7c8def3f4867"><span class="id" title="variable">μ2</span></a>) <a class="idref" href="clutch.rel_logic.adequacy.html#T:20"><span class="id" title="variable">T</span></a><span class="id" title="notation">⌝</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="clutch.rel_logic.adequacy.html#129f143bdb7679a3b17a798e186cddef"><span class="id" title="variable">Σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">HR</span>) "H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<span class="id" title="lemma">step_fupdN_mono</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="notation">⌜(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="a:26" class="idref" href="#a:26"><span class="id" title="binder">a</span></a> <a id="b:27" class="idref" href="#b:27"><span class="id" title="binder">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <span class="id" title="var">R</span> <a class="idref" href="clutch.rel_logic.adequacy.html#a:24"><span class="id" title="variable">a</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#b:25"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob.couplings.html#refRcoupl"><span class="id" title="definition">refRcoupl</span></a> (<span class="id" title="var">f</span> <a class="idref" href="clutch.rel_logic.adequacy.html#a:24"><span class="id" title="variable">a</span></a>) (<span class="id" title="var">g</span> <a class="idref" href="clutch.rel_logic.adequacy.html#b:25"><span class="id" title="variable">b</span></a>) <span class="id" title="var">T</span><span class="id" title="notation">)⌝</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> (?). <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob.couplings.html#refRcoupl_dbind"><span class="id" title="lemma">refRcoupl_dbind</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (???) "/=".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"H" <span class="id" title="notation">with</span> "[//]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="exec_coupl_erasure" class="idref" href="#exec_coupl_erasure"><span class="id" title="lemma">exec_coupl_erasure</span></a> (<a id="e1:28" class="idref" href="#e1:28"><span class="id" title="binder">e1</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.expr"><span class="id" title="inductive">expr</span></a>) (<a id="7db1844054e2f60e120756b2f7e66686" class="idref" href="#7db1844054e2f60e120756b2f7e66686"><span class="id" title="binder">σ1</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state"><span class="id" title="record">state</span></a>) (<a id="e1':30" class="idref" href="#e1':30"><span class="id" title="binder">e1'</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.expr"><span class="id" title="inductive">expr</span></a>) (<a id="9b5b6e2355efeec6d78d7203933afd0c" class="idref" href="#9b5b6e2355efeec6d78d7203933afd0c"><span class="id" title="binder">σ1'</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state"><span class="id" title="record">state</span></a>) (<a id="n:32" class="idref" href="#n:32"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="b0bb32d01f678d17055964f3e3249188" class="idref" href="#b0bb32d01f678d17055964f3e3249188"><span class="id" title="binder">φ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.to_val"><span class="id" title="definition">to_val</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#e1:28"><span class="id" title="variable">e1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.program_logic.weakestpre.html#exec_coupl"><span class="id" title="definition">exec_coupl</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#e1:28"><span class="id" title="variable">e1</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#7db1844054e2f60e120756b2f7e66686"><span class="id" title="variable">σ1</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#e1':30"><span class="id" title="variable">e1'</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#9b5b6e2355efeec6d78d7203933afd0c"><span class="id" title="variable">σ1'</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">'</span></a><a id="pat:36" class="idref" href="#pat:36"><span class="id" title="binder">(</span></a><a id="pat:36" class="idref" href="#pat:36"><span class="id" title="binder">e2</span></a><a id="pat:36" class="idref" href="#pat:36"><span class="id" title="binder">,</span></a> <a id="pat:36" class="idref" href="#pat:36"><span class="id" title="binder">σ2)</span></a> '<a id="pat:39" class="idref" href="#pat:39"><span class="id" title="binder">(</span></a><a id="pat:39" class="idref" href="#pat:39"><span class="id" title="binder">e2'</span></a><a id="pat:39" class="idref" href="#pat:39"><span class="id" title="binder">,</span></a> <a id="pat:39" class="idref" href="#pat:39"><span class="id" title="binder">σ2')</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">|={</span><span class="id" title="notation">∅</span><span class="id" title="notation">}▷=&gt;^(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#n:32"><span class="id" title="variable">n</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">⌜</span><a class="idref" href="clutch.prob.couplings.html#refRcoupl"><span class="id" title="definition">refRcoupl</span></a> (<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#n:32"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.adequacy.html#e2:35"><span class="id" title="variable">e2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#d71c10eee6bc741c80eb6eeab982d597"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) (<a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.adequacy.html#e2':38"><span class="id" title="variable">e2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#3151300b677cef027fb4d932794820c4"><span class="id" title="variable">σ2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="clutch.rel_logic.adequacy.html#b0bb32d01f678d17055964f3e3249188"><span class="id" title="variable">φ</span></a><span class="id" title="notation">⌝</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> <span class="id" title="notation">|={</span><span class="id" title="notation">∅</span><span class="id" title="notation">}▷=&gt;^(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#n:32"><span class="id" title="variable">n</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">⌜</span><a class="idref" href="clutch.prob.couplings.html#refRcoupl"><span class="id" title="definition">refRcoupl</span></a> (<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#n:32"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.adequacy.html#e1:28"><span class="id" title="variable">e1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#7db1844054e2f60e120756b2f7e66686"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) (<a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.adequacy.html#e1':30"><span class="id" title="variable">e1'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#9b5b6e2355efeec6d78d7203933afd0c"><span class="id" title="variable">σ1'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="clutch.rel_logic.adequacy.html#b0bb32d01f678d17055964f3e3249188"><span class="id" title="variable">φ</span></a><span class="id" title="notation">⌝</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hv</span>) "Hexec".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<span class="id" title="notation">⌜</span><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.to_val"><span class="id" title="definition">to_val</span></a> <span class="id" title="var">e1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><span class="id" title="notation">⌝</span>)%<span class="id" title="var">I</span> <span class="id" title="keyword">as</span> "-#H"; [<span class="id" title="var">done</span>|]. <span class="id" title="var">iRevert</span> "Hexec H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.program_logic.weakestpre.html#exec_coupl"><span class="id" title="definition">exec_coupl</span></a> /<a class="idref" href="clutch.program_logic.weakestpre.html#exec_coupl'"><span class="id" title="definition">exec_coupl'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">Φ</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">'</span></a><a id="pat:49" class="idref" href="#pat:49"><span class="id" title="binder">((</span></a><a id="pat:49" class="idref" href="#pat:49"><span class="id" title="binder">e1</span></a><a id="pat:49" class="idref" href="#pat:49"><span class="id" title="binder">,</span></a> <a id="pat:49" class="idref" href="#pat:49"><span class="id" title="binder">σ1),</span></a> <a id="pat:49" class="idref" href="#pat:49"><span class="id" title="binder">(</span></a><a id="pat:49" class="idref" href="#pat:49"><span class="id" title="binder">e1'</span></a><a id="pat:49" class="idref" href="#pat:49"><span class="id" title="binder">,</span></a> <a id="pat:49" class="idref" href="#pat:49"><span class="id" title="binder">σ1'))</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">⌜</span><a class="idref" href="clutch.prob_lang.lang.html#prob_lang.to_val"><span class="id" title="definition">to_val</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#e1:43"><span class="id" title="variable">e1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><span class="id" title="notation">⌝</span> <span class="id" title="notation">={</span><span class="id" title="notation">∅</span><span class="id" title="notation">}▷=∗^(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⌜</span><a class="idref" href="clutch.prob.couplings.html#refRcoupl"><span class="id" title="definition">refRcoupl</span></a> (<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.adequacy.html#e1:43"><span class="id" title="variable">e1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#1fc489d366deabed444d36c4bcd17666"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.adequacy.html#e1':41"><span class="id" title="variable">e1'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#cd83e84d878684a70f84c7bb0d0a86c1"><span class="id" title="variable">σ1'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) φ<span class="id" title="notation">⌝</span>)%<span class="id" title="var">I</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">prodO</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#cfgO"><span class="id" title="definition">cfgO</span></a> <a class="idref" href="clutch.rel_logic.spec_ra.html#cfgO"><span class="id" title="definition">cfgO</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="abbreviation">iPropI</span> <a class="idref" href="clutch.rel_logic.adequacy.html#129f143bdb7679a3b17a798e186cddef"><span class="id" title="variable">Σ</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="abbreviation">NonExpansive</span> <span class="id" title="var">Φ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> ((?&amp;?)&amp;(?&amp;?)) ((?&amp;?)&amp;(?&amp;?)) [[[=] [=]] [[=] [=]]]. <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_eq</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">F</span> := (<a class="idref" href="clutch.program_logic.weakestpre.html#exec_coupl_pre"><span class="id" title="definition">exec_coupl_pre</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">'</span></a><a id="pat:58" class="idref" href="#pat:58"><span class="id" title="binder">(</span></a><a id="pat:58" class="idref" href="#pat:58"><span class="id" title="binder">e2</span></a><a id="pat:58" class="idref" href="#pat:58"><span class="id" title="binder">,</span></a> <a id="pat:58" class="idref" href="#pat:58"><span class="id" title="binder">σ2)</span></a> '<a id="pat:61" class="idref" href="#pat:61"><span class="id" title="binder">(</span></a><a id="pat:61" class="idref" href="#pat:61"><span class="id" title="binder">e2'</span></a><a id="pat:61" class="idref" href="#pat:61"><span class="id" title="binder">,</span></a> <a id="pat:61" class="idref" href="#pat:61"><span class="id" title="binder">σ2')</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">|={</span><span class="id" title="notation">∅</span><span class="id" title="notation">}▷=&gt;^(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span><span class="id" title="notation">)</span> <span class="id" title="notation">⌜</span><a class="idref" href="clutch.prob.couplings.html#refRcoupl"><span class="id" title="definition">refRcoupl</span></a> (<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.adequacy.html#e2:51"><span class="id" title="variable">e2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#3defe11dbbbf44fe59785c842f786399"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.adequacy.html#e2':54"><span class="id" title="variable">e2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#8122cea3d8dc57e1f36145864a15ab93"><span class="id" title="variable">σ2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) φ<span class="id" title="notation">⌝</span>)%<span class="id" title="var">I</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPoseProof</span> <span class="id" title="notation">(</span><span class="id" title="lemma">least_fixpoint_iter</span> <span class="id" title="var">F</span> <span class="id" title="var">Φ</span> <span class="id" title="notation">with</span> "[]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "H"; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> "Hfix %". <span class="id" title="tactic">by</span> <span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"H" <span class="id" title="notation">$!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> <span class="id" title="notation">with</span> "Hfix [//]"<span class="id" title="notation">)</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!#" ([[<span class="id" title="var">e1</span> σ1] [<span class="id" title="var">e1'</span> σ1']]). <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.program_logic.weakestpre.html#exec_coupl_pre"><span class="id" title="definition">exec_coupl_pre</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "[(%R &amp; % &amp; %Hcpl &amp; H) | [(%R &amp; % &amp; %Hcpl &amp; H) | [(%R &amp; %m &amp; %Hcpl &amp; H) | [H | [H | H]]]]] %Hv".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.program_logic.exec.html#exec_val_Sn_not_val"><span class="id" title="lemma">exec_val_Sn_not_val</span></a>; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.program_logic.exec.html#lim_exec_val_prim_step"><span class="id" title="lemma">lim_exec_val_prim_step</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.to_val"><span class="id" title="definition">to_val</span></a> <span class="id" title="var">e1'</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hv'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<a class="idref" href="clutch.program_logic.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> <span class="id" title="var">e1</span> σ1 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob.distribution.html#dzero"><span class="id" title="definition">dzero</span></a>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hs</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> /= <span class="id" title="var">Hs</span> <a class="idref" href="clutch.prob.distribution.html#dbind_dzero"><span class="id" title="lemma">dbind_dzero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="var">iModIntro</span>. <span class="id" title="var">iApply</span> <span class="id" title="lemma">step_fupdN_intro</span>; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#refRcoupl_dzero"><span class="id" title="lemma">refRcoupl_dzero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assert</span> (<a class="idref" href="clutch.program_logic.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> <span class="id" title="var">e1'</span> σ1' <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="clutch.prob.distribution.html#dzero"><span class="id" title="definition">dzero</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hz</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.program_logic.language.html#val_stuck_dzero"><span class="id" title="lemma">val_stuck_dzero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= (<a class="idref" href="clutch.program_logic.language.html#val_stuck_dzero"><span class="id" title="lemma">val_stuck_dzero</span></a> <span class="id" title="var">e1'</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hcpl</span>; [|<span class="id" title="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_dzero_r_inv"><span class="id" title="lemma">Rcoupl_dzero_r_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.program_logic.exec.html#prim_step_or_val_no_val"><span class="id" title="lemma">prim_step_or_val_no_val</span></a>; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<a class="idref" href="clutch.rel_logic.adequacy.html#refRcoupl_dbind'"><span class="id" title="lemma">refRcoupl_dbind'</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_refRcoupl"><span class="id" title="lemma">Rcoupl_refRcoupl</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> ([] [] <span class="id" title="var">HR</span>). <span class="id" title="tactic">by</span> <span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"H" <span class="id" title="notation">with</span> "[//]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.program_logic.exec.html#exec_val_Sn_not_val"><span class="id" title="lemma">exec_val_Sn_not_val</span></a>; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="clutch.prob.distribution.html#dret_id_left"><span class="id" title="lemma">dret_id_left</span></a> (<a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="clutch.rel_logic.adequacy.html#refRcoupl_dbind'"><span class="id" title="lemma">refRcoupl_dbind'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_pos_R"><span class="id" title="lemma">Rcoupl_pos_R</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcpl</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_refRcoupl"><span class="id" title="lemma">Rcoupl_refRcoupl</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> ([] [] (?&amp;?&amp; [= -&gt; -&gt;]%<a class="idref" href="clutch.prob.distribution.html#dret_pos"><span class="id" title="lemma">dret_pos</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"H"  <span class="id" title="notation">with</span> "[//]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> -(<a class="idref" href="clutch.prob.distribution.html#dret_id_left"><span class="id" title="lemma">dret_id_left</span></a> (<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="clutch.program_logic.exec.html#lim_exec_val_exec"><span class="id" title="lemma">lim_exec_val_exec</span></a> <span class="id" title="var">m</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="clutch.rel_logic.adequacy.html#refRcoupl_dbind'"><span class="id" title="lemma">refRcoupl_dbind'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_pos_R"><span class="id" title="lemma">Rcoupl_pos_R</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcpl</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#Rcoupl_refRcoupl"><span class="id" title="lemma">Rcoupl_refRcoupl</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> ([] [] (?&amp; [= -&gt; -&gt;]%<a class="idref" href="clutch.prob.distribution.html#dret_pos"><span class="id" title="lemma">dret_pos</span></a> &amp;?)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"H"  <span class="id" title="notation">with</span> "[//] [//]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_orL_mono</span> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">|={</span><span class="id" title="notation">∅</span><span class="id" title="notation">}▷=&gt;^(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⌜</span><a class="idref" href="clutch.prob.couplings.html#refRcoupl"><span class="id" title="definition">refRcoupl</span></a> (<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">e1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> σ1<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">e1'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> σ1'<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) φ<span class="id" title="notation">⌝</span>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> (<span class="id" title="var">i</span> <span class="id" title="var">α</span> <span class="id" title="var">Hα</span>%<span class="id" title="lemma">elem_of_list_lookup_2</span>) "(% &amp; % &amp; %Hcpl &amp; H)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<span class="id" title="lemma">step_fupdN_mono</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">⌜</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="e2:65" class="idref" href="#e2:65"><span class="id" title="binder">e2</span></a> <a id="15107a0126a5082824ad63af533596c8" class="idref" href="#15107a0126a5082824ad63af533596c8"><span class="id" title="binder">σ2</span></a> <a id="4d7b0c320752b20ec4e8bcb61677616b" class="idref" href="#4d7b0c320752b20ec4e8bcb61677616b"><span class="id" title="binder">σ2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <span class="id" title="var">R2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.adequacy.html#e2:62"><span class="id" title="variable">e2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#b4fddedc413aec4eb7205ed502d59725"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#8db99ab3657d5f43b6204a78ab48c03f"><span class="id" title="variable">σ2'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob.couplings.html#refRcoupl"><span class="id" title="definition">refRcoupl</span></a> (<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.adequacy.html#e2:62"><span class="id" title="variable">e2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#b4fddedc413aec4eb7205ed502d59725"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">e1'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#8db99ab3657d5f43b6204a78ab48c03f"><span class="id" title="variable">σ2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) φ<span class="id" title="notation">⌝</span>)%<span class="id" title="var">I</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> (?). <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.get_active"><span class="id" title="definition">get_active</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hα</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_elements</span>, <span class="id" title="method">elem_of_dom</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hα</span> <span class="id" title="keyword">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.erasure.html#refRcoupl_erasure_r"><span class="id" title="lemma">refRcoupl_erasure_r</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> (????). <span class="id" title="tactic">by</span> <span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"H" <span class="id" title="notation">with</span> "[//]"<span class="id" title="notation">)</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> (<a class="idref" href="clutch.program_logic.language.html#get_active"><span class="id" title="projection">language.get_active</span></a> σ1') <span class="id" title="keyword">as</span> [| <span class="id" title="var">α'</span>] "IH"; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">big_orL_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "H" <span class="id" title="keyword">as</span> "[H | Ht]"; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "IH".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_orL_mono</span> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">|={</span><span class="id" title="notation">∅</span><span class="id" title="notation">}▷=&gt;^(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⌜</span><a class="idref" href="clutch.prob.couplings.html#refRcoupl"><span class="id" title="definition">refRcoupl</span></a> (<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">e1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> σ1<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">e1'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> σ1'<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) φ<span class="id" title="notation">⌝</span>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> (<span class="id" title="var">i</span> <span class="id" title="var">α'</span> <span class="id" title="var">Hα'</span>%<span class="id" title="lemma">elem_of_list_lookup_2</span>) "(% &amp; %Hcpl &amp; H)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<span class="id" title="lemma">step_fupdN_mono</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">⌜</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="fd21629d941ea17b7ffd96bd482245df" class="idref" href="#fd21629d941ea17b7ffd96bd482245df"><span class="id" title="binder">σ2</span></a> <a id="e2':72" class="idref" href="#e2':72"><span class="id" title="binder">e2'</span></a> <a id="7b8c6209e6344a29ec8649c3ce1ac568" class="idref" href="#7b8c6209e6344a29ec8649c3ce1ac568"><span class="id" title="binder">σ2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <span class="id" title="var">R2</span> <a class="idref" href="clutch.rel_logic.adequacy.html#b496d05592fb983da891adec8db77de8"><span class="id" title="variable">σ2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.adequacy.html#e2':69"><span class="id" title="variable">e2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#adcafd29b7cf4d5de56c6f606da51f09"><span class="id" title="variable">σ2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob.couplings.html#refRcoupl"><span class="id" title="definition">refRcoupl</span></a> (<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">e1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#b496d05592fb983da891adec8db77de8"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.adequacy.html#e2':69"><span class="id" title="variable">e2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#adcafd29b7cf4d5de56c6f606da51f09"><span class="id" title="variable">σ2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) φ<span class="id" title="notation">⌝</span>)%<span class="id" title="var">I</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> (?). <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.get_active"><span class="id" title="definition">get_active</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hα'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_elements</span>, <span class="id" title="method">elem_of_dom</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hα'</span> <span class="id" title="keyword">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.erasure.html#refRcoupl_erasure_l"><span class="id" title="lemma">refRcoupl_erasure_l</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> (????). <span class="id" title="tactic">by</span> <span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"H" <span class="id" title="notation">with</span> "[//] [//]"<span class="id" title="notation">)</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> (<a class="idref" href="clutch.program_logic.language.html#get_active"><span class="id" title="projection">language.get_active</span></a> σ1) <span class="id" title="keyword">as</span> [| <span class="id" title="var">α'</span>] "IH"; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">big_orL_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "H" <span class="id" title="keyword">as</span> "[H | Ht]"; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "IH".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.program_logic.exec.html#exec_val_Sn_not_val"><span class="id" title="lemma">exec_val_Sn_not_val</span></a>; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_orL_mono</span> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">|={</span><span class="id" title="notation">∅</span><span class="id" title="notation">}▷=&gt;^(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⌜</span><a class="idref" href="clutch.prob.couplings.html#refRcoupl"><span class="id" title="definition">refRcoupl</span></a> (<a class="idref" href="clutch.program_logic.ectx_language.html#prim_step"><span class="id" title="definition">prim_step</span></a> <span class="id" title="var">e1</span> σ1 <a class="idref" href="clutch.prob.distribution.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">e1'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> σ1'<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) φ<span class="id" title="notation">⌝</span>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> (<span class="id" title="var">i</span> [<span class="id" title="var">α1</span> <span class="id" title="var">α2</span>] [<span class="id" title="var">Hα1</span> <span class="id" title="var">Hα2</span>]%<span class="id" title="lemma">elem_of_list_lookup_2</span>%<a class="idref" href="clutch.prelude.stdpp_ext.html#elem_of_list_prod_1"><span class="id" title="lemma">elem_of_list_prod_1</span></a>) "(% &amp; %Hcpl &amp; H)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="clutch.program_logic.exec.html#exec_val_Sn_not_val"><span class="id" title="lemma">exec_val_Sn_not_val</span></a>; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<span class="id" title="lemma">step_fupdN_mono</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">⌜</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="b143b4a94c788e33846b45bad695cfce" class="idref" href="#b143b4a94c788e33846b45bad695cfce"><span class="id" title="binder">σ2</span></a> <a id="09f6d1eed0014050ec323e520d491f1e" class="idref" href="#09f6d1eed0014050ec323e520d491f1e"><span class="id" title="binder">σ2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <span class="id" title="var">R2</span> <a class="idref" href="clutch.rel_logic.adequacy.html#19dc424ad82ea7c6fe9af239c9292645"><span class="id" title="variable">σ2</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#571f8239ac69cc65f820d91b71cea1ac"><span class="id" title="variable">σ2'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.prob.couplings.html#refRcoupl"><span class="id" title="definition">refRcoupl</span></a> (<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">e1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#19dc424ad82ea7c6fe9af239c9292645"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">e1'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#571f8239ac69cc65f820d91b71cea1ac"><span class="id" title="variable">σ2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) φ<span class="id" title="notation">⌝</span>)%<span class="id" title="var">I</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> (?). <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= /<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.get_active"><span class="id" title="definition">get_active</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hα1</span>, <span class="id" title="var">Hα2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_elements</span>, <span class="id" title="method">elem_of_dom</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hα1</span> <span class="id" title="keyword">as</span> [], <span class="id" title="var">Hα2</span> <span class="id" title="keyword">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="clutch.prob_lang.erasure.html#refRcoupl_erasure"><span class="id" title="lemma">refRcoupl_erasure</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> (???). <span class="id" title="tactic">by</span> <span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"H" <span class="id" title="notation">with</span> "[//] [//]"<span class="id" title="notation">)</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#list_prod"><span class="id" title="definition">list_prod</span></a> (<a class="idref" href="clutch.program_logic.language.html#get_active"><span class="id" title="projection">language.get_active</span></a> σ1) (<a class="idref" href="clutch.program_logic.language.html#get_active"><span class="id" title="projection">language.get_active</span></a> σ1'))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [| [<span class="id" title="var">α</span> <span class="id" title="var">α'</span>]] "IH"; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">big_orL_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "H" <span class="id" title="keyword">as</span> "[H | Ht]"; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "IH".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a id="wp_refRcoupl_step_fupdN" class="idref" href="#wp_refRcoupl_step_fupdN"><span class="id" title="lemma">wp_refRcoupl_step_fupdN</span></a> (<a id="e:78" class="idref" href="#e:78"><span class="id" title="binder">e</span></a> <a id="e':79" class="idref" href="#e':79"><span class="id" title="binder">e'</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.expr"><span class="id" title="inductive">expr</span></a>) (<a id="dcc1ba3a33a8feaab396c575679eb22e" class="idref" href="#dcc1ba3a33a8feaab396c575679eb22e"><span class="id" title="binder">σ</span></a> <a id="62276e8d4c89f745d7b10707053b46f6" class="idref" href="#62276e8d4c89f745d7b10707053b46f6"><span class="id" title="binder">σ'</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state"><span class="id" title="record">state</span></a>) <a id="n:82" class="idref" href="#n:82"><span class="id" title="binder">n</span></a> <a id="5b8a7850a057fbd3aef1f0ee75c36e0c" class="idref" href="#5b8a7850a057fbd3aef1f0ee75c36e0c"><span class="id" title="binder">φ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="clutch.program_logic.weakestpre.html#state_interp"><span class="id" title="method">state_interp</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#dcc1ba3a33a8feaab396c575679eb22e"><span class="id" title="variable">σ</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.program_logic.weakestpre.html#spec_interp"><span class="id" title="method">spec_interp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.adequacy.html#e':79"><span class="id" title="variable">e'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#62276e8d4c89f745d7b10707053b46f6"><span class="id" title="variable">σ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">WP</span> <a class="idref" href="clutch.rel_logic.adequacy.html#e:78"><span class="id" title="variable">e</span></a> <span class="id" title="notation">{{</span> <a id="v:84" class="idref" href="#v:84"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">∃</span> <a id="v':85" class="idref" href="#v':85"><span class="id" title="binder">v'</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#39726a285d21e5558b05ca4123ecd5f5"><span class="id" title="notation">⤇</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#v':85"><span class="id" title="variable">v'</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">⌜</span><a class="idref" href="clutch.rel_logic.adequacy.html#5b8a7850a057fbd3aef1f0ee75c36e0c"><span class="id" title="variable">φ</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#v:84"><span class="id" title="variable">v</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#v':85"><span class="id" title="variable">v'</span></a><span class="id" title="notation">⌝</span> <span class="id" title="notation">}}</span> <span class="id" title="notation">⊢</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">|={</span><span class="id" title="notation">⊤</span><span class="id" title="notation">,</span><span class="id" title="notation">∅</span><span class="id" title="notation">}=&gt;</span> <span class="id" title="notation">|={</span><span class="id" title="notation">∅</span><span class="id" title="notation">}▷=&gt;^</span><a class="idref" href="clutch.rel_logic.adequacy.html#n:82"><span class="id" title="variable">n</span></a> <span class="id" title="notation">⌜</span><a class="idref" href="clutch.prob.couplings.html#refRcoupl"><span class="id" title="definition">refRcoupl</span></a> (<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#n:82"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.adequacy.html#e:78"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#dcc1ba3a33a8feaab396c575679eb22e"><span class="id" title="variable">σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) (<a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.adequacy.html#e':79"><span class="id" title="variable">e'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#62276e8d4c89f745d7b10707053b46f6"><span class="id" title="variable">σ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="clutch.rel_logic.adequacy.html#5b8a7850a057fbd3aef1f0ee75c36e0c"><span class="id" title="variable">φ</span></a><span class="id" title="notation">⌝</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">n</span>] "IH" <span class="id" title="keyword">forall</span> (<span class="id" title="var">e</span> σ <span class="id" title="var">e'</span> σ'); <span class="id" title="var">iIntros</span> "([Hh Ht] &amp; HspecI_auth &amp; #Hctx &amp; Hwp)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.to_val"><span class="id" title="definition">to_val</span></a> <span class="id" title="var">e</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_to_val"><span class="id" title="lemma">of_to_val</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span> <span class="id" title="keyword">as</span> &lt;-.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.program_logic.weakestpre.html#wp_value_fupd"><span class="id" title="lemma">wp_value_fupd</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "Hwp" <span class="id" title="keyword">as</span> (<span class="id" title="var">v'</span>) "[Hspec_frag %]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInv</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="keyword">as</span> (ρ <span class="id" title="var">e0</span> σ0 <span class="id" title="var">n</span>) "&gt;(HspecI_frag &amp; %Hexec &amp; Hspec_auth &amp; Hstate)" "_".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.rel_logic.spec_ra.html#spec_interp_auth_frag_agree"><span class="id" title="lemma">spec_interp_auth_frag_agree</span></a> <span class="id" title="notation">with</span> "HspecI_auth HspecI_frag"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %&lt;-.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.rel_logic.spec_ra.html#spec_prog_auth_frag_agree"><span class="id" title="lemma">spec_prog_auth_frag_agree</span></a> <span class="id" title="notation">with</span> "Hspec_auth Hspec_frag"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %-&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="lemma">fupd_mask_intro</span>; [<span class="id" title="var">set_solver</span>|]; <span class="id" title="var">iIntros</span> "_".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="clutch.program_logic.exec.html#lim_exec_val_exec_det"><span class="id" title="lemma">lim_exec_val_exec_det</span></a>; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="clutch.prob.distribution.html#dmap"><span class="id" title="definition">dmap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#refRcoupl_dret"><span class="id" title="lemma">refRcoupl_dret</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iApply</span> <span class="id" title="lemma">fupd_mask_intro</span>; [<span class="id" title="var">set_solver</span>|]; <span class="id" title="var">iIntros</span> "_".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#refRcoupl_dzero"><span class="id" title="lemma">refRcoupl_dzero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.program_logic.exec.html#exec_val_Sn"><span class="id" title="lemma">exec_val_Sn</span></a> /<a class="idref" href="clutch.program_logic.exec.html#prim_step_or_val"><span class="id" title="definition">prim_step_or_val</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.to_val"><span class="id" title="definition">to_val</span></a> <span class="id" title="var">e</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.of_to_val"><span class="id" title="lemma">of_to_val</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span> <span class="id" title="keyword">as</span> &lt;-.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.program_logic.weakestpre.html#wp_value_fupd"><span class="id" title="lemma">wp_value_fupd</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "Hwp" <span class="id" title="keyword">as</span> (<span class="id" title="var">v'</span>) "[Hspec_frag %]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInv</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">ξ</span> ρ <span class="id" title="var">e0</span> σ0) "&gt;(HspecI_frag &amp; %Hexec &amp; Hspec_auth &amp; Hstate)" "_".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.rel_logic.spec_ra.html#spec_interp_auth_frag_agree"><span class="id" title="lemma">spec_interp_auth_frag_agree</span></a> <span class="id" title="notation">with</span> "HspecI_auth HspecI_frag"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %&lt;-.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.rel_logic.spec_ra.html#spec_prog_auth_frag_agree"><span class="id" title="lemma">spec_prog_auth_frag_agree</span></a> <span class="id" title="notation">with</span> "Hspec_auth Hspec_frag"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %-&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="lemma">fupd_mask_intro</span>; [<span class="id" title="var">set_solver</span>|]; <span class="id" title="var">iIntros</span> "_".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="lemma">step_fupdN_intro</span>; [<span class="id" title="var">done</span>|]. <span class="id" title="tactic">do</span> 4 <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.program_logic.exec.html#exec_val_unfold"><span class="id" title="lemma">exec_val_unfold</span></a> <a class="idref" href="clutch.prob.distribution.html#dret_id_left"><span class="id" title="lemma">dret_id_left</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="clutch.program_logic.exec.html#lim_exec_val_exec_det"><span class="id" title="lemma">lim_exec_val_exec_det</span></a>; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="clutch.prob.couplings.html#refRcoupl_dret"><span class="id" title="lemma">refRcoupl_dret</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.program_logic.weakestpre.html#wp_unfold"><span class="id" title="lemma">wp_unfold</span></a> /<a class="idref" href="clutch.program_logic.weakestpre.html#wp_pre"><span class="id" title="definition">wp_pre</span></a> /= <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"Hwp" <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hcpl".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPoseProof</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="clutch.program_logic.weakestpre.html#exec_coupl_mono"><span class="id" title="lemma">exec_coupl_mono</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">'</span></a><a id="pat:94" class="idref" href="#pat:94"><span class="id" title="binder">(</span></a><a id="pat:94" class="idref" href="#pat:94"><span class="id" title="binder">e2</span></a><a id="pat:94" class="idref" href="#pat:94"><span class="id" title="binder">,</span></a> <a id="pat:94" class="idref" href="#pat:94"><span class="id" title="binder">σ2)</span></a> '<a id="pat:97" class="idref" href="#pat:97"><span class="id" title="binder">(</span></a><a id="pat:97" class="idref" href="#pat:97"><span class="id" title="binder">e2'</span></a><a id="pat:97" class="idref" href="#pat:97"><span class="id" title="binder">,</span></a> <a id="pat:97" class="idref" href="#pat:97"><span class="id" title="binder">σ2')</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="notation">|={</span><span class="id" title="notation">∅</span><span class="id" title="notation">}▷=&gt;^(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⌜</span><a class="idref" href="clutch.prob.couplings.html#refRcoupl"><span class="id" title="definition">refRcoupl</span></a> (<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.adequacy.html#e2:87"><span class="id" title="variable">e2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#4b5902fa26555a15f2e14b9ed5810413"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) (<a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.adequacy.html#e2':90"><span class="id" title="variable">e2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#c47a3ea4a3515f38de44f2830a331eb4"><span class="id" title="variable">σ2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) φ<span class="id" title="notation">⌝</span>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">with</span> "[] Hcpl"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> ([] []) "H !&gt; !&gt;".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "H" <span class="id" title="keyword">as</span> "(Hstate &amp; HspecI_auth &amp; Hwp)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"IH" <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="clutch.program_logic.exec.html#exec_val_Sn_not_val"><span class="id" title="lemma">exec_val_Sn_not_val</span></a>; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="clutch.rel_logic.adequacy.html#exec_coupl_erasure"><span class="id" title="lemma">exec_coupl_erasure</span></a> <span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="clutch.rel_logic.adequacy.html#adequacy"><span class="id" title="section">adequacy</span></a>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <a id="clutchGpreS" class="idref" href="#clutchGpreS"><span class="id" title="record">clutchGpreS</span></a> <a id="d28bbe011225204c88b57a270b5a3987" class="idref" href="#d28bbe011225204c88b57a270b5a3987"><span class="id" title="binder">Σ</span></a> := <span class="id" title="var">ClutchGpreS</span> {<br/>
&nbsp;&nbsp;<a id="clutchGpreS_iris" class="idref" href="#clutchGpreS_iris"><span class="id" title="projection">clutchGpreS_iris</span></a>  :&gt; <span class="id" title="class">invGpreS</span> <a class="idref" href="clutch.rel_logic.adequacy.html#d28bbe011225204c88b57a270b5a3987"><span class="id" title="variable">Σ</span></a>;<br/>
&nbsp;&nbsp;<a id="clutchGpreS_heap" class="idref" href="#clutchGpreS_heap"><span class="id" title="projection">clutchGpreS_heap</span></a>  :&gt; <span class="id" title="class">ghost_mapG</span> <a class="idref" href="clutch.rel_logic.adequacy.html#d28bbe011225204c88b57a270b5a3987"><span class="id" title="variable">Σ</span></a> <a class="idref" href="clutch.prob_lang.locations.html#loc"><span class="id" title="record">loc</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a>;<br/>
&nbsp;&nbsp;<a id="clutchGpreS_tapes" class="idref" href="#clutchGpreS_tapes"><span class="id" title="projection">clutchGpreS_tapes</span></a> :&gt; <span class="id" title="class">ghost_mapG</span> <a class="idref" href="clutch.rel_logic.adequacy.html#d28bbe011225204c88b57a270b5a3987"><span class="id" title="variable">Σ</span></a> <a class="idref" href="clutch.prob_lang.locations.html#loc"><span class="id" title="record">loc</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tape"><span class="id" title="definition">tape</span></a>;<br/>
&nbsp;&nbsp;<a id="clutchGpreS_cfg" class="idref" href="#clutchGpreS_cfg"><span class="id" title="projection">clutchGpreS_cfg</span></a>   :&gt; <span class="id" title="class">inG</span> <a class="idref" href="clutch.rel_logic.adequacy.html#d28bbe011225204c88b57a270b5a3987"><span class="id" title="variable">Σ</span></a> (<span class="id" title="definition">authUR</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#cfgUR"><span class="id" title="definition">cfgUR</span></a>);<br/>
&nbsp;&nbsp;<a id="clutchGpreS_prog" class="idref" href="#clutchGpreS_prog"><span class="id" title="projection">clutchGpreS_prog</span></a>  :&gt; <span class="id" title="class">inG</span> <a class="idref" href="clutch.rel_logic.adequacy.html#d28bbe011225204c88b57a270b5a3987"><span class="id" title="variable">Σ</span></a> (<span class="id" title="definition">authR</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#progUR"><span class="id" title="definition">progUR</span></a>);<br/>
}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="9a44eb4ac53301c12af5104948ff5356" class="idref" href="#9a44eb4ac53301c12af5104948ff5356"><span class="id" title="definition">clutchΣ</span></a> : <span class="id" title="record">gFunctors</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">#[</span><span class="id" title="definition">invΣ</span><span class="id" title="notation">;</span> <span class="id" title="definition">ghost_mapΣ</span> <a class="idref" href="clutch.prob_lang.locations.html#loc"><span class="id" title="record">loc</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.val"><span class="id" title="inductive">val</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">ghost_mapΣ</span> <a class="idref" href="clutch.prob_lang.locations.html#loc"><span class="id" title="record">loc</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tape"><span class="id" title="definition">tape</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">GFunctor</span> (<span class="id" title="definition">authUR</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#cfgUR"><span class="id" title="definition">cfgUR</span></a>)<span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">GFunctor</span> (<span class="id" title="definition">authUR</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#progUR"><span class="id" title="definition">progUR</span></a>)<span class="id" title="notation">]</span>.<br/>
<span class="id" title="keyword">Global Instance</span> <a id="subG_clutchGPreS" class="idref" href="#subG_clutchGPreS"><span class="id" title="instance">subG_clutchGPreS</span></a> {<a id="1ff6ac9c7b5724ab259a0ddfc84e9a1e" class="idref" href="#1ff6ac9c7b5724ab259a0ddfc84e9a1e"><span class="id" title="binder">Σ</span></a>} : <span class="id" title="class">subG</span> <a class="idref" href="clutch.rel_logic.adequacy.html#9a44eb4ac53301c12af5104948ff5356"><span class="id" title="definition">clutchΣ</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#1ff6ac9c7b5724ab259a0ddfc84e9a1e"><span class="id" title="variable">Σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#clutchGpreS"><span class="id" title="class">clutchGpreS</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#1ff6ac9c7b5724ab259a0ddfc84e9a1e"><span class="id" title="variable">Σ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_inG</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="wp_refRcoupl" class="idref" href="#wp_refRcoupl"><span class="id" title="lemma">wp_refRcoupl</span></a> <a id="c15f7ce5d7211986b526059c4461e1ec" class="idref" href="#c15f7ce5d7211986b526059c4461e1ec"><span class="id" title="binder">Σ</span></a> `{<a id="H:107" class="idref" href="#H:107"><span class="id" title="binder">clutchGpreS</span></a> <a id="H:107" class="idref" href="#H:107"><span class="id" title="binder">Σ</span></a>} (<a id="e:108" class="idref" href="#e:108"><span class="id" title="binder">e</span></a> <a id="e':109" class="idref" href="#e':109"><span class="id" title="binder">e'</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.expr"><span class="id" title="inductive">expr</span></a>) (<a id="0e349015c691de677369ceaeb92aeb42" class="idref" href="#0e349015c691de677369ceaeb92aeb42"><span class="id" title="binder">σ</span></a> <a id="0fb0c0b18bc612942c41bad1d4a8e5c5" class="idref" href="#0fb0c0b18bc612942c41bad1d4a8e5c5"><span class="id" title="binder">σ'</span></a> : <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.state"><span class="id" title="record">state</span></a>) <a id="n:112" class="idref" href="#n:112"><span class="id" title="binder">n</span></a> <a id="fa575d4200e77048ac891f10499a140d" class="idref" href="#fa575d4200e77048ac891f10499a140d"><span class="id" title="binder">φ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">`{</span></a><a id="H0:114" class="idref" href="#H0:114"><span class="id" title="binder">clutchGS</span></a> <a id="H0:114" class="idref" href="#H0:114"><span class="id" title="binder">Σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">},</span></a> <span class="id" title="notation">⊢</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#39726a285d21e5558b05ca4123ecd5f5"><span class="id" title="notation">⤇</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#e':109"><span class="id" title="variable">e'</span></a> <span class="id" title="notation">-∗</span> <span class="id" title="notation">WP</span> <a class="idref" href="clutch.rel_logic.adequacy.html#e:108"><span class="id" title="variable">e</span></a> <span class="id" title="notation">{{</span> <a id="v:115" class="idref" href="#v:115"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">∃</span> <a id="v':116" class="idref" href="#v':116"><span class="id" title="binder">v'</span></a><span class="id" title="notation">,</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#39726a285d21e5558b05ca4123ecd5f5"><span class="id" title="notation">⤇</span></a> <a class="idref" href="clutch.prob_lang.lang.html#prob_lang.Val"><span class="id" title="constructor">Val</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#v':116"><span class="id" title="variable">v'</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">⌜</span><a class="idref" href="clutch.rel_logic.adequacy.html#fa575d4200e77048ac891f10499a140d"><span class="id" title="variable">φ</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#v:115"><span class="id" title="variable">v</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#v':116"><span class="id" title="variable">v'</span></a><span class="id" title="notation">⌝</span> <span class="id" title="notation">}}</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="clutch.prob.couplings.html#refRcoupl"><span class="id" title="definition">refRcoupl</span></a> (<a class="idref" href="clutch.program_logic.exec.html#exec_val"><span class="id" title="definition">exec_val</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#n:112"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.adequacy.html#e:108"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#0e349015c691de677369ceaeb92aeb42"><span class="id" title="variable">σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) (<a class="idref" href="clutch.program_logic.exec.html#lim_exec_val"><span class="id" title="definition">lim_exec_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="clutch.rel_logic.adequacy.html#e':109"><span class="id" title="variable">e'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="clutch.rel_logic.adequacy.html#0fb0c0b18bc612942c41bad1d4a8e5c5"><span class="id" title="variable">σ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="clutch.rel_logic.adequacy.html#fa575d4200e77048ac891f10499a140d"><span class="id" title="variable">φ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hwp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<span class="id" title="lemma">step_fupdN_soundness_no_lc</span> <span class="id" title="var">_</span> <span class="id" title="var">n</span> 0).<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hinv</span>) "_".<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<span class="id" title="lemma">ghost_map_alloc</span> σ.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.heap"><span class="id" title="projection">heap</span></a>)) <span class="id" title="keyword">as</span> "[%γH [Hh _]]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<span class="id" title="lemma">ghost_map_alloc</span> σ.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>)) <span class="id" title="keyword">as</span> "[%γT [Ht _]]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<span class="id" title="lemma">ghost_map_alloc</span> σ'.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.heap"><span class="id" title="projection">heap</span></a>)) <span class="id" title="keyword">as</span> "[%γHs [Hh_spec _]]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<span class="id" title="lemma">ghost_map_alloc</span> σ'.(<a class="idref" href="clutch.prob_lang.lang.html#prob_lang.tapes"><span class="id" title="projection">tapes</span></a>)) <span class="id" title="keyword">as</span> "[%γTs [Ht_spec _]]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<span class="id" title="lemma">own_alloc</span> (<span class="id" title="notation">(</span><span class="id" title="notation">●</span> <span class="id" title="notation">(</span><span class="id" title="abbreviation">Excl'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">e'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> σ'<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">)</span><span class="id" title="notation">)</span> <span class="id" title="notation">⋅</span> <span class="id" title="notation">(</span><span class="id" title="notation">◯</span> <span class="id" title="notation">(</span><span class="id" title="abbreviation">Excl'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">e'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> σ'<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">)</span><span class="id" title="notation">)</span>)) <span class="id" title="keyword">as</span> "(%γsi &amp; Hsi_auth &amp; Hsi_frag)".<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">auth_both_valid_discrete</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<span class="id" title="lemma">own_alloc</span> (<span class="id" title="notation">(</span><span class="id" title="notation">●</span> <span class="id" title="notation">(</span><span class="id" title="abbreviation">Excl'</span> <span class="id" title="var">e'</span><span class="id" title="notation">)</span><span class="id" title="notation">)</span> <span class="id" title="notation">⋅</span> <span class="id" title="notation">(</span><span class="id" title="notation">◯</span> <span class="id" title="notation">(</span><span class="id" title="abbreviation">Excl'</span> <span class="id" title="var">e'</span><span class="id" title="notation">)</span><span class="id" title="notation">)</span>)) <span class="id" title="keyword">as</span> "(%γp &amp; Hprog_auth &amp; Hprog_frag)".<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">auth_both_valid_discrete</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">HspecGS</span> := <a class="idref" href="clutch.rel_logic.spec_ra.html#CfgSG"><span class="id" title="constructor">CfgSG</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">_</span> <span class="id" title="var">γsi</span> <span class="id" title="var">_</span> <span class="id" title="var">γp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">γHs</span> <span class="id" title="var">γTs</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">HclutchGS</span> := <a class="idref" href="clutch.rel_logic.primitive_laws.html#HeapG"><span class="id" title="constructor">HeapG</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">γH</span> <span class="id" title="var">γT</span> <span class="id" title="var">HspecGS</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><span class="id" title="lemma">inv_alloc</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊤</span> <a class="idref" href="clutch.rel_logic.spec_ra.html#spec_inv"><span class="id" title="definition">spec_inv</span></a> <span class="id" title="notation">with</span> "[Hsi_frag Hprog_auth Hh_spec Ht_spec]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "#Hctx".<br/>
&nbsp;&nbsp;{ <span class="id" title="var">iModIntro</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a>. <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="clutch.program_logic.exec.html#exec_O"><span class="id" title="lemma">exec_O</span></a> <a class="idref" href="clutch.prob.distribution.html#dret_1_1"><span class="id" title="lemma">dret_1_1</span></a> //.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="clutch.rel_logic.adequacy.html#wp_refRcoupl_step_fupdN"><span class="id" title="lemma">wp_refRcoupl_step_fupdN</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="var">iFrame</span> "Hctx".<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="var">Hwp</span> <span class="id" title="notation">with</span> "[Hctx] [Hprog_frag]"<span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/coq-community/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
